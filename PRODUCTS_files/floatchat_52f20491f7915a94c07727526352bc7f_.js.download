!function(m,C){function c(e,t,n){if(n===C&&1===e.nodeType){var r="data-"+t.replace(se,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ae.test(n)?ye.parseJSON(n):n)}catch(e){}ye.data(e,t,n)}else n=C}return n}function u(e){var t;for(t in e)if(("data"!==t||!ye.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function s(){return!1}function n(){return!0}function i(e){return!e||!e.parentNode||11===e.parentNode.nodeType}function t(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function r(e,n,r){if(n=n||0,ye.isFunction(n))return ye.grep(e,function(e,t){return!!n.call(e,t,e)===r});if(n.nodeType)return ye.grep(e,function(e,t){return e===n===r});if("string"==typeof n){var t=ye.grep(e,function(e){return 1===e.nodeType});if(Ae.test(n))return ye.filter(n,t,!r);n=ye.filter(n,t)}return ye.grep(e,function(e,t){return 0<=ye.inArray(e,n)===r})}function y(e){var t=Fe.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function l(e,t){if(1===t.nodeType&&ye.hasData(e)){var n,r,i,o=ye._data(e),a=ye._data(t,o),s=o.events;if(s)for(n in delete a.handle,a.events={},s)for(r=0,i=s[n].length;r<i;r++)ye.event.add(t,n,s[n][r]);a.data&&(a.data=ye.extend({},a.data))}}function f(e,t){var n;1===t.nodeType&&(t.clearAttributes&&t.clearAttributes(),t.mergeAttributes&&t.mergeAttributes(e),"object"===(n=t.nodeName.toLowerCase())?(t.parentNode&&(t.outerHTML=e.outerHTML),ye.support.html5Clone&&e.innerHTML&&!ye.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Ie.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.selected=e.defaultSelected:"input"===n||"textarea"===n?t.defaultValue=e.defaultValue:"script"===n&&t.text!==e.text&&(t.text=e.text),t.removeAttribute(ye.expando))}function p(e){return void 0!==e.getElementsByTagName?e.getElementsByTagName("*"):void 0!==e.querySelectorAll?e.querySelectorAll("*"):[]}function v(e){Ie.test(e.type)&&(e.defaultChecked=e.checked)}function d(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=ft.length;i--;)if((t=ft[i]+n)in e)return t;return r}function b(e,t){return e=t||e,"none"===ye.css(e,"display")||!ye.contains(e.ownerDocument,e)}function e(e,t){for(var n,r,i=[],o=0,a=e.length;o<a;o++)(n=e[o]).style&&(i[o]=ye._data(n,"olddisplay"),t?(!i[o]&&"none"===n.style.display&&(n.style.display=""),""===n.style.display&&b(n)&&(i[o]=ye._data(n,"olddisplay",x(n.nodeName)))):(r=Ge(n,"display"),!i[o]&&"none"!==r&&ye._data(n,"olddisplay",r)));for(o=0;o<a;o++)(n=e[o]).style&&(t&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=t?i[o]||"":"none"));return e}function a(e,t,n){var r=it.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function h(e,t,n,r){for(var i=n===(r?"border":"content")?4:"width"===t?1:0,o=0;i<4;i+=2)"margin"===n&&(o+=ye.css(e,n+ct[i],!0)),r?("content"===n&&(o-=parseFloat(Ge(e,"padding"+ct[i]))||0),"margin"!==n&&(o-=parseFloat(Ge(e,"border"+ct[i]+"Width"))||0)):(o+=parseFloat(Ge(e,"padding"+ct[i]))||0,"padding"!==n&&(o+=parseFloat(Ge(e,"border"+ct[i]+"Width"))||0));return o}function o(e,t,n){var r="width"===t?e.offsetWidth:e.offsetHeight,i=!0,o=ye.support.boxSizing&&"border-box"===ye.css(e,"boxSizing");if(r<=0||null==r){if(((r=Ge(e,t))<0||null==r)&&(r=e.style[t]),ot.test(r))return r;i=o&&(ye.support.boxSizingReliable||r===e.style[t]),r=parseFloat(r)||0}return r+h(e,t,n||(o?"border":"content"),i)+"px"}function x(e){if(st[e])return st[e];var t=ye("<"+e+">").appendTo(F.body),n=t.css("display");return t.remove(),"none"!==n&&""!==n||(Qe=F.body.appendChild(Qe||ye.extend(F.createElement("iframe"),{frameBorder:0,width:0,height:0})),Ke&&Qe.createElement||((Ke=(Qe.contentWindow||Qe.contentDocument).document).write("<!doctype html><html><body>"),Ke.close()),t=Ke.body.appendChild(Ke.createElement(e)),n=Ge(t,"display"),F.body.removeChild(Qe)),st[e]=n}function g(n,e,r,i){var t;if(ye.isArray(e))ye.each(e,function(e,t){r||ht.test(n)?i(n,t):g(n+"["+("object"==typeof t?e:"")+"]",t,r,i)});else if(r||"object"!==ye.type(e))i(n,e);else for(t in e)g(n+"["+t+"]",e[t],r,i)}function w(s){return function(e,t){"string"!=typeof e&&(t=e,e="*");var n,r,i=e.toLowerCase().split(U),o=0,a=i.length;if(ye.isFunction(t))for(;o<a;o++)n=i[o],(r=/^\+/.test(n))&&(n=n.substr(1)||"*"),(s[n]=s[n]||[])[r?"unshift":"push"](t)}}function k(e,t,n,r,i,o){(o=o||{})[i=i||t.dataTypes[0]]=!0;for(var a,s=e[i],l=0,u=s?s.length:0,c=e===jt;l<u&&(c||!a);l++)"string"==typeof(a=s[l](t,n,r))&&(a=!c||o[a]?C:(t.dataTypes.unshift(a),k(e,t,n,r,a,o)));return(c||!a)&&!o["*"]&&(a=k(e,t,n,r,"*",o)),a}function T(e,t){var n,r,i=ye.ajaxSettings.flatOptions||{};for(n in t)t[n]!==C&&((i[n]?e:r||(r={}))[n]=t[n]);r&&ye.extend(!0,e,r)}function N(){try{return new m.XMLHttpRequest}catch(e){}}function E(){return setTimeout(function(){Pt=C},0),Pt=ye.now()}function S(o,e,t){var n,a,r,i=0,s=Xt.length,l=ye.Deferred().always(function(){delete u.elem}),u=function(){for(var e=Pt||E(),t=Math.max(0,c.startTime+c.duration-e),n=1-(t/c.duration||0),r=0,i=c.tweens.length;r<i;r++)c.tweens[r].run(n);return l.notifyWith(o,[c,n,t]),n<1&&i?t:(l.resolveWith(o,[c]),!1)},c=l.promise({elem:o,props:ye.extend({},e),opts:ye.extend(!0,{specialEasing:{}},t),originalProperties:e,originalOptions:t,startTime:Pt||E(),duration:t.duration,tweens:[],createTween:function(e,t,n){var r=ye.Tween(o,c.opts,e,t,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(r),r},stop:function(e){for(var t=0,n=e?c.tweens.length:0;t<n;t++)c.tweens[t].run(1);return e?l.resolveWith(o,[c,e]):l.rejectWith(o,[c,e]),this}}),f=c.props;for(!function(e,t){var n,r,i,o,a;for(n in e)if(r=ye.camelCase(n),i=t[r],o=e[n],ye.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ye.cssHooks[r])&&"expand"in a)for(n in o=a.expand(o),delete e[r],o)n in e||(e[n]=o[n],t[n]=i);else t[r]=i}(f,c.opts.specialEasing);i<s;i++)if(n=Xt[i].call(c,o,f,c.opts))return n;return a=c,r=f,ye.each(r,function(e,t){for(var n=(Ut[e]||[]).concat(Ut["*"]),r=0,i=n.length;r<i;r++)if(n[r].call(a,e,t))return}),ye.isFunction(c.opts.start)&&c.opts.start.call(o,c),ye.fx.timer(ye.extend(u,{anim:c,queue:c.opts.queue,elem:o})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function A(e,t,n,r,i){return new A.prototype.init(e,t,n,r,i)}function j(e,t){var n,r={height:e},i=0;for(t=t?1:0;i<4;i+=2-t)r["margin"+(n=ct[i])]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function D(e){return ye.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var L,H,F=m.document,M=m.location,O=m.navigator,_=m.jQuery,q=m.$,B=Array.prototype.push,W=Array.prototype.slice,P=Array.prototype.indexOf,R=Object.prototype.toString,$=Object.prototype.hasOwnProperty,I=String.prototype.trim,ye=function(e,t){return new ye.fn.init(e,t,L)},z=/[\-+]?(?:\d*\.|)\d+(?:[eE][\-+]?\d+|)/.source,X=/\S/,U=/\s+/,Y=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,V=/^(?:[^#<]*(<[\w\W]+>)[^>]*$|#([\w\-]*)$)/,J=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,G=/^[\],:{}\s]*$/,Q=/(?:^|:|,)(?:\s*\[)+/g,K=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,Z=/"[^"\\\r\n]*"|true|false|null|-?(?:\d\d*\.|)\d+(?:[eE][\-+]?\d+|)/g,ee=/^-ms-/,te=/-([\da-z])/gi,ne=function(e,t){return(t+"").toUpperCase()},re=function(){F.addEventListener?(F.removeEventListener("DOMContentLoaded",re,!1),ye.ready()):"complete"===F.readyState&&(F.detachEvent("onreadystatechange",re),ye.ready())},ie={};ye.fn=ye.prototype={constructor:ye,init:function(e,t,n){var r,i,o;if(!e)return this;if(e.nodeType)return this.context=this[0]=e,this.length=1,this;if("string"!=typeof e)return ye.isFunction(e)?n.ready(e):(e.selector!==C&&(this.selector=e.selector,this.context=e.context),ye.makeArray(e,this));if(!(r="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&3<=e.length?[null,e,null]:V.exec(e))||!r[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(r[1])return o=(t=t instanceof ye?t[0]:t)&&t.nodeType?t.ownerDocument||t:F,e=ye.parseHTML(r[1],o,!0),J.test(r[1])&&ye.isPlainObject(t)&&this.attr.call(e,t,!0),ye.merge(this,e);if((i=F.getElementById(r[2]))&&i.parentNode){if(i.id!==r[2])return n.find(e);this.length=1,this[0]=i}return this.context=F,this.selector=e,this},selector:"",jquery:"1.8.3",length:0,size:function(){return this.length},toArray:function(){return W.call(this)},get:function(e){return null==e?this.toArray():e<0?this[this.length+e]:this[e]},pushStack:function(e,t,n){var r=ye.merge(this.constructor(),e);return r.prevObject=this,r.context=this.context,"find"===t?r.selector=this.selector+(this.selector?" ":"")+n:t&&(r.selector=this.selector+"."+t+"("+n+")"),r},each:function(e,t){return ye.each(this,e,t)},ready:function(e){return ye.ready.promise().done(e),this},eq:function(e){return-1===(e=+e)?this.slice(e):this.slice(e,e+1)},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},slice:function(){return this.pushStack(W.apply(this,arguments),"slice",W.call(arguments).join(","))},map:function(n){return this.pushStack(ye.map(this,function(e,t){return n.call(e,t,e)}))},end:function(){return this.prevObject||this.constructor(null)},push:B,sort:[].sort,splice:[].splice},ye.fn.init.prototype=ye.fn,ye.extend=ye.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[1]||{},s=2),"object"!=typeof a&&!ye.isFunction(a)&&(a={}),l===s&&(a=this,--s);s<l;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],a!==(r=e[t])&&(u&&r&&(ye.isPlainObject(r)||(i=ye.isArray(r)))?(o=i?(i=!1,n&&ye.isArray(n)?n:[]):n&&ye.isPlainObject(n)?n:{},a[t]=ye.extend(u,o,r)):r!==C&&(a[t]=r));return a},ye.extend({noConflict:function(e){return m.$===ye&&(m.$=q),e&&m.jQuery===ye&&(m.jQuery=_),ye},isReady:!1,readyWait:1,holdReady:function(e){e?ye.readyWait++:ye.ready(!0)},ready:function(e){if(!0===e?!--ye.readyWait:!ye.isReady){if(!F.body)return setTimeout(ye.ready,1);(ye.isReady=!0)!==e&&0<--ye.readyWait||(H.resolveWith(F,[ye]),ye.fn.trigger&&ye(F).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===ye.type(e)},isArray:Array.isArray||function(e){return"array"===ye.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?String(e):ie[R.call(e)]||"object"},isPlainObject:function(e){if(!e||"object"!==ye.type(e)||e.nodeType||ye.isWindow(e))return!1;try{if(e.constructor&&!$.call(e,"constructor")&&!$.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}var t;for(t in e);return t===C||$.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw new Error(e)},parseHTML:function(e,t,n){var r;return e&&"string"==typeof e?("boolean"==typeof t&&(n=t,t=0),t=t||F,(r=J.exec(e))?[t.createElement(r[1])]:(r=ye.buildFragment([e],t,n?null:[]),ye.merge([],(r.cacheable?ye.clone(r.fragment):r.fragment).childNodes))):null},parseJSON:function(e){return e&&"string"==typeof e?(e=ye.trim(e),m.JSON&&m.JSON.parse?m.JSON.parse(e):G.test(e.replace(K,"@").replace(Z,"]").replace(Q,""))?new Function("return "+e)():void ye.error("Invalid JSON: "+e)):null},parseXML:function(e){var t;if(!e||"string"!=typeof e)return null;try{m.DOMParser?t=(new DOMParser).parseFromString(e,"text/xml"):((t=new ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e))}catch(e){t=C}return(!t||!t.documentElement||t.getElementsByTagName("parsererror").length)&&ye.error("Invalid XML: "+e),t},noop:function(){},globalEval:function(e){e&&X.test(e)&&(m.execScript||function(e){m.eval.call(m,e)})(e)},camelCase:function(e){return e.replace(ee,"ms-").replace(te,ne)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=o===C||ye.isFunction(e);if(n)if(a){for(r in e)if(!1===t.apply(e[r],n))break}else for(;i<o&&!1!==t.apply(e[i++],n););else if(a){for(r in e)if(!1===t.call(e[r],r,e[r]))break}else for(;i<o&&!1!==t.call(e[i],i,e[i++]););return e},trim:I&&!I.call("\ufeffÂ ")?function(e){return null==e?"":I.call(e)}:function(e){return null==e?"":(e+"").replace(Y,"")},makeArray:function(e,t){var n,r=t||[];return null!=e&&(n=ye.type(e),null==e.length||"string"===n||"function"===n||"regexp"===n||ye.isWindow(e)?B.call(r,e):ye.merge(r,e)),r},inArray:function(e,t,n){var r;if(t){if(P)return P.call(t,e,n);for(r=t.length,n=n?n<0?Math.max(0,r+n):n:0;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=t.length,r=e.length,i=0;if("number"==typeof n)for(;i<n;i++)e[r++]=t[i];else for(;t[i]!==C;)e[r++]=t[i++];return e.length=r,e},grep:function(e,t,n){var r=[],i=0,o=e.length;for(n=!!n;i<o;i++)n!==!!t(e[i],i)&&r.push(e[i]);return r},map:function(e,t,n){var r,i,o=[],a=0,s=e.length;if(e instanceof ye||s!==C&&"number"==typeof s&&(0<s&&e[0]&&e[s-1]||0===s||ye.isArray(e)))for(;a<s;a++)null!=(r=t(e[a],a,n))&&(o[o.length]=r);else for(i in e)null!=(r=t(e[i],i,n))&&(o[o.length]=r);return o.concat.apply([],o)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),ye.isFunction(e)?(r=W.call(arguments,2),(i=function(){return e.apply(t,r.concat(W.call(arguments)))}).guid=e.guid=e.guid||ye.guid++,i):C},access:function(e,t,n,r,i,o,a){var s,l=null==n,u=0,c=e.length;if(n&&"object"==typeof n){for(u in n)ye.access(e,t,u,n[u],1,o,r);i=1}else if(r!==C){if(s=a===C&&ye.isFunction(r),l&&(t=s?(s=t,function(e,t,n){return s.call(ye(e),n)}):(t.call(e,r),null)),t)for(;u<c;u++)t(e[u],n,s?r.call(e[u],u,t(e[u],n)):r,a);i=1}return i?e:l?t.call(e):c?t(e[0],n):o},now:function(){return(new Date).getTime()}}),ye.ready.promise=function(e){if(!H)if(H=ye.Deferred(),"complete"===F.readyState)setTimeout(ye.ready,1);else if(F.addEventListener)F.addEventListener("DOMContentLoaded",re,!1),m.addEventListener("load",ye.ready,!1);else{F.attachEvent("onreadystatechange",re),m.attachEvent("onload",ye.ready);var n=!1;try{n=null==m.frameElement&&F.documentElement}catch(e){}n&&n.doScroll&&function t(){if(!ye.isReady){try{n.doScroll("left")}catch(e){return setTimeout(t,50)}ye.ready()}}()}return H.promise(e)},ye.each("Boolean Number String Function Array Date RegExp Object".split(" "),function(e,t){ie["[object "+t+"]"]=t.toLowerCase()}),L=ye(F);var oe={};ye.Callbacks=function(i){var e,n;i="string"==typeof i?oe[i]||(n=oe[e=i]={},ye.each(e.split(U),function(e,t){n[t]=!0}),n):ye.extend({},i);var t,r,o,a,s,l,u=[],c=!i.once&&[],f=function(e){for(t=i.memory&&e,r=!0,l=a||0,a=0,s=u.length,o=!0;u&&l<s;l++)if(!1===u[l].apply(e[0],e[1])&&i.stopOnFalse){t=!1;break}o=!1,u&&(c?c.length&&f(c.shift()):t?u=[]:p.disable())},p={add:function(){if(u){var e=u.length;(function r(e){ye.each(e,function(e,t){var n=ye.type(t);"function"===n?(!i.unique||!p.has(t))&&u.push(t):t&&t.length&&"string"!==n&&r(t)})})(arguments),o?s=u.length:t&&(a=e,f(t))}return this},remove:function(){return u&&ye.each(arguments,function(e,t){for(var n;-1<(n=ye.inArray(t,u,n));)u.splice(n,1),o&&(n<=s&&s--,n<=l&&l--)}),this},has:function(e){return-1<ye.inArray(e,u)},empty:function(){return u=[],this},disable:function(){return u=c=t=C,this},disabled:function(){return!u},lock:function(){return c=C,t||p.disable(),this},locked:function(){return!c},fireWith:function(e,t){return t=[e,(t=t||[]).slice?t.slice():t],u&&(!r||c)&&(o?c.push(t):f(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!r}};return p},ye.extend({Deferred:function(e){var a=[["resolve","done",ye.Callbacks("once memory"),"resolved"],["reject","fail",ye.Callbacks("once memory"),"rejected"],["notify","progress",ye.Callbacks("memory")]],i="pending",o={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var o=arguments;return ye.Deferred(function(i){ye.each(a,function(e,t){var n=t[0],r=o[e];s[t[1]](ye.isFunction(r)?function(){var e=r.apply(this,arguments);e&&ye.isFunction(e.promise)?e.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[n+"With"](this===s?i:this,[e])}:i[n])}),o=null}).promise()},promise:function(e){return null!=e?ye.extend(e,o):o}},s={};return o.pipe=o.then,ye.each(a,function(e,t){var n=t[2],r=t[3];o[t[1]]=n.add,r&&n.add(function(){i=r},a[1^e][2].disable,a[2][2].lock),s[t[0]]=n.fire,s[t[0]+"With"]=n.fireWith}),o.promise(s),e&&e.call(s,s),s},when:function(e){var i,t,n,r=0,o=W.call(arguments),a=o.length,s=1!==a||e&&ye.isFunction(e.promise)?a:0,l=1===s?e:ye.Deferred(),u=function(t,n,r){return function(e){n[t]=this,r[t]=1<arguments.length?W.call(arguments):e,r===i?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(1<a)for(i=new Array(a),t=new Array(a),n=new Array(a);r<a;r++)o[r]&&ye.isFunction(o[r].promise)?o[r].promise().done(u(r,n,o)).fail(l.reject).progress(u(r,t,i)):--s;return s||l.resolveWith(n,o),l.promise()}}),ye.support=function(){var a,e,t,n,r,i,o,s,l,u,c,f=F.createElement("div");if(f.setAttribute("className","t"),f.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=f.getElementsByTagName("*"),t=f.getElementsByTagName("a")[0],!e||!t||!e.length)return{};r=(n=F.createElement("select")).appendChild(F.createElement("option")),i=f.getElementsByTagName("input")[0],t.style.cssText="top:1px;float:left;opacity:.5",a={leadingWhitespace:3===f.firstChild.nodeType,tbody:!f.getElementsByTagName("tbody").length,htmlSerialize:!!f.getElementsByTagName("link").length,style:/top/.test(t.getAttribute("style")),hrefNormalized:"/a"===t.getAttribute("href"),opacity:/^0.5/.test(t.style.opacity),cssFloat:!!t.style.cssFloat,checkOn:"on"===i.value,optSelected:r.selected,getSetAttribute:"t"!==f.className,enctype:!!F.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==F.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===F.compatMode,submitBubbles:!0,changeBubbles:!0,focusinBubbles:!1,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},i.checked=!0,a.noCloneChecked=i.cloneNode(!0).checked,n.disabled=!0,a.optDisabled=!r.disabled;try{delete f.test}catch(e){a.deleteExpando=!1}if(!f.addEventListener&&f.attachEvent&&f.fireEvent&&(f.attachEvent("onclick",c=function(){a.noCloneEvent=!1}),f.cloneNode(!0).fireEvent("onclick"),f.detachEvent("onclick",c)),(i=F.createElement("input")).value="t",i.setAttribute("type","radio"),a.radioValue="t"===i.value,i.setAttribute("checked","checked"),i.setAttribute("name","t"),f.appendChild(i),(o=F.createDocumentFragment()).appendChild(f.lastChild),a.checkClone=o.cloneNode(!0).cloneNode(!0).lastChild.checked,a.appendChecked=i.checked,o.removeChild(i),o.appendChild(f),f.attachEvent)for(l in{submit:!0,change:!0,focusin:!0})(u=(s="on"+l)in f)||(f.setAttribute(s,"return;"),u="function"==typeof f[s]),a[l+"Bubbles"]=u;return ye(function(){var e,t,n,r,i="padding:0;margin:0;border:0;display:block;overflow:hidden;",o=F.getElementsByTagName("body")[0];o&&((e=F.createElement("div")).style.cssText="visibility:hidden;border:0;width:0;height:0;position:static;top:0;margin-top:1px",o.insertBefore(e,o.firstChild),t=F.createElement("div"),e.appendChild(t),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",(n=t.getElementsByTagName("td"))[0].style.cssText="padding:0;margin:0;border:0;display:none",u=0===n[0].offsetHeight,n[0].style.display="",n[1].style.display="none",a.reliableHiddenOffsets=u&&0===n[0].offsetHeight,t.innerHTML="",t.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",a.boxSizing=4===t.offsetWidth,a.doesNotIncludeMarginInBodyOffset=1!==o.offsetTop,m.getComputedStyle&&(a.pixelPosition="1%"!==(m.getComputedStyle(t,null)||{}).top,a.boxSizingReliable="4px"===(m.getComputedStyle(t,null)||{width:"4px"}).width,(r=F.createElement("div")).style.cssText=t.style.cssText=i,r.style.marginRight=r.style.width="0",t.style.width="1px",t.appendChild(r),a.reliableMarginRight=!parseFloat((m.getComputedStyle(r,null)||{}).marginRight)),void 0!==t.style.zoom&&(t.innerHTML="",t.style.cssText=i+"width:1px;padding:1px;display:inline;zoom:1",a.inlineBlockNeedsLayout=3===t.offsetWidth,t.style.display="block",t.style.overflow="visible",t.innerHTML="<div></div>",t.firstChild.style.width="5px",a.shrinkWrapBlocks=3!==t.offsetWidth,e.style.zoom=1),o.removeChild(e),e=t=n=r=null)}),o.removeChild(f),e=t=n=r=i=o=f=null,a}();var ae=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,se=/([A-Z])/g;ye.extend({cache:{},deletedIds:[],uuid:0,expando:"jQuery"+(ye.fn.jquery+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return!!(e=e.nodeType?ye.cache[e[ye.expando]]:e[ye.expando])&&!u(e)},data:function(e,t,n,r){if(ye.acceptData(e)){var i,o,a=ye.expando,s="string"==typeof t,l=e.nodeType,u=l?ye.cache:e,c=l?e[a]:e[a]&&a;if(c&&u[c]&&(r||u[c].data)||!s||n!==C)return c||(l?e[a]=c=ye.deletedIds.pop()||ye.guid++:c=a),u[c]||(u[c]={},l||(u[c].toJSON=ye.noop)),"object"!=typeof t&&"function"!=typeof t||(r?u[c]=ye.extend(u[c],t):u[c].data=ye.extend(u[c].data,t)),i=u[c],r||(i.data||(i.data={}),i=i.data),n!==C&&(i[ye.camelCase(t)]=n),s?null==(o=i[t])&&(o=i[ye.camelCase(t)]):o=i,o}},removeData:function(e,t,n){if(ye.acceptData(e)){var r,i,o,a=e.nodeType,s=a?ye.cache:e,l=a?e[ye.expando]:ye.expando;if(s[l]){if(t&&(r=n?s[l]:s[l].data)){ye.isArray(t)||(t=t in r?[t]:(t=ye.camelCase(t))in r?[t]:t.split(" "));for(i=0,o=t.length;i<o;i++)delete r[t[i]];if(!(n?u:ye.isEmptyObject)(r))return}(n||(delete s[l].data,u(s[l])))&&(a?ye.cleanData([e],!0):ye.support.deleteExpando||s!=s.window?delete s[l]:s[l]=null)}}},_data:function(e,t,n){return ye.data(e,t,n,!0)},acceptData:function(e){var t=e.nodeName&&ye.noData[e.nodeName.toLowerCase()];return!t||!0!==t&&e.getAttribute("classid")===t}}),ye.fn.extend({data:function(n,e){var r,i,t,o,a,s=this[0],l=0,u=null;if(n!==C)return"object"==typeof n?this.each(function(){ye.data(this,n)}):((r=n.split(".",2))[1]=r[1]?"."+r[1]:"",i=r[1]+"!",ye.access(this,function(t){if(t===C)return(u=this.triggerHandler("getData"+i,[r[0]]))===C&&s&&(u=ye.data(s,n),u=c(s,n,u)),u===C&&r[1]?this.data(r[0]):u;r[1]=t,this.each(function(){var e=ye(this);e.triggerHandler("setData"+i,r),ye.data(this,n,t),e.triggerHandler("changeData"+i,r)})},null,e,1<arguments.length,null,!1));if(this.length&&(u=ye.data(s),1===s.nodeType&&!ye._data(s,"parsedAttrs"))){for(a=(t=s.attributes).length;l<a;l++)(o=t[l].name).indexOf("data-")||(o=ye.camelCase(o.substring(5)),c(s,o,u[o]));ye._data(s,"parsedAttrs",!0)}return u},removeData:function(e){return this.each(function(){ye.removeData(this,e)})}}),ye.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=ye._data(e,t),n&&(!r||ye.isArray(n)?r=ye._data(e,t,ye.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=ye.queue(e,t),r=n.length,i=n.shift(),o=ye._queueHooks(e,t);"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,function(){ye.dequeue(e,t)},o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ye._data(e,n)||ye._data(e,n,{empty:ye.Callbacks("once memory").add(function(){ye.removeData(e,t+"queue",!0),ye.removeData(e,n,!0)})})}}),ye.fn.extend({queue:function(t,n){var e=2;return"string"!=typeof t&&(n=t,t="fx",e--),arguments.length<e?ye.queue(this[0],t):n===C?this:this.each(function(){var e=ye.queue(this,t,n);ye._queueHooks(this,t),"fx"===t&&"inprogress"!==e[0]&&ye.dequeue(this,t)})},dequeue:function(e){return this.each(function(){ye.dequeue(this,e)})},delay:function(r,e){return r=ye.fx&&ye.fx.speeds[r]||r,e=e||"fx",this.queue(e,function(e,t){var n=setTimeout(e,r);t.stop=function(){clearTimeout(n)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ye.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=C),e=e||"fx";a--;)(n=ye._data(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var le,ue,ce,fe=/[\t\r\n]/g,pe=/\r/g,de=/^(?:button|input)$/i,he=/^(?:button|input|object|select|textarea)$/i,ge=/^a(?:rea|)$/i,me=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,ve=ye.support.getSetAttribute;ye.fn.extend({attr:function(e,t){return ye.access(this,ye.attr,e,t,1<arguments.length)},removeAttr:function(e){return this.each(function(){ye.removeAttr(this,e)})},prop:function(e,t){return ye.access(this,ye.prop,e,t,1<arguments.length)},removeProp:function(e){return e=ye.propFix[e]||e,this.each(function(){try{this[e]=C,delete this[e]}catch(e){}})},addClass:function(t){var e,n,r,i,o,a,s;if(ye.isFunction(t))return this.each(function(e){ye(this).addClass(t.call(this,e,this.className))});if(t&&"string"==typeof t)for(e=t.split(U),n=0,r=this.length;n<r;n++)if(1===(i=this[n]).nodeType)if(i.className||1!==e.length){for(o=" "+i.className+" ",a=0,s=e.length;a<s;a++)o.indexOf(" "+e[a]+" ")<0&&(o+=e[a]+" ");i.className=ye.trim(o)}else i.className=t;return this},removeClass:function(t){var e,n,r,i,o,a,s;if(ye.isFunction(t))return this.each(function(e){ye(this).removeClass(t.call(this,e,this.className))});if(t&&"string"==typeof t||t===C)for(e=(t||"").split(U),a=0,s=this.length;a<s;a++)if(1===(r=this[a]).nodeType&&r.className){for(n=(" "+r.className+" ").replace(fe," "),i=0,o=e.length;i<o;i++)for(;0<=n.indexOf(" "+e[i]+" ");)n=n.replace(" "+e[i]+" "," ");r.className=t?ye.trim(n):""}return this},toggleClass:function(o,a){var s=typeof o,l="boolean"==typeof a;return ye.isFunction(o)?this.each(function(e){ye(this).toggleClass(o.call(this,e,this.className,a),a)}):this.each(function(){if("string"===s)for(var e,t=0,n=ye(this),r=a,i=o.split(U);e=i[t++];)r=l?r:!n.hasClass(e),n[r?"addClass":"removeClass"](e);else"undefined"!==s&&"boolean"!==s||(this.className&&ye._data(this,"__className__",this.className),this.className=this.className||!1===o?"":ye._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;n<r;n++)if(1===this[n].nodeType&&0<=(" "+this[n].className+" ").replace(fe," ").indexOf(t))return!0;return!1},val:function(r){var i,e,o,t=this[0];return arguments.length?(o=ye.isFunction(r),this.each(function(e){var t,n=ye(this);1===this.nodeType&&(null==(t=o?r.call(this,e,n.val()):r)?t="":"number"==typeof t?t+="":ye.isArray(t)&&(t=ye.map(t,function(e){return null==e?"":e+""})),(i=ye.valHooks[this.type]||ye.valHooks[this.nodeName.toLowerCase()])&&"set"in i&&i.set(this,t,"value")!==C||(this.value=t))})):t?(i=ye.valHooks[t.type]||ye.valHooks[t.nodeName.toLowerCase()])&&"get"in i&&(e=i.get(t,"value"))!==C?e:"string"==typeof(e=t.value)?e.replace(pe,""):null==e?"":e:void 0}}),ye.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||i<0,a=o?null:[],s=o?i+1:r.length,l=i<0?s:o?i:0;l<s;l++)if(((n=r[l]).selected||l===i)&&(ye.support.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!ye.nodeName(n.parentNode,"optgroup"))){if(t=ye(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=ye.makeArray(t);return ye(e).find("option").each(function(){this.selected=0<=ye.inArray(ye(this).val(),n)}),n.length||(e.selectedIndex=-1),n}}},attrFn:{},attr:function(e,t,n,r){var i,o,a,s=e.nodeType;if(e&&3!==s&&8!==s&&2!==s)return r&&ye.isFunction(ye.fn[t])?ye(e)[t](n):void 0===e.getAttribute?ye.prop(e,t,n):((a=1!==s||!ye.isXMLDoc(e))&&(t=t.toLowerCase(),o=ye.attrHooks[t]||(me.test(t)?ue:le)),n!==C?null===n?void ye.removeAttr(e,t):o&&"set"in o&&a&&(i=o.set(e,n,t))!==C?i:(e.setAttribute(t,n+""),n):o&&"get"in o&&a&&null!==(i=o.get(e,t))?i:null===(i=e.getAttribute(t))?C:i)},removeAttr:function(e,t){var n,r,i,o,a=0;if(t&&1===e.nodeType)for(r=t.split(U);a<r.length;a++)(i=r[a])&&(n=ye.propFix[i]||i,(o=me.test(i))||ye.attr(e,i,""),e.removeAttribute(ve?i:n),o&&n in e&&(e[n]=!1))},attrHooks:{type:{set:function(e,t){if(de.test(e.nodeName)&&e.parentNode)ye.error("type property can't be changed");else if(!ye.support.radioValue&&"radio"===t&&ye.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}},value:{get:function(e,t){return le&&ye.nodeName(e,"button")?le.get(e,t):t in e?e.value:null},set:function(e,t,n){if(le&&ye.nodeName(e,"button"))return le.set(e,t,n);e.value=t}}},propFix:{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!ye.isXMLDoc(e))&&(t=ye.propFix[t]||t,i=ye.propHooks[t]),n!==C?i&&"set"in i&&(r=i.set(e,n,t))!==C?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=e.getAttributeNode("tabindex");return t&&t.specified?parseInt(t.value,10):he.test(e.nodeName)||ge.test(e.nodeName)&&e.href?0:C}}}}),ue={get:function(e,t){var n,r=ye.prop(e,t);return!0===r||"boolean"!=typeof r&&(n=e.getAttributeNode(t))&&!1!==n.nodeValue?t.toLowerCase():C},set:function(e,t,n){var r;return!1===t?ye.removeAttr(e,n):((r=ye.propFix[n]||n)in e&&(e[r]=!0),e.setAttribute(n,n.toLowerCase())),n}},ve||(ce={name:!0,id:!0,coords:!0},le=ye.valHooks.button={get:function(e,t){var n;return(n=e.getAttributeNode(t))&&(ce[t]?""!==n.value:n.specified)?n.value:C},set:function(e,t,n){var r=e.getAttributeNode(n);return r||(r=F.createAttribute(n),e.setAttributeNode(r)),r.value=t+""}},ye.each(["width","height"],function(e,n){ye.attrHooks[n]=ye.extend(ye.attrHooks[n],{set:function(e,t){if(""===t)return e.setAttribute(n,"auto"),t}})}),ye.attrHooks.contenteditable={get:le.get,set:function(e,t,n){""===t&&(t="false"),le.set(e,t,n)}}),ye.support.hrefNormalized||ye.each(["href","src","width","height"],function(e,n){ye.attrHooks[n]=ye.extend(ye.attrHooks[n],{get:function(e){var t=e.getAttribute(n,2);return null===t?C:t}})}),ye.support.style||(ye.attrHooks.style={get:function(e){return e.style.cssText.toLowerCase()||C},set:function(e,t){return e.style.cssText=t+""}}),ye.support.optSelected||(ye.propHooks.selected=ye.extend(ye.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),ye.support.enctype||(ye.propFix.enctype="encoding"),ye.support.checkOn||ye.each(["radio","checkbox"],function(){ye.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),ye.each(["radio","checkbox"],function(){ye.valHooks[this]=ye.extend(ye.valHooks[this],{set:function(e,t){if(ye.isArray(t))return e.checked=0<=ye.inArray(ye(e).val(),t)}})});var be=/^(?:textarea|input|select)$/i,xe=/^([^\.]*|)(?:\.(.+)|)$/,we=/(?:^|\s)hover(\.\S+|)\b/,Te=/^key/,Ne=/^(?:mouse|contextmenu)|click/,Ce=/^(?:focusinfocus|focusoutblur)$/,ke=function(e){return ye.event.special.hover?e:e.replace(we,"mouseenter$1 mouseleave$1")};ye.event={add:function(e,t,n,r,i){var o,a,s,l,u,c,f,p,d,h,g;if(3!==e.nodeType&&8!==e.nodeType&&t&&n&&(o=ye._data(e))){for(n.handler&&(n=(d=n).handler,i=d.selector),n.guid||(n.guid=ye.guid++),(s=o.events)||(o.events=s={}),(a=o.handle)||(o.handle=a=function(e){return void 0===ye||e&&ye.event.triggered===e.type?C:ye.event.dispatch.apply(a.elem,arguments)},a.elem=e),t=ye.trim(ke(t)).split(" "),l=0;l<t.length;l++)c=(u=xe.exec(t[l])||[])[1],f=(u[2]||"").split(".").sort(),g=ye.event.special[c]||{},c=(i?g.delegateType:g.bindType)||c,g=ye.event.special[c]||{},p=ye.extend({type:c,origType:u[1],data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ye.expr.match.needsContext.test(i),namespace:f.join(".")},d),(h=s[c])||((h=s[c]=[]).delegateCount=0,g.setup&&!1!==g.setup.call(e,r,f,a)||(e.addEventListener?e.addEventListener(c,a,!1):e.attachEvent&&e.attachEvent("on"+c,a))),g.add&&(g.add.call(e,p),p.handler.guid||(p.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,p):h.push(p),ye.event.global[c]=!0;e=null}},global:{},remove:function(e,t,n,r,i){var o,a,s,l,u,c,f,p,d,h,g,m=ye.hasData(e)&&ye._data(e);if(m&&(p=m.events)){for(t=ye.trim(ke(t||"")).split(" "),o=0;o<t.length;o++)if(s=l=(a=xe.exec(t[o])||[])[1],u=a[2],s){for(d=ye.event.special[s]||{},c=(h=p[s=(r?d.delegateType:d.bindType)||s]||[]).length,u=u?new RegExp("(^|\\.)"+u.split(".").sort().join("\\.(?:.*\\.|)")+"(\\.|$)"):null,f=0;f<h.length;f++)g=h[f],(i||l===g.origType)&&(!n||n.guid===g.guid)&&(!u||u.test(g.namespace))&&(!r||r===g.selector||"**"===r&&g.selector)&&(h.splice(f--,1),g.selector&&h.delegateCount--,d.remove&&d.remove.call(e,g));0===h.length&&c!==h.length&&((!d.teardown||!1===d.teardown.call(e,u,m.handle))&&ye.removeEvent(e,s,m.handle),delete p[s])}else for(s in p)ye.event.remove(e,s+t[o],n,r,!0);ye.isEmptyObject(p)&&(delete m.handle,ye.removeData(e,"events",!0))}},customEvent:{getData:!0,setData:!0,changeData:!0},trigger:function(e,t,n,r){if(!n||3!==n.nodeType&&8!==n.nodeType){var i,o,a,s,l,u,c,f,p,d,h=e.type||e,g=[];if(Ce.test(h+ye.event.triggered))return;if(0<=h.indexOf("!")&&(h=h.slice(0,-1),o=!0),0<=h.indexOf(".")&&(h=(g=h.split(".")).shift(),g.sort()),(!n||ye.event.customEvent[h])&&!ye.event.global[h])return;if((e="object"==typeof e?e[ye.expando]?e:new ye.Event(h,e):new ye.Event(h)).type=h,e.isTrigger=!0,e.exclusive=o,e.namespace=g.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+g.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,u=h.indexOf(":")<0?"on"+h:"",!n){for(a in i=ye.cache)i[a].events&&i[a].events[h]&&ye.event.trigger(e,t,i[a].handle.elem,!0);return}if(e.result=C,e.target||(e.target=n),(t=null!=t?ye.makeArray(t):[]).unshift(e),(c=ye.event.special[h]||{}).trigger&&!1===c.trigger.apply(n,t))return;if(p=[[n,c.bindType||h]],!r&&!c.noBubble&&!ye.isWindow(n)){for(d=c.delegateType||h,s=Ce.test(d+h)?n:n.parentNode,l=n;s;s=s.parentNode)p.push([s,d]),l=s;l===(n.ownerDocument||F)&&p.push([l.defaultView||l.parentWindow||m,d])}for(a=0;a<p.length&&!e.isPropagationStopped();a++)s=p[a][0],e.type=p[a][1],(f=(ye._data(s,"events")||{})[e.type]&&ye._data(s,"handle"))&&f.apply(s,t),(f=u&&s[u])&&ye.acceptData(s)&&f.apply&&!1===f.apply(s,t)&&e.preventDefault();return e.type=h,!r&&!e.isDefaultPrevented()&&(!c._default||!1===c._default.apply(n.ownerDocument,t))&&("click"!==h||!ye.nodeName(n,"a"))&&ye.acceptData(n)&&u&&n[h]&&("focus"!==h&&"blur"!==h||0!==e.target.offsetWidth)&&!ye.isWindow(n)&&((l=n[u])&&(n[u]=null),n[ye.event.triggered=h](),ye.event.triggered=C,l&&(n[u]=l)),e.result}},dispatch:function(e){e=ye.event.fix(e||m.event);var t,n,r,i,o,a,s,l,u,c=(ye._data(this,"events")||{})[e.type]||[],f=c.delegateCount,p=W.call(arguments),d=!e.exclusive&&!e.namespace,h=ye.event.special[e.type]||{},g=[];if((p[0]=e).delegateTarget=this,!h.preDispatch||!1!==h.preDispatch.call(this,e)){if(f&&(!e.button||"click"!==e.type))for(r=e.target;r!=this;r=r.parentNode||this)if(!0!==r.disabled||"click"!==e.type){for(o={},s=[],t=0;t<f;t++)o[u=(l=c[t]).selector]===C&&(o[u]=l.needsContext?0<=ye(u,this).index(r):ye.find(u,this,null,[r]).length),o[u]&&s.push(l);s.length&&g.push({elem:r,matches:s})}for(c.length>f&&g.push({elem:this,matches:c.slice(f)}),t=0;t<g.length&&!e.isPropagationStopped();t++)for(a=g[t],e.currentTarget=a.elem,n=0;n<a.matches.length&&!e.isImmediatePropagationStopped();n++)l=a.matches[n],(d||!e.namespace&&!l.namespace||e.namespace_re&&e.namespace_re.test(l.namespace))&&(e.data=l.data,e.handleObj=l,(i=((ye.event.special[l.origType]||{}).handle||l.handler).apply(a.elem,p))!==C&&(!1===(e.result=i)&&(e.preventDefault(),e.stopPropagation())));return h.postDispatch&&h.postDispatch.call(this,e),e.result}},props:"attrChange attrName relatedNode srcElement altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=(n=e.target.ownerDocument||F).documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),!e.which&&o!==C&&(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[ye.expando])return e;var t,n,r=e,i=ye.event.fixHooks[e.type]||{},o=i.props?this.props.concat(i.props):this.props;for(e=ye.Event(r),t=o.length;t;)e[n=o[--t]]=r[n];return e.target||(e.target=r.srcElement||F),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,i.filter?i.filter(e,r):e},special:{load:{noBubble:!0},focus:{delegateType:"focusin"},blur:{delegateType:"focusout"},beforeunload:{setup:function(e,t,n){ye.isWindow(this)&&(this.onbeforeunload=n)},teardown:function(e,t){this.onbeforeunload===t&&(this.onbeforeunload=null)}}},simulate:function(e,t,n,r){var i=ye.extend(new ye.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ye.event.trigger(i,null,t):ye.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ye.event.handle=ye.event.dispatch,ye.removeEvent=F.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(void 0===e[r]&&(e[r]=null),e.detachEvent(r,n))},ye.Event=function(e,t){if(!(this instanceof ye.Event))return new ye.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||!1===e.returnValue||e.getPreventDefault&&e.getPreventDefault()?n:s):this.type=e,t&&ye.extend(this,t),this.timeStamp=e&&e.timeStamp||ye.now(),this[ye.expando]=!0},ye.Event.prototype={preventDefault:function(){this.isDefaultPrevented=n;var e=this.originalEvent;e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){this.isPropagationStopped=n;var e=this.originalEvent;e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=n,this.stopPropagation()},isDefaultPrevented:s,isPropagationStopped:s,isImmediatePropagationStopped:s},ye.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,i){ye.event.special[e]={delegateType:i,bindType:i,handle:function(e){var t,n=e.relatedTarget,r=e.handleObj;r.selector;return n&&(n===this||ye.contains(this,n))||(e.type=r.origType,t=r.handler.apply(this,arguments),e.type=i),t}}}),ye.support.submitBubbles||(ye.event.special.submit={setup:function(){if(ye.nodeName(this,"form"))return!1;ye.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ye.nodeName(t,"input")||ye.nodeName(t,"button")?t.form:C;n&&!ye._data(n,"_submit_attached")&&(ye.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ye._data(n,"_submit_attached",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ye.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(ye.nodeName(this,"form"))return!1;ye.event.remove(this,"._submit")}}),ye.support.changeBubbles||(ye.event.special.change={setup:function(){if(be.test(this.nodeName))return"checkbox"!==this.type&&"radio"!==this.type||(ye.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ye.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ye.event.simulate("change",this,e,!0)})),!1;ye.event.add(this,"beforeactivate._change",function(e){var t=e.target;be.test(t.nodeName)&&!ye._data(t,"_change_attached")&&(ye.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&ye.event.simulate("change",this.parentNode,e,!0)}),ye._data(t,"_change_attached",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type)return e.handleObj.handler.apply(this,arguments)},teardown:function(){return ye.event.remove(this,"._change"),!be.test(this.nodeName)}}),ye.support.focusinBubbles||ye.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){ye.event.simulate(t,e.target,ye.event.fix(e),!0)};ye.event.special[t]={setup:function(){0==n++&&F.addEventListener(e,r,!0)},teardown:function(){0==--n&&F.removeEventListener(e,r,!0)}}}),ye.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){for(a in"string"!=typeof t&&(n=n||t,t=C),e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=C):null==r&&("string"==typeof t?(r=n,n=C):(r=n,n=t,t=C)),!1===r)r=s;else if(!r)return this;return 1===i&&(o=r,(r=function(e){return ye().off(e),o.apply(this,arguments)}).guid=o.guid||(o.guid=ye.guid++)),this.each(function(){ye.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ye(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"!=typeof e)return!1!==t&&"function"!=typeof t||(n=t,t=C),!1===n&&(n=s),this.each(function(){ye.event.remove(this,e,n,t)});for(i in e)this.off(i,t,e[i]);return this},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},live:function(e,t,n){return ye(this.context).on(e,this.selector,t,n),this},die:function(e,t){return ye(this.context).off(e,this.selector||"**",t),this},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){ye.event.trigger(e,t,this)})},triggerHandler:function(e,t){if(this[0])return ye.event.trigger(e,t,this[0],!0)},toggle:function(n){var r=arguments,e=n.guid||ye.guid++,i=0,t=function(e){var t=(ye._data(this,"lastToggle"+n.guid)||0)%i;return ye._data(this,"lastToggle"+n.guid,t+1),e.preventDefault(),r[t].apply(this,arguments)||!1};for(t.guid=e;i<r.length;)r[i++].guid=e;return this.click(t)},hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ye.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,n){ye.fn[n]=function(e,t){return null==t&&(t=e,e=null),0<arguments.length?this.on(n,null,e,t):this.trigger(n)},Te.test(n)&&(ye.event.fixHooks[n]=ye.event.keyHooks),Ne.test(n)&&(ye.event.fixHooks[n]=ye.event.mouseHooks)}),function(e,t){function w(e,t,n,r){n=n||[];var i,o,a,s,l=(t=t||_).nodeType;if(!e||"string"!=typeof e)return n;if(1!==l&&9!==l)return[];if(!(a=g(t))&&!r&&(i=oe.exec(e)))if(s=i[1]){if(9===l){if(!(o=t.getElementById(s))||!o.parentNode)return n;if(o.id===s)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(s))&&m(t,o)&&o.id===s)return n.push(o),n}else{if(i[2])return R.apply(n,$.call(t.getElementsByTagName(e),0)),n;if((s=i[3])&&ge&&t.getElementsByClassName)return R.apply(n,$.call(t.getElementsByClassName(s),0)),n}return u(e.replace(te,"$1"),t,n,r,a)}function n(t){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===t}}function r(n){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===n}}function i(a){return z(function(o){return o=+o,z(function(e,t){for(var n,r=a([],e.length,o),i=r.length;i--;)e[n=r[i]]&&(e[n]=!(t[n]=e[n]))})})}function c(e,t,n){if(e===t)return n;for(var r=e.nextSibling;r;){if(r===t)return-1;r=r.nextSibling}return 1}function f(e,t){var n,r,i,o,a,s,l,u=Y[M][e+" "];if(u)return t?0:u.slice(0);for(a=e,s=[],l=C.preFilter;a;){for(o in n&&!(r=ne.exec(a))||(r&&(a=a.slice(r[0].length)||a),s.push(i=[])),n=!1,(r=re.exec(a))&&(i.push(n=new O(r.shift())),a=a.slice(n.length),n.type=r[0].replace(te," ")),C.filter)(r=ce[o].exec(a))&&(!l[o]||(r=l[o](r)))&&(i.push(n=new O(r.shift())),a=a.slice(n.length),n.type=o,n.matches=r);if(!n)break}return t?a.length:a?w.error(e):Y(e,s).slice(0)}function p(a,e,t){var s=e.dir,l=t&&"parentNode"===e.dir,u=W++;return e.first?function(e,t,n){for(;e=e[s];)if(l||1===e.nodeType)return a(e,t,n)}:function(e,t,n){if(n){for(;e=e[s];)if((l||1===e.nodeType)&&a(e,t,n))return e}else for(var r,i=B+" "+u+" ",o=i+N;e=e[s];)if(l||1===e.nodeType){if((r=e[M])===o)return e.sizset;if("string"==typeof r&&0===r.indexOf(i)){if(e.sizset)return e}else{if(e[M]=o,a(e,t,n))return e.sizset=!0,e;e.sizset=!1}}}}function d(i){return 1<i.length?function(e,t,n){for(var r=i.length;r--;)if(!i[r](e,t,n))return!1;return!0}:i[0]}function T(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;s<l;s++)(o=e[s])&&(n&&!n(o,r,i)||(a.push(o),u&&t.push(s)));return a}function v(d,h,g,m,y,e){return m&&!m[M]&&(m=v(m)),y&&!y[M]&&(y=v(y,e)),z(function(e,t,n,r){var i,o,a,s=[],l=[],u=t.length,c=e||function(e,t,n){for(var r=0,i=t.length;r<i;r++)w(e,t[r],n);return n}(h||"*",n.nodeType?[n]:n,[]),f=!d||!e&&h?c:T(c,s,d,n,r),p=g?y||(e?d:u||m)?[]:t:f;if(g&&g(f,p,n,r),m)for(i=T(p,l),m(i,[],n,r),o=i.length;o--;)(a=i[o])&&(p[l[o]]=!(f[l[o]]=a));if(e){if(y||d){if(y){for(i=[],o=p.length;o--;)(a=p[o])&&i.push(f[o]=a);y(null,p=[],i,r)}for(o=p.length;o--;)(a=p[o])&&-1<(i=y?I.call(e,a):s[o])&&(e[i]=!(t[i]=a))}}else p=T(p===t?p.splice(u,p.length):p),y?y(null,t,p,r):R.apply(t,p)})}function h(e){for(var r,t,n,i=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=p(function(e){return e===r},a,!0),u=p(function(e){return-1<I.call(r,e)},a,!0),c=[function(e,t,n){return!o&&(n||t!==k)||((r=t).nodeType?l(e,t,n):u(e,t,n))}];s<i;s++)if(t=C.relative[e[s].type])c=[p(d(c),t)];else{if((t=C.filter[e[s].type].apply(null,e[s].matches))[M]){for(n=++s;n<i&&!C.relative[e[n].type];n++);return v(1<s&&d(c),1<s&&e.slice(0,s-1).join("").replace(te,"$1"),t,s<n&&h(e.slice(s,n)),n<i&&h(e=e.slice(n)),n<i&&e.join(""))}c.push(t)}return d(c)}function u(e,t,n,r,i){var o,a,s,l,u,c=f(e);c.length;if(!r&&1===c.length){if(2<(a=c[0]=c[0].slice(0)).length&&"ID"===(s=a[0]).type&&9===t.nodeType&&!i&&C.relative[a[1].type]){if(!(t=C.find.ID(s.matches[0].replace(ue,""),t,i)[0]))return n;e=e.slice(a.shift().length)}for(o=ce.POS.test(e)?-1:a.length-1;0<=o&&(s=a[o],!C.relative[l=s.type]);o--)if((u=C.find[l])&&(r=u(s.matches[0].replace(ue,""),ae.test(a[0].type)&&t.parentNode||t,i))){if(a.splice(o,1),!(e=r.length&&a.join("")))return R.apply(n,$.call(r,0)),n;break}}return y(e,c)(r,t,i,n,ae.test(e)),n}function o(){}var N,a,C,s,g,m,y,l,b,k,x,E,S,A,j,D,L,H,F="undefined",M=("sizcache"+Math.random()).replace(".",""),O=String,_=e.document,q=_.documentElement,B=0,W=0,P=[].pop,R=[].push,$=[].slice,I=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(this[t]===e)return t;return-1},z=function(e,t){return e[M]=null==t||t,e},X=function(){var n={},r=[];return z(function(e,t){return r.push(e)>C.cacheLength&&delete n[r.shift()],n[e+" "]=t},n)},U=X(),Y=X(),V=X(),J="[\\x20\\t\\r\\n\\f]",G="(?:\\\\.|[-\\w]|[^\\x00-\\xa0])+",Q=G.replace("w","w#"),K="\\["+J+"*("+G+")"+J+"*(?:([*^$|!~]?=)"+J+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+Q+")|)|)"+J+"*\\]",Z=":("+G+")(?:\\((?:(['\"])((?:\\\\.|[^\\\\])*?)\\2|([^()[\\]]*|(?:(?:"+K+")|[^:]|\\\\.)*|.*))\\)|)",ee=":(even|odd|eq|gt|lt|nth|first|last)(?:\\("+J+"*((?:-\\d)?\\d*)"+J+"*\\)|)(?=[^-]|$)",te=new RegExp("^"+J+"+|((?:^|[^\\\\])(?:\\\\.)*)"+J+"+$","g"),ne=new RegExp("^"+J+"*,"+J+"*"),re=new RegExp("^"+J+"*([\\x20\\t\\r\\n\\f>+~])"+J+"*"),ie=new RegExp(Z),oe=/^(?:#([\w\-]+)|(\w+)|\.([\w\-]+))$/,ae=/[\x20\t\r\n\f]*[+~]/,se=/h\d/i,le=/input|select|textarea|button/i,ue=/\\(?!\\)/g,ce={ID:new RegExp("^#("+G+")"),CLASS:new RegExp("^\\.("+G+")"),NAME:new RegExp("^\\[name=['\"]?("+G+")['\"]?\\]"),TAG:new RegExp("^("+G.replace("w","w*")+")"),ATTR:new RegExp("^"+K),PSEUDO:new RegExp("^"+Z),POS:new RegExp(ee,"i"),CHILD:new RegExp("^:(only|nth|first|last)-child(?:\\("+J+"*(even|odd|(([+-]|)(\\d*)n|)"+J+"*(?:([+-]|)"+J+"*(\\d+)|))"+J+"*\\)|)","i"),needsContext:new RegExp("^"+J+"*[>+~]|"+ee,"i")},fe=function(e){var t=_.createElement("div");try{return e(t)}catch(e){return!1}finally{t=null}},pe=fe(function(e){return e.appendChild(_.createComment("")),!e.getElementsByTagName("*").length}),de=fe(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==F&&"#"===e.firstChild.getAttribute("href")}),he=fe(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),ge=fe(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",!(!e.getElementsByClassName||!e.getElementsByClassName("e").length)&&(e.lastChild.className="e",2===e.getElementsByClassName("e").length)}),me=fe(function(e){e.id=M+0,e.innerHTML="<a name='"+M+"'></a><div name='"+M+"'></div>",q.insertBefore(e,q.firstChild);var t=_.getElementsByName&&_.getElementsByName(M).length===2+_.getElementsByName(M+0).length;return a=!_.getElementById(M),q.removeChild(e),t});try{$.call(q.childNodes,0)[0].nodeType}catch(e){$=function(e){for(var t,n=[];t=this[e];e++)n.push(t);return n}}w.matches=function(e,t){return w(e,null,null,t)},w.matchesSelector=function(e,t){return 0<w(t,null,null,[e]).length},s=w.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=s(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=s(t);return n},g=w.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},m=w.contains=q.contains?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!!(r&&1===r.nodeType&&n.contains&&n.contains(r))}:q.compareDocumentPosition?function(e,t){return t&&!!(16&e.compareDocumentPosition(t))}:function(e,t){for(;t=t.parentNode;)if(t===e)return!0;return!1},w.attr=function(e,t){var n,r=g(e);return r||(t=t.toLowerCase()),(n=C.attrHandle[t])?n(e):r||he?e.getAttribute(t):(n=e.getAttributeNode(t))?"boolean"==typeof e[t]?e[t]?t:null:n.specified?n.value:null:null},C=w.selectors={cacheLength:50,createPseudo:z,match:ce,attrHandle:de?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},find:{ID:a?function(e,t,n){if(typeof t.getElementById!==F&&!n){var r=t.getElementById(e);return r&&r.parentNode?[r]:[]}}:function(e,t,n){if(typeof t.getElementById!==F&&!n){var r=t.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==F&&r.getAttributeNode("id").value===e?[r]:void 0:[]}},TAG:pe?function(e,t){if(typeof t.getElementsByTagName!==F)return t.getElementsByTagName(e)}:function(e,t){var n=t.getElementsByTagName(e);if("*"!==e)return n;for(var r,i=[],o=0;r=n[o];o++)1===r.nodeType&&i.push(r);return i},NAME:me&&function(e,t){if(typeof t.getElementsByName!==F)return t.getElementsByName(name)},CLASS:ge&&function(e,t,n){if(typeof t.getElementsByClassName!==F&&!n)return t.getElementsByClassName(e)}},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(ue,""),e[3]=(e[4]||e[5]||"").replace(ue,""),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1]?(e[2]||w.error(e[0]),e[3]=+(e[3]?e[4]+(e[5]||1):2*("even"===e[2]||"odd"===e[2])),e[4]=+(e[6]+e[7]||"odd"===e[2])):e[2]&&w.error(e[0]),e},PSEUDO:function(e){var t,n;return ce.CHILD.test(e[0])?null:(e[3]?e[2]=e[3]:(t=e[4])&&(ie.test(t)&&(n=f(t,!0))&&(n=t.indexOf(")",t.length-n)-t.length)&&(t=t.slice(0,n),e[0]=e[0].slice(0,n)),e[2]=t),e.slice(0,3))}},filter:{ID:a?function(t){return t=t.replace(ue,""),function(e){return e.getAttribute("id")===t}}:function(n){return n=n.replace(ue,""),function(e){var t=typeof e.getAttributeNode!==F&&e.getAttributeNode("id");return t&&t.value===n}},TAG:function(t){return"*"===t?function(){return!0}:(t=t.replace(ue,"").toLowerCase(),function(e){return e.nodeName&&e.nodeName.toLowerCase()===t})},CLASS:function(e){var t=U[M][e+" "];return t||(t=new RegExp("(^|"+J+")"+e+"("+J+"|$)"))&&U(e,function(e){return t.test(e.className||typeof e.getAttribute!==F&&e.getAttribute("class")||"")})},ATTR:function(r,i,o){return function(e,t){var n=w.attr(e,r);return null==n?"!="===i:!i||(n+="","="===i?n===o:"!="===i?n!==o:"^="===i?o&&0===n.indexOf(o):"*="===i?o&&-1<n.indexOf(o):"$="===i?o&&n.substr(n.length-o.length)===o:"~="===i?-1<(" "+n+" ").indexOf(o):"|="===i&&(n===o||n.substr(0,o.length+1)===o+"-"))}},CHILD:function(n,e,i,o){return"nth"===n?function(e){var t,n,r=e.parentNode;if(1===i&&0===o)return!0;if(r)for(n=0,t=r.firstChild;t&&(1!==t.nodeType||(n++,e!==t));t=t.nextSibling);return(n-=o)===i||n%i==0&&0<=n/i}:function(e){var t=e;switch(n){case"only":case"first":for(;t=t.previousSibling;)if(1===t.nodeType)return!1;if("first"===n)return!0;t=e;case"last":for(;t=t.nextSibling;)if(1===t.nodeType)return!1;return!0}}},PSEUDO:function(e,o){var t,a=C.pseudos[e]||C.setFilters[e.toLowerCase()]||w.error("unsupported pseudo: "+e);return a[M]?a(o):1<a.length?(t=[e,e,"",o],C.setFilters.hasOwnProperty(e.toLowerCase())?z(function(e,t){for(var n,r=a(e,o),i=r.length;i--;)e[n=I.call(e,r[i])]=!(t[n]=r[i])}):function(e){return a(e,0,t)}):a}},pseudos:{not:z(function(e){var r=[],i=[],s=y(e.replace(te,"$1"));return s[M]?z(function(e,t,n,r){for(var i,o=s(e,null,r,[]),a=e.length;a--;)(i=o[a])&&(e[a]=!(t[a]=i))}):function(e,t,n){return r[0]=e,s(r,null,n,i),!i.pop()}}),has:z(function(t){return function(e){return 0<w(t,e).length}}),contains:z(function(t){return function(e){return-1<(e.textContent||e.innerText||s(e)).indexOf(t)}}),enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!C.pseudos.empty(e)},empty:function(e){var t;for(e=e.firstChild;e;){if("@"<e.nodeName||3===(t=e.nodeType)||4===t)return!1;e=e.nextSibling}return!0},header:function(e){return se.test(e.nodeName)},text:function(e){var t,n;return"input"===e.nodeName.toLowerCase()&&"text"===(t=e.type)&&(null==(n=e.getAttribute("type"))||n.toLowerCase()===t)},radio:n("radio"),checkbox:n("checkbox"),file:n("file"),password:n("password"),image:n("image"),submit:r("submit"),reset:r("reset"),button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return le.test(e.nodeName)},focus:function(e){var t=e.ownerDocument;return e===t.activeElement&&(!t.hasFocus||t.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},active:function(e){return e===e.ownerDocument.activeElement},first:i(function(){return[0]}),last:i(function(e,t){return[t-1]}),eq:i(function(e,t,n){return[n<0?n+t:n]}),even:i(function(e,t){for(var n=0;n<t;n+=2)e.push(n);return e}),odd:i(function(e,t){for(var n=1;n<t;n+=2)e.push(n);return e}),lt:i(function(e,t,n){for(var r=n<0?n+t:n;0<=--r;)e.push(r);return e}),gt:i(function(e,t,n){for(var r=n<0?n+t:n;++r<t;)e.push(r);return e})}},l=q.compareDocumentPosition?function(e,t){return e===t?(b=!0,0):(e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t):e.compareDocumentPosition)?-1:1}:function(e,t){if(e===t)return b=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,r,i=[],o=[],a=e.parentNode,s=t.parentNode,l=a;if(a===s)return c(e,t);if(!a)return-1;if(!s)return 1;for(;l;)i.unshift(l),l=l.parentNode;for(l=s;l;)o.unshift(l),l=l.parentNode;n=i.length,r=o.length;for(var u=0;u<n&&u<r;u++)if(i[u]!==o[u])return c(i[u],o[u]);return u===n?c(e,o[u],-1):c(i[u],t,1)},[0,0].sort(l),x=!b,w.uniqueSort=function(e){var t,n=[],r=1,i=0;if(b=x,e.sort(l),b){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},w.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},y=w.compile=function(e,t){var n,m,y,v,b,x,r=[],i=[],o=V[M][e+" "];if(!o){for(t||(t=f(e)),n=t.length;n--;)(o=h(t[n]))[M]?r.push(o):i.push(o);o=V(e,(m=i,v=0<(y=r).length,b=0<m.length,(x=function(e,t,n,r,i){var o,a,s,l=[],u=0,c="0",f=e&&[],p=null!=i,d=k,h=e||b&&C.find.TAG("*",i&&t.parentNode||t),g=B+=null==d?1:Math.E;for(p&&(k=t!==_&&t,N=x.el);null!=(o=h[c]);c++){if(b&&o){for(a=0;s=m[a];a++)if(s(o,t,n)){r.push(o);break}p&&(B=g,N=++x.el)}v&&((o=!s&&o)&&u--,e&&f.push(o))}if(u+=c,v&&c!==u){for(a=0;s=y[a];a++)s(f,l,t,n);if(e){if(0<u)for(;c--;)!f[c]&&!l[c]&&(l[c]=P.call(r));l=T(l)}R.apply(r,l),p&&!e&&0<l.length&&1<u+y.length&&w.uniqueSort(r)}return p&&(B=g,k=d),f}).el=0,v?z(x):x))}return o},_.querySelectorAll&&(S=u,A=/'|\\/g,j=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,D=[":focus"],L=[":active"],H=q.matchesSelector||q.mozMatchesSelector||q.webkitMatchesSelector||q.oMatchesSelector||q.msMatchesSelector,fe(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||D.push("\\["+J+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||D.push(":checked")}),fe(function(e){e.innerHTML="<p test=''></p>",e.querySelectorAll("[test^='']").length&&D.push("[*^$]="+J+"*(?:\"\"|'')"),e.innerHTML="<input type='hidden'/>",e.querySelectorAll(":enabled").length||D.push(":enabled",":disabled")}),D=new RegExp(D.join("|")),u=function(e,t,n,r,i){if(!r&&!i&&!D.test(e)){var o,a,s=!0,l=M,u=t,c=9===t.nodeType&&e;if(1===t.nodeType&&"object"!==t.nodeName.toLowerCase()){for(o=f(e),(s=t.getAttribute("id"))?l=s.replace(A,"\\$&"):t.setAttribute("id",l),l="[id='"+l+"'] ",a=o.length;a--;)o[a]=l+o[a].join("");u=ae.test(e)&&t.parentNode||t,c=o.join(",")}if(c)try{return R.apply(n,$.call(u.querySelectorAll(c),0)),n}catch(e){}finally{s||t.removeAttribute("id")}}return S(e,t,n,r,i)},H&&(fe(function(e){E=H.call(e,"div");try{H.call(e,"[test!='']:sizzle"),L.push("!=",Z)}catch(e){}}),L=new RegExp(L.join("|")),w.matchesSelector=function(e,t){if(t=t.replace(j,"='$1']"),!g(e)&&!L.test(t)&&!D.test(t))try{var n=H.call(e,t);if(n||E||e.document&&11!==e.document.nodeType)return n}catch(e){}return 0<w(t,null,null,[e]).length})),C.pseudos.nth=C.pseudos.eq,C.filters=o.prototype=C.pseudos,C.setFilters=new o,w.attr=ye.attr,ye.find=w,ye.expr=w.selectors,ye.expr[":"]=ye.expr.pseudos,ye.unique=w.uniqueSort,ye.text=w.getText,ye.isXMLDoc=w.isXML,ye.contains=w.contains}(m);var Ee=/Until$/,Se=/^(?:parents|prev(?:Until|All))/,Ae=/^.[^:#\[\.,]*$/,je=ye.expr.match.needsContext,De={children:!0,contents:!0,next:!0,prev:!0};ye.fn.extend({find:function(e){var t,n,r,i,o,a,s=this;if("string"!=typeof e)return ye(e).filter(function(){for(t=0,n=s.length;t<n;t++)if(ye.contains(s[t],this))return!0});for(a=this.pushStack("","find",e),t=0,n=this.length;t<n;t++)if(r=a.length,ye.find(e,this[t],a),0<t)for(i=r;i<a.length;i++)for(o=0;o<r;o++)if(a[o]===a[i]){a.splice(i--,1);break}return a},has:function(e){var t,n=ye(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(ye.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(r(this,e,!1),"not",e)},filter:function(e){return this.pushStack(r(this,e,!0),"filter",e)},is:function(e){return!!e&&("string"==typeof e?je.test(e)?0<=ye(e,this.context).index(this[0]):0<ye.filter(e,this).length:0<this.filter(e).length)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=je.test(e)||"string"!=typeof e?ye(e,t||this.context):0;r<i;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?-1<a.index(n):ye.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return o=1<o.length?ye.unique(o):o,this.pushStack(o,"closest",e)},index:function(e){return e?"string"==typeof e?ye.inArray(this[0],ye(e)):ye.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.prevAll().length:-1},add:function(e,t){var n="string"==typeof e?ye(e,t):ye.makeArray(e&&e.nodeType?[e]:e),r=ye.merge(this.get(),n);return this.pushStack(i(n[0])||i(r[0])?r:ye.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ye.fn.andSelf=ye.fn.addBack,ye.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ye.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ye.dir(e,"parentNode",n)},next:function(e){return t(e,"nextSibling")},prev:function(e){return t(e,"previousSibling")},nextAll:function(e){return ye.dir(e,"nextSibling")},prevAll:function(e){return ye.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ye.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ye.dir(e,"previousSibling",n)},siblings:function(e){return ye.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ye.sibling(e.firstChild)},contents:function(e){return ye.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ye.merge([],e.childNodes)}},function(r,i){ye.fn[r]=function(e,t){var n=ye.map(this,i,e);return Ee.test(r)||(t=e),t&&"string"==typeof t&&(n=ye.filter(t,n)),n=1<this.length&&!De[r]?ye.unique(n):n,1<this.length&&Se.test(r)&&(n=n.reverse()),this.pushStack(n,r,W.call(arguments).join(","))}}),ye.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?ye.find.matchesSelector(t[0],e)?[t[0]]:[]:ye.find.matches(e,t)},dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(n===C||1!==i.nodeType||!ye(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var Le,He,Fe="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Me=/ jQuery\d+="(?:null|\d+)"/g,Oe=/^\s+/,_e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,qe=/<([\w:]+)/,Be=/<tbody/i,We=/<|&#?\w+;/,Pe=/<(?:script|style|link)/i,Re=/<(?:script|object|embed|option|style)/i,$e=new RegExp("<(?:"+Fe+")[\\s/>]","i"),Ie=/^(?:checkbox|radio)$/,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/\/(java|ecma)script/i,Ue=/^\s*<!(?:\[CDATA\[|\-\-)|[\]\-]{2}>\s*$/g,Ye={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],area:[1,"<map>","</map>"],_default:[0,"",""]},Ve=y(F),Je=Ve.appendChild(F.createElement("div"));Ye.optgroup=Ye.option,Ye.tbody=Ye.tfoot=Ye.colgroup=Ye.caption=Ye.thead,Ye.th=Ye.td,ye.support.htmlSerialize||(Ye._default=[1,"X<div>","</div>"]),ye.fn.extend({text:function(e){return ye.access(this,function(e){return e===C?ye.text(this):this.empty().append((this[0]&&this[0].ownerDocument||F).createTextNode(e))},null,e,arguments.length)},wrapAll:function(t){if(ye.isFunction(t))return this.each(function(e){ye(this).wrapAll(t.call(this,e))});if(this[0]){var e=ye(t,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(n){return ye.isFunction(n)?this.each(function(e){ye(this).wrapInner(n.call(this,e))}):this.each(function(){var e=ye(this),t=e.contents();t.length?t.wrapAll(n):e.append(n)})},wrap:function(t){var n=ye.isFunction(t);return this.each(function(e){ye(this).wrapAll(n?t.call(this,e):t)})},unwrap:function(){return this.parent().each(function(){ye.nodeName(this,"body")||ye(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){if(!i(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this)});if(arguments.length){var e=ye.clean(arguments);return this.pushStack(ye.merge(e,this),"before",this.selector)}},after:function(){if(!i(this[0]))return this.domManip(arguments,!1,function(e){this.parentNode.insertBefore(e,this.nextSibling)});if(arguments.length){var e=ye.clean(arguments);return this.pushStack(ye.merge(this,e),"after",this.selector)}},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)e&&!ye.filter(e,[n]).length||(!t&&1===n.nodeType&&(ye.cleanData(n.getElementsByTagName("*")),ye.cleanData([n])),n.parentNode&&n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)for(1===e.nodeType&&ye.cleanData(e.getElementsByTagName("*"));e.firstChild;)e.removeChild(e.firstChild);return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ye.clone(this,e,t)})},html:function(e){return ye.access(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===C)return 1===t.nodeType?t.innerHTML.replace(Me,""):C;if("string"==typeof e&&!Pe.test(e)&&(ye.support.htmlSerialize||!$e.test(e))&&(ye.support.leadingWhitespace||!Oe.test(e))&&!Ye[(qe.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(_e,"<$1></$2>");try{for(;n<r;n++)1===(t=this[n]||{}).nodeType&&(ye.cleanData(t.getElementsByTagName("*")),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(r){return i(this[0])?this.length?this.pushStack(ye(ye.isFunction(r)?r():r),"replaceWith",r):this:ye.isFunction(r)?this.each(function(e){var t=ye(this),n=t.html();t.replaceWith(r.call(this,e,n))}):("string"!=typeof r&&(r=ye(r).detach()),this.each(function(){var e=this.nextSibling,t=this.parentNode;ye(this).remove(),e?ye(e).before(r):ye(t).append(r)}))},detach:function(e){return this.remove(e,!0)},domManip:function(n,r,i){var e,t,o,a,s,l,u=0,c=(n=[].concat.apply([],n))[0],f=[],p=this.length;if(!ye.support.checkClone&&1<p&&"string"==typeof c&&ze.test(c))return this.each(function(){ye(this).domManip(n,r,i)});if(ye.isFunction(c))return this.each(function(e){var t=ye(this);n[0]=c.call(this,e,r?t.html():C),t.domManip(n,r,i)});if(this[0]){if(t=(o=(e=ye.buildFragment(n,this,f)).fragment).firstChild,1===o.childNodes.length&&(o=t),t)for(r=r&&ye.nodeName(t,"tr"),a=e.cacheable||p-1;u<p;u++)i.call(r&&ye.nodeName(this[u],"table")?(s=this[u],l="tbody",s.getElementsByTagName(l)[0]||s.appendChild(s.ownerDocument.createElement(l))):this[u],u===a?o:ye.clone(o,!0,!0));o=t=null,f.length&&ye.each(f,function(e,t){t.src?ye.ajax?ye.ajax({url:t.src,type:"GET",dataType:"script",async:!1,global:!1,throws:!0}):ye.error("no ajax"):ye.globalEval((t.text||t.textContent||t.innerHTML||"").replace(Ue,"")),t.parentNode&&t.parentNode.removeChild(t)})}return this}}),ye.buildFragment=function(e,t,n){var r,i,o,a=e[0];return t=(t=!(t=t||F).nodeType&&t[0]||t).ownerDocument||t,1===e.length&&"string"==typeof a&&a.length<512&&t===F&&"<"===a.charAt(0)&&!Re.test(a)&&(ye.support.checkClone||!ze.test(a))&&(ye.support.html5Clone||!$e.test(a))&&(i=!0,o=(r=ye.fragments[a])!==C),r||(r=t.createDocumentFragment(),ye.clean(e,t,r,n),i&&(ye.fragments[a]=o&&r)),{fragment:r,cacheable:i}},ye.fragments={},ye.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(s,l){ye.fn[s]=function(e){var t,n=0,r=[],i=ye(e),o=i.length,a=1===this.length&&this[0].parentNode;if((null==a||a&&11===a.nodeType&&1===a.childNodes.length)&&1===o)return i[l](this[0]),this;for(;n<o;n++)t=(0<n?this.clone(!0):this).get(),ye(i[n])[l](t),r=r.concat(t);return this.pushStack(r,s,i.selector)}}),ye.extend({clone:function(e,t,n){var r,i,o,a;if(ye.support.html5Clone||ye.isXMLDoc(e)||!$e.test("<"+e.nodeName+">")?a=e.cloneNode(!0):(Je.innerHTML=e.outerHTML,Je.removeChild(a=Je.firstChild)),!(ye.support.noCloneEvent&&ye.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ye.isXMLDoc(e)))for(f(e,a),r=p(e),i=p(a),o=0;r[o];++o)i[o]&&f(r[o],i[o]);if(t&&(l(e,a),n))for(r=p(e),i=p(a),o=0;r[o];++o)l(r[o],i[o]);return r=i=null,a},clean:function(e,t,n,r){var i,o,a,s,l,u,c,f,p,d,h,g=t===F&&Ve,m=[];for(t&&void 0!==t.createDocumentFragment||(t=F),i=0;null!=(a=e[i]);i++)if("number"==typeof a&&(a+=""),a){if("string"==typeof a)if(We.test(a)){for(g=g||y(t),c=t.createElement("div"),g.appendChild(c),a=a.replace(_e,"<$1></$2>"),s=(qe.exec(a)||["",""])[1].toLowerCase(),u=(l=Ye[s]||Ye._default)[0],c.innerHTML=l[1]+a+l[2];u--;)c=c.lastChild;if(!ye.support.tbody)for(f=Be.test(a),o=(p="table"!==s||f?"<table>"!==l[1]||f?[]:c.childNodes:c.firstChild&&c.firstChild.childNodes).length-1;0<=o;--o)ye.nodeName(p[o],"tbody")&&!p[o].childNodes.length&&p[o].parentNode.removeChild(p[o]);!ye.support.leadingWhitespace&&Oe.test(a)&&c.insertBefore(t.createTextNode(Oe.exec(a)[0]),c.firstChild),a=c.childNodes,c.parentNode.removeChild(c)}else a=t.createTextNode(a);a.nodeType?m.push(a):ye.merge(m,a)}if(c&&(a=c=g=null),!ye.support.appendChecked)for(i=0;null!=(a=m[i]);i++)ye.nodeName(a,"input")?v(a):void 0!==a.getElementsByTagName&&ye.grep(a.getElementsByTagName("input"),v);if(n)for(d=function(e){if(!e.type||Xe.test(e.type))return r?r.push(e.parentNode?e.parentNode.removeChild(e):e):n.appendChild(e)},i=0;null!=(a=m[i]);i++)ye.nodeName(a,"script")&&d(a)||(n.appendChild(a),void 0!==a.getElementsByTagName&&(h=ye.grep(ye.merge([],a.getElementsByTagName("script")),d),m.splice.apply(m,[i+1,0].concat(h)),i+=h.length));return m},cleanData:function(e,t){for(var n,r,i,o,a=0,s=ye.expando,l=ye.cache,u=ye.support.deleteExpando,c=ye.event.special;null!=(i=e[a]);a++)if((t||ye.acceptData(i))&&(n=(r=i[s])&&l[r])){if(n.events)for(o in n.events)c[o]?ye.event.remove(i,o):ye.removeEvent(i,o,n.handle);l[r]&&(delete l[r],u?delete i[s]:i.removeAttribute?i.removeAttribute(s):i[s]=null,ye.deletedIds.push(r))}}}),ye.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||e.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},He={},(Le=ye.uaMatch(O.userAgent)).browser&&(He[Le.browser]=!0,He.version=Le.version),He.chrome?He.webkit=!0:He.webkit&&(He.safari=!0),ye.browser=He,ye.sub=function(){function n(e,t){return new n.fn.init(e,t)}ye.extend(!0,n,this),n.superclass=this,((n.fn=n.prototype=this()).constructor=n).sub=this.sub,n.fn.init=function(e,t){return t&&t instanceof ye&&!(t instanceof n)&&(t=n(t)),ye.fn.init.call(this,e,t,r)},n.fn.init.prototype=n.fn;var r=n(F);return n};var Ge,Qe,Ke,Ze=/alpha\([^)]*\)/i,et=/opacity=([^)]*)/,tt=/^(top|right|bottom|left)$/,nt=/^(none|table(?!-c[ea]).+)/,rt=/^margin/,it=new RegExp("^("+z+")(.*)$","i"),ot=new RegExp("^("+z+")(?!px)[a-z%]+$","i"),at=new RegExp("^([-+])=("+z+")","i"),st={BODY:"block"},lt={position:"absolute",visibility:"hidden",display:"block"},ut={letterSpacing:0,fontWeight:400},ct=["Top","Right","Bottom","Left"],ft=["Webkit","O","Moz","ms"],pt=ye.fn.toggle;ye.fn.extend({css:function(e,t){return ye.access(this,function(e,t,n){return n!==C?ye.style(e,t,n):ye.css(e,t)},e,t,1<arguments.length)},show:function(){return e(this,!0)},hide:function(){return e(this)},toggle:function(e,t){var n="boolean"==typeof e;return ye.isFunction(e)&&ye.isFunction(t)?pt.apply(this,arguments):this.each(function(){(n?e:b(this))?ye(this).show():ye(this).hide()})}}),ye.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Ge(e,"opacity");return""===n?"1":n}}}},cssNumber:{fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:ye.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ye.camelCase(t),l=e.style;if(t=ye.cssProps[s]||(ye.cssProps[s]=d(l,s)),a=ye.cssHooks[t]||ye.cssHooks[s],n===C)return a&&"get"in a&&(i=a.get(e,!1,r))!==C?i:l[t];if("string"===(o=typeof n)&&(i=at.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ye.css(e,t)),o="number"),!(null==n||"number"===o&&isNaN(n)||("number"===o&&!ye.cssNumber[s]&&(n+="px"),a&&"set"in a&&(n=a.set(e,n,r))===C)))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var i,o,a,s=ye.camelCase(t);return t=ye.cssProps[s]||(ye.cssProps[s]=d(e.style,s)),(a=ye.cssHooks[t]||ye.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,r)),i===C&&(i=Ge(e,t)),"normal"===i&&t in ut&&(i=ut[t]),n||r!==C?(o=parseFloat(i),n||ye.isNumeric(o)?o||0:i):i},swap:function(e,t,n){var r,i,o={};for(i in t)o[i]=e.style[i],e.style[i]=t[i];for(i in r=n.call(e),t)e.style[i]=o[i];return r}}),m.getComputedStyle?Ge=function(e,t){var n,r,i,o,a=m.getComputedStyle(e,null),s=e.style;return a&&(""===(n=a.getPropertyValue(t)||a[t])&&!ye.contains(e.ownerDocument,e)&&(n=ye.style(e,t)),ot.test(n)&&rt.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=n,n=a.width,s.width=r,s.minWidth=i,s.maxWidth=o)),n}:F.documentElement.currentStyle&&(Ge=function(e,t){var n,r,i=e.currentStyle&&e.currentStyle[t],o=e.style;return null==i&&o&&o[t]&&(i=o[t]),ot.test(i)&&!tt.test(t)&&(n=o.left,(r=e.runtimeStyle&&e.runtimeStyle.left)&&(e.runtimeStyle.left=e.currentStyle.left),o.left="fontSize"===t?"1em":i,i=o.pixelLeft+"px",o.left=n,r&&(e.runtimeStyle.left=r)),""===i?"auto":i}),ye.each(["height","width"],function(e,r){ye.cssHooks[r]={get:function(e,t,n){if(t)return 0===e.offsetWidth&&nt.test(Ge(e,"display"))?ye.swap(e,lt,function(){return o(e,r,n)}):o(e,r,n)},set:function(e,t,n){return a(0,t,n?h(e,r,n,ye.support.boxSizing&&"border-box"===ye.css(e,"boxSizing")):0)}}}),ye.support.opacity||(ye.cssHooks.opacity={get:function(e,t){return et.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ye.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";(n.zoom=1)<=t&&""===ye.trim(o.replace(Ze,""))&&n.removeAttribute&&(n.removeAttribute("filter"),r&&!r.filter)||(n.filter=Ze.test(o)?o.replace(Ze,i):o+" "+i)}}),ye(function(){ye.support.reliableMarginRight||(ye.cssHooks.marginRight={get:function(e,t){return ye.swap(e,{display:"inline-block"},function(){if(t)return Ge(e,"marginRight")})}}),!ye.support.pixelPosition&&ye.fn.position&&ye.each(["top","left"],function(e,r){ye.cssHooks[r]={get:function(e,t){if(t){var n=Ge(e,r);return ot.test(n)?ye(e).position()[r]+"px":n}}}})}),ye.expr&&ye.expr.filters&&(ye.expr.filters.hidden=function(e){return 0===e.offsetWidth&&0===e.offsetHeight||!ye.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||Ge(e,"display"))},ye.expr.filters.visible=function(e){return!ye.expr.filters.hidden(e)}),ye.each({margin:"",padding:"",border:"Width"},function(i,o){ye.cssHooks[i+o]={expand:function(e){var t,n="string"==typeof e?e.split(" "):[e],r={};for(t=0;t<4;t++)r[i+ct[t]+o]=n[t]||n[t-2]||n[0];return r}},rt.test(i)||(ye.cssHooks[i+o].set=a)});var dt=/%20/g,ht=/\[\]$/,gt=/\r?\n/g,mt=/^(?:color|date|datetime|datetime-local|email|hidden|month|number|password|range|search|tel|text|time|url|week)$/i,yt=/^(?:select|textarea)/i;ye.fn.extend({serialize:function(){return ye.param(this.serializeArray())},serializeArray:function(){return this.map(function(){return this.elements?ye.makeArray(this.elements):this}).filter(function(){return this.name&&!this.disabled&&(this.checked||yt.test(this.nodeName)||mt.test(this.type))}).map(function(e,n){var t=ye(this).val();return null==t?null:ye.isArray(t)?ye.map(t,function(e,t){return{name:n.name,value:e.replace(gt,"\r\n")}}):{name:n.name,value:t.replace(gt,"\r\n")}}).get()}}),ye.param=function(e,t){var n,r=[],i=function(e,t){t=ye.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(t===C&&(t=ye.ajaxSettings&&ye.ajaxSettings.traditional),ye.isArray(e)||e.jquery&&!ye.isPlainObject(e))ye.each(e,function(){i(this.name,this.value)});else for(n in e)g(n,e[n],t,i);return r.join("&").replace(dt,"+")};var vt,bt,xt=/#.*$/,wt=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Tt=/^(?:GET|HEAD)$/,Nt=/^\/\//,Ct=/\?/,kt=/<script\b[^<]*(?:(?!<\/script>)<[^<]*)*<\/script>/gi,Et=/([?&])_=[^&]*/,St=/^([\w\+\.\-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,At=ye.fn.load,jt={},Dt={},Lt=["*/"]+["*"];try{bt=M.href}catch(e){(bt=F.createElement("a")).href="",bt=bt.href}vt=St.exec(bt.toLowerCase())||[],ye.fn.load=function(e,t,n){if("string"!=typeof e&&At)return At.apply(this,arguments);if(!this.length)return this;var r,i,o,a=this,s=e.indexOf(" ");return 0<=s&&(r=e.slice(s,e.length),e=e.slice(0,s)),ye.isFunction(t)?(n=t,t=C):t&&"object"==typeof t&&(i="POST"),ye.ajax({url:e,type:i,dataType:"html",data:t,complete:function(e,t){n&&a.each(n,o||[e.responseText,t,e])}}).done(function(e){o=arguments,a.html(r?ye("<div>").append(e.replace(kt,"")).find(r):e)}),this},ye.each("ajaxStart ajaxStop ajaxComplete ajaxError ajaxSuccess ajaxSend".split(" "),function(e,t){ye.fn[t]=function(e){return this.on(t,e)}}),ye.each(["get","post"],function(e,i){ye[i]=function(e,t,n,r){return ye.isFunction(t)&&(r=r||n,n=t,t=C),ye.ajax({type:i,url:e,data:t,success:n,dataType:r})}}),ye.extend({getScript:function(e,t){return ye.get(e,C,t,"script")},getJSON:function(e,t,n){return ye.get(e,t,n,"json")},ajaxSetup:function(e,t){return t?T(e,ye.ajaxSettings):(t=e,e=ye.ajaxSettings),T(e,t),e},ajaxSettings:{url:bt,isLocal:/^(?:about|app|app\-storage|.+\-extension|file|res|widget):$/.test(vt[1]),global:!0,type:"GET",contentType:"application/x-www-form-urlencoded; charset=UTF-8",processData:!0,async:!0,accepts:{xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript","*":Lt},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":m.String,"text html":!0,"text json":ye.parseJSON,"text xml":ye.parseXML},flatOptions:{context:!0,url:!0}},ajaxPrefilter:w(jt),ajaxTransport:w(Dt),ajax:function(e,t){function n(e,t,n,r){var i,o,a,s,l,u=t;2!==w&&(w=2,d&&clearTimeout(d),p=C,f=r||"",T.readyState=0<e?4:0,n&&(s=function(e,t,n){var r,i,o,a,s=e.contents,l=e.dataTypes,u=e.responseFields;for(i in u)i in n&&(t[u[i]]=n[i]);for(;"*"===l[0];)l.shift(),r===C&&(r=e.mimeType||t.getResponseHeader("content-type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}if(o)return o!==l[0]&&l.unshift(o),n[o]}(g,T,n)),200<=e&&e<300||304===e?(g.ifModified&&((l=T.getResponseHeader("Last-Modified"))&&(ye.lastModified[c]=l),(l=T.getResponseHeader("Etag"))&&(ye.etag[c]=l)),i=304===e?(u="notmodified",!0):(u=(i=function(e,t){var n,r,i,o,a=e.dataTypes.slice(),s=a[0],l={},u=0;if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a[1])for(n in e.converters)l[n.toLowerCase()]=e.converters[n];for(;i=a[++u];)if("*"!==i){if("*"!==s&&s!==i){if(!(n=l[s+" "+i]||l["* "+i]))for(r in l)if((o=r.split(" "))[1]===i&&(n=l[s+" "+o[0]]||l["* "+o[0]])){!0===n?n=l[r]:!0!==l[r]&&(i=o[0],a.splice(u--,0,i));break}if(!0!==n)if(n&&e.throws)t=n(t);else try{t=n(t)}catch(e){return{state:"parsererror",error:n?e:"No conversion from "+s+" to "+i}}}s=i}return{state:"success",data:t}}(g,s)).state,o=i.data,!(a=i.error))):(a=u)&&!e||(u="error",e<0&&(e=0)),T.status=e,T.statusText=(t||u)+"",i?v.resolveWith(m,[o,u,T]):v.rejectWith(m,[T,u,a]),T.statusCode(x),x=C,h&&y.trigger("ajax"+(i?"Success":"Error"),[T,g,i?o:a]),b.fireWith(m,[T,u]),h&&(y.trigger("ajaxComplete",[T,g]),--ye.active||ye.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=C),t=t||{};var c,f,r,p,d,i,h,o,g=ye.ajaxSetup({},t),m=g.context||g,y=m!==g&&(m.nodeType||m instanceof ye)?ye(m):ye.event,v=ye.Deferred(),b=ye.Callbacks("once memory"),x=g.statusCode||{},a={},s={},w=0,l="canceled",T={readyState:0,setRequestHeader:function(e,t){if(!w){var n=e.toLowerCase();e=s[n]=s[n]||e,a[e]=t}return this},getAllResponseHeaders:function(){return 2===w?f:null},getResponseHeader:function(e){var t;if(2===w){if(!r)for(r={};t=wt.exec(f);)r[t[1].toLowerCase()]=t[2];t=r[e.toLowerCase()]}return t===C?null:t},overrideMimeType:function(e){return w||(g.mimeType=e),this},abort:function(e){return e=e||l,p&&p.abort(e),n(0,e),this}};if(v.promise(T),T.success=T.done,T.error=T.fail,T.complete=b.add,T.statusCode=function(e){var t;if(e)if(w<2)for(t in e)x[t]=[x[t],e[t]];else t=e[T.status],T.always(t);return this},g.url=((e||g.url)+"").replace(xt,"").replace(Nt,vt[1]+"//"),g.dataTypes=ye.trim(g.dataType||"*").toLowerCase().split(U),null==g.crossDomain&&(i=St.exec(g.url.toLowerCase()),g.crossDomain=!(!i||i[1]===vt[1]&&i[2]===vt[2]&&(i[3]||("http:"===i[1]?80:443))==(vt[3]||("http:"===vt[1]?80:443)))),g.data&&g.processData&&"string"!=typeof g.data&&(g.data=ye.param(g.data,g.traditional)),k(jt,g,t,T),2===w)return T;if(h=g.global,g.type=g.type.toUpperCase(),g.hasContent=!Tt.test(g.type),h&&0==ye.active++&&ye.event.trigger("ajaxStart"),!g.hasContent&&(g.data&&(g.url+=(Ct.test(g.url)?"&":"?")+g.data,delete g.data),c=g.url,!1===g.cache)){var u=ye.now(),N=g.url.replace(Et,"$1_="+u);g.url=N+(N===g.url?(Ct.test(g.url)?"&":"?")+"_="+u:"")}for(o in(g.data&&g.hasContent&&!1!==g.contentType||t.contentType)&&T.setRequestHeader("Content-Type",g.contentType),g.ifModified&&(c=c||g.url,ye.lastModified[c]&&T.setRequestHeader("If-Modified-Since",ye.lastModified[c]),ye.etag[c]&&T.setRequestHeader("If-None-Match",ye.etag[c])),T.setRequestHeader("Accept",g.dataTypes[0]&&g.accepts[g.dataTypes[0]]?g.accepts[g.dataTypes[0]]+("*"!==g.dataTypes[0]?", "+Lt+"; q=0.01":""):g.accepts["*"]),g.headers)T.setRequestHeader(o,g.headers[o]);if(!g.beforeSend||!1!==g.beforeSend.call(m,T,g)&&2!==w){for(o in l="abort",{success:1,error:1,complete:1})T[o](g[o]);if(p=k(Dt,g,t,T)){T.readyState=1,h&&y.trigger("ajaxSend",[T,g]),g.async&&0<g.timeout&&(d=setTimeout(function(){T.abort("timeout")},g.timeout));try{w=1,p.send(a,n)}catch(e){if(!(w<2))throw e;n(-1,e)}}else n(-1,"No Transport");return T}return T.abort()},active:0,lastModified:{},etag:{}});var Ht=[],Ft=/\?/,Mt=/(=)\?(?=&|$)|\?\?/,Ot=ye.now();ye.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Ht.pop()||ye.expando+"_"+Ot++;return this[e]=!0,e}}),ye.ajaxPrefilter("json jsonp",function(e,t,n){var r,i,o,a=e.data,s=e.url,l=!1!==e.jsonp,u=l&&Mt.test(s),c=l&&!u&&"string"==typeof a&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Mt.test(a);if("jsonp"===e.dataTypes[0]||u||c)return r=e.jsonpCallback=ye.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,i=m[r],u?e.url=s.replace(Mt,"$1"+r):c?e.data=a.replace(Mt,"$1"+r):l&&(e.url+=(Ft.test(s)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return o||ye.error(r+" was not called"),o[0]},e.dataTypes[0]="json",m[r]=function(){o=arguments},n.always(function(){m[r]=i,e[r]&&(e.jsonpCallback=t.jsonpCallback,Ht.push(r)),o&&ye.isFunction(i)&&i(o[0]),o=i=C}),"script"}),ye.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/javascript|ecmascript/},converters:{"text script":function(e){return ye.globalEval(e),e}}}),ye.ajaxPrefilter("script",function(e){e.cache===C&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ye.ajaxTransport("script",function(t){if(t.crossDomain){var r,i=F.head||F.getElementsByTagName("head")[0]||F.documentElement;return{send:function(e,n){(r=F.createElement("script")).async="async",t.scriptCharset&&(r.charset=t.scriptCharset),r.src=t.url,r.onload=r.onreadystatechange=function(e,t){(t||!r.readyState||/loaded|complete/.test(r.readyState))&&(r.onload=r.onreadystatechange=null,i&&r.parentNode&&i.removeChild(r),r=C,t||n(200,"success"))},i.insertBefore(r,i.firstChild)},abort:function(){r&&r.onload(0,1)}}}});var _t,qt,Bt=!!m.ActiveXObject&&function(){for(var e in _t)_t[e](0,1)},Wt=0;ye.ajaxSettings.xhr=m.ActiveXObject?function(){return!this.isLocal&&N()||function(){try{return new m.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}()}:N,qt=ye.ajaxSettings.xhr(),ye.extend(ye.support,{ajax:!!qt,cors:!!qt&&"withCredentials"in qt}),ye.support.ajax&&ye.ajaxTransport(function(c){var f;if(!c.crossDomain||ye.support.cors)return{send:function(e,s){var l,t,u=c.xhr();if(c.username?u.open(c.type,c.url,c.async,c.username,c.password):u.open(c.type,c.url,c.async),c.xhrFields)for(t in c.xhrFields)u[t]=c.xhrFields[t];c.mimeType&&u.overrideMimeType&&u.overrideMimeType(c.mimeType),!c.crossDomain&&!e["X-Requested-With"]&&(e["X-Requested-With"]="XMLHttpRequest");try{for(t in e)u.setRequestHeader(t,e[t])}catch(e){}u.send(c.hasContent&&c.data||null),f=function(e,t){var n,r,i,o,a;try{if(f&&(t||4===u.readyState))if(f=C,l&&(u.onreadystatechange=ye.noop,Bt&&delete _t[l]),t)4!==u.readyState&&u.abort();else{n=u.status,i=u.getAllResponseHeaders(),o={},(a=u.responseXML)&&a.documentElement&&(o.xml=a);try{o.text=u.responseText}catch(e){}try{r=u.statusText}catch(e){r=""}n||!c.isLocal||c.crossDomain?1223===n&&(n=204):n=o.text?200:404}}catch(e){t||s(-1,e)}o&&s(n,r,o,i)},c.async?4===u.readyState?setTimeout(f,0):(l=++Wt,Bt&&(_t||(_t={},ye(m).unload(Bt)),_t[l]=f),u.onreadystatechange=f):f()},abort:function(){f&&f(0,1)}}});var Pt,Rt,$t=/^(?:toggle|show|hide)$/,It=new RegExp("^(?:([-+])=|)("+z+")([a-z%]*)$","i"),zt=/queueHooks$/,Xt=[function(t,e,n){var r,i,o,a,s,l,u,c,f,p=this,d=t.style,h={},g=[],m=t.nodeType&&b(t);for(r in n.queue||(null==(c=ye._queueHooks(t,"fx")).unqueued&&(c.unqueued=0,f=c.empty.fire,c.empty.fire=function(){c.unqueued||f()}),c.unqueued++,p.always(function(){p.always(function(){c.unqueued--,ye.queue(t,"fx").length||c.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===ye.css(t,"display")&&"none"===ye.css(t,"float")&&(ye.support.inlineBlockNeedsLayout&&"inline"!==x(t.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",ye.support.shrinkWrapBlocks||p.done(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]})),e)if(o=e[r],$t.exec(o)){if(delete e[r],l=l||"toggle"===o,o===(m?"hide":"show"))continue;g.push(r)}if(a=g.length){"hidden"in(s=ye._data(t,"fxshow")||ye._data(t,"fxshow",{}))&&(m=s.hidden),l&&(s.hidden=!m),m?ye(t).show():p.done(function(){ye(t).hide()}),p.done(function(){var e;for(e in ye.removeData(t,"fxshow",!0),h)ye.style(t,e,h[e])});for(r=0;r<a;r++)i=g[r],u=p.createTween(i,m?s[i]:0),h[i]=s[i]||ye.style(t,i),i in s||(s[i]=u.start,m&&(u.end=u.start,u.start="width"===i||"height"===i?1:0))}}],Ut={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=It.exec(t),a=i.cur(),s=+a||0,l=1,u=20;if(o){if(n=+o[2],"px"!==(r=o[3]||(ye.cssNumber[e]?"":"px"))&&s)for(s=ye.css(i.elem,e,!0)||n||1;s/=l=l||".5",ye.style(i.elem,e,s+r),l!==(l=i.cur()/a)&&1!==l&&--u;);i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};ye.Animation=ye.extend(S,{tweener:function(e,t){for(var n,r=0,i=(e=ye.isFunction(e)?(t=e,["*"]):e.split(" ")).length;r<i;r++)n=e[r],Ut[n]=Ut[n]||[],Ut[n].unshift(t)},prefilter:function(e,t){t?Xt.unshift(e):Xt.push(e)}}),((ye.Tween=A).prototype={constructor:A,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ye.cssNumber[n]?"":"px")},cur:function(){var e=A.propHooks[this.prop];return e&&e.get?e.get(this):A.propHooks._default.get(this)},run:function(e){var t,n=A.propHooks[this.prop];return this.options.duration?this.pos=t=ye.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):A.propHooks._default.set(this),this}}).init.prototype=A.prototype,(A.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ye.css(e.elem,e.prop,!1,""))&&"auto"!==t?t:0:e.elem[e.prop]},set:function(e){ye.fx.step[e.prop]?ye.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ye.cssProps[e.prop]]||ye.cssHooks[e.prop])?ye.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}}).scrollTop=A.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ye.each(["toggle","show","hide"],function(r,i){var o=ye.fn[i];ye.fn[i]=function(e,t,n){return null==e||"boolean"==typeof e||!r&&ye.isFunction(e)&&ye.isFunction(t)?o.apply(this,arguments):this.animate(j(i,!0),e,t,n)}}),ye.fn.extend({fadeTo:function(e,t,n,r){return this.filter(b).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(t,e,n,r){var i=ye.isEmptyObject(t),o=ye.speed(e,n,r),a=function(){var e=S(this,ye.extend({},t),o);i&&e.stop(!0)};return i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(i,e,o){var a=function(e){var t=e.stop;delete e.stop,t(o)};return"string"!=typeof i&&(o=e,e=i,i=C),e&&!1!==i&&this.queue(i||"fx",[]),this.each(function(){var e=!0,t=null!=i&&i+"queueHooks",n=ye.timers,r=ye._data(this);if(t)r[t]&&r[t].stop&&a(r[t]);else for(t in r)r[t]&&r[t].stop&&zt.test(t)&&a(r[t]);for(t=n.length;t--;)n[t].elem===this&&(null==i||n[t].queue===i)&&(n[t].anim.stop(o),e=!1,n.splice(t,1));(e||!o)&&ye.dequeue(this,i)})}}),ye.each({slideDown:j("show"),slideUp:j("hide"),slideToggle:j("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,r){ye.fn[e]=function(e,t,n){return this.animate(r,e,t,n)}}),ye.speed=function(e,t,n){var r=e&&"object"==typeof e?ye.extend({},e):{complete:n||!n&&t||ye.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ye.isFunction(t)&&t};return r.duration=ye.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ye.fx.speeds?ye.fx.speeds[r.duration]:ye.fx.speeds._default,null!=r.queue&&!0!==r.queue||(r.queue="fx"),r.old=r.complete,r.complete=function(){ye.isFunction(r.old)&&r.old.call(this),r.queue&&ye.dequeue(this,r.queue)},r},ye.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ye.timers=[],ye.fx=A.prototype.init,ye.fx.tick=function(){var e,t=ye.timers,n=0;for(Pt=ye.now();n<t.length;n++)!(e=t[n])()&&t[n]===e&&t.splice(n--,1);t.length||ye.fx.stop(),Pt=C},ye.fx.timer=function(e){e()&&ye.timers.push(e)&&!Rt&&(Rt=setInterval(ye.fx.tick,ye.fx.interval))},ye.fx.interval=13,ye.fx.stop=function(){clearInterval(Rt),Rt=null},ye.fx.speeds={slow:600,fast:200,_default:400},ye.fx.step={},ye.expr&&ye.expr.filters&&(ye.expr.filters.animated=function(t){return ye.grep(ye.timers,function(e){return t===e.elem}).length});var Yt=/^(?:body|html)$/i;ye.fn.offset=function(t){if(arguments.length)return t===C?this:this.each(function(e){ye.offset.setOffset(this,t,e)});var e,n,r,i,o,a,s,l={top:0,left:0},u=this[0],c=u&&u.ownerDocument;return c?(n=c.body)===u?ye.offset.bodyOffset(u):(e=c.documentElement,ye.contains(e,u)?(void 0!==u.getBoundingClientRect&&(l=u.getBoundingClientRect()),r=D(c),i=e.clientTop||n.clientTop||0,o=e.clientLeft||n.clientLeft||0,a=r.pageYOffset||e.scrollTop,s=r.pageXOffset||e.scrollLeft,{top:l.top+a-i,left:l.left+s-o}):l):void 0},ye.offset={bodyOffset:function(e){var t=e.offsetTop,n=e.offsetLeft;return ye.support.doesNotIncludeMarginInBodyOffset&&(t+=parseFloat(ye.css(e,"marginTop"))||0,n+=parseFloat(ye.css(e,"marginLeft"))||0),{top:t,left:n}},setOffset:function(e,t,n){var r=ye.css(e,"position");"static"===r&&(e.style.position="relative");var i,o,a=ye(e),s=a.offset(),l=ye.css(e,"top"),u=ye.css(e,"left"),c={},f={};o=("absolute"===r||"fixed"===r)&&-1<ye.inArray("auto",[l,u])?(i=(f=a.position()).top,f.left):(i=parseFloat(l)||0,parseFloat(u)||0),ye.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(c.top=t.top-s.top+i),null!=t.left&&(c.left=t.left-s.left+o),"using"in t?t.using.call(e,c):a.css(c)}},ye.fn.extend({position:function(){if(this[0]){var e=this[0],t=this.offsetParent(),n=this.offset(),r=Yt.test(t[0].nodeName)?{top:0,left:0}:t.offset();return n.top-=parseFloat(ye.css(e,"marginTop"))||0,n.left-=parseFloat(ye.css(e,"marginLeft"))||0,r.top+=parseFloat(ye.css(t[0],"borderTopWidth"))||0,r.left+=parseFloat(ye.css(t[0],"borderLeftWidth"))||0,{top:n.top-r.top,left:n.left-r.left}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||F.body;e&&!Yt.test(e.nodeName)&&"static"===ye.css(e,"position");)e=e.offsetParent;return e||F.body})}}),ye.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,i){var o=/Y/.test(i);ye.fn[t]=function(e){return ye.access(this,function(e,t,n){var r=D(e);if(n===C)return r?i in r?r[i]:r.document.documentElement[t]:e[t];r?r.scrollTo(o?ye(r).scrollLeft():n,o?n:ye(r).scrollTop()):e[t]=n},t,e,arguments.length,null)}}),ye.each({Height:"height",Width:"width"},function(o,a){ye.each({padding:"inner"+o,content:a,"":"outer"+o},function(r,e){ye.fn[e]=function(e,t){var n=arguments.length&&(r||"boolean"!=typeof e),i=r||(!0===e||!0===t?"margin":"border");return ye.access(this,function(e,t,n){var r;return ye.isWindow(e)?e.document.documentElement["client"+o]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+o],r["scroll"+o],e.body["offset"+o],r["offset"+o],r["client"+o])):n===C?ye.css(e,t,n,i):ye.style(e,t,n,i)},a,n?e:C,n,null)}})}),m.jQuery=m.$=ye,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return ye})}(window);!function(m){m.browserTest=function(e,r){var s="unknown",i="X",t=function(e,r){for(var o=0;o<r.length;o+=1)e=e.replace(r[o][0],r[o][1]);return e},o=function(e,r,o,a){var n={name:t((r.exec(e)||[s,s])[1],o)};return n[n.name]=!0,n.version=(a.exec(e)||[i,i,i,i])[3],n.name.match(/safari/)&&400<n.version&&(n.version="2.0"),"presto"===n.name&&(n.version=9.27<m.browser.version?"futhark":"linear_b"),n.versionNumber=parseFloat(n.version,10)||0,n.versionX=n.version!==i?(n.version+"").substr(0,1):i,n.className=n.name+n.versionX,n};e=((e=/Trident/.exec(e)&&/rv/.exec(e)?e.replace("rv:","msie/"):e).match(/Opera|Navigator|Minefield|KHTML|Chrome/)?t(e,[[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/,""],["Chrome Safari","Chrome"],["KHTML","Konqueror"],["Minefield","Firefox"],["Navigator","Netscape"]]):e).toLowerCase(),m.browser=m.extend(r?{}:m.browser,o(e,/(camino|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari|mobile|nintendo|dolfin)/,[],/(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari|mobile|nintendo)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|\)|$)/)),m.layout=o(e,/(gecko|konqueror|msie|opera|webkit)/,[["konqueror","khtml"],["msie","trident"],["opera","presto"]],/(applewebkit|rv|konqueror|msie)(\:|\/\s)([a-z0-9\.]*?)(\;|\)|\s)/);var a=(/(wince|win|mac|linux|sunos|solaris|iphone|ipad|ipod|nokia|webos|blackberry|s60|widerweb|symbian|nintendo|bada|kfot|playstation)/.exec(navigator.platform.toLowerCase())||[s])[0].replace("sunos","solaris").replace("widerweb","motorola").replace("s60","symbian").replace("kfot","kindle");a=(/(android)/.exec(e.toLowerCase())||[a])[0],a=(/(windows)/.exec(e.toLowerCase())||[a])[0],m.browser.name="playstation"==a&&"unknown"==m.browser.name?"mobile":m.browser.name,m.os={name:a},r||m("html").addClass([m.os.name,m.browser.name,m.browser.className,m.layout.name,m.layout.className].join(" "))},m.browserTest(navigator.userAgent)}(jQuery);jQuery.extend({iframeName:"ajaxUploadFrame",_isAjaxUploadCompatible:function(){return null==this._isCompatible&&(this._isCompatible=void 0!==(new XMLHttpRequest).upload),this._isCompatible},_isFileParam:function(e){if("object"==typeof e)try{var t=$(e)[0];if(t.fileName||t.name||t.files)return!0}catch(e){}return!1},_parseFiles:function(a){var n={},r=this;return $.each(a,function(e,t){r._isFileParam(t)&&(n[e]=t,delete a[e])}),n},ajaxUpload:function(e,t,a,n){var r=this._parseFiles(t);return this._getUploader().post(this,e,t,r,a,n)},_getUploader:function(){return this.uploaders[this._isAjaxUploadCompatible()?"ajaxUploader":"iframeUploader"]},_getParamFilledURL:function(a,e){return $.each(e,function(e,t){a+=-1==a.indexOf("?")?"?":"&",a+=e+"="+encodeURIComponent(t)}),a},uploaders:{ajaxUploader:{post:function(a,n,r,e,o,i){var s=this;e=this._getFiles(e),$(e).each(function(e,t){s.upload(a,n,r,t,o,i)})},_getFiles:function(e){var r=[];return $.each(e,function(e,t){if(t.fileName||t.name)t.pname=e,r.push(t);else{var a=$(t)[0].files,n=$(t).attr("id");n||(n=e),$(a).each(function(e,t){t.pname=n,r.push(t)})}}),r},_getFileName:function(e){return e.name?e.name:e.fileName},_getFileSize:function(e){return e.size?e.size:e.fileSize},upload:function(e,t,a,n,r,o){var i=new XMLHttpRequest;if(i.onreadystatechange=function(){if(4==i.readyState){var e=200==i.status?r.success:r.fail;e&&e(i.responseText)}},r.progress){var s=function(e){var t=e.loaded/e.total*100;r.progress(e,t)};i.addEventListener("progress",s,!1),i.upload.addEventListener("progress",s,!1)}return r.complete&&(i.addEventListener("load",r.complete,!1),i.upload.addEventListener("load",r.complete,!1)),i.open("POST",t,!0),this["undefined"!=typeof FormData?"_doFormUpload":"_doBinaryUpload"](i,a,n),i},_doFormUpload:function(e,t,a){var n=new FormData;$.each(t,function(e,t){n.append(e,t)}),a&&n.append(a.pname,a),e.send(n)},_doBinaryUpload:function(e,t,a){var n="---------------zoho"+Math.random(),r="";r+="\r\n--"+n;var o="\r\n",i=this;$.each(t,function(e,t){o+=i._getMultiPartParamStr(e,encodeURIComponent(t))+"\r\n--"+n+"\r\n"}),r+=o,a&&(r+=this._getMultiPartFileParamStr(a.pname,a)),r+="\r\n--"+n+"--",e.setRequestHeader("Content-Length",r.length),e.setRequestHeader("Content-Type","multipart/form-data; charset: UTF-8; accept-charset: UTF-8; boundary="+n),e.setRequestHeader("Connection","close"),e.sendAsBinary(r)},_getMultiPartFileParamStr:function(e,t){return'Content-Disposition: form-data; name="'+e+'"; filename="'+t.fileName+'"\r\nContent-Type: application/octet-stream\r\n\r\n'+t.getAsBinary()},_getMultiPartParamStr:function(e,t){return'Content-Disposition: form-data; name="'+e+'"\r\n\r\n'+t}},iframeUploader:{post:function(a,e,t,n,r,o){var i=this._createIframe(),s=this._fillParams(a,e,t,n,i.attr("name"));a=this;return i.load(function(e){var t=a.getResponse($(i[0].contentWindow.document.body),o);r.success&&r.success(t),s.remove(),i.remove()}),s.submit(),this._controller(i,s,n)},getResponse:function(ele,dataType){switch(dataType){case"json":case"jsonp":return eval("("+ele.text()+")");case"html":return ele.html();case"text":default:return ele.text()}},_controller:function(e,t,n){return{files:[n],abort:function(){e[0].contentWindow.stop()},filesDetails:function(){var a=[];return $(n).each(function(e,t){t=$(t),a.push({name:t.val(),size:""})}),a}}},_createIframe:function(){var e="uploadFrame"+(new Date).getTime(),t=$("<iframe>").attr({src:"about:blank",height:"0",width:"0",frameborder:"0",name:e,id:e});return this._iframe=t,$(document.body).append(t),t},_getParamFilledForm:function(n,e,t){$.each(e,function(e,t){var a=$("<input>").attr({type:"hidden",name:e,value:t});n.append(a)}),$.each(t,function(e,t){(t=$(t)).clone().insertAfter(t),n.append(t)})},_fillParams:function(e,t,a,n,r){var o=$("<form>").attr({method:"post",enctype:"multipart/form-data",target:r,action:t});return this._getParamFilledForm(o,a,n),$(document.body).append(o),o}}}});this.JSON||(JSON={}),function(){function f(t){return t<10?"0"+t:t}"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(t){return this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z"},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(t){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(t){return escapable.lastIndex=0,escapable.test(t)?'"'+t.replace(escapable,function(t){var e=meta[t];return"string"==typeof e?e:"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+t+'"'}function str(t,e){var n,r,f,o,u,a=gap,i=e[t];switch(i&&"object"==typeof i&&"function"==typeof i.toJSON&&(i=i.toJSON(t)),"function"==typeof rep&&(i=rep.call(e,t,i)),typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i)return"null";if(gap+=indent,u=[],"[object Array]"===Object.prototype.toString.apply(i)){for(o=i.length,n=0;n<o;n+=1)u[n]=str(n,i)||"null";return f=0===u.length?"[]":gap?"[\n"+gap+u.join(",\n"+gap)+"\n"+a+"]":"["+u.join(",")+"]",gap=a,f}if(rep&&"object"==typeof rep)for(o=rep.length,n=0;n<o;n+=1)"string"==typeof(r=rep[n])&&(f=str(r,i))&&u.push(quote(r)+(gap?": ":":")+f);else for(r in i)Object.hasOwnProperty.call(i,r)&&(f=str(r,i))&&u.push(quote(r)+(gap?": ":":")+f);return f=0===u.length?"{}":gap?"{\n"+gap+u.join(",\n"+gap)+"\n"+a+"}":"{"+u.join(",")+"}",gap=a,f}}"function"!=typeof JSON.stringify&&(JSON.stringify=function(t,e,n){var r;if(indent=gap="","number"==typeof n)for(r=0;r<n;r+=1)indent+=" ";else"string"==typeof n&&(indent=n);if((rep=e)&&"function"!=typeof e&&("object"!=typeof e||"number"!=typeof e.length))throw new Error("JSON.stringify");return str("",{"":t})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){var j;function walk(t,e){var n,r,f=t[e];if(f&&"object"==typeof f)for(n in f)Object.hasOwnProperty.call(f,n)&&(void 0!==(r=walk(f,n))?f[n]=r:delete f[n]);return reviver.call(t,e,f)}if(cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(t){return"\\u"+("0000"+t.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")})}();function lamejs(){function ea(e){return new Int32Array(e)}function ta(e){return new Float32Array(e)}function aa(e){if(1==e.length)return ta(e[0]);var t=e[0];e=e.slice(1);for(var a=[],s=0;s<t;s++)a.push(aa(e));return a}function M(e){if(1==e.length)return ea(e[0]);var t=e[0];e=e.slice(1);for(var a=[],s=0;s<t;s++)a.push(M(e));return a}function w(e){if(1==e.length)return Array(e[0]);var t=e[0];e=e.slice(1);for(var a=[],s=0;s<t;s++)a.push(w(e));return a}function sa(e){this.ordinal=e}function ut(e){this.ordinal=e}function na(e){this.ordinal=function(){return e}}function R(){this.getLameVersion=function(){return"3.98.4"},this.getLameShortVersion=function(){return"3.98.4"},this.getLameVeryShortVersion=function(){return"LAME3.98r"},this.getPsyVersion=function(){return"0.93"},this.getLameUrl=function(){return"http://www.mp3dev.org/"},this.getLameOsBitness=function(){return"32bits"}}function E(){function p(e){this.bits=0|e}function S(e,t,a,s,n,r){for(t=.5946/t,e>>=1;0!=e--;)n[r++]=t>a[s++]?0:1,n[r++]=t>a[s++]?0:1}function R(e,t,a,s,n,r){var _=(e>>=1)%2;for(e>>=1;0!=e--;){var i=a[s++]*t,o=a[s++]*t,l=0|i,f=a[s++]*t,h=0|o,c=a[s++]*t,b=0|f;i+=M.adj43[l],l=0|c,o+=M.adj43[h],n[r++]=0|i,f+=M.adj43[b],n[r++]=0|o,c+=M.adj43[l],n[r++]=0|f,n[r++]=0|c}0!=_&&(i=a[s++]*t,o=a[s++]*t,i+=M.adj43[0|i],o+=M.adj43[0|o],n[r++]=0|i,n[r++]=0|o)}function d(e,t,a,s){var n,r=t,_=n=0;do{n<(i=e[r++])&&(n=i),_<(o=e[r++])&&(_=o)}while(r<a);switch(n<_&&(n=_),n){case 0:return n;case 1:for(r=t,t=0,n=te.ht[1].hlen;_=2*e[r+0]+e[r+1],r+=2,t+=n[_],r<a;);return s.bits+=t,1;case 2:case 3:for(r=t,t=b[n-1],n=0,_=te.ht[t].xlen,i=2==t?te.table23:te.table56;o=e[r+0]*_+e[r+1],r+=2,n+=i[o],r<a;);return(e=65535&n)<(n>>=16)&&(n=e,t++),s.bits+=n,t;case 4:case 5:case 6:case 7:case 8:case 9:case 10:case 11:case 12:case 13:case 14:case 15:r=t,t=b[n-1];var i=_=n=0,o=te.ht[t].xlen,l=te.ht[t].hlen,f=te.ht[t+1].hlen,h=te.ht[t+2].hlen;do{var c=e[r+0]*o+e[r+1];r=r+2;n+=l[c],_+=f[c],i+=h[c]}while(r<a);return e=t,_<n&&(n=_,e++),i<n&&(n=i,e=t+2),s.bits+=n,e;default:if(P.IXMAX_VAL<n)return s.bits=P.LARGE_BITS,-1;for(n-=15,r=24;r<32&&!(te.ht[r].linmax>=n);r++);for(_=r-8;_<24&&!(te.ht[_].linmax>=n);_++);for(n=_,i=65536*te.ht[n].xlen+te.ht[r].xlen,_=0;0!=(o=e[t++])&&(14<o&&(o=15,_+=i),o*=16),0!=(l=e[t++])&&(14<l&&(l=15,_+=i),o+=l),_+=te.largetbl[o],t<a;);return(e=65535&_)<(_>>=16)&&(_=e,n=r),s.bits+=_,n}}function g(e,t,a,s,n,r,_,i){for(var o=t.big_values,l=2;l<ra.SBMAX_l+1;l++){var f=e.scalefac_band.l[l];if(o<=f)break;var h=n[l-2]+t.count1bits;if(a.part2_3_length<=h)break;f=d(s,f,o,h=new p(h)),h=h.bits,a.part2_3_length<=h||(a.assign(t),a.part2_3_length=h,a.region0_count=r[l-2],a.region1_count=l-2-r[l-2],a.table_select[0]=_[l-2],a.table_select[1]=i[l-2],a.table_select[2]=f)}}var M=null;this.qupvt=null,this.setModules=function(e){M=this.qupvt=e};var n=[[0,0],[0,0],[0,0],[0,0],[0,0],[0,1],[1,1],[1,1],[1,2],[2,2],[2,3],[2,3],[3,4],[3,4],[3,4],[4,5],[4,5],[4,6],[5,6],[5,6],[5,7],[6,7],[6,7]],b=[1,2,5,7,7,10,10,13,13,13,13,13,13,13,13];this.noquant_count_bits=function(e,t,a){var s=t.l3_enc,n=Math.min(576,t.max_nonzero_coeff+2>>1<<1);for(null!=a&&(a.sfb_count1=0);1<n&&0==(s[n-1]|s[n-2]);n-=2);t.count1=n;for(var r=0,_=0;3<n&&!(1<(2147483647&(s[n-1]|s[n-2]|s[n-3]|s[n-4])));n-=4){var i=2*(2*(2*s[n-4]+s[n-3])+s[n-2])+s[n-1];r+=te.t32l[i],_+=te.t33l[i]}if(i=r,t.count1table_select=0,_<r&&(i=_,t.count1table_select=1),t.count1bits=i,0==(t.big_values=n))return i;if(t.block_type==ra.SHORT_TYPE?((r=3*e.scalefac_band.s[3])>t.big_values&&(r=t.big_values),_=t.big_values):t.block_type==ra.NORM_TYPE?(r=t.region0_count=e.bv_scf[n-2],_=t.region1_count=e.bv_scf[n-1],_=e.scalefac_band.l[r+_+2],r=e.scalefac_band.l[r+1],_<n&&(i=new p(i),t.table_select[2]=d(s,_,n,i),i=i.bits)):(t.region0_count=7,t.region1_count=ra.SBMAX_l-1-7-1,(_=n)<(r=e.scalefac_band.l[8])&&(r=_)),r=Math.min(r,n),_=Math.min(_,n),0<r&&(i=new p(i),t.table_select[0]=d(s,0,r,i),i=i.bits),r<_&&(i=new p(i),t.table_select[1]=d(s,r,_,i),i=i.bits),2==e.use_best_huffman&&(t.part2_3_length=i,best_huffman_divide(e,t),i=t.part2_3_length),null!=a&&t.block_type==ra.NORM_TYPE){for(s=0;e.scalefac_band.l[s]<t.big_values;)s++;a.sfb_count1=s}return i},this.count_bits=function(e,t,a,s){var n=a.l3_enc,r=P.IXMAX_VAL/M.IPOW20(a.global_gain);if(a.xrpow_max>r)return P.LARGE_BITS;r=M.IPOW20(a.global_gain);var _,i=0,o=0,l=0,f=0,h=0,c=n,b=0,u=t,m=0,p=null!=s&&a.global_gain==s.global_gain,d=a.block_type==ra.SHORT_TYPE?38:21;for(_=0;_<=d;_++){var g=-1;if((p||a.block_type==ra.NORM_TYPE)&&(g=a.global_gain-(a.scalefac[_]+(0!=a.preflag?M.pretab[_]:0)<<a.scalefac_scale+1)-8*a.subblock_gain[a.window[_]]),p&&s.step[_]==g)0!=o&&(R(o,r,u,m,c,b),o=0),0!=l&&(S(l,r,u,m,c,b),l=0);else{var v=a.width[_];if(i+a.width[_]>a.max_nonzero_coeff&&(_=a.max_nonzero_coeff-i+1,mt.fill(n,a.max_nonzero_coeff,576,0),(v=_)<0&&(v=0),_=d+1),0==o&&0==l&&(c=n,b=h,u=t,m=f),null!=s&&0<s.sfb_count1&&_>=s.sfb_count1&&0<s.step[_]&&g>=s.step[_]?(0!=o&&(R(o,r,u,m,c,b),o=0,c=n,b=h,u=t,m=f),l+=v):(0!=l&&(S(l,r,u,m,c,b),l=0,c=n,b=h,u=t,m=f),o+=v),v<=0){0!=l&&(S(l,r,u,m,c,b),l=0),0!=o&&(R(o,r,u,m,c,b),o=0);break}}_<=d&&(h+=a.width[_],f+=a.width[_],i+=a.width[_])}if(0!=o&&R(o,r,u,m,c,b),0!=l&&S(l,r,u,m,c,b),0!=(2&e.substep_shaping))for(r=0,d=.634521682242439/M.IPOW20(a.global_gain+a.scalefac_scale),i=0;i<a.sfbmax;i++)if(p=a.width[i],0==e.pseudohalf[i])r+=p;else for(o=r,r+=p;o<r;++o)n[o]=t[o]>=d?n[o]:0;return this.noquant_count_bits(e,a,s)},this.best_huffman_divide=function(e,t){var a=new N,s=t.l3_enc,n=ea(23),r=ea(23),_=ea(23),i=ea(23);if(t.block_type!=ra.SHORT_TYPE||1!=e.mode_gr){if(a.assign(t),t.block_type==ra.NORM_TYPE){for(var o=t.big_values,l=0;l<=22;l++)n[l]=P.LARGE_BITS;for(l=0;l<16;l++){var f=e.scalefac_band.l[l+1];if(o<=f)break;for(var h=new p(b=0),c=d(s,0,f,h),b=h.bits,u=0;u<8;u++){var m=e.scalefac_band.l[l+u+2];if(o<=m)break;m=d(s,f,m,h=new p(h=b)),h=h.bits,n[l+u]>h&&(n[l+u]=h,_[(r[l+u]=l)+u]=c,i[l+u]=m)}}g(e,a,t,s,n,r,_,i)}if(!(0==(o=a.big_values)||1<(s[o-2]|s[o-1])||576<(o=t.count1+2))){for(a.assign(t),a.count1=o,f=l=0;o>a.big_values;o-=4)b=2*(2*(2*s[o-4]+s[o-3])+s[o-2])+s[o-1],l+=te.t32l[b],f+=te.t33l[b];a.big_values=o,a.count1table_select=0,f<l&&(l=f,a.count1table_select=1),a.count1bits=l,a.block_type==ra.NORM_TYPE?g(e,a,t,s,n,r,_,i):(a.part2_3_length=l,o<(l=e.scalefac_band.l[8])&&(l=o),0<l&&(e=new p(a.part2_3_length),a.table_select[0]=d(s,0,l,e),a.part2_3_length=e.bits),l<o&&(e=new p(a.part2_3_length),a.table_select[1]=d(s,l,o,e),a.part2_3_length=e.bits),t.part2_3_length>a.part2_3_length&&t.assign(a))}}};var l=[1,1,1,1,8,2,2,2,4,4,4,8,8,8,16,16],f=[1,2,4,8,1,2,4,8,2,4,8,2,4,8,4,8],h=[0,0,0,0,3,1,1,1,2,2,2,3,3,3,4,4],c=[0,1,2,3,0,1,2,3,1,2,3,1,2,3,2,3];E.slen1_tab=h,E.slen2_tab=c,this.best_scalefac_store=function(e,t,a,s){var n,r,_=s.tt[t][a],i=0;for(n=r=0;n<_.sfbmax;n++){var o=_.width[n];for(r+=o,o=-o;o<0&&0==_.l3_enc[o+r];o++);0==o&&(_.scalefac[n]=i=-2)}if(0==_.scalefac_scale&&0==_.preflag){for(n=r=0;n<_.sfbmax;n++)0<_.scalefac[n]&&(r|=_.scalefac[n]);if(0==(1&r)&&0!=r){for(n=0;n<_.sfbmax;n++)0<_.scalefac[n]&&(_.scalefac[n]>>=1);_.scalefac_scale=i=1}}if(0==_.preflag&&_.block_type!=ra.SHORT_TYPE&&2==e.mode_gr){for(n=11;n<ra.SBPSY_l&&!(_.scalefac[n]<M.pretab[n]&&-2!=_.scalefac[n]);n++);if(n==ra.SBPSY_l){for(n=11;n<ra.SBPSY_l;n++)0<_.scalefac[n]&&(_.scalefac[n]-=M.pretab[n]);_.preflag=i=1}}for(n=0;n<4;n++)s.scfsi[a][n]=0;if(2==e.mode_gr&&1==t&&s.tt[0][a].block_type!=ra.SHORT_TYPE&&s.tt[1][a].block_type!=ra.SHORT_TYPE){for(t=s.tt[1][a],r=s.tt[0][a],i=0;i<te.scfsi_band.length-1;i++){for(n=te.scfsi_band[i];n<te.scfsi_band[i+1]&&!(r.scalefac[n]!=t.scalefac[n]&&0<=t.scalefac[n]);n++);if(n==te.scfsi_band[i+1]){for(n=te.scfsi_band[i];n<te.scfsi_band[i+1];n++)t.scalefac[n]=-1;s.scfsi[a][i]=1}}for(n=s=a=0;n<11;n++)-1!=t.scalefac[n]&&(s++,a<t.scalefac[n]&&(a=t.scalefac[n]));for(o=r=0;n<ra.SBPSY_l;n++)-1!=t.scalefac[n]&&(o++,r<t.scalefac[n]&&(r=t.scalefac[n]));for(i=0;i<16;i++)a<l[i]&&r<f[i]&&(n=h[i]*s+c[i]*o,t.part2_length>n&&(t.part2_length=n,t.scalefac_compress=i));i=0}for(n=0;n<_.sfbmax;n++)-2==_.scalefac[n]&&(_.scalefac[n]=0);0!=i&&(2==e.mode_gr?this.scale_bitcount(_):this.scale_bitcount_lsf(e,_))};var _=[0,18,36,54,54,36,54,72,54,72,90,72,90,108,108,126],i=[0,18,36,54,51,35,53,71,52,70,88,69,87,105,104,122],o=[0,10,20,30,33,21,31,41,32,42,52,43,53,63,64,74];this.scale_bitcount=function(e){var t,a=0,s=0,n=e.scalefac;if(e.block_type==ra.SHORT_TYPE){var r=_;0!=e.mixed_block_flag&&(r=i)}else if(r=o,0==e.preflag){for(t=11;t<ra.SBPSY_l&&!(n[t]<M.pretab[t]);t++);if(t==ra.SBPSY_l)for(e.preflag=1,t=11;t<ra.SBPSY_l;t++)n[t]-=M.pretab[t]}for(t=0;t<e.sfbdivide;t++)a<n[t]&&(a=n[t]);for(;t<e.sfbmax;t++)s<n[t]&&(s=n[t]);for(e.part2_length=P.LARGE_BITS,t=0;t<16;t++)a<l[t]&&s<f[t]&&e.part2_length>r[t]&&(e.part2_length=r[t],e.scalefac_compress=t);return e.part2_length==P.LARGE_BITS};var u=[[15,15,7,7],[15,15,7,0],[7,3,0,0],[15,31,31,0],[7,7,7,0],[3,3,0,0]];this.scale_bitcount_lsf=function(e,t){var a,s,n,r,_=ea(4),i=t.scalefac;for(e=0!=t.preflag?2:0,n=0;n<4;n++)_[n]=0;if(t.block_type==ra.SHORT_TYPE){var o=1,l=M.nr_of_sfb_block[e][o];for(a=r=0;a<4;a++){var f=l[a]/3;for(n=0;n<f;n++,r++)for(s=0;s<3;s++)i[3*r+s]>_[a]&&(_[a]=i[3*r+s])}}else for(o=0,l=M.nr_of_sfb_block[e][o],a=r=0;a<4;a++)for(f=l[a],n=0;n<f;n++,r++)i[r]>_[a]&&(_[a]=i[r]);for(l=!1,a=0;a<4;a++)_[a]>u[e][a]&&(l=!0);if(!l){for(t.sfb_partition_table=M.nr_of_sfb_block[e][o],a=0;a<4;a++)t.slen[a]=m[_[a]];switch(o=t.slen[0],a=t.slen[1],_=t.slen[2],f=t.slen[3],e){case 0:t.scalefac_compress=(5*o+a<<4)+(_<<2)+f;break;case 1:t.scalefac_compress=400+(5*o+a<<2)+_;break;case 2:t.scalefac_compress=500+3*o+a;break;default:ee.err.printf("intensity stereo not implemented yet\n")}}if(!l)for(a=t.part2_length=0;a<4;a++)t.part2_length+=t.slen[a]*t.sfb_partition_table[a];return l};var m=[0,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4];this.huffman_init=function(e){for(var t=2;t<=576;t+=2){for(var a,s=0;e.scalefac_band.l[++s]<t;);for(a=n[s][0];e.scalefac_band.l[a+1]>t;)a--;for(a<0&&(a=n[s][0]),e.bv_scf[t-2]=a,a=n[s][1];e.scalefac_band.l[a+e.bv_scf[t-2]+2]>t;)a--;a<0&&(a=n[s][1]),e.bv_scf[t-1]=a}}}function W(){function u(e,t,a,s,n,r){for(;0!=n--;)a[s]=1e-10+e[t+0]*r[0]-a[s-1]*r[1]+e[t-1]*r[2]-a[s-2]*r[3]+e[t-2]*r[4]-a[s-3]*r[5]+e[t-3]*r[6]-a[s-4]*r[7]+e[t-4]*r[8]-a[s-5]*r[9]+e[t-5]*r[10]-a[s-6]*r[11]+e[t-6]*r[12]-a[s-7]*r[13]+e[t-7]*r[14]-a[s-8]*r[15]+e[t-8]*r[16]-a[s-9]*r[17]+e[t-9]*r[18]-a[s-10]*r[19]+e[t-10]*r[20],++s,++t}function m(e,t,a,s,n,r){for(;0!=n--;)a[s]=e[t+0]*r[0]-a[s-1]*r[1]+e[t-1]*r[2]-a[s-2]*r[3]+e[t-2]*r[4],++s,++t}function p(e){return e*e}var s=W.RMS_WINDOW_TIME_NUMERATOR,n=W.RMS_WINDOW_TIME_DENOMINATOR,d=[[.038575994352,-3.84664617118067,-.02160367184185,7.81501653005538,-.00123395316851,-11.34170355132042,-9291677959e-14,13.05504219327545,-.01655260341619,-12.28759895145294,.02161526843274,9.4829380631979,-.02074045215285,-5.87257861775999,.00594298065125,2.75465861874613,.00306428023191,-.86984376593551,.00012025322027,.13919314567432,.00288463683916],[.0541865640643,-3.47845948550071,-.02911007808948,6.36317777566148,-.00848709379851,-8.54751527471874,-.00851165645469,9.4769360780128,-.00834990904936,-8.81498681370155,.02245293253339,6.85401540936998,-.02596338512915,-4.39470996079559,.01624864962975,2.19611684890774,-.00240879051584,-.75104302451432,.00674613682247,.13149317958808,-.00187763777362],[.15457299681924,-2.37898834973084,-.09331049056315,2.84868151156327,-.06247880153653,-2.64577170229825,.02163541888798,2.23697657451713,-.05588393329856,-1.67148153367602,.04781476674921,1.00595954808547,.00222312597743,-.45953458054983,.03174092540049,.16378164858596,-.01390589421898,-.05032077717131,.00651420667831,.0234789740702,-.00881362733839],[.30296907319327,-1.61273165137247,-.22613988682123,1.0797749225997,-.08587323730772,-.2565625775407,.03282930172664,-.1627671912044,-.00915702933434,-.22638893773906,-.02364141202522,.39120800788284,-.00584456039913,-.22138138954925,.06276101321749,.04500235387352,-828086748e-14,.02005851806501,.00205861885564,.00302439095741,-.02950134983287],[.33642304856132,-1.49858979367799,-.2557224142557,.87350271418188,-.11828570177555,.12205022308084,.11921148675203,-.80774944671438,-.07834489609479,.47854794562326,-.0046997791438,-.12453458140019,-.0058950022444,-.04067510197014,.05724228140351,.08333755284107,.00832043980773,-.04237348025746,-.0163538138454,.02977207319925,-.0176017656815],[.4491525660845,-.62820619233671,-.14351757464547,.29661783706366,-.22784394429749,-.372563729424,-.01419140100551,.00213767857124,.04078262797139,-.42029820170918,-.12398163381748,.22199650564824,.04097565135648,.00613424350682,.10478503600251,.06747620744683,-.01863887810927,.05784820375801,-.03193428438915,.03222754072173,.00541907748707],[.56619470757641,-1.04800335126349,-.75464456939302,.29156311971249,.1624213774223,-.26806001042947,.16744243493672,.00819999645858,-.18901604199609,.45054734505008,.3093178284183,-.33032403314006,-.27562961986224,.0673936833311,.00647310677246,-.04784254229033,.08647503780351,.01639907836189,-.0378898455484,.01807364323573,-.00588215443421],[.58100494960553,-.51035327095184,-.53174909058578,-.31863563325245,-.14289799034253,-.20256413484477,.17520704835522,.1472815413433,.02377945217615,.38952639978999,.15558449135573,-.23313271880868,-.25344790059353,-.05246019024463,.01628462406333,-.02505961724053,.06920467763959,.02442357316099,-.03721611395801,.01818801111503,-.00749618797172],[.53648789255105,-.2504987195602,-.42163034350696,-.43193942311114,-.00275953611929,-.03424681017675,.04267842219415,-.04678328784242,-.10214864179676,.26408300200955,.14590772289388,.15113130533216,-.02459864859345,-.17556493366449,-.11202315195388,-.18823009262115,-.04060034127,.05477720428674,.0478866554818,.0470440968812,-.02217936801134]],g=[[.98621192462708,-1.97223372919527,-1.97242384925416,.97261396931306,.98621192462708],[.98500175787242,-1.96977855582618,-1.97000351574484,.9702284756635,.98500175787242],[.97938932735214,-1.95835380975398,-1.95877865470428,.95920349965459,.97938932735214],[.97531843204928,-1.95002759149878,-1.95063686409857,.95124613669835,.97531843204928],[.97316523498161,-1.94561023566527,-1.94633046996323,.94705070426118,.97316523498161],[.96454515552826,-1.92783286977036,-1.92909031105652,.93034775234268,.96454515552826],[.96009142950541,-1.91858953033784,-1.92018285901082,.92177618768381,.96009142950541],[.95856916599601,-1.9154210807478,-1.91713833199203,.91885558323625,.95856916599601],[.94597685600279,-1.88903307939452,-1.89195371200558,.89487434461664,.94597685600279]];this.InitGainAnalysis=function(e,t){e:{for(var a=0;a<MAX_ORDER;a++)e.linprebuf[a]=e.lstepbuf[a]=e.loutbuf[a]=e.rinprebuf[a]=e.rstepbuf[a]=e.routbuf[a]=0;switch(0|t){case 48e3:e.reqindex=0;break;case 44100:e.reqindex=1;break;case 32e3:e.reqindex=2;break;case 24e3:e.reqindex=3;break;case 22050:e.reqindex=4;break;case 16e3:e.reqindex=5;break;case 12e3:e.reqindex=6;break;case 11025:e.reqindex=7;break;case 8e3:e.reqindex=8;break;default:t=INIT_GAIN_ANALYSIS_ERROR;break e}e.sampleWindow=0|(t*s+n-1)/n,e.lsum=0,e.rsum=0,e.totsamp=0,mt.ill(e.A,0),t=INIT_GAIN_ANALYSIS_OK}return t!=INIT_GAIN_ANALYSIS_OK?INIT_GAIN_ANALYSIS_ERROR:(e.linpre=MAX_ORDER,e.rinpre=MAX_ORDER,e.lstep=MAX_ORDER,e.rstep=MAX_ORDER,e.lout=MAX_ORDER,e.rout=MAX_ORDER,mt.fill(e.B,0),INIT_GAIN_ANALYSIS_OK)},this.AnalyzeSamples=function(e,t,a,s,n,r,_){if(0==r)return GAIN_ANALYSIS_OK;var i=0,o=r;switch(_){case 1:s=t,n=a;break;case 2:break;default:return GAIN_ANALYSIS_ERROR}for(r<MAX_ORDER?(ee.arraycopy(t,a,e.linprebuf,MAX_ORDER,r),ee.arraycopy(s,n,e.rinprebuf,MAX_ORDER,r)):(ee.arraycopy(t,a,e.linprebuf,MAX_ORDER,MAX_ORDER),ee.arraycopy(s,n,e.rinprebuf,MAX_ORDER,MAX_ORDER));0<o;){var l=o>e.sampleWindow-e.totsamp?e.sampleWindow-e.totsamp:o;if(i<MAX_ORDER){_=e.linpre+i;var f=e.linprebuf,h=e.rinpre+i,c=e.rinprebuf;l>MAX_ORDER-i&&(l=MAX_ORDER-i)}else _=a+i,f=t,h=n+i,c=s;u(f,_,e.lstepbuf,e.lstep+e.totsamp,l,d[e.reqindex]),u(c,h,e.rstepbuf,e.rstep+e.totsamp,l,d[e.reqindex]),m(e.lstepbuf,e.lstep+e.totsamp,e.loutbuf,e.lout+e.totsamp,l,g[e.reqindex]),m(e.rstepbuf,e.rstep+e.totsamp,e.routbuf,e.rout+e.totsamp,l,g[e.reqindex]),_=e.lout+e.totsamp,f=e.loutbuf,h=e.rout+e.totsamp,c=e.routbuf;for(var b=l%8;0!=b--;)e.lsum+=p(f[_++]),e.rsum+=p(c[h++]);for(b=l/8;0!=b--;)e.lsum+=p(f[_+0])+p(f[_+1])+p(f[_+2])+p(f[_+3])+p(f[_+4])+p(f[_+5])+p(f[_+6])+p(f[_+7]),_+=8,e.rsum+=p(c[h+0])+p(c[h+1])+p(c[h+2])+p(c[h+3])+p(c[h+4])+p(c[h+5])+p(c[h+6])+p(c[h+7]),h+=8;if(o-=l,i+=l,e.totsamp+=l,e.totsamp==e.sampleWindow&&((_=(_=10*W.STEPS_per_dB*Math.log10((e.lsum+e.rsum)/e.totsamp*.5+1e-37))<=0?0:0|_)>=e.A.length&&(_=e.A.length-1),e.A[_]++,e.lsum=e.rsum=0,ee.arraycopy(e.loutbuf,e.totsamp,e.loutbuf,0,MAX_ORDER),ee.arraycopy(e.routbuf,e.totsamp,e.routbuf,0,MAX_ORDER),ee.arraycopy(e.lstepbuf,e.totsamp,e.lstepbuf,0,MAX_ORDER),ee.arraycopy(e.rstepbuf,e.totsamp,e.rstepbuf,0,MAX_ORDER),e.totsamp=0),e.totsamp>e.sampleWindow)return GAIN_ANALYSIS_ERROR}return r<MAX_ORDER?(ee.arraycopy(e.linprebuf,r,e.linprebuf,0,MAX_ORDER-r),ee.arraycopy(e.rinprebuf,r,e.rinprebuf,0,MAX_ORDER-r),ee.arraycopy(t,a,e.linprebuf,MAX_ORDER-r,r),ee.arraycopy(s,n,e.rinprebuf,MAX_ORDER-r,r)):(ee.arraycopy(t,a+r-MAX_ORDER,e.linprebuf,0,MAX_ORDER),ee.arraycopy(s,n+r-MAX_ORDER,e.rinprebuf,0,MAX_ORDER)),GAIN_ANALYSIS_OK},this.GetTitleGain=function(e){var t,a=e.A,s=e.A.length,n=0;for(t=0;t<s;t++)n+=a[t];if(0==n)a=GAIN_NOT_ENOUGH_SAMPLES;else{for(n=0|Math.ceil(n*(1-.95)),t=s;0<t--&&!((n-=a[t])<=0););a=64.82-t/W.STEPS_per_dB}for(s=0;s<e.A.length;s++)e.B[s]+=e.A[s],e.A[s]=0;for(s=0;s<MAX_ORDER;s++)e.linprebuf[s]=e.lstepbuf[s]=e.loutbuf[s]=e.rinprebuf[s]=e.rstepbuf[s]=e.routbuf[s]=0;return e.totsamp=0,e.lsum=e.rsum=0,a}}function A(){function e(e,t,a,s,n,r,_,i,o,l,f,h,c,b,u){this.vbr_q=e,this.quant_comp=t,this.quant_comp_s=a,this.expY=s,this.st_lrm=n,this.st_s=r,this.masking_adj=_,this.masking_adj_short=i,this.ath_lower=o,this.ath_curve=l,this.ath_sensitivity=f,this.interch=h,this.safejoint=c,this.sfb21mod=b,this.msfix=u}function t(e,t,a,s,n,r,_,i,o,l,f,h,c,b){this.quant_comp=t,this.quant_comp_s=a,this.safejoint=s,this.nsmsfix=n,this.st_lrm=r,this.st_s=_,this.nsbass=i,this.scale=o,this.masking_adj=l,this.ath_lower=f,this.ath_curve=h,this.interch=c,this.sfscale=b}function s(e,t,a){var s=e.VBR==ut.vbr_rh?_:i,n=e.VBR_q_frac,r=s[t];s=s[t+1];r.st_lrm+=n*(s.st_lrm-r.st_lrm),r.st_s+=n*(s.st_s-r.st_s),r.masking_adj+=n*(s.masking_adj-r.masking_adj),r.masking_adj_short+=n*(s.masking_adj_short-r.masking_adj_short),r.ath_lower+=n*(s.ath_lower-r.ath_lower),r.ath_curve+=n*(s.ath_curve-r.ath_curve),r.ath_sensitivity+=n*(s.ath_sensitivity-r.ath_sensitivity),r.interch+=n*(s.interch-r.interch),r.msfix+=n*(s.msfix-r.msfix),(s=r.vbr_q)<0&&(s=0),9<s&&(s=9),e.VBR_q=s,(e.VBR_q_frac=0)!=a?e.quant_comp=r.quant_comp:0<Math.abs(e.quant_comp- -1)||(e.quant_comp=r.quant_comp),0!=a?e.quant_comp_short=r.quant_comp_s:0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=r.quant_comp_s),0!=r.expY&&(e.experimentalY=0!=r.expY),0!=a?e.internal_flags.nsPsy.attackthre=r.st_lrm:0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=r.st_lrm),0!=a?e.internal_flags.nsPsy.attackthre_s=r.st_s:0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=r.st_s),0!=a?e.maskingadjust=r.masking_adj:0<Math.abs(e.maskingadjust-0)||(e.maskingadjust=r.masking_adj),0!=a?e.maskingadjust_short=r.masking_adj_short:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=r.masking_adj_short),0!=a?e.ATHlower=-r.ath_lower/10:0<Math.abs(10*-e.ATHlower-0)||(e.ATHlower=-r.ath_lower/10),0!=a?e.ATHcurve=r.ath_curve:0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=r.ath_curve),0!=a?e.athaa_sensitivity=r.ath_sensitivity:0<Math.abs(e.athaa_sensitivity- -1)||(e.athaa_sensitivity=r.ath_sensitivity),0<r.interch&&(0!=a?e.interChRatio=r.interch:0<Math.abs(e.interChRatio- -1)||(e.interChRatio=r.interch)),0<r.safejoint&&(e.exp_nspsytune|=r.safejoint),0<r.sfb21mod&&(e.exp_nspsytune|=r.sfb21mod<<20),0!=a?e.msfix=r.msfix:0<Math.abs(e.msfix- -1)||(e.msfix=r.msfix),0==a&&(e.VBR_q=t,e.VBR_q_frac=n)}function n(e,t,a){var s=r.nearestBitrateFullIndex(t);if(e.VBR=ut.vbr_abr,e.VBR_mean_bitrate_kbps=t,e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320),e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.brate=e.VBR_mean_bitrate_kbps,320<e.VBR_mean_bitrate_kbps&&(e.disable_reservoir=!0),0<o[s].safejoint&&(e.exp_nspsytune|=2),0<o[s].sfscale&&(e.internal_flags.noise_shaping=2),0<Math.abs(o[s].nsbass)){var n=int(4*o[s].nsbass);n<0&&(n+=64),e.exp_nspsytune|=n<<2}return 0!=a?e.quant_comp=o[s].quant_comp:0<Math.abs(e.quant_comp- -1)||(e.quant_comp=o[s].quant_comp),0!=a?e.quant_comp_short=o[s].quant_comp_s:0<Math.abs(e.quant_comp_short- -1)||(e.quant_comp_short=o[s].quant_comp_s),0!=a?e.msfix=o[s].nsmsfix:0<Math.abs(e.msfix- -1)||(e.msfix=o[s].nsmsfix),0!=a?e.internal_flags.nsPsy.attackthre=o[s].st_lrm:0<Math.abs(e.internal_flags.nsPsy.attackthre- -1)||(e.internal_flags.nsPsy.attackthre=o[s].st_lrm),0!=a?e.internal_flags.nsPsy.attackthre_s=o[s].st_s:0<Math.abs(e.internal_flags.nsPsy.attackthre_s- -1)||(e.internal_flags.nsPsy.attackthre_s=o[s].st_s),0!=a?e.scale=o[s].scale:0<Math.abs(e.scale- -1)||(e.scale=o[s].scale),0!=a?e.maskingadjust=o[s].masking_adj:0<Math.abs(e.maskingadjust-0)||(e.maskingadjust=o[s].masking_adj),0<o[s].masking_adj?0!=a?e.maskingadjust_short=.9*o[s].masking_adj:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=.9*o[s].masking_adj):0!=a?e.maskingadjust_short=1.1*o[s].masking_adj:0<Math.abs(e.maskingadjust_short-0)||(e.maskingadjust_short=1.1*o[s].masking_adj),0!=a?e.ATHlower=-o[s].ath_lower/10:0<Math.abs(10*-e.ATHlower-0)||(e.ATHlower=-o[s].ath_lower/10),0!=a?e.ATHcurve=o[s].ath_curve:0<Math.abs(e.ATHcurve- -1)||(e.ATHcurve=o[s].ath_curve),0!=a?e.interChRatio=o[s].interch:0<Math.abs(e.interChRatio- -1)||(e.interChRatio=o[s].interch),t}var r;this.setModules=function(e){r=e};var _=[new e(0,9,9,0,5.2,125,-4.2,-6.3,4.8,1,0,0,2,21,.97),new e(1,9,9,0,5.3,125,-3.6,-5.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,5.6,125,-2.2,-3.5,2.8,2,0,0,2,21,1.49),new e(3,9,9,1,5.8,130,-1.8,-2.8,2.6,3,-4,0,2,20,1.64),new e(4,9,9,1,6,135,-.7,-1.1,1.1,3.5,-8,0,2,0,1.79),new e(5,9,9,1,6.4,140,.5,.4,-7.5,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,6.6,145,.67,.65,-14.7,6.5,-19,4e-4,0,0,2.3),new e(7,9,9,1,6.6,145,.8,.75,-19.7,8,-22,6e-4,0,0,2.7),new e(8,9,9,1,6.6,145,1.2,1.15,-27.5,10,-23,7e-4,0,0,0),new e(9,9,9,1,6.6,145,1.6,1.6,-36,11,-25,8e-4,0,0,0),new e(10,9,9,1,6.6,145,2,2,-36,12,-25,8e-4,0,0,0)],i=[new e(0,9,9,0,4.2,25,-7,-4,7.5,1,0,0,2,26,.97),new e(1,9,9,0,4.2,25,-5.6,-3.6,4.5,1.5,0,0,2,21,1.35),new e(2,9,9,0,4.2,25,-4.4,-1.8,2,2,0,0,2,18,1.49),new e(3,9,9,1,4.2,25,-3.4,-1.25,1.1,3,-4,0,2,15,1.64),new e(4,9,9,1,4.2,25,-2.2,.1,0,3.5,-8,0,2,0,1.79),new e(5,9,9,1,4.2,25,-1,1.65,-7.7,4,-12,2e-4,0,0,1.95),new e(6,9,9,1,4.2,25,-0,2.47,-7.7,6.5,-19,4e-4,0,0,2),new e(7,9,9,1,4.2,25,.5,2,-14.5,8,-22,6e-4,0,0,2),new e(8,9,9,1,4.2,25,1,2.4,-22,10,-23,7e-4,0,0,2),new e(9,9,9,1,4.2,25,1.5,2.95,-30,11,-25,8e-4,0,0,2),new e(10,9,9,1,4.2,25,2,2.95,-36,12,-30,8e-4,0,0,2)],o=[new t(8,9,9,0,0,6.6,145,0,.95,0,-30,11,.0012,1),new t(16,9,9,0,0,6.6,145,0,.95,0,-25,11,.001,1),new t(24,9,9,0,0,6.6,145,0,.95,0,-20,11,.001,1),new t(32,9,9,0,0,6.6,145,0,.95,0,-15,11,.001,1),new t(40,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(48,9,9,0,0,6.6,145,0,.95,0,-10,11,9e-4,1),new t(56,9,9,0,0,6.6,145,0,.95,0,-6,11,8e-4,1),new t(64,9,9,0,0,6.6,145,0,.95,0,-2,11,8e-4,1),new t(80,9,9,0,0,6.6,145,0,.95,0,0,8,7e-4,1),new t(96,9,9,0,2.5,6.6,145,0,.95,0,1,5.5,6e-4,1),new t(112,9,9,0,2.25,6.6,145,0,.95,0,2,4.5,5e-4,1),new t(128,9,9,0,1.95,6.4,140,0,.95,0,3,4,2e-4,1),new t(160,9,9,1,1.79,6,135,0,.95,-2,5,3.5,0,1),new t(192,9,9,1,1.49,5.6,125,0,.97,-4,7,3,0,0),new t(224,9,9,1,1.25,5.2,125,0,.98,-6,9,2,0,0),new t(256,9,9,1,.97,5.2,125,0,1,-8,10,1,0,0),new t(320,9,9,1,.9,5.2,125,0,1,-10,12,0,0,0)];this.apply_preset=function(e,t,a){switch(t){case X.R3MIX:t=X.V3,e.VBR=ut.vbr_mtrh;break;case X.MEDIUM:t=X.V4,e.VBR=ut.vbr_rh;break;case X.MEDIUM_FAST:t=X.V4,e.VBR=ut.vbr_mtrh;break;case X.STANDARD:t=X.V2,e.VBR=ut.vbr_rh;break;case X.STANDARD_FAST:t=X.V2,e.VBR=ut.vbr_mtrh;break;case X.EXTREME:t=X.V0,e.VBR=ut.vbr_rh;break;case X.EXTREME_FAST:t=X.V0,e.VBR=ut.vbr_mtrh;break;case X.INSANE:return t=320,e.preset=t,n(e,t,a),e.VBR=ut.vbr_off,t}switch(e.preset=t){case X.V9:return s(e,9,a),t;case X.V8:return s(e,8,a),t;case X.V7:return s(e,7,a),t;case X.V6:return s(e,6,a),t;case X.V5:return s(e,5,a),t;case X.V4:return s(e,4,a),t;case X.V3:return s(e,3,a),t;case X.V2:return s(e,2,a),t;case X.V1:return s(e,1,a),t;case X.V0:return s(e,0,a),t}return 8<=t&&t<=320?n(e,t,a):(e.preset=0,t)}}function B(){var i;this.setModules=function(e){i=e},this.ResvFrameBegin=function(e,t){var a=e.internal_flags,s=a.l3_side,n=i.getframebits(e);t.bits=(n-8*a.sideinfo_len)/a.mode_gr;var r=2048*a.mode_gr-8;if(320<e.brate)var _=8*int(1e3*e.brate/(e.out_samplerate/1152)/8+.5);else _=11520,e.strict_ISO&&(_=8*int(32e4/(e.out_samplerate/1152)/8+.5));return a.ResvMax=_-n,a.ResvMax>r&&(a.ResvMax=r),(a.ResvMax<0||e.disable_reservoir)&&(a.ResvMax=0),_<(e=t.bits*a.mode_gr+Math.min(a.ResvSize,a.ResvMax))&&(e=_),s.resvDrain_pre=0,null!=a.pinfo&&(a.pinfo.mean_bits=t.bits/2,a.pinfo.resvsize=a.ResvSize),e},this.ResvMaxBits=function(e,t,a,s){var n=e.internal_flags,r=n.ResvSize,_=n.ResvMax;return 0!=s&&(r+=t),0!=(1&n.substep_shaping)&&(_*=.9),a.bits=t,9*_<10*r?(s=r-9*_/10,a.bits+=s,n.substep_shaping|=128):(s=0,n.substep_shaping&=127,e.disable_reservoir||0!=(1&n.substep_shaping)||(a.bits-=.1*t)),e=r<6*n.ResvMax/10?r:6*n.ResvMax/10,(e-=s)<0&&(e=0),e},this.ResvAdjust=function(e,t){e.ResvSize-=t.part2_3_length+t.part2_length},this.ResvFrameEnd=function(e,t){var a,s=e.l3_side;e.ResvSize+=t*e.mode_gr,t=0,s.resvDrain_post=0,(s.resvDrain_pre=0)!=(a=e.ResvSize%8)&&(t+=a),0<(a=e.ResvSize-t-e.ResvMax)&&(t+=a),a=Math.min(8*s.main_data_begin,t)/8,s.resvDrain_pre+=8*a,t-=8*a,e.ResvSize-=8*a,s.main_data_begin-=a,s.resvDrain_post+=t,e.ResvSize-=t}}function H(){function i(e,t){return(((255&e[t+0])<<8|255&e[t+1])<<8|255&e[t+2])<<8|255&e[t+3]}function T(e,t,a){e[t+0]=a>>24&255,e[t+1]=a>>16&255,e[t+2]=a>>8&255,e[t+3]=255&a}function E(e,t,a){e[t+0]=a>>8&255,e[t+1]=255&a}function n(e,t,a){return 255&(e<<t|a&~(-1<<t))}function k(e,t){var a=e.internal_flags;t[0]=n(t[0],8,255),t[1]=n(t[1],3,7),t[1]=n(t[1],1,e.out_samplerate<16e3?0:1),t[1]=n(t[1],1,e.version),t[1]=n(t[1],2,1),t[1]=n(t[1],1,e.error_protection?0:1),t[2]=n(t[2],4,a.bitrate_index),t[2]=n(t[2],2,a.samplerate_index),t[2]=n(t[2],1,0),t[2]=n(t[2],1,e.extension),t[3]=n(t[3],2,e.mode.ordinal()),t[3]=n(t[3],2,a.mode_ext),t[3]=n(t[3],1,e.copyright),t[3]=n(t[3],1,e.original),t[3]=n(t[3],2,e.emphasis),t[0]=255;a=241&t[1];var s=1==e.version?128:e.out_samplerate<16e3?32:64;e.VBR==ut.vbr_off&&(s=e.brate),s=e.free_format?0:255&16*r.BitrateIndex(s,e.version,e.out_samplerate),t[1]=1==e.version?255&(10|a):255&(2|a),a=13&t[2],t[2]=255&(s|a)}function y(e,t){return t>>8^a[255&(t^e)]}var r,x,P;this.setModules=function(e,t,a){r=e,x=t,P=a};var I=H.NUMTOCENTRIES,_=H.MAXFRAMESIZE,o=I+4+4+4+4+4+9+1+1+8+1+1+3+1+1+2+4+2+2,a=[0,49345,49537,320,49921,960,640,49729,50689,1728,1920,51009,1280,50625,50305,1088,52225,3264,3456,52545,3840,53185,52865,3648,2560,51905,52097,2880,51457,2496,2176,51265,55297,6336,6528,55617,6912,56257,55937,6720,7680,57025,57217,8e3,56577,7616,7296,56385,5120,54465,54657,5440,55041,6080,5760,54849,53761,4800,4992,54081,4352,53697,53377,4160,61441,12480,12672,61761,13056,62401,62081,12864,13824,63169,63361,14144,62721,13760,13440,62529,15360,64705,64897,15680,65281,16320,16e3,65089,64001,15040,15232,64321,14592,63937,63617,14400,10240,59585,59777,10560,60161,11200,10880,59969,60929,11968,12160,61249,11520,60865,60545,11328,58369,9408,9600,58689,9984,59329,59009,9792,8704,58049,58241,9024,57601,8640,8320,57409,40961,24768,24960,41281,25344,41921,41601,25152,26112,42689,42881,26432,42241,26048,25728,42049,27648,44225,44417,27968,44801,28608,28288,44609,43521,27328,27520,43841,26880,43457,43137,26688,30720,47297,47489,31040,47873,31680,31360,47681,48641,32448,32640,48961,32e3,48577,48257,31808,46081,29888,30080,46401,30464,47041,46721,30272,29184,45761,45953,29504,45313,29120,28800,45121,20480,37057,37249,20800,37633,21440,21120,37441,38401,22208,22400,38721,21760,38337,38017,21568,39937,23744,23936,40257,24320,40897,40577,24128,23040,39617,39809,23360,39169,22976,22656,38977,34817,18624,18816,35137,19200,35777,35457,19008,19968,36545,36737,20288,36097,19904,19584,35905,17408,33985,34177,17728,34561,18368,18048,34369,33281,17088,17280,33601,16640,33217,32897,16448];this.addVbrFrame=function(e){var t=e.internal_flags,a=t.VBR_seek_table;if(e=te.bitrate_table[e.version][t.bitrate_index],a.nVbrNumFrames++,a.sum+=e,a.seen++,!(a.seen<a.want)&&(a.pos<a.size&&(a.bag[a.pos]=a.sum,a.pos++,a.seen=0),a.pos==a.size)){for(e=1;e<a.size;e+=2)a.bag[e/2]=a.bag[e];a.want*=2,a.pos/=2}},this.getVbrTag=function(e){var t=new VBRTagData,a=0;t.flags=0;var s=e[a+1]>>3&1,n=e[a+2]>>2&3,r=e[a+3]>>6&3,_=e[a+2]>>4&15;_=te.bitrate_table[s][_];if(t.samprate=14==e[a+1]>>4?te.samplerate_table[2][n]:te.samplerate_table[s][n],n=a=0!=s?3!=r?a+36:a+21:3!=r?a+21:a+13,!new String(e,n,4(),null).equals("Xing")&&!new String(e,n,4(),null).equals("Info"))return null;if(a+=4,t.hId=s,n=t.flags=i(e,a),a+=4,0!=(1&n)&&(t.frames=i(e,a),a+=4),0!=(2&n)&&(t.bytes=i(e,a),a+=4),0!=(4&n)){if(null!=t.toc)for(r=0;r<I;r++)t.toc[r]=e[a+r];a+=I}return t.vbrScale=-1,0!=(8&n)&&(t.vbrScale=i(e,a),a+=4),t.headersize=72e3*(s+1)*_/t.samprate,s=e[(a+=21)+0]<<4,s+=e[a+1]>>4,_=(15&e[a+1])<<8,(s<0||3e3<s)&&(s=-1),((_+=255&e[a+2])<0||3e3<_)&&(_=-1),t.encDelay=s,t.encPadding=_,t},this.InitVbrTag=function(e){var t=e.internal_flags,a=1==e.version?128:e.out_samplerate<16e3?32:64;e.VBR==ut.vbr_off&&(a=e.brate),a=72e3*(e.version+1)*a/e.out_samplerate;var s=t.sideinfo_len+o;if((t.VBR_seek_table.TotalFrameSize=a)<s||_<a)e.bWriteVbrTag=!1;else for(t.VBR_seek_table.nVbrNumFrames=0,t.VBR_seek_table.nBytesWritten=0,t.VBR_seek_table.sum=0,t.VBR_seek_table.seen=0,t.VBR_seek_table.want=1,t.VBR_seek_table.pos=0,null==t.VBR_seek_table.bag&&(t.VBR_seek_table.bag=new int[400],t.VBR_seek_table.size=400),k(e,a=new Int8Array(_)),t=t.VBR_seek_table.TotalFrameSize,s=0;s<t;++s)x.add_dummy_byte(e,255&a[s],1)},this.updateMusicCRC=function(e,t,a,s){for(var n=0;n<s;++n)e[0]=y(t[a+n],e[0])},this.getLameTagFrame=function(e,t){var a=e.internal_flags;if(!e.bWriteVbrTag||a.Class_ID!=X.LAME_ID||a.VBR_seek_table.pos<=0)return 0;if(t.length<a.VBR_seek_table.TotalFrameSize)return a.VBR_seek_table.TotalFrameSize;mt.fill(t,0,a.VBR_seek_table.TotalFrameSize,0),k(e,t);var s=new Int8Array(I);if(e.free_format)for(var n=1;n<I;++n)s[n]=255&255*n/100;else{var r=a.VBR_seek_table;if(!(r.pos<=0))for(n=1;n<I;++n){(l=0|Math.floor(n/I*r.pos))>r.pos-1&&(l=r.pos-1),255<(l=0|256*r.bag[l]/r.sum)&&(l=255),s[n]=255&l}}l=a.sideinfo_len,e.error_protection&&(l-=2),t[l++]=0,t[l++]=0,t[l++]=0,t[l++]=0,T(t,l,15),T(t,l+=4,a.VBR_seek_table.nVbrNumFrames),T(t,l+=4,0|(r=a.VBR_seek_table.nBytesWritten+a.VBR_seek_table.TotalFrameSize)),l+=4,ee.arraycopy(s,0,t,l,s.length),l+=s.length,e.error_protection&&x.CRC_writeheader(a,t);var _=0;for(n=0;n<l;n++)_=y(t[n],_);s=l,n=_;var i,o=e.internal_flags,l=0,f=(_=e.encoder_delay,e.encoder_padding),h=100-10*e.VBR_q-e.quality,c=P.getLameVeryShortVersion(),b=[1,5,3,2,4,0,3],u=0|(255<e.lowpassfreq/100+.5?255:e.lowpassfreq/100+.5),m=0,p=0,d=e.internal_flags.noise_shaping,g=0,v=0!=(1&e.exp_nspsytune),S=0!=(2&e.exp_nspsytune),R=i=!1,M=e.internal_flags.nogap_total,A=e.internal_flags.nogap_current,B=e.ATHtype;switch(e.VBR){case vbr_abr:var w=e.VBR_mean_bitrate_kbps;break;case vbr_off:w=e.brate;break;default:w=e.VBR_min_bitrate_kbps}switch(b=0+(e.VBR.ordinal()<b.length?b[e.VBR.ordinal()]:0),o.findReplayGain&&(510<o.RadioGain&&(o.RadioGain=510),o.RadioGain<-510&&(o.RadioGain=-510),p=11264,p=0<=o.RadioGain?p|o.RadioGain:512|p|-o.RadioGain),o.findPeakSample&&(m=Math.abs(0|o.PeakSample/32767*Math.pow(2,23)+.5)),-1!=M&&(0<A&&(R=!0),A<M-1&&(i=!0)),v=B+((v?1:0)<<4)+((S?1:0)<<5)+((i?1:0)<<6)+((R?1:0)<<7),h<0&&(h=0),e.mode){case MONO:S=0;break;case STEREO:S=1;break;case DUAL_CHANNEL:S=2;break;case JOINT_STEREO:S=e.force_ms?4:3;break;default:S=7}for(i=e.in_samplerate<=32e3?0:48e3==e.in_samplerate?2:48e3<e.in_samplerate?3:1,(e.short_blocks==sa.short_block_forced||e.short_blocks==sa.short_block_dispensed||-1==e.lowpassfreq&&-1==e.highpassfreq||e.scale_left<e.scale_right||e.scale_left>e.scale_right||e.disable_reservoir&&e.brate<320||e.noATH||e.ATHonly||0==B||e.in_samplerate<=32e3)&&(g=1),d=d+(S<<2)+(g<<5)+(i<<6),o=o.nMusicCRC,T(t,s+l,h),l+=4,h=0;h<9;h++)t[s+l+h]=255&c.charAt(h);for(t[s+(l+=9)]=255&b,t[s+ ++l]=255&u,T(t,s+ ++l,m),E(t,s+(l+=4),p),E(t,s+(l+=2),0),t[s+(l+=2)]=255&v,t[s+ ++l]=255<=w?255:255&w,t[s+ ++l]=255&_>>4,t[s+l+1]=255&(_<<4)+(f>>8),t[s+l+2]=255&f,t[s+(l+=3)]=255&d,l++,t[s+l++]=0,E(t,s+l,e.preset),T(t,s+(l+=2),r),E(t,s+(l+=4),o),l+=2,e=0;e<l;e++)n=y(t[s+e],n);return E(t,s+l,n),a.VBR_seek_table.TotalFrameSize},this.putVbrTag=function(e,t){if(e.internal_flags.VBR_seek_table.pos<=0)return-1;if(t.seek(t.length()),0==t.length())return-1;t.seek(0);var a=new Int8Array(10);return t.readFully(a),a=new String(a,"ISO-8859-1").startsWith("ID3")?0:((127&a[6])<<21|(127&a[7])<<14|(127&a[8])<<7|127&a[9])+a.length,t.seek(a),a=new Int8Array(_),(e=getLameTagFrame(e,a))>a.length?-1:(e<1||t.write(a,0,e),0)}}function J(){function g(e,t,a){for(;0<a;){if(0==b){if(b=8,c++,e.header[e.w_ptr].write_timing==T){var s=e;ee.arraycopy(s.header[s.w_ptr].buf,0,h,c,s.sideinfo_len),c+=s.sideinfo_len,T+=8*s.sideinfo_len,s.w_ptr=s.w_ptr+1&$.MAX_HEADER_BUF-1}h[c]=0}a-=s=Math.min(a,b),b-=s,h[c]|=t>>a<<b,T+=s}}function v(e,t){var a,s=e.internal_flags;if(8<=t&&(g(s,76,8),t-=8),8<=t&&(g(s,65,8),t-=8),8<=t&&(g(s,77,8),t-=8),8<=t&&(g(s,69,8),t-=8),32<=t){var n=r.getLameShortVersion();if(32<=t)for(a=0;a<n.length&&8<=t;++a)t-=8,g(s,n.charAt(a),8)}for(;1<=t;--t)g(s,s.ancillary_flag,1),s.ancillary_flag^=e.disable_reservoir?0:1}function S(e,t,a){for(var s=e.header[e.h_ptr].ptr;0<a;){var n=Math.min(a,8-(7&s));a-=n,e.header[e.h_ptr].buf[s>>3]|=t>>a<<8-(7&s)-n,s+=n}e.header[e.h_ptr].ptr=s}function n(e,t){e<<=8;for(var a=0;a<8;a++)0!=(65536&((t<<=1)^(e<<=1)))&&(t^=32773);return t}function R(e,t){var a,s=te.ht[t.count1table_select+32],n=0,r=t.big_values,_=t.big_values;for(a=(t.count1-t.big_values)/4;0<a;--a){var i=0,o=0,l=t.l3_enc[r+0];0!=l&&(o+=8,t.xr[_+0]<0&&i++),0!=(l=t.l3_enc[r+1])&&(o+=4,i*=2,t.xr[_+1]<0&&i++),0!=(l=t.l3_enc[r+2])&&(o+=2,i*=2,t.xr[_+2]<0&&i++),0!=(l=t.l3_enc[r+3])&&(o++,i*=2,t.xr[_+3]<0&&i++),r+=4,_+=4,g(e,i+s.table[o],s.hlen[o]),n+=s.hlen[o]}return n}function _(e,t,a,s,n){var r=te.ht[t],_=0;if(0==t)return _;for(;a<s;a+=2){var i=0,o=0,l=r.xlen,f=r.xlen,h=0,c=n.l3_enc[a],b=n.l3_enc[a+1];0!=c&&(n.xr[a]<0&&h++,i--),15<t&&(14<c&&(h|=c-15<<1,o=l,c=15),14<b&&(h<<=l,h|=f=b-15,o+=l,b=15),f=16),0!=b&&(h<<=1,n.xr[a+1]<0&&h++,i--),c=c*f+b,o-=i,i+=r.hlen[c],g(e,r.table[c],i),g(e,h,o),_+=i+o}return _}function M(e,t){var a=3*e.scalefac_band.s[3];return a>t.big_values&&(a=t.big_values),_(e,t.table_select[0],0,a,t)+_(e,t.table_select[1],a,t.big_values,t)}function A(e,t){var a=t.big_values,s=t.region0_count+1,n=e.scalefac_band.l[s];s+=t.region1_count+1;var r=e.scalefac_band.l[s];return a<n&&(n=a),a<r&&(r=a),s=_(e,t.table_select[0],0,n,t),(s+=_(e,t.table_select[1],n,r,t))+_(e,t.table_select[2],r,a,t)}function B(){this.total=0}function w(e,t){var a=e.internal_flags,s=a.w_ptr,n=a.h_ptr-1;-1==n&&(n=$.MAX_HEADER_BUF-1);var r=a.header[n].write_timing-T;if(0<=(t.total=r)){var _=1+n-s;n<s&&(_=1+n-s+$.MAX_HEADER_BUF),r-=8*_*a.sideinfo_len}return r+=e=i.getframebits(e),t.total+=e,t.total=0!=t.total%8?1+t.total/8:t.total/8,t.total+=c+1,r<0&&ee.err.println("strange error flushing buffer ... \n"),r}var i=this,o=null,l=null,r=null,f=null;this.setModules=function(e,t,a,s){o=e,l=t,r=a,f=s};var h=null,T=0,c=0,b=0;this.getframebits=function(e){var t=e.internal_flags;return 8*(0|72e3*(e.version+1)*(0!=t.bitrate_index?te.bitrate_table[e.version][t.bitrate_index]:e.brate)/e.out_samplerate+t.padding)},this.CRC_writeheader=function(e,t){var a=n(255&t[2],65535);a=n(255&t[3],a);for(var s=6;s<e.sideinfo_len;s++)a=n(255&t[s],a);t[4]=byte(a>>8),t[5]=byte(255&a)},this.flush_bitstream=function(e){var t,a=e.internal_flags,s=a.l3_side;(t=w(e,new B))<0||(v(e,t),a.ResvSize=0,s.main_data_begin=0,a.findReplayGain&&(s=o.GetTitleGain(a.rgdata),a.RadioGain=0|Math.floor(10*s+.5)),a.findPeakSample&&(a.noclipGainChange=0|Math.ceil(200*Math.log10(a.PeakSample/32767)),0<a.noclipGainChange&&(EQ(e.scale,1)||EQ(e.scale,0))?a.noclipScale=Math.floor(32767/a.PeakSample*100)/100:a.noclipScale=-1))},this.add_dummy_byte=function(e,t,a){e=e.internal_flags;for(var s;0<a--;){s=t;for(var n=8;0<n;){0==b&&(b=8,h[++c]=0);var r=Math.min(n,b);n-=r,b-=r,h[c]|=s>>n<<b,T+=r}for(s=0;s<$.MAX_HEADER_BUF;++s)e.header[s].write_timing+=8}},this.format_bitstream=function(e){var t=e.internal_flags,a=t.l3_side,s=this.getframebits(e);v(e,a.resvDrain_pre);var n,r,_,i=(l=e.internal_flags).l3_side;if(l.header[l.h_ptr].ptr=0,mt.fill(l.header[l.h_ptr].buf,0,l.sideinfo_len,0),e.out_samplerate<16e3?S(l,4094,12):S(l,4095,12),S(l,e.version,1),S(l,1,2),S(l,e.error_protection?0:1,1),S(l,l.bitrate_index,4),S(l,l.samplerate_index,2),S(l,l.padding,1),S(l,e.extension,1),S(l,e.mode.ordinal(),2),S(l,l.mode_ext,2),S(l,e.copyright,1),S(l,e.original,1),S(l,e.emphasis,2),e.error_protection&&S(l,0,16),1==e.version){for(S(l,i.main_data_begin,9),2==l.channels_out?S(l,i.private_bits,3):S(l,i.private_bits,5),_=0;_<l.channels_out;_++)for(n=0;n<4;n++)S(l,i.scfsi[_][n],1);for(r=0;r<2;r++)for(_=0;_<l.channels_out;_++)S(l,(n=i.tt[r][_]).part2_3_length+n.part2_length,12),S(l,n.big_values/2,9),S(l,n.global_gain,8),S(l,n.scalefac_compress,4),n.block_type!=ra.NORM_TYPE?(S(l,1,1),S(l,n.block_type,2),S(l,n.mixed_block_flag,1),14==n.table_select[0]&&(n.table_select[0]=16),S(l,n.table_select[0],5),14==n.table_select[1]&&(n.table_select[1]=16),S(l,n.table_select[1],5),S(l,n.subblock_gain[0],3),S(l,n.subblock_gain[1],3),S(l,n.subblock_gain[2],3)):(S(l,0,1),14==n.table_select[0]&&(n.table_select[0]=16),S(l,n.table_select[0],5),14==n.table_select[1]&&(n.table_select[1]=16),S(l,n.table_select[1],5),14==n.table_select[2]&&(n.table_select[2]=16),S(l,n.table_select[2],5),S(l,n.region0_count,4),S(l,n.region1_count,3)),S(l,n.preflag,1),S(l,n.scalefac_scale,1),S(l,n.count1table_select,1)}else for(S(l,i.main_data_begin,8),S(l,i.private_bits,l.channels_out),_=r=0;_<l.channels_out;_++)S(l,(n=i.tt[r][_]).part2_3_length+n.part2_length,12),S(l,n.big_values/2,9),S(l,n.global_gain,8),S(l,n.scalefac_compress,9),n.block_type!=ra.NORM_TYPE?(S(l,1,1),S(l,n.block_type,2),S(l,n.mixed_block_flag,1),14==n.table_select[0]&&(n.table_select[0]=16),S(l,n.table_select[0],5),14==n.table_select[1]&&(n.table_select[1]=16),S(l,n.table_select[1],5),S(l,n.subblock_gain[0],3),S(l,n.subblock_gain[1],3),S(l,n.subblock_gain[2],3)):(S(l,0,1),14==n.table_select[0]&&(n.table_select[0]=16),S(l,n.table_select[0],5),14==n.table_select[1]&&(n.table_select[1]=16),S(l,n.table_select[1],5),14==n.table_select[2]&&(n.table_select[2]=16),S(l,n.table_select[2],5),S(l,n.region0_count,4),S(l,n.region1_count,3)),S(l,n.scalefac_scale,1),S(l,n.count1table_select,1);e.error_protection&&CRC_writeheader(l,l.header[l.h_ptr].buf),i=l.h_ptr,l.h_ptr=i+1&$.MAX_HEADER_BUF-1,l.header[l.h_ptr].write_timing=l.header[i].write_timing+s,l.h_ptr==l.w_ptr&&ee.err.println("Error: MAX_HEADER_BUF too small in bitstream.c \n");var o,l=8*t.sideinfo_len,f=0,h=e.internal_flags,c=h.l3_side;if(1==e.version)for(_=0;_<2;_++)for(n=0;n<h.channels_out;n++){i=c.tt[_][n];var b=E.slen1_tab[i.scalefac_compress],u=E.slen2_tab[i.scalefac_compress];for(r=o=0;r<i.sfbdivide;r++)-1!=i.scalefac[r]&&(g(h,i.scalefac[r],b),o+=b);for(;r<i.sfbmax;r++)-1!=i.scalefac[r]&&(g(h,i.scalefac[r],u),o+=u);o=i.block_type==ra.SHORT_TYPE?o+M(h,i):o+A(h,i),f+=o+=R(h,i)}else for(n=_=0;n<h.channels_out;n++){var m,p=0,d=r=o=0;if((i=c.tt[_][n]).block_type==ra.SHORT_TYPE){for(;d<4;d++)for(u=i.sfb_partition_table[d]/3,b=i.slen[d],m=0;m<u;m++,r++)g(h,Math.max(i.scalefac[3*r+0],0),b),g(h,Math.max(i.scalefac[3*r+1],0),b),g(h,Math.max(i.scalefac[3*r+2],0),b),p+=3*b;o+=M(h,i)}else{for(;d<4;d++)for(u=i.sfb_partition_table[d],b=i.slen[d],m=0;m<u;m++,r++)g(h,Math.max(i.scalefac[r],0),b),p+=b;o+=A(h,i)}f+=p+(o+=R(h,i))}if(l+=f,v(e,a.resvDrain_post),l+=a.resvDrain_post,a.main_data_begin+=(s-l)/8,w(e,new B)!=t.ResvSize&&ee.err.println("Internal buffer inconsistency. flushbits <> ResvSize"),8*a.main_data_begin!=t.ResvSize&&(ee.err.printf("bit reservoir error: \nl3_side.main_data_begin: %d \nResvoir size:             %d \nresv drain (post)         %d \nresv drain (pre)          %d \nheader and sideinfo:      %d \ndata bits:                %d \ntotal bits:               %d (remainder: %d) \nbitsperframe:             %d \n",8*a.main_data_begin,t.ResvSize,a.resvDrain_post,a.resvDrain_pre,8*t.sideinfo_len,l-a.resvDrain_post-8*t.sideinfo_len,l,l%8,s),ee.err.println("This is a fatal error.  It has several possible causes:"),ee.err.println("90%%  LAME compiled with buggy version of gcc using advanced optimizations"),ee.err.println(" 9%%  Your system is overclocked"),ee.err.println(" 1%%  bug in LAME encoding library"),t.ResvSize=8*a.main_data_begin),1e9<T){for(e=0;e<$.MAX_HEADER_BUF;++e)t.header[e].write_timing-=T;T=0}return 0},this.copy_buffer=function(e,t,a,s,n){var r=c+1;if(r<=0)return 0;if(0!=s&&s<r)return-1;if(ee.arraycopy(h,0,t,a,r),c=-1,(b=0)!=n&&((s=ea(1))[0]=e.nMusicCRC,f.updateMusicCRC(s,t,a,r),e.nMusicCRC=s[0],0<r&&(e.VBR_seek_table.nBytesWritten+=r),e.decode_on_the_fly)){s=aa([2,1152]),n=r;for(var _,i=-1;0!=i;)if(i=l.hip_decode1_unclipped(e.hip,t,a,n,s[0],s[1]),n=0,-1==i&&(i=0),0<i){if(e.findPeakSample){for(_=0;_<i;_++)s[0][_]>e.PeakSample?e.PeakSample=s[0][_]:-s[0][_]>e.PeakSample&&(e.PeakSample=-s[0][_]);if(1<e.channels_out)for(_=0;_<i;_++)s[1][_]>e.PeakSample?e.PeakSample=s[1][_]:-s[1][_]>e.PeakSample&&(e.PeakSample=-s[1][_])}if(e.findReplayGain&&o.AnalyzeSamples(e.rgdata,s[0],0,s[1],0,i,e.channels_out)==W.GAIN_ANALYSIS_ERROR)return-6}}return r},this.init_bit_stream_w=function(e){h=new Int8Array(X.LAME_MAXMP3BUFFER),e.h_ptr=e.w_ptr=0,e.header[e.h_ptr].write_timing=0,c=-1,T=b=0}}function e(e,t,a,s){this.xlen=e,this.linmax=t,this.table=a,this.hlen=s}function T(e){this.bits=e}function O(){this.bits=this.over_SSD=this.over_count=this.max_noise=this.tot_noise=this.over_noise=0}function t(){this.setModules=function(e,t){}}function k(){this.floor=this.decay=this.adjustLimit=this.adjust=this.aaSensitivityP=this.useAdjust=0,this.l=ta(ra.SBMAX_l),this.s=ta(ra.SBMAX_s),this.psfb21=ta(ra.PSFB21),this.psfb12=ta(ra.PSFB12),this.cb_l=ta(ra.CBANDS),this.cb_s=ta(ra.CBANDS),this.eql_w=ta(ra.BLKSIZE/2)}function a(){this.scale_right=this.scale_left=this.scale=this.out_samplerate=this.in_samplerate=this.num_channels=this.num_samples=this.class_id=0,this.decode_only=this.bWriteVbrTag=this.analysis=!1,this.quality=0,this.mode=na.STEREO,this.write_id3tag_automatic=this.decode_on_the_fly=this.findReplayGain=this.free_format=this.force_ms=!1,this.error_protection=this.emphasis=this.extension=this.original=this.copyright=this.compression_ratio=this.brate=0,this.disable_reservoir=this.strict_ISO=!1,this.quant_comp_short=this.quant_comp=0,this.experimentalY=!1,this.preset=this.exp_nspsytune=this.experimentalZ=0,this.VBR=null,this.maskingadjust_short=this.maskingadjust=this.highpasswidth=this.lowpasswidth=this.highpassfreq=this.lowpassfreq=this.VBR_hard_min=this.VBR_max_bitrate_kbps=this.VBR_min_bitrate_kbps=this.VBR_mean_bitrate_kbps=this.VBR_q=this.VBR_q_frac=0,this.noATH=this.ATHshort=this.ATHonly=!1,this.athaa_sensitivity=this.athaa_loudapprox=this.athaa_type=this.ATHlower=this.ATHcurve=this.ATHtype=0,this.short_blocks=null,this.useTemporal=!1,this.msfix=this.interChRatio=0,this.tune=!1,this.lame_allocated_gfp=this.frameNum=this.framesize=this.encoder_padding=this.encoder_delay=this.version=this.tune_value_a=0,this.internal_flags=null}function y(e){this.quantize=e,this.iteration_loop=function(e,t,a,s){var n=e.internal_flags,r=ta(G.SFBMAX),_=ta(576),i=ea(2),o=n.l3_side,l=new T(0);this.quantize.rv.ResvFrameBegin(e,l),l=l.bits;for(var f=0;f<n.mode_gr;f++){var h=this.quantize.qupvt.on_pe(e,t,i,l,f,f);for(n.mode_ext==ra.MPG_MD_MS_LR&&(this.quantize.ms_convert(n.l3_side,f),this.quantize.qupvt.reduce_side(i,a[f],l,h)),h=0;h<n.channels_out;h++){var c=o.tt[f][h];if(c.block_type!=ra.SHORT_TYPE){var b=0;b=n.PSY.mask_adjust-b}else b=0,b=n.PSY.mask_adjust_short-b;n.masking_lower=Math.pow(10,.1*b),this.quantize.init_outer_loop(n,c),this.quantize.init_xrpow(n,c,_)&&(this.quantize.qupvt.calc_xmin(e,s[f][h],c,r),this.quantize.outer_loop(e,c,r,_,h,i[h])),this.quantize.iteration_finish_one(n,f,h)}}this.quantize.rv.ResvFrameEnd(n,l)}}function x(){this.linprebuf=ta(2*W.MAX_ORDER),this.linpre=0,this.lstepbuf=ta(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER),this.lstep=0,this.loutbuf=ta(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER),this.lout=0,this.rinprebuf=ta(2*W.MAX_ORDER),this.rinpre=0,this.rstepbuf=ta(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER),this.rstep=0,this.routbuf=ta(W.MAX_SAMPLES_PER_WINDOW+W.MAX_ORDER),this.first=this.freqindex=this.rsum=this.lsum=this.totsamp=this.sampleWindow=this.rout=0,this.A=ea(0|W.STEPS_per_dB*W.MAX_dB),this.B=ea(0|W.STEPS_per_dB*W.MAX_dB)}function n(e,t,a,s){this.l=ea(1+ra.SBMAX_l),this.s=ea(1+ra.SBMAX_s),this.psfb21=ea(1+ra.PSFB21),this.psfb12=ea(1+ra.PSFB12);var n=this.l,r=this.s;4==arguments.length&&(this.arrL=e,this.arrS=t,this.arr21=a,this.arr12=s,ee.arraycopy(this.arrL,0,n,0,Math.min(this.arrL.length,this.l.length)),ee.arraycopy(this.arrS,0,r,0,Math.min(this.arrS.length,this.s.length)),ee.arraycopy(this.arr21,0,this.psfb21,0,Math.min(this.arr21.length,this.psfb21.length)),ee.arraycopy(this.arr12,0,this.psfb12,0,Math.min(this.arr12.length,this.psfb12.length)))}function P(){function c(e,t){return t=s.ATHformula(t,e),Math.pow(10,(t-100)/10+e.ATHlower)}function g(e){this.s=e}var b=null,h=null,s=null;this.setModules=function(e,t,a){b=e,h=t,s=a},this.IPOW20=function(e){return d[e]};var u=P.IXMAX_VAL+2,m=P.Q_MAX,p=P.Q_MAX2;this.nr_of_sfb_block=[[[6,5,5,5],[9,9,9,9],[6,9,9,9]],[[6,5,7,3],[9,9,12,6],[6,9,12,6]],[[11,10,0,0],[18,18,0,0],[15,18,0,0]],[[7,7,7,0],[12,12,12,0],[6,15,12,0]],[[6,6,6,3],[12,9,9,6],[6,12,9,6]],[[8,8,5,0],[15,12,9,0],[6,18,9,0]]];var S=[0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,2,2,3,3,3,2,0];this.pretab=S,this.sfBandIndex=[new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,24,32,42,56,74,100,132,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,114,136,162,194,232,278,332,394,464,540,576],[0,4,8,12,18,26,36,48,62,80,104,136,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,4,8,12,16,20,24,30,36,44,52,62,74,90,110,134,162,196,238,288,342,418,576],[0,4,8,12,16,22,30,40,52,66,84,106,136,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,4,8,12,16,20,24,30,36,42,50,60,72,88,106,128,156,190,230,276,330,384,576],[0,4,8,12,16,22,28,38,50,64,80,100,126,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,4,8,12,16,20,24,30,36,44,54,66,82,102,126,156,194,240,296,364,448,550,576],[0,4,8,12,16,22,30,42,58,78,104,138,180,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,6,12,18,24,30,36,44,54,66,80,96,116,140,168,200,238,284,336,396,464,522,576],[0,4,8,12,18,26,36,48,62,80,104,134,174,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0]),new n([0,12,24,36,48,60,72,88,108,132,160,192,232,280,336,400,476,566,568,570,572,574,576],[0,8,16,24,36,52,72,96,124,160,162,164,166,192],[0,0,0,0,0,0,0],[0,0,0,0,0,0,0])];var v=ta(m+p+1),d=ta(m),R=ta(u),M=ta(u);this.adj43=M,this.iteration_init=function(e){var t=e.internal_flags,a=t.l3_side;if(0==t.iteration_init_init){t.iteration_init_init=1,a.main_data_begin=0;for(var s,n,r=e.internal_flags.ATH.l,_=e.internal_flags.ATH.psfb21,i=e.internal_flags.ATH.s,o=e.internal_flags.ATH.psfb12,l=e.internal_flags,f=e.out_samplerate,h=0;h<ra.SBMAX_l;h++)for(n=l.scalefac_band.l[h],a=l.scalefac_band.l[h+1],r[h]=j.MAX_VALUE;n<a;n++)s=c(e,s=n*f/1152),r[h]=Math.min(r[h],s);for(h=0;h<ra.PSFB21;h++)for(n=l.scalefac_band.psfb21[h],a=l.scalefac_band.psfb21[h+1],_[h]=j.MAX_VALUE;n<a;n++)s=c(e,s=n*f/1152),_[h]=Math.min(_[h],s);for(h=0;h<ra.SBMAX_s;h++){for(n=l.scalefac_band.s[h],a=l.scalefac_band.s[h+1],i[h]=j.MAX_VALUE;n<a;n++)s=c(e,s=n*f/384),i[h]=Math.min(i[h],s);i[h]*=l.scalefac_band.s[h+1]-l.scalefac_band.s[h]}for(h=0;h<ra.PSFB12;h++){for(n=l.scalefac_band.psfb12[h],a=l.scalefac_band.psfb12[h+1],o[h]=j.MAX_VALUE;n<a;n++)s=c(e,s=n*f/384),o[h]=Math.min(o[h],s);o[h]*=l.scalefac_band.s[13]-l.scalefac_band.s[12]}if(e.noATH){for(h=0;h<ra.SBMAX_l;h++)r[h]=1e-20;for(h=0;h<ra.PSFB21;h++)_[h]=1e-20;for(h=0;h<ra.SBMAX_s;h++)i[h]=1e-20;for(h=0;h<ra.PSFB12;h++)o[h]=1e-20}for(l.ATH.floor=10*Math.log10(c(e,-1)),R[0]=0,a=1;a<u;a++)R[a]=Math.pow(a,4/3);for(a=0;a<u-1;a++)M[a]=a+1-Math.pow(.5*(R[a]+R[a+1]),.75);for(M[a]=.5,a=0;a<m;a++)d[a]=Math.pow(2,-.1875*(a-210));for(a=0;a<=m+p;a++)v[a]=Math.pow(2,.25*(a-210-p));for(b.huffman_init(t),32<=(a=e.exp_nspsytune>>2&63)&&(a-=64),r=Math.pow(10,a/4/10),32<=(a=e.exp_nspsytune>>8&63)&&(a-=64),_=Math.pow(10,a/4/10),32<=(a=e.exp_nspsytune>>14&63)&&(a-=64),i=Math.pow(10,a/4/10),32<=(a=e.exp_nspsytune>>20&63)&&(a-=64),o=i*Math.pow(10,a/4/10),a=0;a<ra.SBMAX_l;a++)e=a<=6?r:a<=13?_:a<=20?i:o,t.nsPsy.longfact[a]=e;for(a=0;a<ra.SBMAX_s;a++)e=a<=5?r:a<=10?_:a<=11?i:o,t.nsPsy.shortfact[a]=e}},this.on_pe=function(e,t,a,s,n,r){var _,i=e.internal_flags,o=0,l=ea(2);o=new T(o);e=h.ResvMaxBits(e,s,o,r);var f=(o=o.bits)+e;for($.MAX_BITS_PER_GRANULE<f&&(f=$.MAX_BITS_PER_GRANULE),_=r=0;_<i.channels_out;++_)a[_]=Math.min($.MAX_BITS_PER_CHANNEL,o/i.channels_out),l[_]=0|a[_]*t[n][_]/700-a[_],l[_]>3*s/4&&(l[_]=3*s/4),l[_]<0&&(l[_]=0),l[_]+a[_]>$.MAX_BITS_PER_CHANNEL&&(l[_]=Math.max(0,$.MAX_BITS_PER_CHANNEL-a[_])),r+=l[_];if(e<r)for(_=0;_<i.channels_out;++_)l[_]=e*l[_]/r;for(_=0;_<i.channels_out;++_)a[_]+=l[_],e-=l[_];for(_=r=0;_<i.channels_out;++_)r+=a[_];if($.MAX_BITS_PER_GRANULE<r)for(_=0;_<i.channels_out;++_)a[_]*=$.MAX_BITS_PER_GRANULE,a[_]/=r;return f},this.reduce_side=function(e,t,a,s){(t=.33*(.5-t)/.5)<0&&(t=0),.5<t&&(t=.5),(t=0|.5*t*(e[0]+e[1]))>$.MAX_BITS_PER_CHANNEL-e[0]&&(t=$.MAX_BITS_PER_CHANNEL-e[0]),t<0&&(t=0),125<=e[1]&&(125<e[1]-t?(e[0]<a&&(e[0]+=t),e[1]-=t):(e[0]+=e[1]-125,e[1]=125)),s<(t=e[0]+e[1])&&(e[0]=s*e[0]/t,e[1]=s*e[1]/t)},this.athAdjust=function(e,t,a){t=_a.FAST_LOG10_X(t,10);var s=0;return t-=a,1e-20<(e*=e)&&(s=1+_a.FAST_LOG10_X(e,10/90.30873362)),s<0&&(s=0),Math.pow(10,.1*(t*s+(a+90.30873362-94.82444863)))},this.calc_xmin=function(e,t,a,s){var n,r=0,_=e.internal_flags,i=0,o=0,l=_.ATH,f=a.xr,h=e.VBR==ut.vbr_mtrh?1:0,c=_.masking_lower;for(e.VBR!=ut.vbr_mtrh&&e.VBR!=ut.vbr_mt||(c=1),n=0;n<a.psy_lmax;n++){var b=e.VBR==ut.vbr_rh||e.VBR==ut.vbr_mtrh?athAdjust(l.adjust,l.l[n],l.floor):l.adjust*l.l[n],u=a.width[n],m=b/u,p=2220446049250313e-31,d=u>>1,g=0;do{var v=f[i]*f[i];g+=v,p+=v<m?v:m,g+=v=f[++i]*f[i],p+=v<m?v:m,i++}while(0<--d);b<g&&o++,n==ra.SBPSY_l&&(p<(d=b*_.nsPsy.longfact[n])&&(p=d)),0!=h&&(b=p),e.ATHonly||0<(p=t.en.l[n])&&(d=g*t.thm.l[n]*c/p,0!=h&&(d*=_.nsPsy.longfact[n]),b<d&&(b=d)),s[r++]=0!=h?b:b*_.nsPsy.longfact[n]}if(b=575,a.block_type!=ra.SHORT_TYPE)for(g=576;0!=g--&&J.EQ(f[g],0);)b=g;a.max_nonzero_coeff=b;for(var S=a.sfb_smin;n<a.psymax;S++,n+=3){var R,M=e.VBR==ut.vbr_rh||e.VBR==ut.vbr_mtrh?athAdjust(l.adjust,l.s[S],l.floor):l.adjust*l.s[S];for(u=a.width[n],R=0;R<3;R++){for(g=0,d=u>>1,m=M/u,p=2220446049250313e-31;g+=v=f[i]*f[i],p+=v<m?v:m,g+=v=f[++i]*f[i],p+=v<m?v:m,i++,0<--d;);M<g&&o++,S==ra.SBPSY_s&&(p<(d=M*_.nsPsy.shortfact[S])&&(p=d)),b=0!=h?p:M,e.ATHonly||e.ATHshort||0<(p=t.en.s[S][R])&&(d=g*t.thm.s[S][R]*c/p,0!=h&&(d*=_.nsPsy.shortfact[S]),b<d&&(b=d)),s[r++]=0!=h?b:b*_.nsPsy.shortfact[S]}e.useTemporal&&(s[r-3]>s[r-3+1]&&(s[r-3+1]+=(s[r-3]-s[r-3+1])*_.decay),s[r-3+1]>s[r-3+2]&&(s[r-3+2]+=(s[r-3+1]-s[r-3+2])*_.decay))}return o},this.calc_noise_core=function(e,t,a,s){var n=0,r=t.s,_=e.l3_enc;if(r>e.count1)for(;0!=a--;){var i=e.xr[r];r++,n+=i*i,i=e.xr[r],r++,n+=i*i}else if(r>e.big_values){var o=ta(2);for(o[0]=0,o[1]=s;0!=a--;)i=Math.abs(e.xr[r])-o[_[r]],r++,n+=i*i,i=Math.abs(e.xr[r])-o[_[r]],r++,n+=i*i}else for(;0!=a--;)i=Math.abs(e.xr[r])-R[_[r]]*s,r++,n+=i*i,i=Math.abs(e.xr[r])-R[_[r]]*s,r++,n+=i*i;return t.s=r,n},this.calc_noise=function(e,t,a,s,n){var r,_=0,i=0,o=0,l=0,f=0,h=-20,c=0,b=e.scalefac,u=0;for(r=s.over_SSD=0;r<e.psymax;r++){var m=e.global_gain-(b[u++]+(0!=e.preflag?S[r]:0)<<e.scalefac_scale+1)-8*e.subblock_gain[e.window[r]];if(null!=n&&n.step[r]==m){var p=n.noise[r];c+=e.width[r],a[_++]=p/t[i++],p=n.noise_log[r]}else{p=v[m+P.Q_MAX2];var d=e.width[r]>>1;c+e.width[r]>e.max_nonzero_coeff&&(d=0<(d=e.max_nonzero_coeff-c+1)?d>>1:0),c=new g(c),p=this.calc_noise_core(e,c,d,p),c=c.s,null!=n&&(n.step[r]=m,n.noise[r]=p),p=a[_++]=p/t[i++],p=_a.FAST_LOG10(Math.max(p,1e-20)),null!=n&&(n.noise_log[r]=p)}null!=n&&(n.global_gain=e.global_gain),f+=p,0<p&&(m=Math.max(0|10*p+.5,1),s.over_SSD+=m*m,o++,l+=p),h=Math.max(h,p)}return s.over_count=o,s.tot_noise=f,s.over_noise=l,s.max_noise=h,o},this.set_pinfo=function(e,t,a,s,n){var r,_,i=e.internal_flags,o=0==t.scalefac_scale?.5:1,l=t.scalefac,f=ta(G.SFBMAX),h=ta(G.SFBMAX),c=new O;calc_xmin(e,a,t,f),calc_noise(t,f,h,c,null);var b=0,u=t.sfb_lmax;for(t.block_type!=ra.SHORT_TYPE&&0==t.mixed_block_flag&&(u=22),r=0;r<u;r++){var m=i.scalefac_band.l[r],p=i.scalefac_band.l[r+1],d=p-m;for(_=0;b<p;b++)_+=t.xr[b]*t.xr[b];_/=d;var g=1e15;i.pinfo.en[s][n][r]=g*_,i.pinfo.xfsf[s][n][r]=g*f[r]*h[r]/d,_=0<a.en.l[r]&&!e.ATHonly?_/a.en.l[r]:0,i.pinfo.thr[s][n][r]=g*Math.max(_*a.thm.l[r],i.ATH.l[r]),(i.pinfo.LAMEsfb[s][n][r]=0)!=t.preflag&&11<=r&&(i.pinfo.LAMEsfb[s][n][r]=-o*S[r]),r<ra.SBPSY_l&&(i.pinfo.LAMEsfb[s][n][r]-=o*l[r])}if(t.block_type==ra.SHORT_TYPE)for(u=r,r=t.sfb_smin;r<ra.SBMAX_s;r++){m=i.scalefac_band.s[r],d=(p=i.scalefac_band.s[r+1])-m;for(var v=0;v<3;v++){for(_=0,g=m;g<p;g++)_+=t.xr[b]*t.xr[b],b++;_=Math.max(_/d,1e-20),g=1e15,i.pinfo.en_s[s][n][3*r+v]=g*_,i.pinfo.xfsf_s[s][n][3*r+v]=g*f[u]*h[u]/d,_=0<a.en.s[r][v]?_/a.en.s[r][v]:0,(e.ATHonly||e.ATHshort)&&(_=0),i.pinfo.thr_s[s][n][3*r+v]=g*Math.max(_*a.thm.s[r][v],i.ATH.s[r]),i.pinfo.LAMEsfb_s[s][n][3*r+v]=-2*t.subblock_gain[v],r<ra.SBPSY_s&&(i.pinfo.LAMEsfb_s[s][n][3*r+v]-=o*l[u]),u++}}i.pinfo.LAMEqss[s][n]=t.global_gain,i.pinfo.LAMEmainbits[s][n]=t.part2_3_length+t.part2_length,i.pinfo.LAMEsfbits[s][n]=t.part2_length,i.pinfo.over[s][n]=c.over_count,i.pinfo.max_noise[s][n]=10*c.max_noise,i.pinfo.over_noise[s][n]=10*c.over_noise,i.pinfo.tot_noise[s][n]=10*c.tot_noise,i.pinfo.over_SSD[s][n]=c.over_SSD}}function L(){this.sfb_count1=this.global_gain=0,this.step=ea(39),this.noise=ta(39),this.noise_log=ta(39)}function N(){this.xr=ta(576),this.l3_enc=ea(576),this.scalefac=ea(G.SFBMAX),this.mixed_block_flag=this.block_type=this.scalefac_compress=this.global_gain=this.count1=this.big_values=this.part2_3_length=this.xrpow_max=0,this.table_select=ea(3),this.subblock_gain=ea(4),this.sfbdivide=this.psymax=this.sfbmax=this.psy_lmax=this.sfb_smin=this.sfb_lmax=this.part2_length=this.count1table_select=this.scalefac_scale=this.preflag=this.region1_count=this.region0_count=0,this.width=ea(G.SFBMAX),this.window=ea(G.SFBMAX),this.count1bits=0,this.sfb_partition_table=null,this.slen=ea(4),this.max_nonzero_coeff=0;var t=this;this.assign=function(e){t.xr=new Float32Array(e.xr),t.l3_enc=new Int32Array(e.l3_enc),t.scalefac=new Int32Array(e.scalefac),t.xrpow_max=e.xrpow_max,t.part2_3_length=e.part2_3_length,t.big_values=e.big_values,t.count1=e.count1,t.global_gain=e.global_gain,t.scalefac_compress=e.scalefac_compress,t.block_type=e.block_type,t.mixed_block_flag=e.mixed_block_flag,t.table_select=new Int32Array(e.table_select),t.subblock_gain=new Int32Array(e.subblock_gain),t.region0_count=e.region0_count,t.region1_count=e.region1_count,t.preflag=e.preflag,t.scalefac_scale=e.scalefac_scale,t.count1table_select=e.count1table_select,t.part2_length=e.part2_length,t.sfb_lmax=e.sfb_lmax,t.sfb_smin=e.sfb_smin,t.psy_lmax=e.psy_lmax,t.sfbmax=e.sfbmax,t.psymax=e.psymax,t.sfbdivide=e.sfbdivide,t.width=new Int32Array(e.width),t.window=new Int32Array(e.window),t.count1bits=e.count1bits,t.sfb_partition_table=e.sfb_partition_table.slice(0),t.slen=new Int32Array(e.slen),t.max_nonzero_coeff=e.max_nonzero_coeff}}function I(){function P(e){this.ordinal=e}function I(e){for(var t=0;t<e.sfbmax;t++)if(0==e.scalefac[t]+e.subblock_gain[e.window[t]])return!1;return!0}var b,d;this.rv=null,this.qupvt=null;var H,V,n=new t;this.setModules=function(e,t,a,s){b=e,this.rv=d=t,this.qupvt=H=a,V=s,n.setModules(H,V)},this.ms_convert=function(e,t){for(var a=0;a<576;++a){var s=e.tt[t][0].xr[a],n=e.tt[t][1].xr[a];e.tt[t][0].xr[a]=.5*(s+n)*_a.SQRT2,e.tt[t][1].xr[a]=.5*(s-n)*_a.SQRT2}},this.init_xrpow=function(e,t,a){var s=0|t.max_nonzero_coeff;t.xrpow_max=0,mt.fill(a,s,576,0);for(var n,r=n=0;r<=s;++r){var _=Math.abs(t.xr[r]);n+=_,a[r]=Math.sqrt(_*Math.sqrt(_)),a[r]>t.xrpow_max&&(t.xrpow_max=a[r])}if(1e-20<n){for((a=0)!=(2&e.substep_shaping)&&(a=1),s=0;s<t.psymax;s++)e.pseudohalf[s]=a;return!0}return mt.fill(t.l3_enc,0,576,0),!1},this.init_outer_loop=function(e,t){t.part2_3_length=0,t.big_values=0,t.count1=0,t.global_gain=210,t.scalefac_compress=0,t.table_select[0]=0,t.table_select[1]=0,t.table_select[2]=0,t.subblock_gain[0]=0,t.subblock_gain[1]=0,t.subblock_gain[2]=0,t.subblock_gain[3]=0,t.region0_count=0,t.region1_count=0,t.preflag=0,t.scalefac_scale=0,t.count1table_select=0,t.part2_length=0,t.sfb_lmax=ra.SBPSY_l,t.sfb_smin=ra.SBPSY_s,t.psy_lmax=e.sfb21_extra?ra.SBMAX_l:ra.SBPSY_l,t.psymax=t.psy_lmax,t.sfbmax=t.sfb_lmax,t.sfbdivide=11;for(var a=0;a<ra.SBMAX_l;a++)t.width[a]=e.scalefac_band.l[a+1]-e.scalefac_band.l[a],t.window[a]=3;if(t.block_type==ra.SHORT_TYPE){var s=ta(576);t.sfb_smin=0,(t.sfb_lmax=0)!=t.mixed_block_flag&&(t.sfb_smin=3,t.sfb_lmax=2*e.mode_gr+4),t.psymax=t.sfb_lmax+3*((e.sfb21_extra?ra.SBMAX_s:ra.SBPSY_s)-t.sfb_smin),t.sfbmax=t.sfb_lmax+3*(ra.SBPSY_s-t.sfb_smin),t.sfbdivide=t.sfbmax-18,t.psy_lmax=t.sfb_lmax;var n=e.scalefac_band.l[t.sfb_lmax];for(ee.arraycopy(t.xr,0,s,0,576),a=t.sfb_smin;a<ra.SBMAX_s;a++)for(var r=e.scalefac_band.s[a],_=e.scalefac_band.s[a+1],i=0;i<3;i++)for(var o=r;o<_;o++)t.xr[n++]=s[3*o+i];for(s=t.sfb_lmax,a=t.sfb_smin;a<ra.SBMAX_s;a++)t.width[s]=t.width[s+1]=t.width[s+2]=e.scalefac_band.s[a+1]-e.scalefac_band.s[a],t.window[s]=0,t.window[s+1]=1,t.window[s+2]=2,s+=3}if(t.count1bits=0,t.sfb_partition_table=H.nr_of_sfb_block[0][0],t.slen[0]=0,t.slen[1]=0,t.slen[2]=0,t.slen[3]=0,t.max_nonzero_coeff=575,mt.fill(t.scalefac,0),a=e.ATH,s=t.xr,t.block_type!=ra.SHORT_TYPE)for(n=!1,r=ra.PSFB21-1;0<=r&&!n;r--)for(t=e.scalefac_band.psfb21[r],_=e.scalefac_band.psfb21[r+1],i=H.athAdjust(a.adjust,a.psfb21[r],a.floor),1e-12<e.nsPsy.longfact[21]&&(i*=e.nsPsy.longfact[21]),--_;t<=_;_--){if(!(Math.abs(s[_])<i)){n=!0;break}s[_]=0}else for(i=0;i<3;i++)for(n=!1,r=ra.PSFB12-1;0<=r&&!n;r--)for(_=(t=3*e.scalefac_band.s[12]+(e.scalefac_band.s[13]-e.scalefac_band.s[12])*i+(e.scalefac_band.psfb12[r]-e.scalefac_band.psfb12[0]))+(e.scalefac_band.psfb12[r+1]-e.scalefac_band.psfb12[r]),o=H.athAdjust(a.adjust,a.psfb12[r],a.floor),1e-12<e.nsPsy.shortfact[12]&&(o*=e.nsPsy.shortfact[12]),--_;t<=_;_--){if(!(Math.abs(s[_])<o)){n=!0;break}s[_]=0}},P.BINSEARCH_NONE=new P(0),P.BINSEARCH_UP=new P(1),P.BINSEARCH_DOWN=new P(2),this.trancate_smallspectrums=function(e,t,a,s){var n=ta(G.SFBMAX);if((0!=(4&e.substep_shaping)||t.block_type!=ra.SHORT_TYPE)&&0==(128&e.substep_shaping)){H.calc_noise(t,a,n,new O,null);for(var r=0;r<576;r++){var _=0;0!=t.l3_enc[r]&&(_=Math.abs(t.xr[r])),s[r]=_}r=0,_=8,t.block_type==ra.SHORT_TYPE&&(_=6);do{var i,o,l=t.width[_];r=r+l;if(!(1<=n[_]||(mt.sort(s,r-l,l),J.EQ(s[r-1],0)))){var f=(1-n[_])*a[_],h=i=0;do{for(o=1;h+o<l&&!J.NEQ(s[h+r-l],s[h+r+o-l]);o++);var c=s[h+r-l]*s[h+r-l]*o;if(f<c){0!=h&&(i=s[h+r-l-1]);break}f-=c,h+=o}while(h<l);if(!J.EQ(i,0))for(;Math.abs(t.xr[r-l])<=i&&(t.l3_enc[r-l]=0),0<--l;);}}while(++_<t.psymax);t.part2_3_length=V.noquant_count_bits(e,t,null)}},this.outer_loop=function(e,t,a,s,n,r){var _,i=e.internal_flags,o=new N,l=ta(576),f=ta(G.SFBMAX),h=new O,c=new L,b=9999999,u=!1,m=!1,p=0,d=i.CurrentStep[n],g=!1,v=i.OldValue[n],S=P.BINSEARCH_NONE;for(t.global_gain=v,_=r-t.part2_length;;){var R=V.count_bits(i,s,t,null);if(1==d||R==_)break;R=_<R?(S==P.BINSEARCH_DOWN&&(g=!0),g&&(d/=2),S=P.BINSEARCH_UP,d):(S==P.BINSEARCH_UP&&(g=!0),g&&(d/=2),S=P.BINSEARCH_DOWN,-d),t.global_gain+=R,t.global_gain<0&&(g=!(t.global_gain=0)),255<t.global_gain&&(t.global_gain=255,g=!0)}for(;_<R&&t.global_gain<255;)t.global_gain++,R=V.count_bits(i,s,t,null);if(i.CurrentStep[n]=4<=v-t.global_gain?4:2,i.OldValue[n]=t.global_gain,t.part2_3_length=R,0==i.noise_shaping)return 100;for(H.calc_noise(t,a,f,h,c),h.bits=t.part2_3_length,o.assign(t),n=0,ee.arraycopy(s,0,l,0,576);!u;){do{if(_=new O,g=255,d=0!=(2&i.substep_shaping)?20:3,i.sfb21_extra){if(1<f[o.sfbmax])break;if(o.block_type==ra.SHORT_TYPE&&(1<f[o.sfbmax+1]||1<f[o.sfbmax+2]))break}v=o,R=s,S=e.internal_flags;for(var M=v,A=f,B=R,w=e.internal_flags,T=0==M.scalefac_scale?1.2968395546510096:1.6817928305074292,E=0,k=0;k<M.sfbmax;k++)E<A[k]&&(E=A[k]);switch(3==(k=w.noise_shaping_amp)&&(k=m?2:1),k){case 2:break;case 1:E=1<E?Math.pow(E,.5):.95*E;break;default:E=1<E?1:.95*E}var y=0;for(k=0;k<M.sfbmax;k++){var x=M.width[k];y=y+x;if(!(A[k]<E)){if(0!=(2&w.substep_shaping)&&(w.pseudohalf[k]=0==w.pseudohalf[k]?1:0,0==w.pseudohalf[k]&&2==w.noise_shaping_amp))break;for(M.scalefac[k]++,x=-x;x<0;x++)B[y+x]*=T,B[y+x]>M.xrpow_max&&(M.xrpow_max=B[y+x]);if(2==w.noise_shaping_amp)break}}if(T=I(v))v=!1;else if(T=2==S.mode_gr?V.scale_bitcount(v):V.scale_bitcount_lsf(S,v)){if(1<S.noise_shaping)if(mt.fill(S.pseudohalf,0),0==v.scalefac_scale){for(T=v,A=M=0;A<T.sfbmax;A++){if(w=T.width[A],B=T.scalefac[A],0!=T.preflag&&(B+=H.pretab[A]),M+=w,0!=(1&B))for(B++,w=-w;w<0;w++)R[M+w]*=1.2968395546510096,R[M+w]>T.xrpow_max&&(T.xrpow_max=R[M+w]);T.scalefac[A]=B>>1}T.preflag=0,T.scalefac_scale=1,T=!1}else if(v.block_type==ra.SHORT_TYPE&&0<S.subblock_gain){e:{for(T=S,A=R,B=(M=v).scalefac,R=0;R<M.sfb_lmax;R++)if(16<=B[R]){R=!0;break e}for(w=0;w<3;w++){for(k=E=0,R=M.sfb_lmax+w;R<M.sfbdivide;R+=3)E<B[R]&&(E=B[R]);for(;R<M.sfbmax;R+=3)k<B[R]&&(k=B[R]);if(!(E<16&&k<8)){if(7<=M.subblock_gain[w]){R=!0;break e}for(M.subblock_gain[w]++,E=T.scalefac_band.l[M.sfb_lmax],R=M.sfb_lmax+w;R<M.sfbmax;R+=3)if(k=M.width[R],y=B[R],0<=(y-=4>>M.scalefac_scale))B[R]=y,E+=3*k;else{for(B[R]=0,y=H.IPOW20(210+(y<<M.scalefac_scale+1)),E+=k*(w+1),x=-k;x<0;x++)A[E+x]*=y,A[E+x]>M.xrpow_max&&(M.xrpow_max=A[E+x]);E+=k*(3-w-1)}for(y=H.IPOW20(202),E+=M.width[R]*(w+1),x=-M.width[R];x<0;x++)A[E+x]*=y,A[E+x]>M.xrpow_max&&(M.xrpow_max=A[E+x])}}R=!1}T=R||I(v)}T||(T=2==S.mode_gr?V.scale_bitcount(v):V.scale_bitcount_lsf(S,v)),v=!T}else v=!0;if(!v)break;if(0!=o.scalefac_scale&&(g=254),(v=r-o.part2_length)<=0)break;for(;(o.part2_3_length=V.count_bits(i,s,o,c))>v&&o.global_gain<=g;)o.global_gain++;if(o.global_gain>g)break;if(0==h.over_count){for(;(o.part2_3_length=V.count_bits(i,s,o,c))>b&&o.global_gain<=g;)o.global_gain++;if(o.global_gain>g)break}switch(H.calc_noise(o,a,f,_,c),_.bits=o.part2_3_length,g=h,v=_,T=o,R=f,S=t.block_type!=ra.SHORT_TYPE?e.quant_comp:e.quant_comp_short){default:case 9:0<g.over_count?(S=v.over_SSD<=g.over_SSD,v.over_SSD==g.over_SSD&&(S=v.bits<g.bits)):S=v.max_noise<0&&10*v.max_noise+v.bits<=10*g.max_noise+g.bits;break;case 0:S=v.over_count<g.over_count||v.over_count==g.over_count&&v.over_noise<g.over_noise||v.over_count==g.over_count&&J.EQ(v.over_noise,g.over_noise)&&v.tot_noise<g.tot_noise;break;case 8:for(S=v,A=1e-37,M=0;M<T.psymax;M++)B=R[M],A+=B=_a.FAST_LOG10(.368+.632*B*B*B);S.max_noise=Math.max(1e-20,A);case 1:S=v.max_noise<g.max_noise;break;case 2:S=v.tot_noise<g.tot_noise;break;case 3:S=v.tot_noise<g.tot_noise&&v.max_noise<g.max_noise;break;case 4:S=v.max_noise<=0&&.2<g.max_noise||v.max_noise<=0&&g.max_noise<0&&g.max_noise>v.max_noise-.2&&v.tot_noise<g.tot_noise||v.max_noise<=0&&0<g.max_noise&&g.max_noise>v.max_noise-.2&&v.tot_noise<g.tot_noise+g.over_noise||0<v.max_noise&&-.05<g.max_noise&&g.max_noise>v.max_noise-.1&&v.tot_noise+v.over_noise<g.tot_noise+g.over_noise||0<v.max_noise&&-.1<g.max_noise&&g.max_noise>v.max_noise-.15&&v.tot_noise+v.over_noise+v.over_noise<g.tot_noise+g.over_noise+g.over_noise;break;case 5:S=v.over_noise<g.over_noise||J.EQ(v.over_noise,g.over_noise)&&v.tot_noise<g.tot_noise;break;case 6:S=v.over_noise<g.over_noise||J.EQ(v.over_noise,g.over_noise)&&(v.max_noise<g.max_noise||J.EQ(v.max_noise,g.max_noise)&&v.tot_noise<=g.tot_noise);break;case 7:S=v.over_count<g.over_count||v.over_noise<g.over_noise}if(0==g.over_count&&(S=S&&v.bits<g.bits),0!=(S=S?1:0))b=t.part2_3_length,h=_,t.assign(o),n=0,ee.arraycopy(s,0,l,0,576);else if(0==i.full_outer_loop){if(++n>d&&0==h.over_count)break;if(3==i.noise_shaping_amp&&m&&30<n)break;if(3==i.noise_shaping_amp&&m&&15<o.global_gain-p)break}}while(o.global_gain+o.scalefac_scale<255);3==i.noise_shaping_amp?m?u=!0:(o.assign(t),ee.arraycopy(l,0,s,0,576),n=0,p=o.global_gain,m=!0):u=!0}return e.VBR==ut.vbr_rh||e.VBR==ut.vbr_mtrh?ee.arraycopy(l,0,s,0,576):0!=(1&i.substep_shaping)&&trancate_smallspectrums(i,t,a,s),h.over_count},this.iteration_finish_one=function(e,t,a){var s=e.l3_side,n=s.tt[t][a];V.best_scalefac_store(e,t,a,s),1==e.use_best_huffman&&V.best_huffman_divide(e,n),d.ResvAdjust(e,n)},this.VBR_encode_granule=function(e,t,a,s,n,r,_){var i=e.internal_flags,o=new N,l=ta(576),f=_,h=(_+r)/2,c=0,b=i.sfb21_extra;mt.fill(o.l3_enc,0);do{i.sfb21_extra=!(f-42<h)&&b;var u=outer_loop(e,t,a,s,n,h);u<=0?(c=1,_=t.part2_3_length,o.assign(t),ee.arraycopy(s,0,l,0,576),u=(_-=32)-r,h=(_+r)/2):(u=_-(r=h+32),h=(_+r)/2,0!=c&&(c=2,t.assign(o),ee.arraycopy(l,0,s,0,576)))}while(12<u);i.sfb21_extra=b,2==c&&ee.arraycopy(o.l3_enc,0,t.l3_enc,0,576)},this.get_framebits=function(e,t){var a=e.internal_flags;a.bitrate_index=a.VBR_min_bitrate,b.getframebits(e),a.bitrate_index=1;for(var s=b.getframebits(e),n=1;n<=a.VBR_max_bitrate;n++)a.bitrate_index=n,s=new T(s),t[n]=d.ResvFrameBegin(e,s),s=s.bits},this.VBR_old_prepare=function(e,t,a,s,n,r,_,i,o){var l=e.internal_flags,f=1,h=0;l.bitrate_index=l.VBR_max_bitrate;var c=d.ResvFrameBegin(e,new T(0))/l.mode_gr;get_framebits(e,r);for(var b=0;b<l.mode_gr;b++){var u=H.on_pe(e,t,i[b],c,b,0);for(l.mode_ext==ra.MPG_MD_MS_LR&&(ms_convert(l.l3_side,b),H.reduce_side(i[b],a[b],c,u)),u=0;u<l.channels_out;++u){var m=l.l3_side.tt[b][u];if(m.block_type!=ra.SHORT_TYPE){var p=1.28/(1+Math.exp(3.5-t[b][u]/300))-.05;p=l.PSY.mask_adjust-p}else p=2.56/(1+Math.exp(3.5-t[b][u]/300))-.14,p=l.PSY.mask_adjust_short-p;l.masking_lower=Math.pow(10,.1*p),init_outer_loop(l,m),o[b][u]=H.calc_xmin(e,s[b][u],m,n[b][u]),0!=o[b][u]&&(f=0),_[b][u]=126,h+=i[b][u]}}for(b=0;b<l.mode_gr;b++)for(u=0;u<l.channels_out;u++)h>r[l.VBR_max_bitrate]&&(i[b][u]*=r[l.VBR_max_bitrate],i[b][u]/=h),_[b][u]>i[b][u]&&(_[b][u]=i[b][u]);return f},this.bitpressure_strategy=function(e,t,a,s){for(var n=0;n<e.mode_gr;n++)for(var r=0;r<e.channels_out;r++){for(var _=e.l3_side.tt[n][r],i=t[n][r],o=0,l=0;l<_.psy_lmax;l++)i[o++]*=1+.029*l*l/ra.SBMAX_l/ra.SBMAX_l;if(_.block_type==ra.SHORT_TYPE)for(l=_.sfb_smin;l<ra.SBMAX_s;l++)i[o++]*=1+.029*l*l/ra.SBMAX_s/ra.SBMAX_s,i[o++]*=1+.029*l*l/ra.SBMAX_s/ra.SBMAX_s,i[o++]*=1+.029*l*l/ra.SBMAX_s/ra.SBMAX_s;s[n][r]=0|Math.max(a[n][r],.9*s[n][r])}},this.VBR_new_prepare=function(e,t,a,s,n,r){var _,i=e.internal_flags,o=1,l=_=0;if(e.free_format){i.bitrate_index=0,_=new T(_);var f=d.ResvFrameBegin(e,_);_=_.bits,n[0]=f}else i.bitrate_index=i.VBR_max_bitrate,_=new T(_),d.ResvFrameBegin(e,_),_=_.bits,get_framebits(e,n),f=n[i.VBR_max_bitrate];for(n=0;n<i.mode_gr;n++){H.on_pe(e,t,r[n],_,n,0),i.mode_ext==ra.MPG_MD_MS_LR&&ms_convert(i.l3_side,n);for(var h=0;h<i.channels_out;++h){var c=i.l3_side.tt[n][h];i.masking_lower=Math.pow(10,.1*i.PSY.mask_adjust),init_outer_loop(i,c),0!=H.calc_xmin(e,a[n][h],c,s[n][h])&&(o=0),l+=r[n][h]}}for(n=0;n<i.mode_gr;n++)for(h=0;h<i.channels_out;h++)f<l&&(r[n][h]*=f,r[n][h]/=l);return o},this.calc_target_bits=function(e,t,a,s,n,r){var _=e.internal_flags,i=_.l3_side;_.bitrate_index=_.VBR_max_bitrate;var o=new T(0);r[0]=d.ResvFrameBegin(e,o),_.bitrate_index=1,o=b.getframebits(e)-8*_.sideinfo_len,n[0]=o/(_.mode_gr*_.channels_out),o=e.VBR_mean_bitrate_kbps*e.framesize*1e3,0!=(1&_.substep_shaping)&&(o*=1.09),o/=e.out_samplerate,o-=8*_.sideinfo_len,o/=_.mode_gr*_.channels_out;var l=.93+.07*(11-e.compression_ratio)/5.5;for(l<.9&&(l=.9),1<l&&(l=1),e=0;e<_.mode_gr;e++){var f=0;for(n=0;n<_.channels_out;n++){if(s[e][n]=int(l*o),700<t[e][n]){var h=int((t[e][n]-700)/1.4),c=i.tt[e][n];s[e][n]=int(l*o),c.block_type==ra.SHORT_TYPE&&h<o/2&&(h=o/2),3*o/2<h?h=3*o/2:h<0&&(h=0),s[e][n]+=h}s[e][n]>$.MAX_BITS_PER_CHANNEL&&(s[e][n]=$.MAX_BITS_PER_CHANNEL),f+=s[e][n]}if($.MAX_BITS_PER_GRANULE<f)for(n=0;n<_.channels_out;++n)s[e][n]*=$.MAX_BITS_PER_GRANULE,s[e][n]/=f}if(_.mode_ext==ra.MPG_MD_MS_LR)for(e=0;e<_.mode_gr;e++)H.reduce_side(s[e],a[e],o*_.channels_out,$.MAX_BITS_PER_GRANULE);for(e=t=0;e<_.mode_gr;e++)for(n=0;n<_.channels_out;n++)s[e][n]>$.MAX_BITS_PER_CHANNEL&&(s[e][n]=$.MAX_BITS_PER_CHANNEL),t+=s[e][n];if(t>r[0])for(e=0;e<_.mode_gr;e++)for(n=0;n<_.channels_out;n++)s[e][n]*=r[0],s[e][n]/=t}}function s(){function B(e,t,a){for(var s,n,r=10,_=t+238-14-286,i=-15;i<0;i++){var o=l[r+-10];n=e[_+-224]*o,s=e[t+224]*o,o=l[r+-9],n+=e[_+-160]*o,s+=e[t+160]*o,o=l[r+-8],n+=e[_+-96]*o,s+=e[t+96]*o,o=l[r+-7],n+=e[_+-32]*o,s+=e[t+32]*o,o=l[r+-6],n+=e[_+32]*o,s+=e[t+-32]*o,o=l[r+-5],n+=e[_+96]*o,s+=e[t+-96]*o,o=l[r+-4],n+=e[_+160]*o,s+=e[t+-160]*o,o=l[r+-3],n+=e[_+224]*o,s+=e[t+-224]*o,o=l[r+-2],n+=e[t+-256]*o,s-=e[_+256]*o,o=l[r+-1],n+=e[t+-192]*o,s-=e[_+192]*o,o=l[r+0],n+=e[t+-128]*o,s-=e[_+128]*o,o=l[r+1],n+=e[t+-64]*o,s-=e[_+64]*o,o=l[r+2],n+=e[t+0]*o,s-=e[_+0]*o,o=l[r+3],n+=e[t+64]*o,s-=e[_+-64]*o,o=l[r+4],n+=e[t+128]*o,s-=e[_+-128]*o,o=l[r+5],n+=e[t+192]*o,o=(s-=e[_+-192]*o)-(n*=l[r+6]),a[30+2*i]=s+n,a[31+2*i]=l[r+7]*o,r+=18,t--,_++}s=e[t+-16]*l[r+-10],n=e[t+-32]*l[r+-2],s+=(e[t+-48]-e[t+16])*l[r+-9],n+=e[t+-96]*l[r+-1],s+=(e[t+-80]+e[t+48])*l[r+-8],n+=e[t+-160]*l[r+0],s+=(e[t+-112]-e[t+80])*l[r+-7],n+=e[t+-224]*l[r+1],s+=(e[t+-144]+e[t+112])*l[r+-6],n-=e[t+32]*l[r+2],s+=(e[t+-176]-e[t+144])*l[r+-5],n-=e[t+96]*l[r+3],s+=(e[t+-208]+e[t+176])*l[r+-4],n-=e[t+160]*l[r+4],s+=(e[t+-240]-e[t+208])*l[r+-3],e=(n-=e[t+224])-s,t=n+s,s=a[14],n=a[15]-s,a[31]=t+s,a[30]=e+n,a[15]=e-n,a[14]=t-s,s=a[28]-a[0],a[0]+=a[28],a[28]=s*l[r+-36+7],s=a[29]-a[1],a[1]+=a[29],a[29]=s*l[r+-36+7],s=a[26]-a[2],a[2]+=a[26],a[26]=s*l[r+-72+7],s=a[27]-a[3],a[3]+=a[27],a[27]=s*l[r+-72+7],s=a[24]-a[4],a[4]+=a[24],a[24]=s*l[r+-108+7],s=a[25]-a[5],a[5]+=a[25],a[25]=s*l[r+-108+7],s=a[22]-a[6],a[6]+=a[22],a[22]=s*_a.SQRT2,s=a[23]-a[7],a[7]+=a[23],a[23]=s*_a.SQRT2-a[7],a[7]-=a[6],a[22]-=a[7],a[23]-=a[22],s=a[6],a[6]=a[31]-s,a[31]+=s,s=a[7],a[7]=a[30]-s,a[30]+=s,s=a[22],a[22]=a[15]-s,a[15]+=s,s=a[23],a[23]=a[14]-s,a[14]+=s,s=a[20]-a[8],a[8]+=a[20],a[20]=s*l[r+-180+7],s=a[21]-a[9],a[9]+=a[21],a[21]=s*l[r+-180+7],s=a[18]-a[10],a[10]+=a[18],a[18]=s*l[r+-216+7],s=a[19]-a[11],a[11]+=a[19],a[19]=s*l[r+-216+7],s=a[16]-a[12],a[12]+=a[16],a[16]=s*l[r+-252+7],s=a[17]-a[13],a[13]+=a[17],a[17]=s*l[r+-252+7],s=-a[20]+a[24],a[20]+=a[24],a[24]=s*l[r+-216+7],s=-a[21]+a[25],a[21]+=a[25],a[25]=s*l[r+-216+7],s=a[4]-a[8],a[4]+=a[8],a[8]=s*l[r+-216+7],s=a[5]-a[9],a[5]+=a[9],a[9]=s*l[r+-216+7],s=a[0]-a[12],a[0]+=a[12],a[12]=s*l[r+-72+7],s=a[1]-a[13],a[1]+=a[13],a[13]=s*l[r+-72+7],s=a[16]-a[28],a[16]+=a[28],a[28]=s*l[r+-72+7],s=-a[17]+a[29],a[17]+=a[29],a[29]=s*l[r+-72+7],s=_a.SQRT2*(a[2]-a[10]),a[2]+=a[10],a[10]=s,s=_a.SQRT2*(a[3]-a[11]),a[3]+=a[11],a[11]=s,s=_a.SQRT2*(-a[18]+a[26]),a[18]+=a[26],a[26]=s-a[18],s=_a.SQRT2*(-a[19]+a[27]),a[19]+=a[27],a[27]=s-a[19],s=a[2],a[19]-=a[3],a[3]-=s,a[2]=a[31]-s,a[31]+=s,s=a[3],a[11]-=a[19],a[18]-=s,a[3]=a[30]-s,a[30]+=s,s=a[18],a[27]-=a[11],a[19]-=s,a[18]=a[15]-s,a[15]+=s,s=a[19],a[10]-=s,a[19]=a[14]-s,a[14]+=s,s=a[10],a[11]-=s,a[10]=a[23]-s,a[23]+=s,s=a[11],a[26]-=s,a[11]=a[22]-s,a[22]+=s,s=a[26],a[27]-=s,a[26]=a[7]-s,a[7]+=s,s=a[27],a[27]=a[6]-s,a[6]+=s,s=_a.SQRT2*(a[0]-a[4]),a[0]+=a[4],a[4]=s,s=_a.SQRT2*(a[1]-a[5]),a[1]+=a[5],a[5]=s,s=_a.SQRT2*(a[16]-a[20]),a[16]+=a[20],a[20]=s,s=_a.SQRT2*(a[17]-a[21]),a[17]+=a[21],a[21]=s,s=-_a.SQRT2*(a[8]-a[12]),a[8]+=a[12],a[12]=s-a[8],s=-_a.SQRT2*(a[9]-a[13]),a[9]+=a[13],a[13]=s-a[9],s=-_a.SQRT2*(a[25]-a[29]),a[25]+=a[29],a[29]=s-a[25],s=-_a.SQRT2*(a[24]+a[28]),a[24]-=a[28],a[28]=s-a[24],s=a[24]-a[16],a[24]=s,s=a[20]-s,a[20]=s,s=a[28]-s,a[28]=s,s=a[25]-a[17],a[25]=s,s=a[21]-s,a[21]=s,s=a[29]-s,a[29]=s,s=a[17]-a[1],a[17]=s,s=a[9]-s,a[9]=s,s=a[25]-s,a[25]=s,s=a[5]-s,a[5]=s,s=a[21]-s,a[21]=s,s=a[13]-s,a[13]=s,s=a[29]-s,a[29]=s,s=a[1]-a[0],a[1]=s,s=a[16]-s,a[16]=s,s=a[17]-s,a[17]=s,s=a[8]-s,a[8]=s,s=a[9]-s,a[9]=s,s=a[24]-s,a[24]=s,s=a[25]-s,a[25]=s,s=a[4]-s,a[4]=s,s=a[5]-s,a[5]=s,s=a[20]-s,a[20]=s,s=a[21]-s,a[21]=s,s=a[12]-s,a[12]=s,s=a[13]-s,a[13]=s,s=a[28]-s,a[28]=s,s=a[29]-s,a[29]=s,s=a[0],a[0]+=a[31],a[31]-=s,s=a[1],a[1]+=a[30],a[30]-=s,s=a[16],a[16]+=a[15],a[15]-=s,s=a[17],a[17]+=a[14],a[14]-=s,s=a[8],a[8]+=a[23],a[23]-=s,s=a[9],a[9]+=a[22],a[22]-=s,s=a[24],a[24]+=a[7],a[7]-=s,s=a[25],a[25]+=a[6],a[6]-=s,s=a[4],a[4]+=a[27],a[27]-=s,s=a[5],a[5]+=a[26],a[26]-=s,s=a[20],a[20]+=a[11],a[11]-=s,s=a[21],a[21]+=a[10],a[10]-=s,s=a[12],a[12]+=a[19],a[19]-=s,s=a[13],a[13]+=a[18],a[18]-=s,s=a[28],a[28]+=a[3],a[3]-=s,s=a[29],a[29]+=a[2],a[2]-=s}var l=[-.1482523854003001,32.308141959636465,296.40344946382766,883.1344870032432,11113.947376231741,1057.2713659324597,305.7402417275812,30.825928907280012,3.8533188138216365,59.42900443849514,709.5899960123345,5281.91112291017,-5829.66483675846,-817.6293103748613,-76.91656988279972,-4.594269939176596,.9063471690191471,.1960342806591213,-.15466694054279598,34.324387823855965,301.8067566458425,817.599602898885,11573.795901679885,1181.2520595540152,321.59731579894424,31.232021761053772,3.7107095756221318,53.650946155329365,684.167428119626,5224.56624370173,-6366.391851890084,-908.9766368219582,-89.83068876699639,-5.411397422890401,.8206787908286602,.3901806440322567,-.16070888947830023,36.147034243915876,304.11815768187864,732.7429163887613,11989.60988270091,1300.012278487897,335.28490093152146,31.48816102859945,3.373875931311736,47.232241542899175,652.7371796173471,5132.414255594984,-6909.087078780055,-1001.9990371107289,-103.62185754286375,-6.104916304710272,.7416505462720353,.5805693545089249,-.16636367662261495,37.751650073343995,303.01103387567713,627.9747488785183,12358.763425278165,1412.2779918482834,346.7496836825721,31.598286663170416,3.1598635433980946,40.57878626349686,616.1671130880391,5007.833007176154,-7454.040671756168,-1095.7960341867115,-118.24411666465777,-6.818469345853504,.6681786379192989,.7653668647301797,-.1716176790982088,39.11551877123304,298.3413246578966,503.5259106886539,12679.589408408976,1516.5821921214542,355.9850766329023,31.395241710249053,2.9164211881972335,33.79716964664243,574.8943997801362,4853.234992253242,-7997.57021486075,-1189.7624067269965,-133.6444792601766,-7.7202770609839915,.5993769336819237,.9427934736519954,-.17645823955292173,40.21879108166477,289.9982036694474,359.3226160751053,12950.259102786438,1612.1013903507662,362.85067106591504,31.045922092242872,2.822222032597987,26.988862316190684,529.8996541764288,4671.371946949588,-8535.899136645805,-1282.5898586244496,-149.58553632943463,-8.643494270763135,.5345111359507916,1.111140466039205,-.36174739330527045,41.04429910497807,277.5463268268618,195.6386023135583,13169.43812144731,1697.6433561479398,367.40983966190305,30.557037410382826,2.531473372857427,20.070154905927314,481.50208566532336,4464.970341588308,-9065.36882077239,-1373.62841526722,-166.1660487028118,-9.58289321133207,.4729647758913199,1.268786568327291,-.36970682634889585,41.393213350082036,261.2935935556502,12.935476055240873,13336.131683328815,1772.508612059496,369.76534388639965,29.751323653701338,2.4023193045459172,13.304795348228817,430.5615775526625,4237.0568611071185,-9581.931701634761,-1461.6913552409758,-183.12733958476446,-10.718010163869403,.41421356237309503,1.414213562373095,-.37677560326535325,41.619486213528496,241.05423794991074,-187.94665032361226,13450.063605744153,1836.153896465782,369.4908799925761,29.001847876923147,2.0714759319987186,6.779591200894186,377.7767837205709,3990.386575512536,-10081.709459700915,-1545.947424837898,-200.3762958015653,-11.864482073055006,.3578057213145241,1.546020906725474,-.3829366947518991,41.1516456456653,216.47684307105183,-406.1569483347166,13511.136535077321,1887.8076599260432,367.3025214564151,28.136213436723654,1.913880671464418,.3829366947518991,323.85365704338597,3728.1472257487526,-10561.233882199509,-1625.2025997821418,-217.62525175416,-13.015432208941645,.3033466836073424,1.66293922460509,-.5822628872992417,40.35639251440489,188.20071124269245,-640.2706748618148,13519.21490106562,1927.6022433578062,362.8197642637487,26.968821921868447,1.7463817695935329,-5.62650678237171,269.3016715297017,3453.386536448852,-11016.145278780888,-1698.6569643425091,-234.7658734267683,-14.16351421663124,.2504869601913055,1.76384252869671,-.5887180101749253,39.23429103868072,155.76096234403798,-889.2492977967378,13475.470561874661,1955.0535223723712,356.4450994756727,25.894952980042156,1.5695032905781554,-11.181939564328772,214.80884394039484,3169.1640829158237,-11443.321309975563,-1765.1588461316153,-251.68908574481912,-15.49755935939164,.198912367379658,1.847759065022573,-.7912582233652842,37.39369355329111,119.699486012458,-1151.0956593239027,13380.446257078214,1970.3952110853447,348.01959814116185,24.731487364283044,1.3850130831637748,-16.421408865300393,161.05030052864092,2878.3322807850063,-11838.991423510031,-1823.985884688674,-268.2854986386903,-16.81724543849939,.1483359875383474,1.913880671464418,-.7960642926861912,35.2322109610459,80.01928065061526,-1424.0212633405113,13235.794061869668,1973.804052543835,337.9908651258184,23.289159354463873,1.3934255946442087,-21.099669467133474,108.48348407242611,2583.700758091299,-12199.726194855148,-1874.2780658979746,-284.2467154529415,-18.11369784385905,.09849140335716425,1.961570560806461,-.998795456205172,32.56307803611191,36.958364584370486,-1706.075448829146,13043.287458812016,1965.3831106103316,326.43182772364605,22.175018750622293,1.198638339011324,-25.371248002043963,57.53505923036915,2288.41886619975,-12522.674544337233,-1914.8400385312243,-299.26241273417224,-19.37805630698734,.04912684976946725,1.990369453344394,.0178904535*_a.SQRT2/2384e-9,.008938074*_a.SQRT2/2384e-9,.0015673635*_a.SQRT2/2384e-9,.001228571*_a.SQRT2/2384e-9,.0004856585*_a.SQRT2/2384e-9,109434e-9*_a.SQRT2/2384e-9,50783e-9*_a.SQRT2/2384e-9,6914e-9*_a.SQRT2/2384e-9,12804.797818791945,1945.5515939597317,313.4244966442953,20.801593959731544,1995.1556208053692,9.000838926174497,-29.20218120805369],w=[[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,940084909404969e-27,6423305872147839e-28,2382191739347918e-28,5456116108943412e-27,4878985199565852e-27,4240448995017367e-27,3559909094758252e-27,2858043359288075e-27,2156177623817898e-27,1475637723558783e-27,8371015190102974e-28,2599706096327376e-28,-5456116108943412e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758252e-27,-2858043359288076e-27,-2156177623817898e-27,-1475637723558783e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347923e-28,-6423305872147843e-28,-9400849094049696e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049694e-28,-642330587214784e-27,-2382191739347918e-28],[2382191739347913e-28,6423305872147834e-28,9400849094049688e-28,1122435026096556e-27,1183840321267481e-27,1122435026096556e-27,9400849094049688e-28,6423305872147841e-28,2382191739347918e-28,5456116108943413e-27,4878985199565852e-27,4240448995017367e-27,3559909094758253e-27,2858043359288075e-27,2156177623817898e-27,1475637723558782e-27,8371015190102975e-28,2599706096327376e-28,-5461314069809755e-27,-4921085770524055e-27,-4343405037091838e-27,-3732668368707687e-27,-3093523840190885e-27,-2430835727329465e-27,-1734679010007751e-27,-974825365660928e-27,-2797435120168326e-28,0,0,0,0,0,0,-2283748241799531e-28,-4037858874020686e-28,-2146547464825323e-28],[.1316524975873958,.414213562373095,.7673269879789602,1.091308501069271,1.303225372841206,1.56968557711749,1.920982126971166,2.414213562373094,3.171594802363212,4.510708503662055,7.595754112725146,22.90376554843115,.984807753012208,.6427876096865394,.3420201433256688,.9396926207859084,-.1736481776669303,-.7660444431189779,.8660254037844387,.5,-.5144957554275265,-.4717319685649723,-.3133774542039019,-.1819131996109812,-.09457419252642064,-.04096558288530405,-.01419856857247115,-.003699974673760037,.8574929257125442,.8817419973177052,.9496286491027329,.9833145924917901,.9955178160675857,.9991605581781475,.999899195244447,.9999931550702802],[0,0,0,0,0,0,2283748241799531e-28,4037858874020686e-28,2146547464825323e-28,5461314069809755e-27,4921085770524055e-27,4343405037091838e-27,3732668368707687e-27,3093523840190885e-27,2430835727329466e-27,1734679010007751e-27,974825365660928e-27,2797435120168326e-28,-5456116108943413e-27,-4878985199565852e-27,-4240448995017367e-27,-3559909094758253e-27,-2858043359288075e-27,-2156177623817898e-27,-1475637723558782e-27,-8371015190102975e-28,-2599706096327376e-28,-2382191739347913e-28,-6423305872147834e-28,-9400849094049688e-28,-1122435026096556e-27,-1183840321267481e-27,-1122435026096556e-27,-9400849094049688e-28,-6423305872147841e-28,-2382191739347918e-28]],T=w[ra.SHORT_TYPE],E=w[ra.SHORT_TYPE],k=w[ra.SHORT_TYPE],y=w[ra.SHORT_TYPE],x=[0,1,16,17,8,9,24,25,4,5,20,21,12,13,28,29,2,3,18,19,10,11,26,27,6,7,22,23,14,15,30,31];this.mdct_sub48=function(e,t,a){for(var s=286,n=0;n<e.channels_out;n++){for(var r=0;r<e.mode_gr;r++){for(var _,i=e.l3_side.tt[r][n],o=i.xr,l=0,f=e.sb_sample[n][1-r],h=0,c=0;c<9;c++)for(B(t,s,f[h]),B(t,s+32,f[h+1]),h+=2,s+=64,_=1;_<32;_+=2)f[h-1][_]*=-1;for(_=0;_<32;_++,l+=18){f=i.block_type,h=e.sb_sample[n][r];var b=e.sb_sample[n][1-r];if(0!=i.mixed_block_flag&&_<2&&(f=0),e.amp_filter[_]<1e-12)mt.fill(o,l+0,l+18,0);else{if(e.amp_filter[_]<1)for(c=0;c<18;c++)b[c][x[_]]*=e.amp_filter[_];if(f==ra.SHORT_TYPE){for(c=-3;c<0;c++){var u=w[ra.SHORT_TYPE][c+3];o[l+3*c+9]=h[9+c][x[_]]*u-h[8-c][x[_]],o[l+3*c+18]=h[14-c][x[_]]*u+h[15+c][x[_]],o[l+3*c+10]=h[15+c][x[_]]*u-h[14-c][x[_]],o[l+3*c+19]=b[2-c][x[_]]*u+b[3+c][x[_]],o[l+3*c+11]=b[3+c][x[_]]*u-b[2-c][x[_]],o[l+3*c+20]=b[8-c][x[_]]*u+b[9+c][x[_]]}for(c=o,h=l,u=0;u<3;u++){var m=c[h+6]*w[ra.SHORT_TYPE][0]-c[h+15],p=m+(b=c[h+0]*w[ra.SHORT_TYPE][2]-c[h+9]),d=m-b,g=(m=c[h+15]*w[ra.SHORT_TYPE][0]+c[h+6])+(b=c[h+9]*w[ra.SHORT_TYPE][2]+c[h+0]),v=-m+b;b=2069978111953089e-26*(c[h+3]*w[ra.SHORT_TYPE][1]-c[h+12]),m=2069978111953089e-26*(c[h+12]*w[ra.SHORT_TYPE][1]+c[h+3]),c[h+0]=190752519173728e-25*p+b,c[h+15]=190752519173728e-25*-g+m,d*=16519652744032674e-27,g=9537625958686404e-27*g+m,c[h+3]=d-g,c[h+6]=d+g,p=9537625958686404e-27*p-b,v*=16519652744032674e-27,c[h+9]=p+v,c[h+12]=p-v,h++}}else{for(u=ta(18),c=-9;c<0;c++)p=w[f][c+27]*b[c+9][x[_]]+w[f][c+36]*b[8-c][x[_]],d=w[f][c+9]*h[c+9][x[_]]-w[f][c+18]*h[8-c][x[_]],u[c+9]=p-d*T[3+c+9],u[c+18]=p*T[3+c+9]+d;c=o,h=l;var S=(p=u)[17]-p[9],R=p[15]-p[11],M=p[14]-p[12];v=p[0]+p[8],g=p[1]+p[7],m=p[2]+p[6],d=p[3]+p[5],c[h+17]=v+m-d-(g-p[4]),u=(v+m-d)*E[19]+(g-p[4]),b=(S-R-M)*E[18],c[h+5]=b+u,c[h+6]=b-u;var A=(p[16]-p[10])*E[18];g=g*E[19]+p[4],b=S*E[12]+A+R*E[13]+M*E[14],u=-v*E[16]+g-m*E[17]+d*E[15],c[h+1]=b+u,c[h+2]=b-u,b=S*E[13]-A-R*E[14]+M*E[12],u=-v*E[17]+g-m*E[15]+d*E[16],c[h+9]=b+u,c[h+10]=b-u,b=S*E[14]-A+R*E[12]-M*E[13],u=v*E[15]-g+m*E[16]-d*E[17],c[h+13]=b+u,c[h+14]=b-u,S=p[8]-p[0],R=p[6]-p[2],M=p[5]-p[3],v=p[17]+p[9],g=p[16]+p[10],m=p[15]+p[11],d=p[14]+p[12],c[h+0]=v+m+d+(g+p[13]),b=(v+m+d)*E[19]-(g+p[13]),u=(S-R+M)*E[18],c[h+11]=b+u,c[h+12]=b-u,A=(p[7]-p[1])*E[18],g=p[13]-g*E[19],b=v*E[15]-g+m*E[16]+d*E[17],u=S*E[14]+A+R*E[12]+M*E[13],c[h+3]=b+u,c[h+4]=b-u,b=-v*E[17]+g-m*E[15]-d*E[16],u=S*E[13]+A-R*E[14]-M*E[12],c[h+7]=b+u,c[h+8]=b-u,b=-v*E[16]+g-m*E[17]-d*E[15],u=S*E[12]-A+R*E[13]-M*E[14],c[h+15]=b+u,c[h+16]=b-u}}if(f!=ra.SHORT_TYPE&&0!=_)for(c=7;0<=c;--c)f=o[l+c]*k[20+c]+o[l+-1-c]*y[28+c],h=o[l+c]*y[28+c]-o[l+-1-c]*k[20+c],o[l+-1-c]=f,o[l+c]=h}}if(t=a,s=286,1==e.mode_gr)for(r=0;r<18;r++)ee.arraycopy(e.sb_sample[n][1][r],0,e.sb_sample[n][0][r],0,32)}}}function V(){this.thm=new i,this.en=new i}function ra(){var g=ra.FFTOFFSET,v=ra.MPG_MD_MS_LR,S=null,R=this.psy=null,M=null,A=null;this.setModules=function(e,t,a,s){S=e,R=this.psy=t,M=s,A=a};var B=new s;this.lame_encode_mp3_frame=function(e,t,a,s,n,r){var _=w([2,2]);_[0][0]=new V,_[0][1]=new V,_[1][0]=new V,_[1][1]=new V;var i=w([2,2]);i[0][0]=new V,i[0][1]=new V,i[1][0]=new V,i[1][1]=new V;var o,l,f=[null,null],h=e.internal_flags,c=aa([2,4]),b=[.5,.5],u=[[0,0],[0,0]],m=[[0,0],[0,0]];if((f[0]=t,f[1]=a,0==h.lame_encode_frame_init)&&0==(t=e.internal_flags).lame_encode_frame_init){a=ta(2014);var p=ta(2014);for(t.lame_encode_frame_init=1,l=o=0;o<286+576*(1+t.mode_gr);++o)o<576*t.mode_gr?(a[o]=0,2==t.channels_out&&(p[o]=0)):(a[o]=f[0][l],2==t.channels_out&&(p[o]=f[1][l]),++l);for(l=0;l<t.mode_gr;l++)for(o=0;o<t.channels_out;o++)t.l3_side.tt[l][o].block_type=ra.SHORT_TYPE;B.mdct_sub48(t,a,p)}if(h.padding=0,(h.slot_lag-=h.frac_SpF)<0&&(h.slot_lag+=e.out_samplerate,h.padding=1),0!=h.psymodel)for(p=[null,null],o=0,l=ea(2),a=0;a<h.mode_gr;a++){for(t=0;t<h.channels_out;t++)p[t]=f[t],o=576+576*a-ra.FFTOFFSET;if(0!=(t=e.VBR==ut.vbr_mtrh||e.VBR==ut.vbr_mt?R.L3psycho_anal_vbr(e,p,o,a,_,i,u[a],m[a],c[a],l):R.L3psycho_anal_ns(e,p,o,a,_,i,u[a],m[a],c[a],l)))return-4;for(e.mode==na.JOINT_STEREO&&(b[a]=c[a][2]+c[a][3],0<b[a]&&(b[a]=c[a][3]/b[a])),t=0;t<h.channels_out;t++){var d=h.l3_side.tt[a][t];d.block_type=l[t],d.mixed_block_flag=0}}else for(a=0;a<h.mode_gr;a++)for(t=0;t<h.channels_out;t++)h.l3_side.tt[a][t].block_type=ra.NORM_TYPE,h.l3_side.tt[a][t].mixed_block_flag=0,m[a][t]=u[a][t]=700;if(0==h.ATH.useAdjust?h.ATH.adjust=1:(t=h.loudness_sq[0][0],c=h.loudness_sq[1][0],2==h.channels_out?(t+=h.loudness_sq[0][1],c+=h.loudness_sq[1][1]):(t+=t,c+=c),2==h.mode_gr&&(t=Math.max(t,c)),t=.5*t*h.ATH.aaSensitivityP,h.ATH.adjustLimit=.03125<t?(1<=h.ATH.adjust?h.ATH.adjust=1:h.ATH.adjust<h.ATH.adjustLimit&&(h.ATH.adjust=h.ATH.adjustLimit),1):(c=31.98*t+625e-6,h.ATH.adjust>=c?(h.ATH.adjust*=.075*c+.925,h.ATH.adjust<c&&(h.ATH.adjust=c)):h.ATH.adjustLimit>=c?h.ATH.adjust=c:h.ATH.adjust<h.ATH.adjustLimit&&(h.ATH.adjust=h.ATH.adjustLimit),c)),B.mdct_sub48(h,f[0],f[1]),h.mode_ext=ra.MPG_MD_LR_LR,e.force_ms)h.mode_ext=ra.MPG_MD_MS_LR;else if(e.mode==na.JOINT_STEREO){for(a=p=c=0;a<h.mode_gr;a++)for(t=0;t<h.channels_out;t++)c+=m[a][t],p+=u[a][t];c<=1*p&&(c=h.l3_side.tt[0],t=h.l3_side.tt[h.mode_gr-1],c[0].block_type==c[1].block_type&&t[0].block_type==t[1].block_type&&(h.mode_ext=ra.MPG_MD_MS_LR))}if(h.mode_ext==v&&(_=i,u=m),e.analysis&&null!=h.pinfo)for(a=0;a<h.mode_gr;a++)for(t=0;t<h.channels_out;t++)h.pinfo.ms_ratio[a]=h.ms_ratio[a],h.pinfo.ms_ener_ratio[a]=b[a],h.pinfo.blocktype[a][t]=h.l3_side.tt[a][t].block_type,h.pinfo.pe[a][t]=u[a][t],ee.arraycopy(h.l3_side.tt[a][t].xr,0,h.pinfo.xr[a][t],0,576),h.mode_ext==v&&(h.pinfo.ers[a][t]=h.pinfo.ers[a][t+2],ee.arraycopy(h.pinfo.energy[a][t+2],0,h.pinfo.energy[a][t],0,h.pinfo.energy[a][t].length));if(e.VBR==ut.vbr_off||e.VBR==ut.vbr_abr){for(i=0;i<18;i++)h.nsPsy.pefirbuf[i]=h.nsPsy.pefirbuf[i+1];for(a=m=0;a<h.mode_gr;a++)for(t=0;t<h.channels_out;t++)m+=u[a][t];for(h.nsPsy.pefirbuf[18]=m,m=h.nsPsy.pefirbuf[9],i=0;i<9;i++)m+=(h.nsPsy.pefirbuf[i]+h.nsPsy.pefirbuf[18-i])*ra.fircoef[i];for(m=3350*h.mode_gr*h.channels_out/m,a=0;a<h.mode_gr;a++)for(t=0;t<h.channels_out;t++)u[a][t]*=m}if(h.iteration_loop.iteration_loop(e,u,b,_),S.format_bitstream(e),s=S.copy_buffer(h,s,n,r,1),e.bWriteVbrTag&&M.addVbrFrame(e),e.analysis&&null!=h.pinfo){for(t=0;t<h.channels_out;t++){for(n=0;n<g;n++)h.pinfo.pcmdata[t][n]=h.pinfo.pcmdata[t][n+e.framesize];for(n=g;n<1600;n++)h.pinfo.pcmdata[t][n]=f[t][n-g]}A.set_frame_pinfo(e,_)}for(h.bitrate_stereoMode_Hist[h.bitrate_index][4]++,h.bitrate_stereoMode_Hist[15][4]++,2==h.channels_out&&(h.bitrate_stereoMode_Hist[h.bitrate_index][h.mode_ext]++,h.bitrate_stereoMode_Hist[15][h.mode_ext]++),e=0;e<h.mode_gr;++e)for(f=0;f<h.channels_out;++f)n=0|h.l3_side.tt[e][f].block_type,0!=h.l3_side.tt[e][f].mixed_block_flag&&(n=4),h.bitrate_blockType_Hist[h.bitrate_index][n]++,h.bitrate_blockType_Hist[h.bitrate_index][5]++,h.bitrate_blockType_Hist[15][n]++,h.bitrate_blockType_Hist[15][5]++;return s}}function r(){this.size=this.pos=this.want=this.seen=this.sum=0,this.bag=null,this.TotalFrameSize=this.nBytesWritten=this.nVbrNumFrames=0}function _(){this.tt=[[null,null],[null,null]],this.resvDrain_post=this.resvDrain_pre=this.private_bits=this.main_data_begin=0,this.scfsi=[ea(4),ea(4)];for(var e=0;e<2;e++)for(var t=0;t<2;t++)this.tt[e][t]=new N}function i(){this.l=ta(ra.SBMAX_l),this.s=aa([ra.SBMAX_s,3]);var s=this;this.assign=function(e){ee.arraycopy(e.l,0,s.l,0,ra.SBMAX_l);for(var t=0;t<ra.SBMAX_s;t++)for(var a=0;a<3;a++)s.s[t][a]=e.s[t][a]}}function o(){this.last_en_subshort=aa([4,9]),this.lastAttacks=ea(4),this.pefirbuf=ta(19),this.longfact=ta(ra.SBMAX_l),this.shortfact=ta(ra.SBMAX_s),this.attackthre_s=this.attackthre=0}function $(){function e(){this.ptr=this.write_timing=0,this.buf=new Int8Array(40)}this.fill_buffer_resample_init=this.iteration_init_init=this.lame_encode_frame_init=this.Class_ID=0,this.mfbuf=aa([2,$.MFSIZE]),this.full_outer_loop=this.use_best_huffman=this.subblock_gain=this.noise_shaping_stop=this.psymodel=this.substep_shaping=this.noise_shaping_amp=this.noise_shaping=this.highpass2=this.highpass1=this.lowpass2=this.lowpass1=this.mode_ext=this.samplerate_index=this.bitrate_index=this.VBR_max_bitrate=this.VBR_min_bitrate=this.mf_size=this.mf_samples_to_encode=this.resample_ratio=this.channels_out=this.channels_in=this.mode_gr=0,this.l3_side=new _,this.ms_ratio=ta(2),this.slot_lag=this.frac_SpF=this.padding=0,this.tag_spec=null,this.nMusicCRC=0,this.OldValue=ea(2),this.CurrentStep=ea(2),this.masking_lower=0,this.bv_scf=ea(576),this.pseudohalf=ea(G.SFBMAX),this.sfb21_extra=!1,this.inbuf_old=Array(2),this.blackfilt=Array(2*$.BPC+1),this.itime=new Float64Array(2),this.sideinfo_len=0,this.sb_sample=aa([2,2,18,ra.SBLIMIT]),this.amp_filter=ta(32),this.header=Array($.MAX_HEADER_BUF),this.ResvMax=this.ResvSize=this.ancillary_flag=this.w_ptr=this.h_ptr=0,this.scalefac_band=new n,this.minval_l=ta(ra.CBANDS),this.minval_s=ta(ra.CBANDS),this.nb_1=aa([4,ra.CBANDS]),this.nb_2=aa([4,ra.CBANDS]),this.nb_s1=aa([4,ra.CBANDS]),this.nb_s2=aa([4,ra.CBANDS]),this.s3_ll=this.s3_ss=null,this.decay=0,this.thm=Array(4),this.en=Array(4),this.tot_ener=ta(4),this.loudness_sq=aa([2,2]),this.loudness_sq_save=ta(2),this.mld_l=ta(ra.SBMAX_l),this.mld_s=ta(ra.SBMAX_s),this.bm_l=ea(ra.SBMAX_l),this.bo_l=ea(ra.SBMAX_l),this.bm_s=ea(ra.SBMAX_s),this.bo_s=ea(ra.SBMAX_s),this.npart_s=this.npart_l=0,this.s3ind=M([ra.CBANDS,2]),this.s3ind_s=M([ra.CBANDS,2]),this.numlines_s=ea(ra.CBANDS),this.numlines_l=ea(ra.CBANDS),this.rnumlines_l=ta(ra.CBANDS),this.mld_cb_l=ta(ra.CBANDS),this.mld_cb_s=ta(ra.CBANDS),this.numlines_l_num1=this.numlines_s_num1=0,this.pe=ta(4),this.ms_ener_ratio_old=this.ms_ratio_l_old=this.ms_ratio_s_old=0,this.blocktype_old=ea(2),this.nsPsy=new o,this.VBR_seek_table=new r,this.PSY=this.ATH=null,this.nogap_current=this.nogap_total=0,this.findPeakSample=this.findReplayGain=this.decode_on_the_fly=!0,this.AudiophileGain=this.RadioGain=this.PeakSample=0,this.rgdata=null,this.noclipScale=this.noclipGainChange=0,this.bitrate_stereoMode_Hist=M([16,5]),this.bitrate_blockType_Hist=M([16,6]),this.hip=this.pinfo=null,this.in_buffer_nsamples=0,this.iteration_loop=this.in_buffer_1=this.in_buffer_0=null;for(var t=0;t<this.en.length;t++)this.en[t]=new i;for(t=0;t<this.thm.length;t++)this.thm[t]=new i;for(t=0;t<this.header.length;t++)this.header[t]=new e}function h(){function u(e,t,a){var s=0,n=t+(a<<=1),r=4;do{var _,i=r>>1,o=r,l=r<<1,f=l+o;r=l<<1;var h=t,c=h+i;do{var b=e[h+0]-e[h+o],u=e[h+0]+e[h+o],m=e[h+l]-e[h+f],p=e[h+l]+e[h+f];e[h+l]=u-p,e[h+0]=u+p,e[h+f]=b-m,e[h+o]=b+m,b=e[c+0]-e[c+o],u=e[c+0]+e[c+o],m=_a.SQRT2*e[c+f],p=_a.SQRT2*e[c+l],e[c+l]=u-p,e[c+0]=u+p,e[c+f]=b-m,e[c+o]=b+m,c+=r,h+=r}while(h<n);var d=T[s+0],g=T[s+1];for(_=1;_<i;_++){var v=1-2*g*g,S=2*g*d;h=t+_,c=t+o-_;do{var R=S*e[h+o]-v*e[c+o];p=v*e[h+o]+S*e[c+o],b=e[h+0]-p,u=e[h+0]+p;var M=e[c+0]-R,A=e[c+0]+R;R=S*e[h+f]-v*e[c+f],p=v*e[h+f]+S*e[c+f],m=e[h+l]-p,p=e[h+l]+p;var B=e[c+l]-R,w=e[c+l]+R;R=g*p-d*B,p=d*p+g*B,e[h+l]=u-p,e[h+0]=u+p,e[c+f]=M-R,e[c+o]=M+R,R=d*w-g*m,p=g*w+d*m,e[c+l]=A-p,e[c+0]=A+p,e[h+f]=b-R,e[h+o]=b+R,c+=r,h+=r}while(h<n);d=(v=d)*T[s+0]-g*T[s+1],g=v*T[s+1]+g*T[s+0]}s+=2}while(r<a)}var c=ta(ra.BLKSIZE),m=ta(ra.BLKSIZE_s/2),T=[.9238795325112867,.3826834323650898,.9951847266721969,.0980171403295606,.9996988186962042,.02454122852291229,.9999811752826011,.006135884649154475],p=[0,128,64,192,32,160,96,224,16,144,80,208,48,176,112,240,8,136,72,200,40,168,104,232,24,152,88,216,56,184,120,248,4,132,68,196,36,164,100,228,20,148,84,212,52,180,116,244,12,140,76,204,44,172,108,236,28,156,92,220,60,188,124,252,2,130,66,194,34,162,98,226,18,146,82,210,50,178,114,242,10,138,74,202,42,170,106,234,26,154,90,218,58,186,122,250,6,134,70,198,38,166,102,230,22,150,86,214,54,182,118,246,14,142,78,206,46,174,110,238,30,158,94,222,62,190,126,254];this.fft_short=function(e,t,a,s,n){for(e=0;e<3;e++){var r=ra.BLKSIZE_s/2,_=65535&192*(e+1),i=ra.BLKSIZE_s/8-1;do{var o=255&p[i<<2],l=m[o]*s[a][n+o+_],f=m[127-o]*s[a][n+o+_+128],h=l-f;l+=f;var c=m[o+64]*s[a][n+o+_+64],b=c-(f=m[63-o]*s[a][n+o+_+192]);c+=f,r-=4,t[e][r+0]=l+c,t[e][r+2]=l-c,t[e][r+1]=h+b,t[e][r+3]=h-b,h=(l=m[o+1]*s[a][n+o+_+1])-(f=m[126-o]*s[a][n+o+_+129]),l+=f,b=(c=m[o+65]*s[a][n+o+_+65])-(f=m[62-o]*s[a][n+o+_+193]),c+=f,t[e][r+ra.BLKSIZE_s/2+0]=l+c,t[e][r+ra.BLKSIZE_s/2+2]=l-c,t[e][r+ra.BLKSIZE_s/2+1]=h+b,t[e][r+ra.BLKSIZE_s/2+3]=h-b}while(0<=--i);u(t[e],r,ra.BLKSIZE_s/2)}},this.fft_long=function(e,t,a,s,n){e=ra.BLKSIZE/8-1;var r=ra.BLKSIZE/2;do{var _=255&p[e],i=c[_]*s[a][n+_],o=c[_+512]*s[a][n+_+512],l=i-o;i+=o;var f=c[_+256]*s[a][n+_+256],h=f-(o=c[_+768]*s[a][n+_+768]);f+=o,t[(r-=4)+0]=i+f,t[r+2]=i-f,t[r+1]=l+h,t[r+3]=l-h,l=(i=c[_+1]*s[a][n+_+1])-(o=c[_+513]*s[a][n+_+513]),i+=o,h=(f=c[_+257]*s[a][n+_+257])-(o=c[_+769]*s[a][n+_+769]),f+=o,t[r+ra.BLKSIZE/2+0]=i+f,t[r+ra.BLKSIZE/2+2]=i-f,t[r+ra.BLKSIZE/2+1]=l+h,t[r+ra.BLKSIZE/2+3]=l-h}while(0<=--e);u(t,r,ra.BLKSIZE/2)},this.init_fft=function(e){for(e=0;e<ra.BLKSIZE;e++)c[e]=.42-.5*Math.cos(2*Math.PI*(e+.5)/ra.BLKSIZE)+.08*Math.cos(4*Math.PI*(e+.5)/ra.BLKSIZE);for(e=0;e<ra.BLKSIZE_s/2;e++)m[e]=.5*(1-Math.cos(2*Math.PI*(e+.5)/ra.BLKSIZE_s))}}function D(){function Yt(e,t){for(var a=0,s=0;s<ra.BLKSIZE/2;++s)a+=e[s]*t.ATH.eql_w[s];return a*n}function ct(e,t,a,s,n,r){if(e<t){if(!(t<e*R))return e+t;var _=t/e}else{if(t*R<=e)return e+t;_=e/t}return e+=t,s+3<=6?v<=_?e:(s=0|_a.FAST_LOG10_X(_,16),e*o[s]):(s=0|_a.FAST_LOG10_X(_,16),t=0!=r?n.ATH.cb_s[a]*n.ATH.adjust:n.ATH.cb_l[a]*n.ATH.adjust,e<M*t?t<e?(a=1,s<=13&&(a=l[s]),t=_a.FAST_LOG10_X(e/t,10/15),e*((i[s]-a)*t+a)):13<s?e:e*l[s]:e*i[s])}function Ct(e,t,a){if(e<0&&(e=0),t<0&&(t=0),e<=0)return t;if(t<=0)return e;var s=e<t?t/e:e/t;return-2<=a&&a<=2?v<=s?e+t:(a=0|_a.FAST_LOG10_X(s,16),(e+t)*r[a]):s<R?e+t:(e<t&&(e=t),e)}function Ft(e,t,a,s,n){var r,_,i=0,o=0;for(r=_=0;r<ra.SBMAX_s;++_,++r){var l=e.bo_s[r],f=e.npart_s;for(l=l<f?l:f;_<l;)i+=t[_],o+=a[_],_++;if(e.en[s].s[r][n]=i,e.thm[s].s[r][n]=o,f<=_){++r;break}f=1-(o=e.PSY.bo_s_weight[r]),i=o*t[_],o*=a[_],e.en[s].s[r][n]+=i,e.thm[s].s[r][n]+=o,i=f*t[_],o=f*a[_]}for(;r<ra.SBMAX_s;++r)e.en[s].s[r][n]=0,e.thm[s].s[r][n]=0}function jt(e,t,a,s){var n,r,_=0,i=0;for(n=r=0;n<ra.SBMAX_l;++r,++n){var o=e.bo_l[n],l=e.npart_l;for(o=o<l?o:l;r<o;)_+=t[r],i+=a[r],r++;if(e.en[s].l[n]=_,e.thm[s].l[n]=i,l<=r){++n;break}l=1-(i=e.PSY.bo_l_weight[n]),_=i*t[r],i*=a[r],e.en[s].l[n]+=_,e.thm[s].l[n]+=i,_=l*t[r],i=l*a[r]}for(;n<ra.SBMAX_l;++n)e.en[s].l[n]=0,e.thm[s].l[n]=0}function Gt(e,t,a){return 1<=a?e:a<=0?t:0<t?Math.pow(e/t,a)*t:0}function zt(e,t){for(var a=309.07,s=0;s<ra.SBMAX_s-1;s++)for(var n=0;n<3;n++){if(0<(r=e.thm.s[s][n])){var r=r*t,_=e.en.s[s][n];r<_&&(a=1e10*r<_?a+23.02585092994046*f[s]:a+f[s]*_a.FAST_LOG10(_/r))}}return a}function Kt(e,t){for(var a=281.0575,s=0;s<ra.SBMAX_l-1;s++){if(0<(n=e.thm.l[s])){var n=n*t,r=e.en.l[s];n<r&&(a=1e10*n<r?a+23.02585092994046*_[s]:a+_[s]*_a.FAST_LOG10(r/n))}}return a}function Zt(e,t,a,s,n){var r,_;for(r=_=0;r<e.npart_l;++r){var i,o=0,l=0;for(i=0;i<e.numlines_l[r];++i,++_){var f=t[_];o=o+f;l<f&&(l=f)}a[r]=o,s[r]=l,n[r]=o*e.rnumlines_l[r]}}function Qt(e,t,a,s){var n=Jt.length-1,r=0,_=a[r]+a[r+1];if(0<_){var i=t[r];i<t[r+1]&&(i=t[r+1]),n<(i=0|(_=20*(2*i-_)/(_*(e.numlines_l[r]+e.numlines_l[r+1]-1))))&&(i=n),s[r]=i}else s[r]=0;for(r=1;r<e.npart_l-1;r++)_=a[r-1]+a[r]+a[r+1],s[r]=0<_?((i=t[r-1])<t[r]&&(i=t[r]),i<t[r+1]&&(i=t[r+1]),n<(i=0|(_=20*(3*i-_)/(_*(e.numlines_l[r-1]+e.numlines_l[r]+e.numlines_l[r+1]-1))))&&(i=n),i):0;_=a[r-1]+a[r],s[r]=0<_?((i=t[r-1])<t[r]&&(i=t[r]),n<(i=0|(_=20*(2*i-_)/(_*(e.numlines_l[r-1]+e.numlines_l[r]-1))))&&(i=n),i):0}function Ut(e,t,a,s,n,r,_){var i=2*r;n=0<r?Math.pow(10,n):1;for(var o,l,f=0;f<_;++f){var h=e[2][f],c=e[3][f],b=t[0][f],u=t[1][f],m=t[2][f],p=t[3][f];o=b<=1.58*u&&u<=1.58*b?(o=a[f]*h,l=Math.max(m,Math.min(p,a[f]*c)),Math.max(p,Math.min(m,o))):(l=m,p),0<r&&(p=s[f]*n,b=Math.min(Math.max(b,p),Math.max(u,p)),0<(u=(m=Math.max(l,p))+(p=Math.max(o,p)))&&b*i<u&&(m*=b=b*i/u,p*=b),l=Math.min(m,l),o=Math.min(p,o)),h<l&&(l=h),c<o&&(o=c),t[2][f]=l,t[3][f]=o}}function m(e,t){return(e=0<=e?27*-e:e*t)<=-72?0:Math.exp(.2302585093*e)}function S(e){return e<0&&(e=0),e*=.001,13*Math.atan(.76*e)+3.5*Math.atan(e*e/56.25)}function p(e,t,a,s,n,r,_,i,o,l,f,h){var c,b=ta(ra.CBANDS+1),u=i/(15<h?1152:384),m=ea(ra.HBLKSIZE);i/=o;var p=0,d=0;for(c=0;c<ra.CBANDS;c++){var g,v=S(i*p);for(b[c]=i*p,g=p;S(i*g)-v<.34&&g<=o/2;g++);for(e[c]=g-p,d=c+1;p<g;)m[p++]=c;if(o/2<p){p=o/2,++c;break}}for(b[c]=i*p,v=0;v<h;v++)c=l[v],p=l[v+1],(c=0|Math.floor(.5+f*(c-.5)))<0&&(c=0),o/2<(g=0|Math.floor(.5+f*(p-.5)))&&(g=o/2),a[v]=(m[c]+m[g])/2,t[v]=m[g],_[v]=(u*p-b[t[v]])/(b[t[v]+1]-b[t[v]]),_[v]<0?_[v]=0:1<_[v]&&(_[v]=1),p=S(i*l[v]*f),p=Math.min(p,15.5)/15.5,r[v]=Math.pow(10,1.25*(1-Math.cos(Math.PI*p))-2.5);for(t=p=0;t<d;t++)a=e[t],v=S(i*p),r=S(i*(p+a-1)),s[t]=.5*(v+r),v=S(i*(p-.5)),r=S(i*(p+a-.5)),n[t]=r-v,p+=a;return d}function d(e,t,a,s,n,r){var _=aa([ra.CBANDS,ra.CBANDS]),i=0;if(r)for(var o=0;o<t;o++)for(r=0;r<t;r++){var l=a[o]-a[r];if(.5<=(l=0<=l?3*l:1.5*l)&&l<=2.5){var f=l-.5;f=8*(f*f-2*f)}else f=0;l=(f=(l=15.811389+7.5*(l+=.474)-17.5*Math.sqrt(1+l*l))<=-60?0:(l=Math.exp(.2302585093*(f+l)))/.6609193)*s[r],_[o][r]=l*n[o]}else for(r=0;r<t;r++){var h,c;o=f=15+Math.min(21/a[r],12);for(h=0;1e-20<m(h,o);--h);var b=h;for(c=0;1e-12<Math.abs(c-b);)0<m(h=(c+b)/2,o)?c=h:b=h;for(l=b,h=0;1e-20<m(h,o);h+=1);for(b=0,c=h;1e-12<Math.abs(c-b);)0<m(h=(c+b)/2,o)?b=h:c=h;var u=0;for(b=0;b<=1e3;++b)u+=h=m(h=l+b*(c-l)/1e3,o);for(h=1001/(u*(c-l)),o=0;o<t;o++)l=h*m(a[o]-a[r],f)*s[r],_[o][r]=l*n[o]}for(o=0;o<t;o++){for(r=0;r<t&&!(0<_[o][r]);r++);for(e[o][0]=r,r=t-1;0<r&&!(0<_[o][r]);r--);e[o][1]=r,i+=e[o][1]-e[o][0]+1}for(a=ta(i),o=s=0;o<t;o++)for(r=e[o][0];r<=e[o][1];r++)a[s++]=_[o][r];return a}function g(e){return e=S(e),e=Math.min(e,15.5)/15.5,Math.pow(10,1.25*(1-Math.cos(Math.PI*e))-2.5)}function a(e,t){return e<-.3&&(e=3410),e=Math.max(.1,e/1e3),3.64*Math.pow(e,-.8)-6.8*Math.exp(-.6*Math.pow(e-3.4,2))+6*Math.exp(-.15*Math.pow(e-8.7,2))+.001*(.6+.04*t)*Math.pow(e,4)}var v,R,M,Wt=new h,n=1/217621504/(ra.BLKSIZE/2),Jt=[1,.79433,.63096,.63096,.63096,.63096,.63096,.25119,.11749],i=[3.3246*3.3246,3.23837*3.23837,9.9500500969,9.0247369744,8.1854926609,7.0440875649,2.46209*2.46209,2.284*2.284,4.4892710641,1.96552*1.96552,1.82335*1.82335,1.69146*1.69146,2.4621061921,2.1508568964,1.37074*1.37074,1.31036*1.31036,1.5691069696,1.4555939904,1.16203*1.16203,1.2715945225,1.09428*1.09428,1.0659*1.0659,1.0779838276,1.0382591025,1],o=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],l=[5.5396212496,2.29259*2.29259,4.9868695969,2.12675*2.12675,2.02545*2.02545,1.87894*1.87894,1.74303*1.74303,1.61695*1.61695,2.2499700001,1.39148*1.39148,1.29083*1.29083,1.19746*1.19746,1.2339655056,1.0779838276],r=[1.7782755904,1.35879*1.35879,1.38454*1.38454,1.39497*1.39497,1.40548*1.40548,1.3537*1.3537,1.6999465924,1.22321*1.22321,1.3169398564,1],f=[11.8,13.6,17.2,32,46.5,51.3,57.5,67.1,71.5,84.6,97.6,130],_=[6.8,5.8,5.8,6.4,6.5,9.9,12.1,14.4,15,18.9,21.6,26.9,34.2,40.2,46.8,56.5,60.7,73.9,85.7,93.4,126.1],bt=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];this.L3psycho_anal_ns=function(e,t,a,s,n,r,_,i,o,l){var f,h,c,b,u,m,p,d,g=e.internal_flags,v=aa([2,ra.BLKSIZE]),S=aa([2,3,ra.BLKSIZE_s]),R=ta(ra.CBANDS+1),M=ta(ra.CBANDS+1),A=ta(ra.CBANDS+2),B=ea(2),w=ea(2),T=aa([2,576]),E=ea(ra.CBANDS+2),k=ea(ra.CBANDS+2);mt.fill(k,0);var y=g.channels_out;e.mode==na.JOINT_STEREO&&(y=4);var x=e.VBR==ut.vbr_off?0==g.ResvMax?0:g.ResvSize/g.ResvMax*.5:e.VBR==ut.vbr_rh||e.VBR==ut.vbr_mtrh||e.VBR==ut.vbr_mt?.6:1;for(h=0;h<g.channels_out;h++){var P=t[h],I=a+576-350-21+192;for(b=0;b<576;b++){var H,V=P[I+b+10];for(u=H=0;u<9;u+=2)V+=bt[u]*(P[I+b+u]+P[I+b+21-u]),H+=bt[u+1]*(P[I+b+u+1]+P[I+b+21-u-1]);T[h][b]=V+H}n[s][h].en.assign(g.en[h]),n[s][h].thm.assign(g.thm[h]),2<y&&(r[s][h].en.assign(g.en[h+2]),r[s][h].thm.assign(g.thm[h+2]))}for(h=0;h<y;h++){var O=ta(12),L=[0,0,0,0],N=ta(12),D=1,X=ta(ra.CBANDS),q=ta(ra.CBANDS),Y=[0,0,0,0],C=ta(ra.HBLKSIZE),F=aa([3,ra.HBLKSIZE_s]);for(b=0;b<3;b++)O[b]=g.nsPsy.last_en_subshort[h][b+6],N[b]=O[b]/g.nsPsy.last_en_subshort[h][b+4],L[0]+=O[b];if(2==h)for(b=0;b<576;b++){var j=T[0][b],G=T[1][b];T[0][b]=j+G,T[1][b]=j-G}var z=T[1&h],K=0;for(b=0;b<9;b++){var Z=K+64;for(f=1;K<Z;K++)f<Math.abs(z[K])&&(f=Math.abs(z[K]));g.nsPsy.last_en_subshort[h][b]=O[b+3]=f,L[1+b/3]+=f,f=f>O[b+3-2]?f/O[b+3-2]:O[b+3-2]>10*f?O[b+3-2]/(10*f):0,N[b+3]=f}if(e.analysis){var Q=N[0];for(b=1;b<12;b++)Q<N[b]&&(Q=N[b]);g.pinfo.ers[s][h]=g.pinfo.ers_save[h],g.pinfo.ers_save[h]=Q}var U=3==h?g.nsPsy.attackthre_s:g.nsPsy.attackthre;for(b=0;b<12;b++)0==Y[b/3]&&N[b]>U&&(Y[b/3]=b%3+1);for(b=1;b<4;b++)(L[b-1]>L[b]?L[b-1]/L[b]:L[b]/L[b-1])<1.7&&(Y[b]=0,1==b&&(Y[0]=0));0!=Y[0]&&0!=g.nsPsy.lastAttacks[h]&&(Y[0]=0),3!=g.nsPsy.lastAttacks[h]&&0==Y[0]+Y[1]+Y[2]+Y[3]||((D=0)!=Y[1]&&0!=Y[0]&&(Y[1]=0),0!=Y[2]&&0!=Y[1]&&(Y[2]=0),0!=Y[3]&&0!=Y[2]&&(Y[3]=0)),h<2?w[h]=D:0==D&&(w[0]=w[1]=0),o[h]=g.tot_ener[h];var W=void 0,J=void 0,$=void 0,ee=void 0,te=e,ae=C,se=F,ne=v,re=1&h,_e=S,ie=1&h,oe=s,le=h,fe=t,he=a,ce=te.internal_flags;if(le<2)Wt.fft_long(ce,ne[re],le,fe,he),Wt.fft_short(ce,_e[ie],le,fe,he);else if(2==le){for(var be=ra.BLKSIZE-1;0<=be;--be)W=ne[re+0][be],J=ne[re+1][be],ne[re+0][be]=(W+J)*_a.SQRT2*.5,ne[re+1][be]=(W-J)*_a.SQRT2*.5;for(var ue=2;0<=ue;--ue)for(be=ra.BLKSIZE_s-1;0<=be;--be)W=_e[ie+0][ue][be],J=_e[ie+1][ue][be],_e[ie+0][ue][be]=(W+J)*_a.SQRT2*.5,_e[ie+1][ue][be]=(W-J)*_a.SQRT2*.5}for(ae[0]=ne[re+0][0],ae[0]*=ae[0],be=ra.BLKSIZE/2-1;0<=be;--be)$=ne[re+0][ra.BLKSIZE/2-be],ee=ne[re+0][ra.BLKSIZE/2+be],ae[ra.BLKSIZE/2-be]=.5*($*$+ee*ee);for(ue=2;0<=ue;--ue)for(se[ue][0]=_e[ie+0][ue][0],se[ue][0]*=se[ue][0],be=ra.BLKSIZE_s/2-1;0<=be;--be)$=_e[ie+0][ue][ra.BLKSIZE_s/2-be],ee=_e[ie+0][ue][ra.BLKSIZE_s/2+be],se[ue][ra.BLKSIZE_s/2-be]=.5*($*$+ee*ee);var me=0;for(be=11;be<ra.HBLKSIZE;be++)me+=ae[be];if(ce.tot_ener[le]=me,te.analysis){for(be=0;be<ra.HBLKSIZE;be++)ce.pinfo.energy[oe][le][be]=ce.pinfo.energy_save[le][be],ce.pinfo.energy_save[le][be]=ae[be];ce.pinfo.pe[oe][le]=ce.pe[le]}for(2==te.athaa_loudapprox&&le<2&&(ce.loudness_sq[oe][le]=ce.loudness_sq_save[le],ce.loudness_sq_save[le]=Yt(ae,ce)),Zt(g,C,R,X,q),Qt(g,X,q,E),d=0;d<3;d++){var pe,de,ge=void 0,ve=void 0,Se=void 0,Re=F,Me=M,Ae=A,Be=h,we=d,Te=e.internal_flags;for(ge=ve=0;ge<Te.npart_s;++ge){for(var Ee=0,ke=0,ye=Te.numlines_s[ge],xe=0;xe<ye;++xe,++ve){var Pe=Re[we][ve];Ee=Ee+Pe;ke<Pe&&(ke=Pe)}Me[ge]=Ee}for(ve=ge=0;ge<Te.npart_s;ge++){var Ie=Te.s3ind_s[ge][0],He=Te.s3_ss[ve++]*Me[Ie];for(++Ie;Ie<=Te.s3ind_s[ge][1];)He+=Te.s3_ss[ve]*Me[Ie],++ve,++Ie;Se=2*Te.nb_s1[Be][ge],Ae[ge]=Math.min(He,Se),Te.blocktype_old[1&Be]==ra.SHORT_TYPE&&(Se=16*Te.nb_s2[Be][ge],Ae[ge]=Math.min(Se,Ae[ge])),Te.nb_s2[Be][ge]=Te.nb_s1[Be][ge],Te.nb_s1[Be][ge]=He}for(;ge<=ra.CBANDS;++ge)Me[ge]=0,Ae[ge]=0;for(Ft(g,M,A,h,d),p=0;p<ra.SBMAX_s;p++){if(de=g.thm[h].s[p][d],de*=.8,2<=Y[d]||1==Y[d+1]){var Ve=0!=d?d-1:2;f=Gt(g.thm[h].s[p][Ve],de,.6*x),de=Math.min(de,f)}1==Y[d]?(Ve=0!=d?d-1:2,f=Gt(g.thm[h].s[p][Ve],de,.3*x),de=Math.min(de,f)):(0!=d&&3==Y[d-1]||0==d&&3==g.nsPsy.lastAttacks[h])&&(Ve=2!=d?d+1:0,f=Gt(g.thm[h].s[p][Ve],de,.3*x),de=Math.min(de,f)),pe=O[3*d+3]+O[3*d+4]+O[3*d+5],6*O[3*d+5]<pe&&(de*=.5,6*O[3*d+4]<pe&&(de*=.5)),g.thm[h].s[p][d]=de}}for(g.nsPsy.lastAttacks[h]=Y[2],c=m=0;c<g.npart_l;c++){for(var Oe=g.s3ind[c][0],Le=R[Oe]*Jt[E[Oe]],Ne=g.s3_ll[m++]*Le;++Oe<=g.s3ind[c][1];)Le=R[Oe]*Jt[E[Oe]],Ne=ct(Ne,g.s3_ll[m++]*Le,Oe,Oe-c,g,0);Ne*=.158489319246111,A[c]=g.blocktype_old[1&h]==ra.SHORT_TYPE?Ne:Gt(Math.min(Ne,Math.min(2*g.nb_1[h][c],16*g.nb_2[h][c])),Ne,x),g.nb_2[h][c]=g.nb_1[h][c],g.nb_1[h][c]=Ne}for(;c<=ra.CBANDS;++c)R[c]=0,A[c]=0;jt(g,R,A,h)}if((e.mode==na.STEREO||e.mode==na.JOINT_STEREO)&&0<e.interChRatio){var De=e.interChRatio,Xe=e.internal_flags;if(1<Xe.channels_out){for(var qe=0;qe<ra.SBMAX_l;qe++){var Ye=Xe.thm[0].l[qe],Ce=Xe.thm[1].l[qe];Xe.thm[0].l[qe]+=Ce*De,Xe.thm[1].l[qe]+=Ye*De}for(qe=0;qe<ra.SBMAX_s;qe++)for(var Fe=0;Fe<3;Fe++)Ye=Xe.thm[0].s[qe][Fe],Ce=Xe.thm[1].s[qe][Fe],Xe.thm[0].s[qe][Fe]+=Ce*De,Xe.thm[1].s[qe][Fe]+=Ye*De}}if(e.mode==na.JOINT_STEREO){for(var je,Ge,ze,Ke,Ze=0;Ze<ra.SBMAX_l;Ze++)g.thm[0].l[Ze]>1.58*g.thm[1].l[Ze]||g.thm[1].l[Ze]>1.58*g.thm[0].l[Ze]||(Ke=g.mld_l[Ze]*g.en[3].l[Ze],ze=Math.max(g.thm[2].l[Ze],Math.min(g.thm[3].l[Ze],Ke)),Ke=g.mld_l[Ze]*g.en[2].l[Ze],Ge=Math.max(g.thm[3].l[Ze],Math.min(g.thm[2].l[Ze],Ke)),g.thm[2].l[Ze]=ze,g.thm[3].l[Ze]=Ge);for(Ze=0;Ze<ra.SBMAX_s;Ze++)for(var Qe=0;Qe<3;Qe++)g.thm[0].s[Ze][Qe]>1.58*g.thm[1].s[Ze][Qe]||g.thm[1].s[Ze][Qe]>1.58*g.thm[0].s[Ze][Qe]||(Ke=g.mld_s[Ze]*g.en[3].s[Ze][Qe],ze=Math.max(g.thm[2].s[Ze][Qe],Math.min(g.thm[3].s[Ze][Qe],Ke)),Ke=g.mld_s[Ze]*g.en[2].s[Ze][Qe],Ge=Math.max(g.thm[3].s[Ze][Qe],Math.min(g.thm[2].s[Ze][Qe],Ke)),g.thm[2].s[Ze][Qe]=ze,g.thm[3].s[Ze][Qe]=Ge);if(je=e.msfix,0<Math.abs(je)){for(var Ue,We,Je,$e,et,tt=st=je,at=Math.pow(10,e.ATHlower*g.ATH.adjust),st=2*st,nt=(tt=2*tt,0);nt<ra.SBMAX_l;nt++)We=g.ATH.cb_l[g.bm_l[nt]]*at,(et=Math.min(Math.max(g.thm[0].l[nt],We),Math.max(g.thm[1].l[nt],We)))*st<($e=Math.max(g.thm[2].l[nt],We))+(Je=Math.max(g.thm[3].l[nt],We))&&($e*=Ue=et*tt/($e+Je),Je*=Ue),g.thm[2].l[nt]=Math.min($e,g.thm[2].l[nt]),g.thm[3].l[nt]=Math.min(Je,g.thm[3].l[nt]);for(at*=ra.BLKSIZE_s/ra.BLKSIZE,nt=0;nt<ra.SBMAX_s;nt++)for(var rt=0;rt<3;rt++)We=g.ATH.cb_s[g.bm_s[nt]]*at,(et=Math.min(Math.max(g.thm[0].s[nt][rt],We),Math.max(g.thm[1].s[nt][rt],We)))*st<($e=Math.max(g.thm[2].s[nt][rt],We))+(Je=Math.max(g.thm[3].s[nt][rt],We))&&($e*=Ue=et*st/($e+Je),Je*=Ue),g.thm[2].s[nt][rt]=Math.min(g.thm[2].s[nt][rt],$e),g.thm[3].s[nt][rt]=Math.min(g.thm[3].s[nt][rt],Je)}}var _t=e.internal_flags;e.short_blocks!=sa.short_block_coupled||0!=w[0]&&0!=w[1]||(w[0]=w[1]=0);for(var it=0;it<_t.channels_out;it++)B[it]=ra.NORM_TYPE,e.short_blocks==sa.short_block_dispensed&&(w[it]=1),e.short_blocks==sa.short_block_forced&&(w[it]=0),0!=w[it]?_t.blocktype_old[it]==ra.SHORT_TYPE&&(B[it]=ra.STOP_TYPE):(B[it]=ra.SHORT_TYPE,_t.blocktype_old[it]==ra.NORM_TYPE&&(_t.blocktype_old[it]=ra.START_TYPE),_t.blocktype_old[it]==ra.STOP_TYPE&&(_t.blocktype_old[it]=ra.SHORT_TYPE)),l[it]=_t.blocktype_old[it],_t.blocktype_old[it]=B[it];for(h=0;h<y;h++){var ot=0;if(1<h){var lt=i;ot=-2;var ft=ra.NORM_TYPE;l[0]!=ra.SHORT_TYPE&&l[1]!=ra.SHORT_TYPE||(ft=ra.SHORT_TYPE);var ht=r[s][h-2]}else lt=_,ot=0,ft=l[h],ht=n[s][h];lt[ot+h]=ft==ra.SHORT_TYPE?zt(ht,g.masking_lower):Kt(ht,g.masking_lower),e.analysis&&(g.pinfo.pe[s][h]=lt[ot+h])}return 0};var $t=[-1730326e-23,-.01703172,-1349528e-23,.0418072,-673278e-22,-.0876324,-30835e-21,.1863476,-1104424e-22,-.627638];this.L3psycho_anal_vbr=function(e,t,a,s,n,r,_,i,o,l){for(var f,h,c,b=e.internal_flags,u=ta(ra.HBLKSIZE),m=aa([3,ra.HBLKSIZE_s]),p=aa([2,ra.BLKSIZE]),d=aa([2,3,ra.BLKSIZE_s]),g=aa([4,ra.CBANDS]),v=aa([4,ra.CBANDS]),S=aa([4,3]),R=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],M=ea(2),A=e.mode==na.JOINT_STEREO?4:b.channels_out,B=aa([2,576]),w=e.internal_flags,T=w.channels_out,E=e.mode==na.JOINT_STEREO?4:T,k=0;k<T;k++){firbuf=t[k];for(var y=a+576-350-21+192,x=0;x<576;x++){for(var P,I=firbuf[y+x+10],H=P=0;H<9;H+=2)I+=$t[H]*(firbuf[y+x+H]+firbuf[y+x+21-H]),P+=$t[H+1]*(firbuf[y+x+H+1]+firbuf[y+x+21-H-1]);B[k][x]=I+P}n[s][k].en.assign(w.en[k]),n[s][k].thm.assign(w.thm[k]),2<E&&(r[s][k].en.assign(w.en[k+2]),r[s][k].thm.assign(w.thm[k+2]))}for(k=0;k<E;k++){var V=ta(12),O=ta(12),L=[0,0,0,0],N=B[1&k],D=0,X=3==k?w.nsPsy.attackthre_s:w.nsPsy.attackthre,q=1;if(2==k)for(x=0,H=576;0<H;++x,--H){var Y=B[0][x],C=B[1][x];B[0][x]=Y+C,B[1][x]=Y-C}for(x=0;x<3;x++)O[x]=w.nsPsy.last_en_subshort[k][x+6],V[x]=O[x]/w.nsPsy.last_en_subshort[k][x+4],L[0]+=O[x];for(x=0;x<9;x++){for(var F=D+64,j=1;D<F;D++)j<Math.abs(N[D])&&(j=Math.abs(N[D]));w.nsPsy.last_en_subshort[k][x]=O[x+3]=j,L[1+x/3]+=j,j=j>O[x+3-2]?j/O[x+3-2]:O[x+3-2]>10*j?O[x+3-2]/(10*j):0,V[x+3]=j}for(x=0;x<3;++x){var G=O[3*x+3]+O[3*x+4]+O[3*x+5],z=1;6*O[3*x+5]<G&&(z*=.5,6*O[3*x+4]<G&&(z*=.5)),S[k][x]=z}if(e.analysis){var K=V[0];for(x=1;x<12;x++)K<V[x]&&(K=V[x]);w.pinfo.ers[s][k]=w.pinfo.ers_save[k],w.pinfo.ers_save[k]=K}for(x=0;x<12;x++)0==R[k][x/3]&&V[x]>X&&(R[k][x/3]=x%3+1);for(x=1;x<4;x++){var Z=L[x-1],Q=L[x];Math.max(Z,Q)<4e4&&Z<1.7*Q&&Q<1.7*Z&&(1==x&&R[k][0]<=R[k][x]&&(R[k][0]=0),R[k][x]=0)}R[k][0]<=w.nsPsy.lastAttacks[k]&&(R[k][0]=0),3!=w.nsPsy.lastAttacks[k]&&0==R[k][0]+R[k][1]+R[k][2]+R[k][3]||((q=0)!=R[k][1]&&0!=R[k][0]&&(R[k][1]=0),0!=R[k][2]&&0!=R[k][1]&&(R[k][2]=0),0!=R[k][3]&&0!=R[k][2]&&(R[k][3]=0)),k<2?M[k]=q:0==q&&(M[0]=M[1]=0),o[k]=w.tot_ener[k]}var U=e.internal_flags;e.short_blocks!=sa.short_block_coupled||0!=M[0]&&0!=M[1]||(M[0]=M[1]=0);for(var W=0;W<U.channels_out;W++)e.short_blocks==sa.short_block_dispensed&&(M[W]=1),e.short_blocks==sa.short_block_forced&&(M[W]=0);for(var J=0;J<A;J++){var $=e,ee=J,te=s,ae=u,se=p,ne=c=1&J,re=$.internal_flags;if(ee<2)Wt.fft_long(re,se[ne],ee,t,a);else if(2==ee)for(var _e=ra.BLKSIZE-1;0<=_e;--_e){var ie=se[ne+0][_e],oe=se[ne+1][_e];se[ne+0][_e]=(ie+oe)*_a.SQRT2*.5,se[ne+1][_e]=(ie-oe)*_a.SQRT2*.5}for(ae[0]=se[ne+0][0],ae[0]*=ae[0],_e=ra.BLKSIZE/2-1;0<=_e;--_e){var le=se[ne+0][ra.BLKSIZE/2-_e],fe=se[ne+0][ra.BLKSIZE/2+_e];ae[ra.BLKSIZE/2-_e]=.5*(le*le+fe*fe)}var he=0;for(_e=11;_e<ra.HBLKSIZE;_e++)he+=ae[_e];if(re.tot_ener[ee]=he,$.analysis){for(_e=0;_e<ra.HBLKSIZE;_e++)re.pinfo.energy[te][ee][_e]=re.pinfo.energy_save[ee][_e],re.pinfo.energy_save[ee][_e]=ae[_e];re.pinfo.pe[te][ee]=re.pe[ee]}var ce=J,be=u,ue=e.internal_flags;if(2==e.athaa_loudapprox&&ce<2&&(ue.loudness_sq[s][ce]=ue.loudness_sq_save[ce],ue.loudness_sq_save[ce]=Yt(be,ue)),0!=M[c]){var me=void 0,pe=void 0,de=b,ge=u,ve=g[J],Se=v[J],Re=J,Me=ta(ra.CBANDS),Ae=ta(ra.CBANDS),Be=ea(ra.CBANDS+2);Zt(de,ge,ve,Me,Ae),Qt(de,Me,Ae,Be);var we=0;for(me=0;me<de.npart_l;me++){var Te=de.s3ind[me][0],Ee=de.s3ind[me][1],ke=0,ye=0,xe=(ke=Be[Te],ye=ye+1,de.s3_ll[we]*ve[Te]*Jt[Be[Te]]);for(++we,++Te;Te<=Ee;){ke+=Be[Te],ye+=1;var Pe=de.s3_ll[we]*ve[Te]*Jt[Be[Te]];xe=Ct(xe,Pe,Te-me),++we,++Te}var Ie=.5*Jt[ke=(1+2*ke)/(2*ye)];if(xe*=Ie,de.blocktype_old[1&Re]==ra.SHORT_TYPE)pe=2*de.nb_1[Re][me],Se[me]=0<pe?Math.min(xe,pe):Math.min(xe,.3*ve[me]);else{var He=16*de.nb_2[Re][me],Ve=2*de.nb_1[Re][me];He<=0&&(He=xe),Ve<=0&&(Ve=xe),pe=de.blocktype_old[1&Re]==ra.NORM_TYPE?Math.min(Ve,He):Ve,Se[me]=Math.min(xe,pe)}de.nb_2[Re][me]=de.nb_1[Re][me],de.nb_1[Re][me]=xe,Pe=Me[me],Pe*=de.minval_l[me],Pe*=Ie,Se[me]>Pe&&(Se[me]=Pe),1<de.masking_lower&&(Se[me]*=de.masking_lower),Se[me]>ve[me]&&(Se[me]=ve[me]),de.masking_lower<1&&(Se[me]*=de.masking_lower)}for(;me<ra.CBANDS;++me)ve[me]=0,Se[me]=0}else for(var Oe=b,Le=J,Ne=0;Ne<Oe.npart_l;Ne++)Oe.nb_2[Le][Ne]=Oe.nb_1[Le][Ne],Oe.nb_1[Le][Ne]=0}for(2==M[0]+M[1]&&e.mode==na.JOINT_STEREO&&Ut(g,v,b.mld_cb_l,b.ATH.cb_l,e.ATHlower*b.ATH.adjust,e.msfix,b.npart_l),J=0;J<A;J++)0!=M[c=1&J]&&jt(b,g[J],v[J],J);for(var De=0;De<3;De++){for(J=0;J<A;++J)if(0!=M[c=1&J]){var Xe=b,qe=J;if(0==De)for(var Ye=0;Ye<Xe.npart_s;Ye++)Xe.nb_s2[qe][Ye]=Xe.nb_s1[qe][Ye],Xe.nb_s1[qe][Ye]=0}else{var Ce=J,Fe=De,je=m,Ge=d,ze=c,Ke=e.internal_flags;if(0==Fe&&Ce<2&&Wt.fft_short(Ke,Ge[ze],Ce,t,a),2==Ce)for(var Ze=ra.BLKSIZE_s-1;0<=Ze;--Ze){var Qe=Ge[ze+0][Fe][Ze],Ue=Ge[ze+1][Fe][Ze];Ge[ze+0][Fe][Ze]=(Qe+Ue)*_a.SQRT2*.5,Ge[ze+1][Fe][Ze]=(Qe-Ue)*_a.SQRT2*.5}for(je[Fe][0]=Ge[ze+0][Fe][0],je[Fe][0]*=je[Fe][0],Ze=ra.BLKSIZE_s/2-1;0<=Ze;--Ze){var We=Ge[ze+0][Fe][ra.BLKSIZE_s/2-Ze],Je=Ge[ze+0][Fe][ra.BLKSIZE_s/2+Ze];je[Fe][ra.BLKSIZE_s/2-Ze]=.5*(We*We+Je*Je)}var $e=void 0,et=void 0,tt=void 0,at=m,st=g[J],nt=v[J],rt=J,_t=De,it=e.internal_flags,ot=new float[ra.CBANDS],lt=ta(ra.CBANDS),ft=new int[ra.CBANDS];for($e=et=0;$e<it.npart_s;++$e){var ht=0,ct=0,bt=it.numlines_s[$e];for(tt=0;tt<bt;++tt,++et){var ut=at[_t][et];ht=ht+ut;ct<ut&&(ct=ut)}st[$e]=ht,ot[$e]=ct,lt[$e]=ht/bt}for(;$e<ra.CBANDS;++$e)ot[$e]=0,lt[$e]=0;var mt=void 0,pt=void 0,dt=it,gt=ot,vt=lt,St=ft,Rt=Jt.length-1,Mt=0,At=vt[Mt]+vt[Mt+1];for(St[Mt]=0<At?((mt=gt[Mt])<gt[Mt+1]&&(mt=gt[Mt+1]),Rt<(pt=0|(At=20*(2*mt-At)/(At*(dt.numlines_s[Mt]+dt.numlines_s[Mt+1]-1))))&&(pt=Rt),pt):0,Mt=1;Mt<dt.npart_s-1;Mt++)At=vt[Mt-1]+vt[Mt]+vt[Mt+1],St[Mt]=0<At?((mt=gt[Mt-1])<gt[Mt]&&(mt=gt[Mt]),mt<gt[Mt+1]&&(mt=gt[Mt+1]),Rt<(pt=0|(At=20*(3*mt-At)/(At*(dt.numlines_s[Mt-1]+dt.numlines_s[Mt]+dt.numlines_s[Mt+1]-1))))&&(pt=Rt),pt):0;for(At=vt[Mt-1]+vt[Mt],St[Mt]=0<At?((mt=gt[Mt-1])<gt[Mt]&&(mt=gt[Mt]),Rt<(pt=0|(At=20*(2*mt-At)/(At*(dt.numlines_s[Mt-1]+dt.numlines_s[Mt]-1))))&&(pt=Rt),pt):0,et=$e=0;$e<it.npart_s;$e++){var Bt=it.s3ind_s[$e][0],wt=it.s3ind_s[$e][1],Tt=ft[Bt],Et=1,kt=it.s3_ss[et]*st[Bt]*Jt[ft[Bt]];for(++et,++Bt;Bt<=wt;){Tt+=ft[Bt],Et+=1;var yt=it.s3_ss[et]*st[Bt]*Jt[ft[Bt]];kt=Ct(kt,yt,Bt-$e),++et,++Bt}var xt=.5*Jt[Tt=(1+2*Tt)/(2*Et)];kt*=xt,nt[$e]=kt,it.nb_s2[rt][$e]=it.nb_s1[rt][$e],it.nb_s1[rt][$e]=kt,yt=ot[$e],yt*=it.minval_s[$e],yt*=xt,nt[$e]>yt&&(nt[$e]=yt),1<it.masking_lower&&(nt[$e]*=it.masking_lower),nt[$e]>st[$e]&&(nt[$e]=st[$e]),it.masking_lower<1&&(nt[$e]*=it.masking_lower)}for(;$e<ra.CBANDS;++$e)st[$e]=0,nt[$e]=0}for(0==M[0]+M[1]&&e.mode==na.JOINT_STEREO&&Ut(g,v,b.mld_cb_s,b.ATH.cb_s,e.ATHlower*b.ATH.adjust,e.msfix,b.npart_s),J=0;J<A;++J)0==M[c=1&J]&&Ft(b,g[J],v[J],J,De)}for(J=0;J<A;J++)if(0==M[c=1&J])for(var Pt=0;Pt<ra.SBMAX_s;Pt++){var It=ta(3);for(De=0;De<3;De++){var Ht=.8*(Ht=b.thm[J].s[Pt][De]);2<=R[J][De]||1==R[J][De+1]?(h=0!=De?De-1:2,f=Gt(b.thm[J].s[Pt][h],Ht,.36),Ht=Math.min(Ht,f)):1==R[J][De]?(h=0!=De?De-1:2,f=Gt(b.thm[J].s[Pt][h],Ht,.18),Ht=Math.min(Ht,f)):(0!=De&&3==R[J][De-1]||0==De&&3==b.nsPsy.lastAttacks[J])&&(h=2!=De?De+1:0,f=Gt(b.thm[J].s[Pt][h],Ht,.18),Ht=Math.min(Ht,f)),Ht*=S[J][De],It[De]=Ht}for(De=0;De<3;De++)b.thm[J].s[Pt][De]=It[De]}for(J=0;J<A;J++)b.nsPsy.lastAttacks[J]=R[J][2];for(var Vt=e.internal_flags,Ot=0;Ot<Vt.channels_out;Ot++){var Lt=ra.NORM_TYPE;0!=M[Ot]?Vt.blocktype_old[Ot]==ra.SHORT_TYPE&&(Lt=ra.STOP_TYPE):(Lt=ra.SHORT_TYPE,Vt.blocktype_old[Ot]==ra.NORM_TYPE&&(Vt.blocktype_old[Ot]=ra.START_TYPE),Vt.blocktype_old[Ot]==ra.STOP_TYPE&&(Vt.blocktype_old[Ot]=ra.SHORT_TYPE)),l[Ot]=Vt.blocktype_old[Ot],Vt.blocktype_old[Ot]=Lt}for(J=0;J<A;J++){if(1<J){var Nt=i,Dt=-2,Xt=ra.NORM_TYPE;l[0]!=ra.SHORT_TYPE&&l[1]!=ra.SHORT_TYPE||(Xt=ra.SHORT_TYPE);var qt=r[s][J-2]}else Nt=_,Dt=0,Xt=l[J],qt=n[s][J];Nt[Dt+J]=Xt==ra.SHORT_TYPE?zt(qt,b.masking_lower):Kt(qt,b.masking_lower),e.analysis&&(b.pinfo.pe[s][J]=Nt[Dt+J])}return 0},this.psymodel_init=function(e){var t,a,s,n=e.internal_flags,r=!0,_=13,i=t=0,o=-8.25,l=-4.5,f=ta(ra.CBANDS),h=ta(ra.CBANDS),c=ta(ra.CBANDS),b=e.out_samplerate;switch(e.experimentalZ){default:case 0:r=!0;break;case 1:r=e.VBR!=ut.vbr_mtrh&&e.VBR!=ut.vbr_mt;break;case 2:r=!1;break;case 3:_=8,t=-1.75,i=-.0125,o=-8.25,l=-2.25}for(n.ms_ener_ratio_old=.25,n.blocktype_old[0]=n.blocktype_old[1]=ra.NORM_TYPE,s=0;s<4;++s){for(var u=0;u<ra.CBANDS;++u)n.nb_1[s][u]=1e20,n.nb_2[s][u]=1e20,n.nb_s1[s][u]=n.nb_s2[s][u]=1;for(a=0;a<ra.SBMAX_l;a++)n.en[s].l[a]=1e20,n.thm[s].l[a]=1e20;for(u=0;u<3;++u){for(a=0;a<ra.SBMAX_s;a++)n.en[s].s[a][u]=1e20,n.thm[s].s[a][u]=1e20;n.nsPsy.lastAttacks[s]=0}for(u=0;u<9;u++)n.nsPsy.last_en_subshort[s][u]=10}for(n.loudness_sq_save[0]=n.loudness_sq_save[1]=0,n.npart_l=p(n.numlines_l,n.bo_l,n.bm_l,f,h,n.mld_l,n.PSY.bo_l_weight,b,ra.BLKSIZE,n.scalefac_band.l,ra.BLKSIZE/1152,ra.SBMAX_l),s=0;s<n.npart_l;s++)a=t,f[s]>=_&&(a=i*(f[s]-_)/(24-_)+t*(24-f[s])/(24-_)),c[s]=Math.pow(10,a/10),n.rnumlines_l[s]=0<n.numlines_l[s]?1/n.numlines_l[s]:0;for(n.s3_ll=d(n.s3ind,n.npart_l,f,h,c,r),s=u=0;s<n.npart_l;s++){for(i=j.MAX_VALUE,a=0;a<n.numlines_l[s];a++,u++)t=b*u/(1e3*ra.BLKSIZE),t=this.ATHformula(1e3*t,e)-20,t=Math.pow(10,.1*t),(t*=n.numlines_l[s])<i&&(i=t);n.ATH.cb_l[s]=i,6<(i=20*f[s]/10-20)&&(i=100),i<-15&&(i=-15),i-=8,n.minval_l[s]=Math.pow(10,i/10)*n.numlines_l[s]}for(n.npart_s=p(n.numlines_s,n.bo_s,n.bm_s,f,h,n.mld_s,n.PSY.bo_s_weight,b,ra.BLKSIZE_s,n.scalefac_band.s,ra.BLKSIZE_s/384,ra.SBMAX_s),s=u=0;s<n.npart_s;s++){for(a=o,f[s]>=_&&(a=l*(f[s]-_)/(24-_)+o*(24-f[s])/(24-_)),c[s]=Math.pow(10,a/10),i=j.MAX_VALUE,a=0;a<n.numlines_s[s];a++,u++)t=b*u/(1e3*ra.BLKSIZE_s),t=this.ATHformula(1e3*t,e)-20,t=Math.pow(10,.1*t),(t*=n.numlines_s[s])<i&&(i=t);n.ATH.cb_s[s]=i,i=7*f[s]/12-7,12<f[s]&&(i*=1+3.1*Math.log(1+i)),f[s]<12&&(i*=1+2.3*Math.log(1-i)),i<-15&&(i=-15),i-=8,n.minval_s[s]=Math.pow(10,i/10)*n.numlines_s[s]}for(n.s3_ss=d(n.s3ind_s,n.npart_s,f,h,c,r),v=Math.pow(10,.5625),R=Math.pow(10,1.5),M=Math.pow(10,1.5),Wt.init_fft(n),n.decay=Math.exp(-2.302585092994046/(.01*b/192)),s=3.5,0!=(2&e.exp_nspsytune)&&(s=1),0<Math.abs(e.msfix)&&(s=e.msfix),e.msfix=s,r=0;r<n.npart_l;r++)n.s3ind[r][1]>n.npart_l-1&&(n.s3ind[r][1]=n.npart_l-1);if(n.ATH.decay=Math.pow(10,576*n.mode_gr/b*-1.2),n.ATH.adjust=.01,-(n.ATH.adjustLimit=1)!=e.ATHtype){for(u=e.out_samplerate/ra.BLKSIZE,s=t=r=0;s<ra.BLKSIZE/2;++s)t+=u,n.ATH.eql_w[s]=1/Math.pow(10,this.ATHformula(t,e)/10),r+=n.ATH.eql_w[s];for(r=1/r,s=ra.BLKSIZE/2;0<=--s;)n.ATH.eql_w[s]*=r}for(r=u=0;r<n.npart_s;++r)for(s=0;s<n.numlines_s[r];++s)++u;for(r=u=0;r<n.npart_l;++r)for(s=0;s<n.numlines_l[r];++s)++u;for(s=u=0;s<n.npart_l;s++)t=b*(u+n.numlines_l[s]/2)/(1*ra.BLKSIZE),n.mld_cb_l[s]=g(t),u+=n.numlines_l[s];for(;s<ra.CBANDS;++s)n.mld_cb_l[s]=1;for(s=u=0;s<n.npart_s;s++)t=b*(u+n.numlines_s[s]/2)/(1*ra.BLKSIZE_s),n.mld_cb_s[s]=g(t),u+=n.numlines_s[s];for(;s<ra.CBANDS;++s)n.mld_cb_s[s]=1;return 0},this.ATHformula=function(e,t){switch(t.ATHtype){case 0:e=a(e,9);break;case 1:e=a(e,-1);break;case 2:e=a(e,0);break;case 3:e=a(e,1)+6;break;case 4:e=a(e,t.ATHcurve);break;default:e=a(e,0)}return e}}function X(){function o(){this.mask_adjust_short=this.mask_adjust=0,this.bo_l_weight=ta(ra.SBMAX_l),this.bo_s_weight=ta(ra.SBMAX_s)}function l(){this.lowerlimit=0}function s(e,t){this.lowpass=t}function f(e){return 1<e?0:e<=0?1:Math.cos(Math.PI/2*e)}function h(e,t){switch(e){case 44100:return t.version=1,0;case 48e3:return t.version=1;case 32e3:return t.version=1,2;case 22050:return t.version=0;case 24e3:return t.version=0,1;case 16e3:return t.version=0,2;case 11025:return t.version=0;case 12e3:return t.version=0,1;case 8e3:return t.version=0,2;default:return t.version=0,-1}}function c(e,t,a){a<16e3&&(t=2),a=te.bitrate_table[t][1];for(var s=2;s<=14;s++)0<te.bitrate_table[t][s]&&Math.abs(te.bitrate_table[t][s]-e)<Math.abs(a-e)&&(a=te.bitrate_table[t][s]);return a}function b(e,t,a){for(a<16e3&&(t=2),a=0;a<=14;a++)if(0<te.bitrate_table[t][a]&&te.bitrate_table[t][a]==e)return a;return-1}function u(e,t){var a=[new s(8,2e3),new s(16,3700),new s(24,3900),new s(32,5500),new s(40,7e3),new s(48,7500),new s(56,1e4),new s(64,11e3),new s(80,13500),new s(96,15100),new s(112,15600),new s(128,17e3),new s(160,17500),new s(192,18600),new s(224,19400),new s(256,19700),new s(320,20500)];t=Z.nearestBitrateFullIndex(t),e.lowerlimit=a[t].lowpass}function j(e){var t=ra.BLKSIZE+e.framesize-ra.FFTOFFSET;return Math.max(t,512+e.framesize-32)}function G(){this.n_out=this.n_in=0}function z(){this.num_used=0}function K(e,t){return 0!=t?K(t,e%t):e}var Z=this;X.V9=410,X.V8=420,X.V7=430,X.V6=440,X.V5=450,X.V4=460,X.V3=470,X.V2=480,X.V1=490,X.V0=500,X.R3MIX=1e3,X.STANDARD=1001,X.EXTREME=1002,X.INSANE=1003,X.STANDARD_FAST=1004,X.EXTREME_FAST=1005,X.MEDIUM=1006,X.MEDIUM_FAST=1007,X.LAME_MAXMP3BUFFER=147456;var Q,U,m,p,d,g,v,S,R=new D;this.enc=new ra,this.setModules=function(e,t,a,s,n,r,_,i,o){Q=e,U=t,m=a,p=s,d=n,g=r,v=i,S=o,this.enc.setModules(U,R,p,g)},this.lame_init=function(){var e=new a;e.class_id=4294479419;var t=e.internal_flags=new $;return e.mode=na.NOT_SET,e.original=1,e.in_samplerate=44100,e.num_channels=2,e.num_samples=-1,e.bWriteVbrTag=!0,e.quality=-1,e.short_blocks=null,t.subblock_gain=-1,e.lowpassfreq=0,e.highpassfreq=0,e.lowpasswidth=-1,e.highpasswidth=-1,e.VBR=ut.vbr_off,e.VBR_q=4,e.ATHcurve=-1,e.VBR_mean_bitrate_kbps=128,e.VBR_min_bitrate_kbps=0,e.VBR_max_bitrate_kbps=0,e.VBR_hard_min=0,t.VBR_min_bitrate=1,t.VBR_max_bitrate=13,e.quant_comp=-1,e.quant_comp_short=-1,e.msfix=-1,t.resample_ratio=1,t.OldValue[0]=180,t.OldValue[1]=180,t.CurrentStep[0]=4,t.CurrentStep[1]=4,t.masking_lower=1,t.nsPsy.attackthre=-1,t.nsPsy.attackthre_s=-1,e.scale=-1,e.athaa_type=-1,e.ATHtype=-1,e.athaa_loudapprox=-1,e.athaa_sensitivity=0,e.useTemporal=null,e.interChRatio=-1,t.mf_samples_to_encode=ra.ENCDELAY+ra.POSTDELAY,e.encoder_padding=0,t.mf_size=ra.ENCDELAY-ra.MDCTDELAY,e.findReplayGain=!1,e.decode_on_the_fly=!1,t.decode_on_the_fly=!1,t.findReplayGain=!1,t.findPeakSample=!1,t.RadioGain=0,t.AudiophileGain=0,t.noclipGainChange=0,t.noclipScale=-1,e.preset=0,e.write_id3tag_automatic=!0,e.lame_allocated_gfp=1,e},this.nearestBitrateFullIndex=function(e){for(var t=[8,16,24,32,40,48,56,64,80,96,112,128,160,192,224,256,320],a=t[16],s=16,n=t[16],r=16,_=0;_<16;_++)if(Math.max(e,t[_+1])!=e){a=t[_+1],s=_+1,n=t[_],r=_;break}return e-n<a-e?r:s},this.lame_init_params=function(e){var t=e.internal_flags;if(t.Class_ID=0,null==t.ATH&&(t.ATH=new k),null==t.PSY&&(t.PSY=new o),null==t.rgdata&&(t.rgdata=new x),t.channels_in=e.num_channels,1==t.channels_in&&(e.mode=na.MONO),t.channels_out=e.mode==na.MONO?1:2,t.mode_ext=ra.MPG_MD_MS_LR,e.mode==na.MONO&&(e.force_ms=!1),e.VBR==ut.vbr_off&&128!=e.VBR_mean_bitrate_kbps&&0==e.brate&&(e.brate=e.VBR_mean_bitrate_kbps),e.VBR!=ut.vbr_off&&e.VBR!=ut.vbr_mtrh&&e.VBR!=ut.vbr_mt&&(e.free_format=!1),e.VBR==ut.vbr_off&&0==e.brate&&J.EQ(e.compression_ratio,0)&&(e.compression_ratio=11.025),e.VBR==ut.vbr_off&&0<e.compression_ratio&&(0==e.out_samplerate&&(e.out_samplerate=map2MP3Frequency(int(.97*e.in_samplerate))),e.brate=0|16*e.out_samplerate*t.channels_out/(1e3*e.compression_ratio),t.samplerate_index=h(e.out_samplerate,e),e.free_format||(e.brate=c(e.brate,e.version,e.out_samplerate))),0!=e.out_samplerate&&(e.out_samplerate<16e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,64)):e.out_samplerate<32e3?(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,8),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,160)):(e.VBR_mean_bitrate_kbps=Math.max(e.VBR_mean_bitrate_kbps,32),e.VBR_mean_bitrate_kbps=Math.min(e.VBR_mean_bitrate_kbps,320))),0==e.lowpassfreq){switch(e.VBR){case ut.vbr_off:var a=new l;u(a,e.brate),a=a.lowerlimit;break;case ut.vbr_abr:u(a=new l,e.VBR_mean_bitrate_kbps),a=a.lowerlimit;break;case ut.vbr_rh:var s=[19500,19e3,18600,18e3,17500,16e3,15600,14900,12500,1e4,3950];if(0<=e.VBR_q&&e.VBR_q<=9){a=s[e.VBR_q];var n=s[e.VBR_q+1];s=e.VBR_q_frac,a=linear_int(a,n,s)}else a=19500;break;default:s=[19500,19e3,18500,18e3,17500,16500,15500,14500,12500,9500,3950],a=0<=e.VBR_q&&e.VBR_q<=9?(a=s[e.VBR_q],n=s[e.VBR_q+1],s=e.VBR_q_frac,linear_int(a,n,s)):19500}e.mode!=na.MONO||e.VBR!=ut.vbr_off&&e.VBR!=ut.vbr_abr||(a*=1.5),e.lowpassfreq=0|a}if(0==e.out_samplerate&&(2*e.lowpassfreq>e.in_samplerate&&(e.lowpassfreq=e.in_samplerate/2),a=0|e.lowpassfreq,n=44100,48e3<=(s=e.in_samplerate)?n=48e3:44100<=s?n=44100:32e3<=s?n=32e3:24e3<=s?n=24e3:22050<=s?n=22050:16e3<=s?n=16e3:12e3<=s?n=12e3:11025<=s?n=11025:8e3<=s&&(n=8e3),a=-1==a?n:(a<=15960&&(n=44100),a<=15250&&(n=32e3),a<=11220&&(n=24e3),a<=9970&&(n=22050),a<=7230&&(n=16e3),a<=5420&&(n=12e3),a<=4510&&(n=11025),a<=3970&&(n=8e3),s<n?44100<s?48e3:32e3<s?44100:24e3<s?32e3:22050<s?24e3:16e3<s?22050:12e3<s?16e3:11025<s?12e3:8e3<s?11025:8e3:n),e.out_samplerate=a),e.lowpassfreq=Math.min(20500,e.lowpassfreq),e.lowpassfreq=Math.min(e.out_samplerate/2,e.lowpassfreq),e.VBR==ut.vbr_off&&(e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.brate)),e.VBR==ut.vbr_abr&&(e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.VBR_mean_bitrate_kbps)),e.bWriteVbrTag||(e.findReplayGain=!1,e.decode_on_the_fly=!1,t.findPeakSample=!1),t.findReplayGain=e.findReplayGain,t.decode_on_the_fly=e.decode_on_the_fly,t.decode_on_the_fly&&(t.findPeakSample=!0),t.findReplayGain&&Q.InitGainAnalysis(t.rgdata,e.out_samplerate)==W.INIT_GAIN_ANALYSIS_ERROR)return e.internal_flags=null,-6;switch(t.decode_on_the_fly&&!e.decode_only&&(null!=t.hip&&S.hip_decode_exit(t.hip),t.hip=S.hip_decode_init()),t.mode_gr=e.out_samplerate<=24e3?1:2,e.framesize=576*t.mode_gr,e.encoder_delay=ra.ENCDELAY,t.resample_ratio=e.in_samplerate/e.out_samplerate,e.VBR){case ut.vbr_mt:case ut.vbr_rh:case ut.vbr_mtrh:e.compression_ratio=[5.7,6.5,7.3,8.2,10,11.9,13,14,15,16.5][e.VBR_q];break;case ut.vbr_abr:e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.VBR_mean_bitrate_kbps);break;default:e.compression_ratio=16*e.out_samplerate*t.channels_out/(1e3*e.brate)}e.mode==na.NOT_SET&&(e.mode=na.JOINT_STEREO),0<e.highpassfreq?(t.highpass1=2*e.highpassfreq,t.highpass2=0<=e.highpasswidth?2*(e.highpassfreq+e.highpasswidth):2*e.highpassfreq,t.highpass1/=e.out_samplerate,t.highpass2/=e.out_samplerate):(t.highpass1=0,t.highpass2=0),0<e.lowpassfreq?(t.lowpass2=2*e.lowpassfreq,0<=e.lowpasswidth?(t.lowpass1=2*(e.lowpassfreq-e.lowpasswidth),t.lowpass1<0&&(t.lowpass1=0)):t.lowpass1=2*e.lowpassfreq,t.lowpass1/=e.out_samplerate,t.lowpass2/=e.out_samplerate):(t.lowpass1=0,t.lowpass2=0);var r=32,_=-1;if(0<(a=e.internal_flags).lowpass1){var i=999;for(s=0;s<=31;s++)(n=s/31)>=a.lowpass2&&(r=Math.min(r,s)),a.lowpass1<n&&n<a.lowpass2&&(i=Math.min(i,s));a.lowpass1=999==i?(r-.75)/31:(i-.75)/31,a.lowpass2=r/31}if(0<a.highpass2&&a.highpass2<.75/31*.9&&(a.highpass1=0,a.highpass2=0,ee.err.println("Warning: highpass filter disabled.  highpass frequency too small\n")),0<a.highpass2){for(r=-1,s=0;s<=31;s++)(n=s/31)<=a.highpass1&&(_=Math.max(_,s)),a.highpass1<n&&n<a.highpass2&&(r=Math.max(r,s));a.highpass1=_/31,a.highpass2=-1==r?(_+.75)/31:(r+.75)/31}for(s=0;s<32;s++)n=s/31,_=a.highpass2>a.highpass1?f((a.highpass2-n)/(a.highpass2-a.highpass1+1e-20)):1,n=a.lowpass2>a.lowpass1?f((n-a.lowpass1)/(a.lowpass2-a.lowpass1+1e-20)):1,a.amp_filter[s]=_*n;if(t.samplerate_index=h(e.out_samplerate,e),t.samplerate_index<0)return e.internal_flags=null,-1;if(e.VBR==ut.vbr_off){if(e.free_format)t.bitrate_index=0;else if(e.brate=c(e.brate,e.version,e.out_samplerate),t.bitrate_index=b(e.brate,e.version,e.out_samplerate),t.bitrate_index<=0)return e.internal_flags=null,-1}else t.bitrate_index=1;for(e.analysis&&(e.bWriteVbrTag=!1),null!=t.pinfo&&(e.bWriteVbrTag=!1),U.init_bit_stream_w(t),a=t.samplerate_index+3*e.version+6*(e.out_samplerate<16e3?1:0),s=0;s<ra.SBMAX_l+1;s++)t.scalefac_band.l[s]=p.sfBandIndex[a].l[s];for(s=0;s<ra.PSFB21+1;s++)n=(t.scalefac_band.l[22]-t.scalefac_band.l[21])/ra.PSFB21,n=t.scalefac_band.l[21]+s*n,t.scalefac_band.psfb21[s]=n;for(t.scalefac_band.psfb21[ra.PSFB21]=576,s=0;s<ra.SBMAX_s+1;s++)t.scalefac_band.s[s]=p.sfBandIndex[a].s[s];for(s=0;s<ra.PSFB12+1;s++)n=(t.scalefac_band.s[13]-t.scalefac_band.s[12])/ra.PSFB12,n=t.scalefac_band.s[12]+s*n,t.scalefac_band.psfb12[s]=n;for(t.scalefac_band.psfb12[ra.PSFB12]=192,t.sideinfo_len=1==e.version?1==t.channels_out?21:36:1==t.channels_out?13:21,e.error_protection&&(t.sideinfo_len+=2),a=e.internal_flags,e.frameNum=0,e.write_id3tag_automatic&&v.id3tag_write_v2(e),a.bitrate_stereoMode_Hist=M([16,5]),a.bitrate_blockType_Hist=M([16,6]),a.PeakSample=0,e.bWriteVbrTag&&g.InitVbrTag(e),t.Class_ID=4294479419,a=0;a<19;a++)t.nsPsy.pefirbuf[a]=700*t.mode_gr*t.channels_out;switch(-1==e.ATHtype&&(e.ATHtype=4),e.VBR){case ut.vbr_mt:e.VBR=ut.vbr_mtrh;case ut.vbr_mtrh:null==e.useTemporal&&(e.useTemporal=!1),m.apply_preset(e,500-10*e.VBR_q,0),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),e.quality<5&&(e.quality=0),5<e.quality&&(e.quality=5),t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,t.sfb21_extra=!e.experimentalY&&44e3<e.out_samplerate,t.iteration_loop=new VBRNewIterationLoop(d);break;case ut.vbr_rh:m.apply_preset(e,500-10*e.VBR_q,0),t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,t.sfb21_extra=!e.experimentalY&&44e3<e.out_samplerate,6<e.quality&&(e.quality=6),e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),t.iteration_loop=new VBROldIterationLoop(d);break;default:t.sfb21_extra=!1,e.quality<0&&(e.quality=LAME_DEFAULT_QUALITY),(a=e.VBR)==ut.vbr_off&&(e.VBR_mean_bitrate_kbps=e.brate),m.apply_preset(e,e.VBR_mean_bitrate_kbps,0),e.VBR=a,t.PSY.mask_adjust=e.maskingadjust,t.PSY.mask_adjust_short=e.maskingadjust_short,t.iteration_loop=a==ut.vbr_off?new y(d):new ABRIterationLoop(d)}if(e.VBR!=ut.vbr_off){if(t.VBR_min_bitrate=1,t.VBR_max_bitrate=14,e.out_samplerate<16e3&&(t.VBR_max_bitrate=8),0!=e.VBR_min_bitrate_kbps&&(e.VBR_min_bitrate_kbps=c(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),t.VBR_min_bitrate=b(e.VBR_min_bitrate_kbps,e.version,e.out_samplerate),t.VBR_min_bitrate<0)||0!=e.VBR_max_bitrate_kbps&&(e.VBR_max_bitrate_kbps=c(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),t.VBR_max_bitrate=b(e.VBR_max_bitrate_kbps,e.version,e.out_samplerate),t.VBR_max_bitrate<0))return-1;e.VBR_min_bitrate_kbps=te.bitrate_table[e.version][t.VBR_min_bitrate],e.VBR_max_bitrate_kbps=te.bitrate_table[e.version][t.VBR_max_bitrate],e.VBR_mean_bitrate_kbps=Math.min(te.bitrate_table[e.version][t.VBR_max_bitrate],e.VBR_mean_bitrate_kbps),e.VBR_mean_bitrate_kbps=Math.max(te.bitrate_table[e.version][t.VBR_min_bitrate],e.VBR_mean_bitrate_kbps)}switch(e.tune&&(t.PSY.mask_adjust+=e.tune_value_a,t.PSY.mask_adjust_short+=e.tune_value_a),a=e.internal_flags,e.quality){default:case 9:a.psymodel=0,a.noise_shaping=0,a.noise_shaping_amp=0,a.noise_shaping_stop=0,a.use_best_huffman=0,a.full_outer_loop=0;break;case 8:e.quality=7;case 7:a.psymodel=1,a.noise_shaping=0,a.noise_shaping_amp=0,a.noise_shaping_stop=0,a.use_best_huffman=0,a.full_outer_loop=0;break;case 6:case 5:a.psymodel=1,0==a.noise_shaping&&(a.noise_shaping=1),a.noise_shaping_amp=0,a.noise_shaping_stop=0,-1==a.subblock_gain&&(a.subblock_gain=1),a.use_best_huffman=0,a.full_outer_loop=0;break;case 4:a.psymodel=1,0==a.noise_shaping&&(a.noise_shaping=1),a.noise_shaping_amp=0,a.noise_shaping_stop=0,-1==a.subblock_gain&&(a.subblock_gain=1),a.use_best_huffman=1,a.full_outer_loop=0;break;case 3:a.psymodel=1,0==a.noise_shaping&&(a.noise_shaping=1),a.noise_shaping_amp=1,-(a.noise_shaping_stop=1)==a.subblock_gain&&(a.subblock_gain=1),a.use_best_huffman=1,a.full_outer_loop=0;break;case 2:a.psymodel=1,0==a.noise_shaping&&(a.noise_shaping=1),0==a.substep_shaping&&(a.substep_shaping=2),a.noise_shaping_amp=1,-(a.noise_shaping_stop=1)==a.subblock_gain&&(a.subblock_gain=1),a.use_best_huffman=1,a.full_outer_loop=0;break;case 1:a.psymodel=1,0==a.noise_shaping&&(a.noise_shaping=1),0==a.substep_shaping&&(a.substep_shaping=2),a.noise_shaping_amp=2,-(a.noise_shaping_stop=1)==a.subblock_gain&&(a.subblock_gain=1),a.use_best_huffman=1,a.full_outer_loop=0;break;case 0:a.psymodel=1,0==a.noise_shaping&&(a.noise_shaping=1),0==a.substep_shaping&&(a.substep_shaping=2),a.noise_shaping_amp=2,-(a.noise_shaping_stop=1)==a.subblock_gain&&(a.subblock_gain=1),a.use_best_huffman=1,a.full_outer_loop=0}return t.ATH.useAdjust=e.athaa_type<0?3:e.athaa_type,t.ATH.aaSensitivityP=Math.pow(10,e.athaa_sensitivity/-10),null==e.short_blocks&&(e.short_blocks=sa.short_block_allowed),e.short_blocks!=sa.short_block_allowed||e.mode!=na.JOINT_STEREO&&e.mode!=na.STEREO||(e.short_blocks=sa.short_block_coupled),e.quant_comp<0&&(e.quant_comp=1),e.quant_comp_short<0&&(e.quant_comp_short=0),e.msfix<0&&(e.msfix=0),e.exp_nspsytune|=1,e.internal_flags.nsPsy.attackthre<0&&(e.internal_flags.nsPsy.attackthre=D.NSATTACKTHRE),e.internal_flags.nsPsy.attackthre_s<0&&(e.internal_flags.nsPsy.attackthre_s=D.NSATTACKTHRE_S),e.scale<0&&(e.scale=1),e.ATHtype<0&&(e.ATHtype=4),e.ATHcurve<0&&(e.ATHcurve=4),e.athaa_loudapprox<0&&(e.athaa_loudapprox=2),e.interChRatio<0&&(e.interChRatio=0),null==e.useTemporal&&(e.useTemporal=!0),t.slot_lag=t.frac_SpF=0,e.VBR==ut.vbr_off&&(t.slot_lag=t.frac_SpF=72e3*(e.version+1)*e.brate%e.out_samplerate|0),p.iteration_init(e),R.psymodel_init(e),0},this.lame_encode_flush=function(e,t,a,s){var n=e.internal_flags,r=function e(t){if(1==t.length)return new Int16Array(t[0]);var a=t[0];t=t.slice(1);for(var s=[],n=0;n<a;n++)s.push(e(t));return s}([2,1152]),_=0,i=n.mf_samples_to_encode-ra.POSTDELAY,o=j(e);if(n.mf_samples_to_encode<1)return 0;var l=0;e.in_samplerate!=e.out_samplerate&&(i+=16*e.out_samplerate/e.in_samplerate);var f=e.framesize-i%e.framesize;for(f<576&&(f+=e.framesize),f=(i+(e.encoder_padding=f))/e.framesize;0<f&&0<=_;){var h=o-n.mf_size;i=e.frameNum;1152<(h=(h=h*e.in_samplerate)/e.out_samplerate)&&(h=1152),h<1&&(h=1),_=s-l,0==s&&(_=0),a+=_=this.lame_encode_buffer(e,r[0],r[1],h,t,a,_),l+=_,f-=i!=e.frameNum?1:0}if(_<(n.mf_samples_to_encode=0))return _;if(_=s-l,0==s&&(_=0),U.flush_bitstream(e),(_=U.copy_buffer(n,t,a,_,1))<0)return _;if(a+=_,_=s-(l+=_),0==s&&(_=0),e.write_id3tag_automatic){if(v.id3tag_write_v1(e),(_=U.copy_buffer(n,t,a,_,0))<0)return _;l+=_}return l},this.lame_encode_buffer=function(e,t,a,s,n,r,_){var i=e.internal_flags,o=[null,null];if(4294479419!=i.Class_ID)return-3;if(0==s)return 0;(null==i.in_buffer_0||i.in_buffer_nsamples<s)&&(i.in_buffer_0=ta(s),i.in_buffer_1=ta(s),i.in_buffer_nsamples=s),o[0]=i.in_buffer_0,o[1]=i.in_buffer_1;for(var l=0;l<s;l++)o[0][l]=t[l],1<i.channels_in&&(o[1][l]=a[l]);return function(e,t,a,s,n,r,_){var i=e.internal_flags,o=0,l=[null,null],f=[null,null];if(4294479419!=i.Class_ID)return-3;if(0==s)return 0;var h=U.copy_buffer(i,n,r,_,0);if(h<0)return h;if(r+=h,o+=h,f[0]=t,f[1]=a,J.NEQ(e.scale,0)&&J.NEQ(e.scale,1))for(h=0;h<s;++h)f[0][h]*=e.scale,2==i.channels_out&&(f[1][h]*=e.scale);if(J.NEQ(e.scale_left,0)&&J.NEQ(e.scale_left,1))for(h=0;h<s;++h)f[0][h]*=e.scale_left;if(J.NEQ(e.scale_right,0)&&J.NEQ(e.scale_right,1))for(h=0;h<s;++h)f[1][h]*=e.scale_right;if(2==e.num_channels&&1==i.channels_out)for(h=0;h<s;++h)f[0][h]=.5*(f[0][h]+f[1][h]),f[1][h]=0;for(t=j(e),l[0]=i.mfbuf[0],l[1]=i.mfbuf[1],a=0;0<s;){var c=[null,null];c[0]=f[0],c[1]=f[1];var b=e,u=l,m=a,p=s,d=h=new G,g=b.internal_flags;if(g.resample_ratio<.9999||1.0001<g.resample_ratio)for(var v=0;v<g.channels_out;v++){var S,R=new z,M=d,A=u[v],B=g.mf_size,w=b.framesize,T=c[v],E=m,k=p,y=R,x=v,P=b.internal_flags,I=0,H=b.out_samplerate/K(b.out_samplerate,b.in_samplerate);$.BPC<H&&(H=$.BPC);var V=Math.abs(P.resample_ratio-Math.floor(.5+P.resample_ratio))<1e-4?1:0,O=1/P.resample_ratio;1<O&&(O=1);var L=31;if(0==L%2&&--L,V=(L+=V)+1,0==P.fill_buffer_resample_init){for(P.inbuf_old[0]=ta(V),P.inbuf_old[1]=ta(V),S=0;S<=2*H;++S)P.blackfilt[S]=ta(V);for(P.itime[0]=0,I=P.itime[1]=0;I<=2*H;I++){var N=0,D=(I-H)/(2*H);for(S=0;S<=L;S++){var X=P.blackfilt[I],q=S,Y=S-D,C=Math.PI*O;(Y/=L)<0&&(Y=0),1<Y&&(Y=1);var F=Y-.5;Y=.42-.5*Math.cos(2*Y*Math.PI)+.08*Math.cos(4*Y*Math.PI),N+=X[q]=Math.abs(F)<1e-9?C/Math.PI:Y*Math.sin(L*C*F)/(Math.PI*L*F)}for(S=0;S<=L;S++)P.blackfilt[I][S]/=N}P.fill_buffer_resample_init=1}for(N=P.inbuf_old[x],O=0;O<w&&(S=O*P.resample_ratio,!(k<=L+(I=0|Math.floor(S-P.itime[x]))-L/2));O++){for(D=S-P.itime[x]-(I+L%2*.5),D=0|Math.floor(2*D*H+H+.5),S=X=0;S<=L;++S)X+=((q=S+I-L/2)<0?N[V+q]:T[E+q])*P.blackfilt[D][S];A[B+O]=X}if(y.num_used=Math.min(k,L+I-L/2),P.itime[x]+=y.num_used-O*P.resample_ratio,y.num_used>=V)for(S=0;S<V;S++)N[S]=T[E+y.num_used+S-V];else{for(A=V-y.num_used,S=0;S<A;++S)N[S]=N[S+y.num_used];for(I=0;S<V;++S,++I)N[S]=T[E+I]}M.n_out=O,d.n_in=R.num_used}else for(d.n_out=Math.min(b.framesize,p),d.n_in=d.n_out,b=0;b<d.n_out;++b)u[0][g.mf_size+b]=c[0][m+b],2==g.channels_out&&(u[1][g.mf_size+b]=c[1][m+b]);if(u=h.n_in,h=h.n_out,i.findReplayGain&&!i.decode_on_the_fly&&Q.AnalyzeSamples(i.rgdata,l[0],i.mf_size,l[1],i.mf_size,h,i.channels_out)==W.GAIN_ANALYSIS_ERROR)return-6;if(s-=u,a+=u,i.mf_size+=h,i.mf_samples_to_encode<1&&(i.mf_samples_to_encode=ra.ENCDELAY+ra.POSTDELAY),i.mf_samples_to_encode+=h,i.mf_size>=t){if(u=_-o,0==_&&(u=0),h=e,u=Z.enc.lame_encode_mp3_frame(h,l[0],l[1],n,r,u),h.frameNum++,(h=u)<0)return h;for(r+=h,o+=h,i.mf_size-=e.framesize,i.mf_samples_to_encode-=e.framesize,u=0;u<i.channels_out;u++)for(h=0;h<i.mf_size;h++)l[u][h]=l[u][h+e.framesize]}}return o}(e,o[0],o[1],s,n,r,_)}}function q(){this.setModules=function(e,t){}}function Y(){this.setModules=function(e,t,a){}}function C(){}function F(){this.setModules=function(e,t){}}function l(){this.sampleRate=this.channels=this.dataLen=this.dataOffset=0}function f(e){return e.charCodeAt(0)<<24|e.charCodeAt(1)<<16|e.charCodeAt(2)<<8|e.charCodeAt(3)}var mt={fill:function(e,t,a,s){if(2==arguments.length)for(var n=0;n<e.length;n++)e[n]=t;else for(n=t;n<a;n++)e[n]=s}},ee={arraycopy:function(e,t,a,s,n){for(n=t+n;t<n;)a[s++]=e[t++]}},_a={SQRT2:1.4142135623730951,FAST_LOG10:function(e){return Math.log10(e)},FAST_LOG10_X:function(e,t){return Math.log10(e)*t}};sa.short_block_allowed=new sa(0),sa.short_block_coupled=new sa(1),sa.short_block_dispensed=new sa(2),sa.short_block_forced=new sa(3);var j={MAX_VALUE:34028235e31};ut.vbr_off=new ut(0),ut.vbr_mt=new ut(1),ut.vbr_rh=new ut(2),ut.vbr_abr=new ut(3),ut.vbr_mtrh=new ut(4),ut.vbr_default=ut.vbr_mtrh,na.STEREO=new na(0),na.JOINT_STEREO=new na(1),na.DUAL_CHANNEL=new na(2),na.MONO=new na(3),na.NOT_SET=new na(4),W.STEPS_per_dB=100,W.MAX_dB=120,W.GAIN_NOT_ENOUGH_SAMPLES=-24601,W.GAIN_ANALYSIS_ERROR=0,W.GAIN_ANALYSIS_OK=1,W.INIT_GAIN_ANALYSIS_ERROR=0,W.INIT_GAIN_ANALYSIS_OK=1,W.MAX_ORDER=W.YULE_ORDER=10,W.MAX_SAMPLES_PER_WINDOW=(W.MAX_SAMP_FREQ=48e3)*(W.RMS_WINDOW_TIME_NUMERATOR=1)/(W.RMS_WINDOW_TIME_DENOMINATOR=20)+1,H.NUMTOCENTRIES=100,H.MAXFRAMESIZE=2880,J.EQ=function(e,t){return Math.abs(e)>Math.abs(t)?Math.abs(e-t)<=1e-6*Math.abs(e):Math.abs(e-t)<=1e-6*Math.abs(t)},J.NEQ=function(e,t){return!J.EQ(e,t)};var te={t1HB:[1,1,1,0],t2HB:[1,2,1,3,1,1,3,2,0],t3HB:[3,2,1,1,1,1,3,2,0],t5HB:[1,2,6,5,3,1,4,4,7,5,7,1,6,1,1,0],t6HB:[7,3,5,1,6,2,3,2,5,4,4,1,3,3,2,0],t7HB:[1,2,10,19,16,10,3,3,7,10,5,3,11,4,13,17,8,4,12,11,18,15,11,2,7,6,9,14,3,1,6,4,5,3,2,0],t8HB:[3,4,6,18,12,5,5,1,2,16,9,3,7,3,5,14,7,3,19,17,15,13,10,4,13,5,8,11,5,1,12,4,4,1,1,0],t9HB:[7,5,9,14,15,7,6,4,5,5,6,7,7,6,8,8,8,5,15,6,9,10,5,1,11,7,9,6,4,1,14,4,6,2,6,0],t10HB:[1,2,10,23,35,30,12,17,3,3,8,12,18,21,12,7,11,9,15,21,32,40,19,6,14,13,22,34,46,23,18,7,20,19,33,47,27,22,9,3,31,22,41,26,21,20,5,3,14,13,10,11,16,6,5,1,9,8,7,8,4,4,2,0],t11HB:[3,4,10,24,34,33,21,15,5,3,4,10,32,17,11,10,11,7,13,18,30,31,20,5,25,11,19,59,27,18,12,5,35,33,31,58,30,16,7,5,28,26,32,19,17,15,8,14,14,12,9,13,14,9,4,1,11,4,6,6,6,3,2,0],t12HB:[9,6,16,33,41,39,38,26,7,5,6,9,23,16,26,11,17,7,11,14,21,30,10,7,17,10,15,12,18,28,14,5,32,13,22,19,18,16,9,5,40,17,31,29,17,13,4,2,27,12,11,15,10,7,4,1,27,12,8,12,6,3,1,0],t13HB:[1,5,14,21,34,51,46,71,42,52,68,52,67,44,43,19,3,4,12,19,31,26,44,33,31,24,32,24,31,35,22,14,15,13,23,36,59,49,77,65,29,40,30,40,27,33,42,16,22,20,37,61,56,79,73,64,43,76,56,37,26,31,25,14,35,16,60,57,97,75,114,91,54,73,55,41,48,53,23,24,58,27,50,96,76,70,93,84,77,58,79,29,74,49,41,17,47,45,78,74,115,94,90,79,69,83,71,50,59,38,36,15,72,34,56,95,92,85,91,90,86,73,77,65,51,44,43,42,43,20,30,44,55,78,72,87,78,61,46,54,37,30,20,16,53,25,41,37,44,59,54,81,66,76,57,54,37,18,39,11,35,33,31,57,42,82,72,80,47,58,55,21,22,26,38,22,53,25,23,38,70,60,51,36,55,26,34,23,27,14,9,7,34,32,28,39,49,75,30,52,48,40,52,28,18,17,9,5,45,21,34,64,56,50,49,45,31,19,12,15,10,7,6,3,48,23,20,39,36,35,53,21,16,23,13,10,6,1,4,2,16,15,17,27,25,20,29,11,17,12,16,8,1,1,0,1],t15HB:[7,12,18,53,47,76,124,108,89,123,108,119,107,81,122,63,13,5,16,27,46,36,61,51,42,70,52,83,65,41,59,36,19,17,15,24,41,34,59,48,40,64,50,78,62,80,56,33,29,28,25,43,39,63,55,93,76,59,93,72,54,75,50,29,52,22,42,40,67,57,95,79,72,57,89,69,49,66,46,27,77,37,35,66,58,52,91,74,62,48,79,63,90,62,40,38,125,32,60,56,50,92,78,65,55,87,71,51,73,51,70,30,109,53,49,94,88,75,66,122,91,73,56,42,64,44,21,25,90,43,41,77,73,63,56,92,77,66,47,67,48,53,36,20,71,34,67,60,58,49,88,76,67,106,71,54,38,39,23,15,109,53,51,47,90,82,58,57,48,72,57,41,23,27,62,9,86,42,40,37,70,64,52,43,70,55,42,25,29,18,11,11,118,68,30,55,50,46,74,65,49,39,24,16,22,13,14,7,91,44,39,38,34,63,52,45,31,52,28,19,14,8,9,3,123,60,58,53,47,43,32,22,37,24,17,12,15,10,2,1,71,37,34,30,28,20,17,26,21,16,10,6,8,6,2,0],t16HB:[1,5,14,44,74,63,110,93,172,149,138,242,225,195,376,17,3,4,12,20,35,62,53,47,83,75,68,119,201,107,207,9,15,13,23,38,67,58,103,90,161,72,127,117,110,209,206,16,45,21,39,69,64,114,99,87,158,140,252,212,199,387,365,26,75,36,68,65,115,101,179,164,155,264,246,226,395,382,362,9,66,30,59,56,102,185,173,265,142,253,232,400,388,378,445,16,111,54,52,100,184,178,160,133,257,244,228,217,385,366,715,10,98,48,91,88,165,157,148,261,248,407,397,372,380,889,884,8,85,84,81,159,156,143,260,249,427,401,392,383,727,713,708,7,154,76,73,141,131,256,245,426,406,394,384,735,359,710,352,11,139,129,67,125,247,233,229,219,393,743,737,720,885,882,439,4,243,120,118,115,227,223,396,746,742,736,721,712,706,223,436,6,202,224,222,218,216,389,386,381,364,888,443,707,440,437,1728,4,747,211,210,208,370,379,734,723,714,1735,883,877,876,3459,865,2,377,369,102,187,726,722,358,711,709,866,1734,871,3458,870,434,0,12,10,7,11,10,17,11,9,13,12,10,7,5,3,1,3],t24HB:[15,13,46,80,146,262,248,434,426,669,653,649,621,517,1032,88,14,12,21,38,71,130,122,216,209,198,327,345,319,297,279,42,47,22,41,74,68,128,120,221,207,194,182,340,315,295,541,18,81,39,75,70,134,125,116,220,204,190,178,325,311,293,271,16,147,72,69,135,127,118,112,210,200,188,352,323,306,285,540,14,263,66,129,126,119,114,214,202,192,180,341,317,301,281,262,12,249,123,121,117,113,215,206,195,185,347,330,308,291,272,520,10,435,115,111,109,211,203,196,187,353,332,313,298,283,531,381,17,427,212,208,205,201,193,186,177,169,320,303,286,268,514,377,16,335,199,197,191,189,181,174,333,321,305,289,275,521,379,371,11,668,184,183,179,175,344,331,314,304,290,277,530,383,373,366,10,652,346,171,168,164,318,309,299,287,276,263,513,375,368,362,6,648,322,316,312,307,302,292,284,269,261,512,376,370,364,359,4,620,300,296,294,288,282,273,266,515,380,374,369,365,361,357,2,1033,280,278,274,267,264,259,382,378,372,367,363,360,358,356,0,43,20,19,17,15,13,11,9,7,6,4,7,5,3,1,3],t32HB:[1,10,8,20,12,20,16,32,14,12,24,0,28,16,24,16],t33HB:[15,28,26,48,22,40,36,64,14,24,20,32,12,16,8,0],t1l:[1,4,3,5],t2l:[1,4,7,4,5,7,6,7,8],t3l:[2,3,7,4,4,7,6,7,8],t5l:[1,4,7,8,4,5,8,9,7,8,9,10,8,8,9,10],t6l:[3,4,6,8,4,4,6,7,5,6,7,8,7,7,8,9],t7l:[1,4,7,9,9,10,4,6,8,9,9,10,7,7,9,10,10,11,8,9,10,11,11,11,8,9,10,11,11,12,9,10,11,12,12,12],t8l:[2,4,7,9,9,10,4,4,6,10,10,10,7,6,8,10,10,11,9,10,10,11,11,12,9,9,10,11,12,12,10,10,11,11,13,13],t9l:[3,4,6,7,9,10,4,5,6,7,8,10,5,6,7,8,9,10,7,7,8,9,9,10,8,8,9,9,10,11,9,9,10,10,11,11],t10l:[1,4,7,9,10,10,10,11,4,6,8,9,10,11,10,10,7,8,9,10,11,12,11,11,8,9,10,11,12,12,11,12,9,10,11,12,12,12,12,12,10,11,12,12,13,13,12,13,9,10,11,12,12,12,13,13,10,10,11,12,12,13,13,13],t11l:[2,4,6,8,9,10,9,10,4,5,6,8,10,10,9,10,6,7,8,9,10,11,10,10,8,8,9,11,10,12,10,11,9,10,10,11,11,12,11,12,9,10,11,12,12,13,12,13,9,9,9,10,11,12,12,12,9,9,10,11,12,12,12,12],t12l:[4,4,6,8,9,10,10,10,4,5,6,7,9,9,10,10,6,6,7,8,9,10,9,10,7,7,8,8,9,10,10,10,8,8,9,9,10,10,10,11,9,9,10,10,10,11,10,11,9,9,9,10,10,11,11,12,10,10,10,11,11,11,11,12],t13l:[1,5,7,8,9,10,10,11,10,11,12,12,13,13,14,14,4,6,8,9,10,10,11,11,11,11,12,12,13,14,14,14,7,8,9,10,11,11,12,12,11,12,12,13,13,14,15,15,8,9,10,11,11,12,12,12,12,13,13,13,13,14,15,15,9,9,11,11,12,12,13,13,12,13,13,14,14,15,15,16,10,10,11,12,12,12,13,13,13,13,14,13,15,15,16,16,10,11,12,12,13,13,13,13,13,14,14,14,15,15,16,16,11,11,12,13,13,13,14,14,14,14,15,15,15,16,18,18,10,10,11,12,12,13,13,14,14,14,14,15,15,16,17,17,11,11,12,12,13,13,13,15,14,15,15,16,16,16,18,17,11,12,12,13,13,14,14,15,14,15,16,15,16,17,18,19,12,12,12,13,14,14,14,14,15,15,15,16,17,17,17,18,12,13,13,14,14,15,14,15,16,16,17,17,17,18,18,18,13,13,14,15,15,15,16,16,16,16,16,17,18,17,18,18,14,14,14,15,15,15,17,16,16,19,17,17,17,19,18,18,13,14,15,16,16,16,17,16,17,17,18,18,21,20,21,18],t15l:[3,5,6,8,8,9,10,10,10,11,11,12,12,12,13,14,5,5,7,8,9,9,10,10,10,11,11,12,12,12,13,13,6,7,7,8,9,9,10,10,10,11,11,12,12,13,13,13,7,8,8,9,9,10,10,11,11,11,12,12,12,13,13,13,8,8,9,9,10,10,11,11,11,11,12,12,12,13,13,13,9,9,9,10,10,10,11,11,11,11,12,12,13,13,13,14,10,9,10,10,10,11,11,11,11,12,12,12,13,13,14,14,10,10,10,11,11,11,11,12,12,12,12,12,13,13,13,14,10,10,10,11,11,11,11,12,12,12,12,13,13,14,14,14,10,10,11,11,11,11,12,12,12,13,13,13,13,14,14,14,11,11,11,11,12,12,12,12,12,13,13,13,13,14,15,14,11,11,11,11,12,12,12,12,13,13,13,13,14,14,14,15,12,12,11,12,12,12,13,13,13,13,13,13,14,14,15,15,12,12,12,12,12,13,13,13,13,14,14,14,14,14,15,15,13,13,13,13,13,13,13,13,14,14,14,14,15,15,14,15,13,13,13,13,13,13,13,14,14,14,14,14,15,15,15,15],t16_5l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,11,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,11,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,12,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,13,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,12,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,13,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,13,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,13,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,13,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,14,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,13,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,14,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,14,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,14,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,14,11,11,11,12,12,13,13,13,14,14,14,14,14,14,14,12],t16l:[1,5,7,9,10,10,11,11,12,12,12,13,13,13,14,10,4,6,8,9,10,11,11,11,12,12,12,13,14,13,14,10,7,8,9,10,11,11,12,12,13,12,13,13,13,14,14,11,9,9,10,11,11,12,12,12,13,13,14,14,14,15,15,12,10,10,11,11,12,12,13,13,13,14,14,14,15,15,15,11,10,10,11,11,12,13,13,14,13,14,14,15,15,15,16,12,11,11,11,12,13,13,13,13,14,14,14,14,15,15,16,12,11,11,12,12,13,13,13,14,14,15,15,15,15,17,17,12,11,12,12,13,13,13,14,14,15,15,15,15,16,16,16,12,12,12,12,13,13,14,14,15,15,15,15,16,15,16,15,13,12,13,12,13,14,14,14,14,15,16,16,16,17,17,16,12,13,13,13,13,14,14,15,16,16,16,16,16,16,15,16,13,13,14,14,14,14,15,15,15,15,17,16,16,16,16,18,13,15,14,14,14,15,15,16,16,16,18,17,17,17,19,17,13,14,15,13,14,16,16,15,16,16,17,18,17,19,17,16,13,10,10,10,11,11,12,12,12,13,13,13,13,13,13,13,10],t24l:[4,5,7,8,9,10,10,11,11,12,12,12,12,12,13,10,5,6,7,8,9,10,10,11,11,11,12,12,12,12,12,10,7,7,8,9,9,10,10,11,11,11,11,12,12,12,13,9,8,8,9,9,10,10,10,11,11,11,11,12,12,12,12,9,9,9,9,10,10,10,10,11,11,11,12,12,12,12,13,9,10,9,10,10,10,10,11,11,11,11,12,12,12,12,12,9,10,10,10,10,10,11,11,11,11,12,12,12,12,12,13,9,11,10,10,10,11,11,11,11,12,12,12,12,12,13,13,10,11,11,11,11,11,11,11,11,11,12,12,12,12,13,13,10,11,11,11,11,11,11,11,12,12,12,12,12,13,13,13,10,12,11,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,11,11,11,12,12,12,12,12,12,13,13,13,13,10,12,12,12,12,12,12,12,12,12,12,13,13,13,13,13,10,12,12,12,12,12,12,12,12,13,13,13,13,13,13,13,10,13,12,12,12,12,12,12,13,13,13,13,13,13,13,13,10,9,9,9,9,9,9,9,9,9,9,9,10,10,10,10,6],t32l:[1,5,5,7,5,8,7,9,5,7,7,9,7,9,9,10],t33l:[4,5,5,6,5,6,6,7,5,6,6,7,6,7,7,8]};te.ht=[new e(0,0,null,null),new e(2,0,te.t1HB,te.t1l),new e(3,0,te.t2HB,te.t2l),new e(3,0,te.t3HB,te.t3l),new e(0,0,null,null),new e(4,0,te.t5HB,te.t5l),new e(4,0,te.t6HB,te.t6l),new e(6,0,te.t7HB,te.t7l),new e(6,0,te.t8HB,te.t8l),new e(6,0,te.t9HB,te.t9l),new e(8,0,te.t10HB,te.t10l),new e(8,0,te.t11HB,te.t11l),new e(8,0,te.t12HB,te.t12l),new e(16,0,te.t13HB,te.t13l),new e(0,0,null,te.t16_5l),new e(16,0,te.t15HB,te.t15l),new e(1,1,te.t16HB,te.t16l),new e(2,3,te.t16HB,te.t16l),new e(3,7,te.t16HB,te.t16l),new e(4,15,te.t16HB,te.t16l),new e(6,63,te.t16HB,te.t16l),new e(8,255,te.t16HB,te.t16l),new e(10,1023,te.t16HB,te.t16l),new e(13,8191,te.t16HB,te.t16l),new e(4,15,te.t24HB,te.t24l),new e(5,31,te.t24HB,te.t24l),new e(6,63,te.t24HB,te.t24l),new e(7,127,te.t24HB,te.t24l),new e(8,255,te.t24HB,te.t24l),new e(9,511,te.t24HB,te.t24l),new e(11,2047,te.t24HB,te.t24l),new e(13,8191,te.t24HB,te.t24l),new e(0,0,te.t32HB,te.t32l),new e(0,0,te.t33HB,te.t33l)],te.largetbl=[65540,327685,458759,589832,655369,655370,720906,720907,786443,786444,786444,851980,851980,851980,917517,655370,262149,393222,524295,589832,655369,720906,720906,720907,786443,786443,786444,851980,917516,851980,917516,655370,458759,524295,589832,655369,720905,720906,786442,786443,851979,786443,851979,851980,851980,917516,917517,720905,589832,589832,655369,720905,720906,786442,786442,786443,851979,851979,917515,917516,917516,983052,983052,786441,655369,655369,720905,720906,786442,786442,851978,851979,851979,917515,917516,917516,983052,983052,983053,720905,655370,655369,720906,720906,786442,851978,851979,917515,851979,917515,917516,983052,983052,983052,1048588,786441,720906,720906,720906,786442,851978,851979,851979,851979,917515,917516,917516,917516,983052,983052,1048589,786441,720907,720906,786442,786442,851979,851979,851979,917515,917516,983052,983052,983052,983052,1114125,1114125,786442,720907,786443,786443,851979,851979,851979,917515,917515,983051,983052,983052,983052,1048588,1048589,1048589,786442,786443,786443,786443,851979,851979,917515,917515,983052,983052,983052,983052,1048588,983053,1048589,983053,851978,786444,851979,786443,851979,917515,917516,917516,917516,983052,1048588,1048588,1048589,1114125,1114125,1048589,786442,851980,851980,851979,851979,917515,917516,983052,1048588,1048588,1048588,1048588,1048589,1048589,983053,1048589,851978,851980,917516,917516,917516,917516,983052,983052,983052,983052,1114124,1048589,1048589,1048589,1048589,1179661,851978,983052,917516,917516,917516,983052,983052,1048588,1048588,1048589,1179661,1114125,1114125,1114125,1245197,1114125,851978,917517,983052,851980,917516,1048588,1048588,983052,1048589,1048589,1114125,1179661,1114125,1245197,1114125,1048589,851978,655369,655369,655369,720905,720905,786441,786441,786441,851977,851977,851977,851978,851978,851978,851978,655366],te.table23=[65538,262147,458759,262148,327684,458759,393222,458759,524296],te.table56=[65539,262148,458758,524296,262148,327684,524294,589831,458757,524294,589831,655368,524295,524295,589832,655369],te.bitrate_table=[[0,8,16,24,32,40,48,56,64,80,96,112,128,144,160,-1],[0,32,40,48,56,64,80,96,112,128,160,192,224,256,320,-1],[0,8,16,24,32,40,48,56,64,-1,-1,-1,-1,-1,-1,-1]],te.samplerate_table=[[22050,24e3,16e3,-1],[44100,48e3,32e3,-1],[11025,12e3,8e3,-1]],te.scfsi_band=[0,6,11,16,21],P.Q_MAX=257,P.Q_MAX2=116,P.LARGE_BITS=1e5,P.IXMAX_VAL=8206;var G={};G.SFBMAX=3*ra.SBMAX_s,ra.ENCDELAY=576,ra.POSTDELAY=1152,ra.FFTOFFSET=224+(ra.MDCTDELAY=48),ra.DECDELAY=528,ra.SBLIMIT=32,ra.CBANDS=64,ra.SBPSY_l=21,ra.SBPSY_s=12,ra.SBMAX_l=22,ra.SBMAX_s=13,ra.PSFB21=6,ra.PSFB12=6,ra.HBLKSIZE=(ra.BLKSIZE=1024)/2+1,ra.HBLKSIZE_s=(ra.BLKSIZE_s=256)/2+1,ra.NORM_TYPE=0,ra.START_TYPE=1,ra.SHORT_TYPE=2,ra.STOP_TYPE=3,ra.MPG_MD_LR_LR=0,ra.MPG_MD_LR_I=1,ra.MPG_MD_MS_LR=2,ra.MPG_MD_MS_I=3,ra.fircoef=[-.1039435,-.1892065,5*-.0432472,-.155915,3898045e-23,.0467745*5,.50455,.756825,.187098*5],$.MFSIZE=3456+ra.ENCDELAY-ra.MDCTDELAY,$.MAX_HEADER_BUF=256,$.MAX_BITS_PER_CHANNEL=4095,$.MAX_BITS_PER_GRANULE=7680,$.BPC=320,l.RIFF=f("RIFF"),l.WAVE=f("WAVE"),l.fmt_=f("fmt "),l.data=f("data"),l.readHeader=function(e){var t=new l,a=e.getUint32(0,!1);if(l.RIFF==a&&(e.getUint32(4,!0),l.WAVE==e.getUint32(8,!1)&&l.fmt_==e.getUint32(12,!1))){var s=20;switch(n=e.getUint32(16,!0)){case 16:case 18:t.channels=e.getUint16(s+2,!0),t.sampleRate=e.getUint32(s+4,!0);break;default:throw"extended fmt chunk not implemented"}s=s+n;for(var n=l.data,r=0;n!=a&&(a=e.getUint32(s,!1),r=e.getUint32(s+4,!0),n!=a);)s+=r+8;return t.dataLen=r,t.dataOffset=s+8,t}},G.SFBMAX=3*ra.SBMAX_s,lamejs.Mp3Encoder=function(a,e,t){3!=arguments.length&&(console.error("WARN: Mp3Encoder(channels, samplerate, kbps) not specified"),a=1,e=44100,t=128);var s=new X,n=new q,r=new W,_=new J,i=new A,o=new P,l=new I,f=new H,h=new R,c=new F,b=new B,u=new E,m=new Y,p=new C;s.setModules(r,_,i,o,l,f,h,c,p),_.setModules(r,p,h,f),c.setModules(_,h),i.setModules(s),l.setModules(_,b,o,u),o.setModules(u,b,s.enc.psy),b.setModules(_),u.setModules(o),f.setModules(s,_,h),n.setModules(m,p),m.setModules(h,c,i);var d=s.lame_init();d.num_channels=a,d.in_samplerate=e,d.brate=t,d.mode=na.STEREO,d.quality=3,d.bWriteVbrTag=!1,d.disable_reservoir=!0,d.write_id3tag_automatic=!1,s.lame_init_params(d);var g=1152,v=0|1.25*g+7200,S=new Int8Array(v);this.encodeBuffer=function(e,t){return 1==a&&(t=e),e.length>g&&(g=e.length,v=0|1.25*g+7200,S=new Int8Array(v)),e=s.lame_encode_buffer(d,e,t,e.length,S,0,v),new Int8Array(S.subarray(0,e))},this.flush=function(){var e=s.lame_encode_flush(d,S,0,v);return new Int8Array(S.subarray(0,e))}},lamejs.WavHeader=l}lamejs();var $NE=!1;$EmbedManger={isNewEmbed:$NE=!("undefined"==typeof $Support),setChatID:function(t){return $NE?$Support.EmbedObj.chatID=t:Support.setChatID(t)},getChatID:function(){return $NE?$Support.EmbedObj.chatID:Support.getChatID()},setPrevCHID:function(t){return $NE?$Support.EmbedObj.lchid=t:Support.setPrevCHID(t)},getPrevCHID:function(){return $NE?$Support.EmbedObj.lchid:Support.getPrevCHID()},getWaitingCookie:function(){return $NE?$Support.getWaitingCookie():SupportUI.getCookieValue("ZLD"+Support.getLiveSupportID()+"WAITING")},getVisitorID:function(){return $NE?$Support.EmbedObj.visitorID:Support.getVisitorID()},getLiveSupportID:function(){return $NE?$Support.EmbedObj.livelsid:Support.getLiveSupportID()},getAttenderID:function(){return $NE?$Support.EmbedObj.attender:Support.getAttender()},showChatUI:function(t){if($NE&&t){var e=LSDB.getFromSession($Support.EmbedObj.chatID+"_transcript");if($.isEmptyObject(t[t.length-1])&&t.splice(t.length-1,1),LSDB.isSessionStorageAvail()&&e&&e.length==t.length){var o=e.length;if(e[o-1].msg==t[o-1].msg)return}$Support.Util.showChatUI(t)}else Support.showChatUI()},isautotrigger:function(){return $NE?$Support.istrigmsg:Support.isautotrigger},getAddinfo:function(){return $NE?$Support.EmbedObj.addinfo:Support.addinfo},getDeptlist:function(){return $NE?$Support.EmbedObj.deptlist:Support.deptlist},updateChatCookie:function(){$NE?$Support.updateChatCookie():Support.updateChatCookie()},handleChatEnded:function(t){if(!$NE)return Support.handleChatEnded(t);$Support.handleChatEnded(t)},setVisitorName:function(t){$NE?$Support.EmbedObj.setVisitorName(t):Support.setVisitorName(t)},getVisitorName:function(){return $NE?$Support.EmbedObj.visitorname:Support.getVisitorName()},setVisitorEmail:function(t){$NE?$Support.EmbedObj.setVisitorEmail(t):Support.setVisitorEmail(t)},setVisitorPhone:function(t){$NE?$Support.EmbedObj.setVisitorPhone(t):Support.setVisitorPhone(t)},handleCallbacks:function(t,e){if(!$NE)return Support.handleCallbacks(t,e);$Support.Util.handleCallbacks(t,e)},handlePickUp:function(t){$NE?$Support.handlePickUp(t):Support.handlePickUp(t)},handleDesktopSharing:function(t){return $NE?$Support.handleDesktopSharing(t):Support.handleDesktopSharing(t)},handleEndSession:function(t){return $NE?(EmbedSound.play("endtimer",t.timer),void $Support.handleEndSession(t.timer)):Support.handleEndSession(t)},handleJoinProActive:function(t){$NE?$Support.handleJoinProActive(t):Support.handleJoinProActive(t)},reJoin:function(){$NE?$Support.reJoin():Support.reJoin()},addVisitor:function(){$NE?$Support.addVisitor():Support.addVisitor()},quit:function(){if($NE)return $Support.quitChat();Support.quit()},setCookie:function(){$NE?$Support.setCookie():Support.setCookie()},removeChatCookie:function(){$NE?$Support.removeChatCookie():Support.removeChatCookie()},getType:function(){return $NE?$Support.type:Support.type},getuvid:function(){return $NE?$Support.EmbedObj.uvid:Support.uvid},getvwmsid:function(){return $NE?$Support.EmbedObj.vwmsid:Support.vwmsid},getWaitTimer:function(){return $NE?$Support.waitTimer:Support.waitTimer},setCallbackargs:function(t){$NE?$Support.callbackargs=t:Support.callbackargs=t},setQuitStatus:function(t){$NE?$Support.callquitstatus=t:Support.callquitstatus=t},getQuitStatus:function(){return $NE?$Support.callquitstatus:Support.callquitstatus},setIPBlockStatus:function(t){$NE?$Support.isipblocked=t:Support.isipblocked=t},getVisitID:function(){return $NE?$Support.EmbedObj.VISITID:Support.visitorinfo.VISITID},isComposerFocused:function(){return $NE?$Support.iscomposerfocus:Support.iscomposerfocus},iswindowfocused:function(){return $NE?$Support.iswindowfocused:Support.iswindowfocused},isSoundOff:function(){return $NE?"-1"==$Support.EmbedObj.soundval:!SupportUI.sound},updateChatCache:function(t,e){return $NE?$Support.updateChatCache(t,e):""},getChatStatus:function(){return $NE?$Support.ischatdisabled:SupportUI.ischatdisabled},getMessageLength:function(){return $NE?$.trim(" "+$("#msgarea").val()).length:$.trim(" "+$("#lstxteditor").val()).length},handleApiData:function(){return $NE?$Support.handleApiData():SupportUI.handleApiData()},isCrossDomainReq:function(){return!1}},$EmbedManger.UI={isNewEmbed:$EmbedManger.isNewEmbed,displayInfo:function(t,e){$NE?$UI.showBanner(t):SupportUI.displayInfo(t,e)},hideInfo:function(){$NE?$UI.hideBanner():SupportUI.hideInfo()},showProcess:function(t){$NE||SupportUI.showProcess(t)},showAgentStatus:function(){$NE||SupportUI.showAgentStatus()},resizequestion:function(){if(!$NE)return SupportUI.resizequestion},postMessage:function(t,e){$NE?$Support.postMessage(t,e):SupportUI.postMessage(t,e)},embeddiv:function(){return $NE?$Support.container:SupportUI.embeddiv},showVisitorInfo:function(){$NE||SupportUI.showVisitorInfo()},resizeWindow:function(){$NE||SupportUI.resizeWindow()},getCaptchaValue:function(){return $NE?$Support.Util.getCaptchaValue():SupportUI.getCaptchaValue()},showCaptcha:function(t){$NE?$UI.showCaptcha(t):SupportUI.showCaptcha(t)},hideCaptcha:function(){$NE?$UI.hideCaptcha():SupportUI.hideCaptcha()},showFeedback:function(t,e){$NE?$UI.showFeedback(t,e):SupportUI.showFeedback(t,e)},handleEndSupport:function(t){$NE||SupportUI.handleEndSupport(t)},hideVisitorInfo:function(){$NE||SupportUI.hideVisitorInfo()},clearProgress:function(){$NE||SupportUI.clearProgress()},handlePushMessage:function(t){$NE?$Support.Util.handlePushMessage(t):SupportUI.handlePushMessage(t.msg)},getDragDropHtml:function(){if(!$NE)return SupportUI.getDragDropHtml()},setChatStatus:function(t){$NE?$UI.setChatStatus(t):SupportUI.setChatStatus(t)},formatAndDisplayInfo:function(t,e,o){if($NE){var r=$UI.getInfoMsgContent(e);Message.display(r,!0)}else Message.formatAndDisplayInfo(t,e,o)},getPrevHTML:function(){return $NE?$UI.getPreviewHTML():PasteImage.getEmbPrevHTML()},showPasteUI:function(){if($NE)return $Support.Util.showPasteUI();PasteImage.showEmbedUI()},hidePasteUI:function(){if($NE)return $Support.Util.hidePasteUI();PasteImage.hideUI()},updateVisitorName:function(t){$NE&&$UI.updateVisitorName(t)},showGroupIcon:function(){},hideGroupIcon:function(){},getResendIcon:function(){return $NE?'<em id="resendicon" class="sqico-resend" documentclick="resendmsg" title="'+LSResource.getRealValue("embed.msg.resend")+'" ></em>':'<em id="resendicon" class="sqico-resend spritebg" onclick="LSMessanger.resendMessages('+RESEND_MANUAL+')" title="'+LSResource.getRealValue("embed.msg.resend")+'" ></em>'}};var AI_CURRENTPAGE=1,AI_PREV_ATTENDER=2,AI_GTRANS_LANG=3,AI_LAST_MAILREPLY_AT=4,AI_ACCESS_FROM=7,AI_VISITOR_LANG=10,AI_CHAT_NOTIFIED_USERS=13,AI_CALL_NOTIFIED_USERS=14,AI_CHANNELS=18,AI_BOT_VISITOR_CHAT=23,AI_CUSTOM_WTIME=25,LS_SUPPORTED_BYMAIL=-2,LS_MISSED=-1,LS_UN_ATTENDED=0,LS_ATTENDED=1,LS_WAITING=2,LS_CONNECTED=3,LS_TRANSFERED=4,LS_ENDED=5,LS_CONVERTASTICKET=7,LS_PUSH_TO_CRM=8,LS_TRIGGER_REPLIED=9,LS_PUSH_TO_SALESFORCE=10,LS_SDK_CONNECTED=11,LS_BOT_TRANSFER_MISSED=12,LS_CT_VISITOR=1,LS_CT_SUPPORTREPS=2,LS_CT_MSGBOARD=3,LS_CT_PRESENCE=4,LS_NFY_VISITOR=700,WM_ACK_CONNECT=0,WM_INFO=1,WM_CUSTOM=2,WM_LOGOUT=3,WM_CROSSPRODUCT=4,WM_PRESENCE=6,WM_RECONNECT=-3,WM_SOFT_RECONNECT=-4,CT_JOIN=10,CT_QUIT=11,CT_TXT_MSG=12,CT_NFY_USERSTATUS=13,CT_NFY_USERADD=14,CT_NFY_USERDELETE=15,CT_INF_MSG=16,CT_GUEST_DENIED=17,CT_NFY_GUESTACCESS=18,CT_GUEST_REQ=100,CT_NFY_APPROVAL=102,CT_ATT_MSG=20,WM_NFY_COLLABADD=21,WM_NFY_COLLABDELETE=22,CT_NFY_SETTITLE=19,WM_NFY_STATUS=23,WM_NFY_CSTATUSCHANGE=24,WM_NFY_USERIMGCHANGE=25,CT_MEET_MSG=26,CONTACT_INFO=27,CT_CLOSE_WIN=28,WM_AV_MSG=29,WM_CLEAR_NOTI=32,CT_NFY_ACTCHATADD=33,CT_NFY_ACTCHATDELETE=34,CT_NFY_LEAVESUPPORT="35",WM_MEETING_INFO=44,WM_DNAME_UPDATE=45,CT_ATTACH=49,WM_WebRTC_MSG=59,CT_NFY_MSG=112,NFY_GUEST_LINK=103,NFY_USER_TYPING=104,NFY_USER_IDLE=105,NFY_USER_ENTERED=110,PUSH_MSG=111,NFY_USER_CONTINUE=116,WM_ZTI_FAIL_MSG=601,WMS_ONLINE=1,WMS_OFFLINE=0,WMS_INVISIBLE=2,WMS_BUSY=3,WMS_IDLE=4,WMS_ENGAGED=6,WMS_CON_UNAPRD=-1,WMS_CON_REJECT=-2,WMS_CON_REQACC=-3,WMS_CON_DELETE=-4,WMS_CON_REMOVE=-5,WMS_CON_NOCHAT=-6,WMS_CON_ACCEPT=10,CT_NFY_LIVESUPPORT=4,CT_NFY_ZOHOGROUP=5,CT_NFY_MULTIPROTOCOL=6,NFY_REQ_CSUPPORT=106,NFY_ACC_CSUPPORT=108,NFY_QIT_CSUPPORT=109,NFY_ENDLIVESUPPORT="113",NFY_LS_OPERATIONS=114,NFY_PUSH_MSG=115,WMS_SERVICE_MSG=-7,WMS_ANNOUNCEMENT=-10,INT_NONE=0,INT_EQUAL=1,INT_NOT_EQUAL=2,INT_LESSTHAN_EQUAL=3,INT_LESSTHAN=4,INT_GREATERTHAN_EQUAL=5,INT_GREATERTHAN=6,INT_ISEMPTY=7,INT_ISNONEMPTY=8,PICKLIST_EQUAL=101,PICKLIST_NOT_EQUAL=102,PICKLIST_ISEMPTY=103,PICKLIST_ISNONEMPTY=104,DATE_EQUAL=201,DATE_NOT_EQUAL=202,DATE_LESSTHAN=203,DATE_GREATERTHAN=204,DATE_BETWEEN=205,DATE_NOTBETWEEN=206,DATE_EMPTY=207,DATE_ISNONEMPTY=208,BOOLEAN_EQUAL=301,BOOLEAN_NOT_EQUAL=302,BOOLEAN_ISEMPTY=303,BOOLEAN_ISNONEMPTY=304,UA_LOGOUT=0,UA_LOGIN=1,UA_CHANGE_STATUS=2,AV_FAILURE=-1,AV_AVAILABLE=0,AV_STARTING=1,AV_SELFJOINING=2,AV_INVITEINGPEER=3,AV_ESTABLISHPEER=4,AV_CLOSED=5,L_FREE1=1,L_BASIC1=2,L_PROFESSIONAL1=3,L_ENTERPRISE1=4,L_LIVEDESKPLUS=5,L_FREE2=7,L_BASIC2=8,L_BASIC3=9,L_PROFESSIONAL2=10,L_ENTERPRISE2=11,L_FREE=12,L_ENTERPRISE_USER=13,L_CRM_PLUS=14,L_BASIC4=15,L_PROFESSIONAL3=16,L_ENTERPRISE3=17,L_HOSTING_BASIC=18,L_HOSTING_PROFESSIONAL=19,L_HOSTING_ENTERPRISE=20,L_ZOHO_ONE=21,L_ZOHO_ONE_STANDARD=22,L_LIVEDESK=23,L_TRACKINGPLUS=24,L_BASIC=26,L_PROFESSIONAL=27,L_ENTERPRISE=28,L_NEW_FREE=29,L_NEW_CRM_PLUS=30,L_NEW_ZOHO_ONE=31,L_SUPPORT_REP_COUNT=1,L_EMBED_COUNT=2,L_CHATS_PER_MONTH=3,L_FILE_SHARING=4,L_MOBILE_SUPPORT=5,L_REPORTS=6,L_CHAT_MONITORING=7,L_BLOCK_IP=8,L_VISITOR_HISTORY=9,L_VISITOR_INFO=10,L_DAILY_REPORTS=11,L_ZOHOCRMINTEG=12,L_ZOHOSUPPORTINTEG=13,L_DEPT_EMAILCONFIG=14,L_TRANSLATE=16,L_TRACKING=18,L_ROUTINGRULECOUNT=19,L_DEPTS_COUNT=22,L_ANALYTICS_TRACKING=23,L_TRIGGERSCOUNT=24,L_LEADSCORE_RULE_COUNT=25,L_COMPANY_LOGO=26,L_SUPPORT_REP_ADD=27,L_AUDIOVIDEO=28,L_MEETING=29,L_WEEKLY_STATS=30,L_SCHEDULES_COUNT=31,L_ZOHOCAMPAIGNINTEG=33,L_ZOHOCHATINTEG=34,L_IMAPINTEG=35,L_MAILCHIMP=36,L_ZENDESK=37,L_SALESFORCE=38,L_MOBILE_SDK=39,L_BOT_USER=40,L_SUNDOWN_INTEG=42,L_VISITOR_CONVERSATION=43,L_ASSIST=44,L_CLEARBIT_INTEG=45,L_SIGNATURECHAT=46,L_LIVECHAT_REP_COUNT=47,L_DEPARTMENT_ADD=48,L_CHAT_ROUTING_RULE_COUNT=49,L_ISBOTUSER=51,L_BOTUSERS_COUNT=52,L_TEMPLATE_MESSAGE=53,L_CALL_ROUTING_RULE_COUNT=54,L_TEMPLATE_ARTICLE=55,L_TEMPLATE_EMAIL=56,L_SIQSCREENSHARE=59,L_MAIL_INBOX=60,L_BOT_ZIAPLATFORM=61,L_BOT_DIALOGFLOW=62,L_BOT_WEBHOOK=66,L_BOT_SHARE_BOT=67,L_BOT_WATSON=68,L_BOT_MSBOTFRAMEWORK=69,L_BOT_FLOW=82,L_VISITOR_FEATURE=65,L_GOOGLE_ADWORDS=70,L_LEADBERRY_INTEG=77,L_SCRAPY_INTEG=78,L_AUDIO_VIDEO=101,L_ZOHO_MEETING=102,ONLINE=1,OFFLINE=0,CON_INVISIBLE=2,CON_UNAPRD=-1,CON_REJECT=-2,CON_REQACC=-3,CON_DELETE=-4,CON_BUSY=3,CON_IDLE=4,CON_ENGAGED=6,NO_CHAT=-10,SEARCH_SUPPORT=0,SEARCH_USER=1,SEARCH_CANNEDMESSAGE=2,SEARCH_BLOCKEDIP=3,LDINTEG_DEFAULT=-1,LDINTEG_ZOHOSUPPORT=1,LDINTEG_ZCRM=2,LDINTEG_ZSUPPORT=3,LDINTEG_SDPONDEMAND=4,LDINTEG_ZCREATOR=5,LDINTEG_ZCAMPAIGN=6,LDINTEG_ZCHAT=7,LDINTEG_ANALYTICS=8,LDINTEG_IMAP=9,LDINTEG_MAILCHIMP=10,LDINTEG_ZENDESK=11,LDINTEG_SALESFORCE=12,LDINTEG_ZASSIST=13,LDINTEG_ZOHOAI=14,LDINTEG_SUNDOWN=15,LDINTEG_CLEARBIT=16,LDINTEG_GOOGLEADWORDS=19,LDINTEG_LEADBERRY=20,LDINTEG_SCRAPY=21,CMSG_ALLDEPT=0,MAILREPLY_DRAFT=1,FBREPLY_DRAFT=2,FBENQUIRY_DRAFT=3,EMAILCONFIG_FROMADDRESS=0,BANNER_RO=0,BANNER_ANNOUNCEMENT=1,BANNER_NETDOWN=2,OFFLINE_BUSINESSHOUR_HIDEEMBED=-10,BUSINESS_HOUR_STATUS=-11,ALLOWED_FILE_SIZE=10485760,BUBBLE_IMAGE_MAXSIZE=1048576,CSS_FILE_MAXSIZE=1048576,FAV_ICON_MAXSIZE=524288,APN_CERTIFICATE_MAXSIZE=12288,CHAT_FILE_MAXSIZE=52428800,LS_DMAP_NOINTEG=-1,LS_DMAP_NOTASSOCIATED=-2,LS_DMAP_ACTIVE=-3,LS_DMAP_CHOOSEONDEMAND=-4,CRM_DMAP_ASSOCIATED=-3,CRM_DMAP_NOTASSOCIATED=-1,NOTETYPE_PICKUPBYMAIL=26,VERTICAL=0,HORIZONTAL=1,CM_IPADDRESS=0,CM_SUPPORTREP=1,CM_VISITOREMAIL=2,REPORTS_DURATION="4",REPORTS_TODAY="5",REPORTS_YESTERDAY="6",REPORTS_THISWEEK="0",REPORTS_LASTWEEK="1",REPORTS_THISMONTH="2",REPORTS_LASTMONTH="3",TIME_SPENT="1",TIME_SINCE_LAST_ACTION="2",ADVANCED="3",PAGE_TITLE="4",PAGE_URL="5",REFERRER="6",COUNTRY="7",BROWSER="8",OPERATING_SYSTEM="9",SEARCH_ENGINE="10",VISITOR_AVAILABILITY="11",NUMEBER_OF_VISITS="12",PAST_CHATS="13",NO_OF_URL_ACCESSED="14",IP="15",VISITOR_ACTION="16",DEPARTMENT="17",WEB_EMBED="18",SYSTEM_STATUS="19",VISITOR_STATUS="20",LANDING_PAGE_URL="21",LANDING_PAGE_TITLE="22",CUSTOM_INFO="23",REGIONS="24",CRM_LEAD="31",CRM_CONTACT="32",CRM_ACCOUNT="56",POTENTIAL="33",CITY="34",STATE="35",VISITOR_TYPE="36",CRM_ENTITY="37",PREVIOUS_PAGE="38",TRIGGERED_STATUS="39",VISITOR_SOURCE="40",LAST_VISIT_TIME="41",FIRST_VISIT_SOURCE="43",LAST_VISIT_SOURCE="44",LAST_VISITED_TIME="45",EMAIL_IDENTIFIED="46",ACTIONS_PERFORMED="47",TRIGGERED_ACTION="48",CUSTOM_ACTION="49",CAMPAIGN="50",CLEARBIT_COMPANY="52",CLEARBIT_IDENTIFIED="53",CLEARBIT_VISITOR="54",ACCESSED="0",CLICKED="1",MISSED="2",CONTACTED="3",RESPONDED="4",WAITING="5",CHAT_COMPLETED="6",TRIGGERED="7",TRIGGERED_REPLIED="8",BLOCKED="11",CUSTOM="100",SDK_CONNECTED="12",BOT_TRANSFER_MISSED="13",AVAILABLE="1",IDLE="4",ENGAGED="6",DEFAULT_CINFO="_cinfo",TRIGGER_ACTION_NONE=0,TRIGGER_SEND_MESSAGE=2,TRIGGER_OPEN_CHAT_WINDOW=3,TRIGGER_SHOW_BUBBLE=4,TRIGGER_SHOW_BANNER=5,TRIGGER_ANIMATE=6,TRIGGER_SHOW_FLOAT_BUTTON=7,TRIGGER_GLOW=8,TRIGGER_PLAY_TUNE=9,TRIGGER_INVOKE_JS_API=10,TRIGGER_INVOKEBOT=16,TRIGGER_CAMAPIGN="11",TRIGGER_CRM_LEAD="12",TRIGGER_CRM_CONTACT="13",TRIGGER_CRM_LEAD_CONTACT="14",TRIGGER_EMAIL_TEMPLATE="15",BOT_TRIGGER="16",TRIGGER_EVENT_LEAVES_A_WEBSITE=3,ADDINFO_TRIGGER="8",OLD_VISITOR="1",NEW_VISITOR="2",ALL_VISITORS="3",TRIAL_UPGRADE_REMINDER_DAYS=5,UTSLOAD_MORE_LIMIT=10,THIS_WEEK="0",LAST_WEEK="1",THIS_MONTH="2",LAST_MONTH="3",TODAY="5",YESTERDAY="6",TOMORROW="8",NEXT_WEEK="9",NEXT_MONTH="10",LAST_TWO_WEEKS="11",NEXT_TWO_WEEKS="12",LAST_TWO_MONTHS="13",NEXT_TWO_MONTHS="14",THIS_QUARTER="15",LAST_QUARTER="16",NEXT_QUARTER="17",THIS_YEAR="18",F_DYNAMICMSG=1,F_EXPORTPDF=2,F_EXPORTXLS=3,F_EXPORTCSV=4,F_SENDMAIL=5,LEFT_SIDE_WIDTH=220,RIGHT_SIDE_WIDTH=365,RULE_TRIGGER=1,RULE_ROUTING=2,RULE_CHAT_ROUTING=3,RULE_CALL_ROUTING=4,RULE_BOT=5,RT_ROUTE_TO_ALL=-1,RT_DO_NOT_ROUTE=0,RT_ONE_BY_ONE=1,RT_LEAST_LOADED=2,RT_SELECTED_USERS=3,RT_FIRST_AVAILABLE_USER=4,RT_ROUTE_TO_DEPARTMENT=5,CRM_VISITOR_NOTAVAILABLE=-1,CRM_VISITOR_LEAD=1,CRM_VISITOR_CONTACT=2,CRM_VISITOR_PROSPECT=3,CRM_VISITOR_CUSTOMER=4,CRM_VISITOR_JUNK_LEAD=5,DU_CRMASSIGNEDOWNER=-1,DU_SALESIQLATTENDER=-2,DU_ALLAVAILABLEUSERS=-3,VH_PRESET_ALLVISITOR="-1",VH_PRESET_RETVISITOR="-2",SHARECODE_EMBED=1,SHARECODE_IDENTIFIER=2,DN_UNSUPPORTED=-1,TRIGGER_SMILEY_KEY=":",DEVICE_DESKTOP="1",DEVICE_MOBILE="2",DEVICE_MOBILESDK="4",SIGNATURE_CHAT="1",PATH_ACCESSED=0,PATH_NAVIGATION=1,PATH_CUSTOM_OLD=2,PATH_VISITORLEFT=3,PATH_CHAT_START=4,PATH_CHAT_END=5,PATH_MAIL_SENT=6,PATH_NOTES_ADDED=7,PATH_CHATRESUMED=8,PATH_AUTO_CHAT_END=9,PATH_NOTIFICATION_SENT=12,CHAT_OPEN=15,CHAT_REOPEN=16,PATH_CUSTOM=500,PATH_INVALID=-1,PATH_NOTEXISITS=-2,LASTCONTACTED_MAIL_SENT="1",LASTCONTACTED_NOTIFICATION_SENT="4",NOTIFICATION_TEXT_COUNT="200",NOTIFICATION_TITLE_COUNT="100",ERROR_NODEVICE=9001,ERROR_MODULES_DISABLED=9002,IMAP_INTEGID="9",OS_ANDROID="Android",OS_iOS="Apple IPhone",ACCESS_MOBILE="Mobile",RESEND_AUTO="1",RESEND_MANUAL="2",CHATTYPE_PROACTIVE="1",CHATTYPE_VISITORINITIATED="2",CHATTYPE_TRIGGERED="3",TAB_TRACKING="1",TAB_ROUTING="2",TAB_TRIGGERS="3",TAB_VISITS="4",TAB_LEADSCORING="5",TAB_CHATROUTING="6",USERTYPES_BOT="3",USERTYPES_LIVECHATUSER="4",USERACCESS_BIT_CHAT=0,USERACCESS_BIT_TRACKING=1,TRACKING_CONFIG_RING=1,TRACKING_CONFIG_LIST=2,CRITERIA_BETWEEN=2,CRITERIA_IN_THE_LAST=16,CRITERIA_IN_THE_NEXT=17,PRESET_TIME_SPENT="2",PRESET_CRM="6",STATUS_ENABLE="1",STATUS_DISABLE="0",CHOOSE_A_DATE=20,AUDIOCALL=0,VIDEOCALL=1,AUDIOVIDEOCALL=2,AV_CONNECTED="connected",AV_FAILED="failed",UPSTREAM=1,DOWNSTREAM=2,AV_ACCEPTED=1,AV_REJECTED=2,AV_INITIATE=3,AV_CANDIDATE=4,AV_ENDCALL=5,AV_CONNECTWITHPEER=6,AV_INCOMINGCALL=1,AV_OUTGOINGCALL=2,AV_CONNECTING=3,AV_ONGOING=4,AV_RECONNECTING=5,AV_USERBUSY=6,AV_STARTRECORD=7,AV_RECORDING=8,AV_PLAY=9,ANNOUNCEMENT=1,TIPSANDTRICKS=2,MIN_PASSWORD_LENGTH=3,GDPR_PORTAL_SWITCH=0,GDPR_PASSWORD_PROTECTION=1,GDPR_IP_MASKING=2,GDPR_IPMASK_HOSTS=2,SUBSCRIBE_LABEL_LENGTH=100,MAX_FILE_ATTACHMENT_COUNT=5,CHANNEL_WEB=1,CHANNEL_IOS=2,CHANNEL_ANDROID=3,CHANNEL_EMAILSIGNATURE=4,CHANNEL_TELEGRAM=5;function LSDebugger(){}LSDebugger.init=function(){this.infoarray=[],this.debuglimit=100,this.logarr=[],this.maxreqsize=20,this.localstoragekey="logdebuginfo";try{LSDebugger.clearDumpLog()}catch(e){}},LSDebugger.clearDumpLog=function(){var e=localStorage.getItem("siqlog");if(e){for(var t in e=JSON.parse(e))e.hasOwnProperty(t)&&t.startsWith("siqlog")&&delete e[t];localStorage.siqlog=JSON.stringify(e)}},LSDebugger.getCurrentTime=function(){var e=new Date;return e.getHours()+":"+e.getMinutes()+":"+e.getSeconds()+":"+e.getMilliseconds()},LSDebugger.pushDebugInfo=function(e){e&&(this.infoarray.length>=this.debuglimit&&this.infoarray.splice(0,1),this.infoarray.push({time:LSDebugger.getCurrentTime(),info:e}))},LSDebugger.clearDebugInfo=function(){this.infoarray=[]},LSDebugger.postDebugInfo=function(e,t,o,r){if(e){try{var g=parseInt(CurrentUser.getWMSID().split("_")[1]);if(t&&-1===$.inArray(g,t))return;if(o&&o<g%10)return}catch(e){}if(r&&!window.dext){var a={};a.subject=e,a.log=this.infoarray,a.time=(new Date).getTime();var n=LSDebugger.getFromLocalStorage(this.localstoragekey);if((n=n||[]).push(a),LSDebugger.storeInLocalStorage(this.localstoragekey,n,""),LSDebugger.clearDebugInfo(),n.length>=this.maxreqsize){var i={subject:"Over all info messages"};i.log=CommonUtil.toJSON(n),i.logonly=!0,i.nocache=(new Date).getTime();var u="logdebuginfo"+(window.dext||".sas");try{u=$Support.getAjaxURL("logdebuginfo",dext)}catch(e){}n=[],LSDebugger.removeFromLocalStorage(this.localstoragekey);var s={url:u,type:"POST",data:i,dataType:"json",success:function(e){}};"undefined"!=typeof jQuery&&$.ajax(s)}}else LSDebugger.postDebugInfoInSingleThread(e,r)}},LSDebugger.postDebugInfoInSingleThread=function(e,t){var o={};o.subject=e,o.log=CommonUtil.toJSON(this.infoarray),o.nocache=(new Date).getTime(),t&&(o.logonly=t);var r="logdebuginfo"+(window.dext||".sas");try{r=$Support.getAjaxURL("logdebuginfo",dext)}catch(e){}LSDebugger.clearDebugInfo();var g={url:r,type:"POST",data:o,dataType:"json",success:function(e){LSDebugger.clearDebugInfo()}};"undefined"!=typeof jQuery&&$.ajax(g)},LSDebugger.collectLogs=function(t,e){try{this.logarr[t][0]}catch(e){this.logarr[t]=[]}this.logarr[t].push({time:LSDebugger.getCurrentTime(),info:e})},LSDebugger.storeInLocalStorage=function(e,t,o){window.dext?$Support.LSDB.set(e,t,o):CommonUtil.storeInLocalStorage(e,t,o,!0)},LSDebugger.removeFromLocalStorage=function(e){window.dext?$Support.LSDB.remove(e):CommonUtil.removeFromLocalStorage(e,!0)},LSDebugger.getFromLocalStorage=function(e){return window.dext?$Support.LSDB.getFromLocalStorage(e):CommonUtil.getFromLocalStorage(e,!0)},LSDebugger.init();function LSResource(){}LSResource.init=function(){this.MessageObject=new Object,this.IntegMessageObject=new Object},LSResource.getRealValue=function(e,t){var c="";try{c=null==this.MessageObject[""+e]||null==this.MessageObject[""+e]?e:this.MessageObject[e]}catch(e){}try{c=c.replace(/_/g," ")}catch(e){c=""}return null!=t&&(c=LSResource.replaceParams(c,t)),c},LSResource.replaceParams=function(e,t){try{for(var c="object"==typeof t?t:t.split(","),s=0;s<c.length;s++){var r=c[s],n=new RegExp("\\$"+(s+1),"g");e=e.replace(n,r)}}catch(e){}return e},LSResource.setIntegLabel=function(e,t){if(null!=t){try{LSResource.IntegMessageObject[e]=new Object}catch(e){}LSResource.IntegMessageObject[e]=t}},LSResource.getIntegLabel=function(e,t){try{var c=LSResource.IntegMessageObject[e];if(null!=c&&null!=c[t]&&""!=c[t])return c[t]}catch(e){}return LSResource.getRealValue(t)},LSResource.init();function DataObject(){this.tableToRowList=new Object,this.tableArray=new Array(0),this.getRowsForTable=getRowsForTable,this.addRowsForTable=addRowsForTable,this.containsTable=containsTable,this.addNewTable=addNewTable,this.setColumn=setColumn,this.deleteFirstRow=deleteFirstRow,this.deleteAllRowsInTable=deleteAllRowsInTable,this.getTables=getTables,this.getRows=getRows,this.getFirstRow=getFirstRow,this.displayDO=displayDO,this.constructXML=constructXML}function getRowsForTable(t){return this.tableToRowList[t]}function addRowsForTable(t,e){this.containsTable(t)||this.addNewTable(t);var r=this.tableToRowList[t];return r[r.length]=createRow(e),!0}function createRow(t){for(var e=new Object,r=0;r<t.length;r++)e[t[r][0]]=t[r][1];return e}function containsTable(t){for(var e=this.tableArray.length,r=0;r<e;r++)if(this.tableArray[r]==t)return!0;return!1}function addNewTable(t){this.tableArray.push(t),this.tableToRowList[t]=new Array(0)}function setColumn(t,e,r){if(!this.containsTable(t))return!1;var a=this.tableToRowList[t];for(var o in a)for(var n in a[o])n==e&&(a[o][n]=r);return!0}function deleteFirstRow(t,e,r){if(!this.containsTable(t))return!1;var a=this.tableToRowList[t],o=null;for(var n in a)for(var i in a[n])i==e&&a[n][i]==r&&(o=n);return a.splice(o,1),this.tableToRowList[t]=a,!0}function deleteAllRowsInTable(t,e,r){if(!this.containsTable(t))return!1;var a=this.tableToRowList[t],o=new Array(0);for(var n in a)for(var i in a[n])i==e&&a[n][i]==r&&o.push(n);var s=new Array(0),l=!1;for(var n in a){for(var i in l=!1,o)n==o[i]&&(l=!0);l||s.push(a[n])}return a=s,this.tableToRowList[t]=a,!0}function getTables(){return this.tableArray}function getFirstRow(t,e,r){this.getTables();var a=this.getRowsForTable(t);for(var o in a)for(var n in a[o])if(a[o][n]==r)return a[o];return null}function getRows(t,e,r){var a=new Array(0),o=this.getRowsForTable(t);for(var n in o)for(var i in o[n])i==e&&o[n][i]==r&&a.push(o[n]);return a}function displayDO(){var t=this.getTables(),e="";for(var r in t){var a=this.getRowsForTable(t[r]);for(var o in e=e+"<br>"+LSResource.getRealValue("common.table")+":"+t[r],a){for(var n in a[o])e=e+"<br>"+LSResource.getRealValue("common.rownumber")+o+":    <i>"+LSResource.getRealValue("common.propname")+"</i>   "+n+"   <i>"+LSResource.getRealValue("common.value")+"</i>   "+a[o][n]+"      ";e+="<br>"}}return e}function constructXML(){var t=this.getTables(),e="<Data>";for(var r in t){var a=this.getRowsForTable(t[r]);for(var o in a){for(var n in e=e+"<"+t[r],a[o])"string"==typeof a[o][n]&&-1==a[o][n].indexOf("null")&&0!=a[o][n].length?e=e+" "+n+'="'+a[o][n]+'" ':"string"!=typeof a[o][n]&&0!=a[o][n].length&&(e=e+" "+n+'="'+a[o][n]+'" ');e+="/>"}}return e+="</Data>"}function getObject(t,e){if("do"!=t)return e;var r=new DataObject;for(i=0;i<e.length;i++){var a=e[i],o=a.tname,n=a.cols,s=a.rows;for(j=0;j<s.length;j++){var l=s[j],u=new Array;for(k=0;k<l.length;k++)u[k]=[n[k],l[k]];r.addRowsForTable(o,u)}}return r}function parseResponse(t){return t?getObject(t[0].objType,t[0].objString):null}jQuery.fn.center=function(){return this.css("position","fixed"),this.css("top",($(window).height()-this.outerHeight(!0))/2+"px"),this.css("left",($(window).width()-this.outerWidth(!0))/2+"px"),this},jQuery.debounce=function(e,n){var s;return function(){var t=this,i=arguments;clearTimeout(s),s=setTimeout(function(){s=null,e.apply(t,i)},n)}},jQuery.fn.tval=jQuery.fn.val,jQuery.fn.val=function(t){var i=this[0];if(i){nodeName=i.nodeName;var e=$(i);if(null!=t){if("object"!=typeof t)return"DIV"==nodeName?this.html(t):this.tval(t);var n=e.children().eq(0).find("[val]");for(var s in t)n.html(t[s]).attr("val",s);return}if(e.tval()==e.attr("placeholder"))return"";if("DIV"!=nodeName)return e.tval();if(e.attr("contentEditable"))return e.html();if("dropdown"===e.attr("comp"))return e.children().eq(0).find("[val]").attr("val")}},jQuery.fn.email=function(){return processInput("emailid",$(this).val())},jQuery.fn.trimVal=function(){var t=$(this).val();if(t)return $.trim(t)},jQuery.fn.ldfocus=function(t){$initialVal=this.val(),t?this.focus().val("").val($initialVal).select():this.val("").blur().focus().val($initialVal)},jQuery.ajaxPrefilter(function(t,i,n){if(t.onreadystatechange){var s=t.xhr;t.xhr=function(){var i=s.apply(this,arguments);function e(){t.onreadystatechange(i,n)}return i.addEventListener?i.addEventListener("readystatechange",e,!1):setTimeout(function(){var t=i.onreadystatechange;t&&(i.onreadystatechange=function(){e(),t.apply(this,arguments)})},0),i}}}),jQuery.fn.dropdown=function(i){function f(){this.init=function(t){this.curr=t.empty(),this.selected=i.selected,this.onchange=i.callback,this.onbeforechange=i.onbeforechange,this.searchlimit=i.searchlimit?i.searchlimit:10,this.ulelmid=i.ulid,this.hidecallback=i.hidecb,this.clickoutsidecb=i.clickoutsidecb,this.keyid=i.key,this.valueid=i.value,this.imagecallback=i.imagecallback,this.i18n=!!i.i18N&&i.i18N,this.showcb=i.showcb,this.issort=i.issort,this.currid=this.curr.attr("id"),this.json=this.formatOptions(i.options),this.searchtxt="",this.searchlist=i.searchlist,this.defaultval=i.defaultval,this.hidetitle=i.hidetitle,this.searchplaceholder=i.searchplaceholder,this.count=0,this.isdisable=!!(CommonUtil.isromode&&!i.enableinromode||i.isdisable),this.curr.addClass("position-relative"),this.curr.attr("comp","dropdown"),i.classname&&this.curr.addClass(i.classname),this.constructDropDwnUI(),this.bindClickHandler(),this.processJson()}}f.prototype.formatOptions=function(t){var i=[];if(i[0]={},"number"==typeof t.length)return t;for(var e in t){var n="object"==typeof t[e]?t[e][this.keyid]:e,s="object"==typeof t[e]?t[e][this.valueid]:t[e];i[0][n]=s}return i},f.prototype.getRealValue=function(t){return this.i18n?LSResource.getRealValue(t):t},f.prototype.getFirstJsonKey=function(t){for(var i in t)return i},f.prototype.getInsertPosition=function(){return"top"===$(this.dropobj).attr("aligned")?"prepend":"append"},f.prototype.constructDropDwnUI=function(){var t=this.json,i=this.selected,e=this.curr,n=this.currid,s="number"==typeof t.length;if(i){for(var o=t.length,a=0;a<o;a++)if(t[a][i]){var l=this.getRealValue(t[a][i]);break}}else this.selected=i=s?this.getFirstJsonKey(t[0]):this.getFirstJsonKey(t),l=s?this.getRealValue(t[0][i]):this.getRealValue(t[i]);var r=this.hidetitle?"":l,c='<div title="'+r+'" class="combotitle bxsizing drphead '+(this.isdisable?"cursr_deflt":"")+'" id="'+n+'_div">';this.isdisable||(c+='<em class="sqico-arrow"></em>'),c+=' <span val="'+i+'" class="txtelips" title="'+r+'">'+l+"</span></div>",c+='<div class="combosubdrpdwnmn drpcnt bxsizing" id="'+n+'_ddown" style="display:none"></div>',e.append(c),this.sourceobj=e.find("#"+n+"_div")[0],this.dropobj=e.find("#"+n+"_ddown")[0]},f.prototype.bindClickHandler=function(){if(!this.isdisable){var o=this.sourceobj,a=this.dropobj;$(o).off().on("click",function(t){if("cmpny_fltr_div"==$(this).attr("id")&&$(".combosubdrpdwnmn").hide(),$UI.toggleDropDown(o,a,function(){p.hideDropDown(!0)},p.showcb,p.hidecallback,"",t),"none"!==(a=$(a)).css("display")){$(p.curr).addClass("bdr"),$UI.handleDropDwnEvents($(this).parent()),a.find("#srchtxt").length&&(p.positionDropDown(),p.alignSearchDiv());var i=$(o);if(""==i.find(".txtelips").attr("val")){var e=i.parent().find(".ullist");e.find("li .sqico-tick").removeClass("sqico-tick"),e.find('li[val=""] .drop-tick').addClass("sqico-tick")}var n=a.find(".sqico-tick");if(0!=n.length){var s=0==a.find(".ullistwrap").length?a.find(".ullist"):a.find(".ullistwrap");CommonUtil.ScrollintoView(s,n.parent().parent())}}else $(p.curr).removeClass("bdr")})}},f.prototype.populateList=function(t,i){t=t;var e="",n=this.dropobj,s=(this.searchtxt,this.currid),o="",a=this.searchplaceholder,l=a&&0==a.indexOf("Ex: ")?"":"Ex: ";for(var r in this.searchplaceholder=a?l+a:"",$(n).find("li").find(".drop-tick").removeClass("sqico-tick"),t){var c=r,h=t[r];if(h=this.getRealValue(h),""==this.searchtxt||-1!=this.getSearchIndex(t[r],h)){var d=this.hidetitle?"":h;this.defaultval===r?o='<li title="'+d+'" val="'+c+'" ><div><em class="drop-tick"></em><span title="'+d+'">'+h+"</span></div></li>":e+='<li title="'+d+'" val="'+c+'" ><div><em class="drop-tick"></em><span title="'+d+'">'+h+"</span></div></li>",""==this.searchplaceholder&&(this.searchplaceholder="Ex: "+h),this.count++}}var u=this.getInsertPosition();(0<$(n).find("ul").length?e&&$(n)[u]('<ul class="ullist ulsplit" asc="'+this.issort+'" id="'+s+i+'">'+o+e+"</ul>"):e&&$(n)[u]('<ul class="ullist" asc="'+this.issort+'" id="'+s+'0">'+o+e+"</ul>"),$(n).find("ul").off().on("click","li",function(t){var i=$(p.dropobj),e=p.sourceobj,n=$(i).attr("id"),s=p.curr;if("function"==typeof p.onbeforechange&&p.onbeforechange({thiselm:this,curr:s,event:t}),p.imagecallback&&"EM"===t.target.nodeName)return p.imagecallback($(this)),void p.hideDropDown();var o=p.defaultval;p.selected=o||$(this).attr("val");var a="";if("presetname_ddown"==n)switch(p.selected){case"1":a="visitis";break;case"2":a="time_spent";break;case"3":a="last_activity_time";break;case"4":a="past_chats";break;case"5":a="action";break;default:a="user_defined"}a&&CommonUtil.trackInSpotlight("Tracking customize","clicked_preset",a);var l=o?i.find('li[val="'+o+'"]').find("span").html():$(this).find("span").html(),r=p.hidetitle?"":l,c=$(e).find("span").attr("val");if($(e).find("span").attr({val:p.selected,previousval:c}).html(l).attr("title",getDecodedText(r)),i.find("li").find(".drop-tick").removeClass("sqico-tick"),i.find('li[val="'+p.selected+'"]').find(".drop-tick").addClass("sqico-tick"),ClosePreference.clear(p.dropobj.id),p.onchange){var h={thiselm:this,curr:s,event:t};p.onchange(h)}p.hideDropDown()}),this.count>this.searchlimit)&&($(n).find("#srchtxt").length||this.showSearchDiv(),$(n).find("#srchtxt").off().on("keyup","input",function(t){p.searchtxt=$(this).val(),-1==[37,38,39,40,13].indexOf(CommonUtil.getKeyCode(t))&&(p.processJson(),$UI.handleDropDwnEvents($(n).parent()),$(this).focus()),t.preventDefault()}));f.prototype.getSearchIndex=function(t,i){var e=this.searchtxt,n=this.searchlist;try{var s=new RegExp(e,"gi");if(!n)return i.toString().search(s);for(var o=-1,a=n.length,l=0;l<a;l++)o=t[n[l]].toString().search(s),o++;if(o)return o}catch(t){}return-1}},f.prototype.positionDropDown=function(){var t=$(this.dropobj);$(t).attr("aligned");"top"==$(t).attr("aligned")&&t.css("top",1-t.outerHeight()+"px")},f.prototype.alignSearchDiv=function(){var t=$(this.dropobj),i=$(t).attr("aligned"),e=$(t).find("#srchtxt");"top"==i?(this.positionDropDown(),t.find("#srchtxt").detach(),t.append(e).find("input").focus().focusin(function(t){t.stopPropagation()}),e.addClass("asign-srcmn-top")):(t.find("#srchtxt").detach(),t.prepend(e).find("input").focus().focusin(function(t){t.stopPropagation()}),e.removeClass("asign-srcmn-top"))},f.prototype.showSearchDiv=function(){var t=this.dropobj,i="";i+='<div class="asign-srcmn" id="srchtxt"> <em class="sqico-search"></em>',i+='<input type="text" class="asign-srctxbx" placeholder="'+this.searchplaceholder+'" title></div>',$(t).prepend(i)},f.prototype.processJson=function(t){var i=0,e=$(this.dropobj),n=t?this.formatOptions(t):this.json,s=this.selected;if(e.find("ul").remove(),n.length)for(;i<n.length;)this.populateList(n[i],i),i++;else this.populateList(n);$(this.sourceobj).find("span").attr("val")==s&&e.find('li[val="'+getDecodedText(s)+'"]').find(".drop-tick").addClass("sqico-tick"),count=0;var o=e.find("ul");(e.find(".ullistwrap").remove(),1<o.length&&o.wrapAll('<div class="ullistwrap"></div>'),e.find("li").length)||e[this.getInsertPosition()]('<ul class="ullist"><li id="norecord" class="noresults">'+LSResource.getRealValue("search.noresults")+"</li></ul>");e.length&&this.positionDropDown()},f.prototype.hideDropDown=function(t){var i=this.dropobj,e=this.hidecallback,n=this.clickoutsidecb,s=$(i).find("input");s.length&&s.val()&&(this.searchtxt="",s.val(""),this.processJson()),$(i).hide(),$(p.curr).removeClass("bdr"),e&&e(),t&&n&&n()},f.prototype.setHeader=function(t){var i=$(this.sourceobj);i.find("span").attr({val:t[0],title:t[1]}).html(t[1]);var e=i.parent().find(".ullist");e.find("li .sqico-tick").removeClass("sqico-tick"),e.find('li[val="'+t[0]+'"] .drop-tick').addClass("sqico-tick")};var p=new f;return p.init(this),p},jQuery.fn.disable=function(){"okbtn"===this.attr("id")&&this.css("cursor","none").attr("disable","true")},jQuery.fn.enable=function(){0!==this.find("#popupftr").length&&this.find("#popupftr").find("span").each(function(){"true"===$(this).attr("disable")&&$(this).css("cursor","pointer").attr("disable","false")})},jQuery.expr[":"].hiddenByParent=function(t){return jQuery(t).is(":hidden")&&"none"!==jQuery(t).css("display")},function(s){var i=function(t,i){this.elem=t,this.$elem=s(t),this.options=i};i.prototype={defaults:{align:"horizontal",label:{},name:"radio",i18n:!0,istitle:!0},init:function(){this.config=s.extend({},this.defaults,this.options),this._create()},_create:function(){for(var t=this.config.list,i="",e=0;e<t.length;e++)i+=this._getRadioListHTML(t[e]);this._populateList(i),this._alignRadioButton(),this._bindClickHandler()},_getRadioListHTML:function(t){var i=t.value?this._getRealValue(t.value):"",e=t.title?this._getRealValue(t.title):i;e=t.istitle?'title="'+e+'"':"";var n=t.attr?this._getRealValue(t.attr):"";return['<div class="uprdowrap">','<span class="rdobtn '+(t.selected&&s.parseJSON(t.selected.toString())?"rdselected":"")+'"></span>','<input type="radio" '+n+" "+(t.disable?"disabled=true":"")+" "+(this.config.customattr||"")+' name="'+this.config.name+'" id="'+t.id+'">',"<label "+e+' for="'+t.id+'" class="txtelips">'+i+" </label>","</div>"].join("")},_populateList:function(t){this.$elem.html(t)},_alignRadioButton:function(){"vertical"===this.config.align&&this.$elem.addClass("rdvertical")},_bindClickHandler:function(){var i=this,e=i.$elem.find('input[type="radio"]');e.on("click",function(){var t=e.index(this);i._toggleRadioButton(s(this),t)})},_toggleRadioButton:function(t,i){this.$elem.find(".rdselected").removeClass("rdselected"),t.prev("span").addClass("rdselected");var e=this.config.list[i].callback;e&&e(t)},_getRealValue:function(t){return this.config.i18n?LSResource.getRealValue(t):t}},s.fn.radio=function(t){return this.each(function(){new i(this,t).init()})}}(jQuery),function(a){var i=function(t,i){this.elem=t,this.$elem=a(t),this.options=i};i.prototype={defaults:{align:"vertical",label:{},name:"checkbox",i18n:!0,size:"large",position:"left"},init:function(){this.config=a.extend({},this.defaults,this.options),this._create()},_create:function(){for(var t=this.config.list,i="",e=0;e<t.length;e++)i+=this._getCheckBoxListHTML(t[e]);this._handleCheckBoxSize(),this._populateList(i),this._alignCheckBox(),this._bindOnChangeHandler()},_getCheckBoxListHTML:function(t){var i=t.value?this._getRealValue(t.value):"",e=t.title?this._getRealValue(t.title):i,n=t.id||"",s=t.selected&&a.parseJSON(t.selected.toString())?"chckbxsel":"",o=s?'checked="true"':"";return['<div class="chckbxmn cuschkbx">','<span id="chckbx" class="chckbx '+s+'"></span>','<input type="checkbox" class="vertical-middle"  id="'+n+'" name="'+this.config.name+'" '+o+">",'<label title="'+e+'" for="'+n+'" class="txtelips">'+i+" </label>","</div>"].join("")},_populateList:function(t){this.$elem.html(t)},_handleCheckBoxSize:function(){"small"===this.config.size&&this.$elem.addClass("cuschksmall")},_alignCheckBox:function(){"horizontal"===this.config.align&&this.$elem.addClass("chkhrzl"),"right"===this.config.position&&this.$elem.addClass("chckbx_rht")},_bindOnChangeHandler:function(){var i=this,e=i.$elem.find('input[type="checkbox"]');e.on("change",function(){var t=e.index(this);i._toggleCheckBox(a(this),t)})},_toggleCheckBox:function(t,i){var e=t.parent(),n=e.find('input[type="checkbox"]'),s=e.find("span");s.hasClass("chckbxsel")?(s.removeClass("chckbxsel"),n[0].removeAttribute("checked")):(s.addClass("chckbxsel"),n[0].setAttribute("checked","true")),this._triggerCallback(n)},_triggerCallback:function(t){this.config.callback(t,this.$elem.find('input[checked="true"]'))},_getRealValue:function(t){return this.config.i18n?LSResource.getRealValue(t):t}},a.fn.checkbox=function(t){return this.each(function(){new i(this,t).init()})}}(jQuery),function(e){var i=function(t,i){t&&(this.$elem=e(t),this.options=i)};i.prototype={defaults:{header:"",subheader:"",showinput:!0,inputid:"",inputonblurcb:null,inputonkeyup:null,inputplaceholder:"common.commaseparatedemail",inputval:"",showcheckbox:!0,checkboxid:"",checkboxonchangecb:null,checkable:!0,inputcustomattr:"",checkboxcustomattr:"",notehtml:"",i18n:!0,brecksubheader:!1},init:function(){this.config=e.extend({},this.defaults,this.options),this._create()},_create:function(){var t=this._getEmailConfigHTML();this.$elem.append(t),this._bindOnClickHandler()},_getEmailConfigHTML:function(){var t=this.config,i="";if(i+='<div class="configlist"><div class="floatlf">'+this._getRealValue(t.header),t.subheader&&(t.brecksubheader?i+='<span class="sub_hdr">'+this._getRealValue(t.subheader)+"</span>":i+="<span> ("+this._getRealValue(t.subheader)+") </span>"),i+="</div>",t.showinput){var e=t.notehtml?t.notehtml:"",n="";t.showcheckbox&&(n="false"==t.checkable?"hide_input":""),i+='<div class="edit_inptcntnr '+n+'"><input type="text" id="'+t.inputid+'" placeholder="'+this._getRealValue(t.inputplaceholder)+'" value="'+t.inputval+'" class="edit_inpt siq_inputfield" '+t.inputcustomattr+'><span id="count_'+t.inputid+'" class="cand_count"></span></div>'+e}if(t.showcheckbox){var s="set_off";"true"==t.checkable?(s="set_on",i+='<input type="checkbox" class="email_check" checked="checked" id="'+t.checkboxid+'" '+t.checkboxcustomattr+">"):i+='<input type="checkbox" class="email_check" id="'+t.checkboxid+'" '+t.checkboxcustomattr+">",i+='<div class="togglebtn '+s+'" tbutid="'+t.checkboxid+'"><em class="gspritebg"></em><div class="slidebtn"></div></div>'}return i+="</div>",i+='<div mode="autocomplete" class="autcmptmn" id="'+t.checkboxid+'auto"></div>'},_bindOnClickHandler:function(){var t=this.config;if(t.showcheckbox){var i=this;if(i.$elem.find("[tbutid="+t.checkboxid+"]").on("click",function(){null!==t.checkboxonchangecb&&t.checkboxonchangecb(t.checkboxid)}),t.showinput)i.$elem.find("input[id="+t.inputid+"]").on("click",function(){null!=t.inputonclick&&t.inputonclick("#"+t.inputid)})}i._bindOnBlurHandler(),i._bindOnKeyUpHandler()},_bindOnBlurHandler:function(){var t=this.config;if(t.showinput){this.$elem.find("#"+t.inputid).on("blur",function(){null!==t.inputonblurcb&&t.inputonblurcb("#"+t.inputid)})}},_bindOnKeyUpHandler:function(){var t=this.config;if(t.showinput){this.$elem.find("#"+t.inputid).on("keyup",function(){null!==t.inputonkeyup&&t.inputonkeyup("#"+t.inputid)})}},_getRealValue:function(t){return this.config.i18n?LSResource.getRealValue(t):t}},e.fn.emailConfig=function(t){return new i(this,t).init()}}(jQuery),function(f){var i=function(t,i){t&&(this.$elem=f(t),this.options=i)};i.prototype={defaults:{type:"title",align:"right",content:"",i18n:!1,toolid:"ldtooltip",clickremove:!0,mousemove:!1,customclass:"",destroyon:"mouseleave",is_text:!1},init:function(){return this.config=f.extend({},this.defaults,this.options),this._create(),this},_create:function(){this._showToolTip(),this._bindHandler()},_showToolTip:function(){var t=this.config,i="",e=this._getContent(),n=t.toolid;if(e=t.i18n?LSResource.getRealValue(e):e){e=t.is_text?getEncodedText(e):e;var s="help"===t.type?" help_arrow":" title_arrow";f("#"+n).remove(),i+='<div class="tool_cntnr'+s+" "+t.customclass+'" style="display:none;" id="'+n+'">';var o=f(i+='<div class="tool_subcntnr">'+e+'</div><em class="gspritebg"></em></div>');f("body").append(o),this._getToolTipPosition()}},getContentDOM:function(){return f("#"+this.config.toolid).find("div.tool_subcntnr")},_getToolTipPosition:function(){if(this.config.mousemove){var i=this;this.$elem.on("mousemove",function(t){i._setToolTipPosition(parseInt(t.pageX))})}this._setToolTipPosition(parseInt(this.$elem.offset().left))},_setToolTipPosition:function(t){var i=f("#"+this.config.toolid);this._toolobj||(this._toolobj={},this._toolobj.toolhigt=parseInt(i.outerHeight()),this._toolobj.toolwid=parseInt(i.outerWidth()),this._toolobj.elemtwid=parseInt(this.$elem.outerWidth()),this._toolobj.elemthigt=parseInt(this.$elem.outerHeight()),this._toolobj.offsettop=parseInt(this.$elem.offset().top),this._toolobj.maxright=parseInt(i.width())-30);var e=this._toolobj.offsettop,n=this._toolobj.toolhigt,s=this._toolobj.toolwid,o=this._toolobj.elemtwid,a=this._toolobj.elemthigt,l=this._toolobj.maxright,r=0,c=0,h=this.config;if("title"===h.type)r=e-n-15+3,"left"===h.align?(c=t-s,i.find(".gspritebg").removeClass("arowalign_left").addClass("arowalign_right")):(c=this.config.mousemove?t:t+o/2-3,i.find(".gspritebg").removeClass("arowalign_right").addClass("arowalign_left")),i.css({left:c,top:r}).fadeIn();else{var d=i.find(".gspritebg"),u=f(document).width()-(t+o+15);if(u<s&&100<l&&(i.find(".tool_subcntnr").css({width:l+"px"}),n=parseInt(i.outerHeight())),r=e-n/2+a/2,"left"===h.align||u<l){c=t-s-15,d.addClass("rotate")}else{c=t+o+15,d.removeClass("rotate")}i.css({left:c,top:r}),this._alignToolTip(i,r)}},_alignToolTip:function(t,i){var e=i+this._toolobj.toolhigt-window.scrollY,n=f("body").outerHeight()-28;n<e?t.css({top:i-(e-n)}).fadeIn():t.fadeIn()},_getContent:function(){var t=this.config.content,i=this.$elem.attr("title");return""!==t?t:i||""},_bindHandler:function(){var t=this.config;this.$elem.on("click",function(){t.clickremove&&f("#"+t.toolid).fadeOut()}),this._bindDestroyHandler(t)},destroy:function(t){(t=t||f("#"+this.config.toolid)).fadeOut()},_bindDestroyHandler:function(t){var i=f("#"+t.toolid);CommonUtil.isSafari()||i.on("mousedown",function(t){3===t.which&&i.data("rclicked","true")}),i.hover(function(){i.data("mouseentered","true")},function(){i.data("mouseentered","false")});var e=this;this.$elem.on(t.destroyon,function(t){"mouseleave"===t.type?e.destroy(i):"blur"===t.type&&"true"!==i.data("mouseentered")&&e.destroy(i),i.hover(function(){i.stop(!0).fadeTo(400,1)},function(){"true"!==i.data("rclicked")?e.destroy(i):i.data("rclicked","false")})})}},f.fn.tooltip=function(t){return new i(this,t).init()}}(jQuery),function(e){var i=function(t,i){t&&(this.$elem=e(t),this.canvas=t[0].getContext("2d"),this.options=i)};i.prototype={defaults:{percentage:0,fillcolor:"#8ac668",selectcolor:"#ef6b60",linewidth:2},init:function(){return this.config=e.extend({},this.defaults,this.options),this._create(),this},_create:function(){var t=this.config;this._draw([{color:t.fillcolor,degree:360},{color:t.selectcolor,degree:3.6*t.percentage}])},_draw:function(t){var i=this.$elem[0],e=this.canvas,n=i.width/2,s=i.height/2;for(var o in t){var a=t[o];e.beginPath(),e.arc(n,s,s-2,Math.PI/180*270,Math.PI/180*(270+a.degree)),e.strokeStyle=a.color,e.lineWidth=this.config.linewidth,e.stroke()}}},e.fn.circleprogressbar=function(t){return new i(this,t).init()}}(jQuery);var controller=new Object;function HttpCommunication(e,t){this.comid=e,this.callback=t,this.initialize=function(){var e;window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP"));e?e.onreadystatechange=this.callback:e=!1;controller[this.comid]=e},this.request=function(t){try{this.initialize();var e=controller[this.comid];e.open("GET",t,!0),e.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),ie?e.send():e.send(null)}catch(e){document.getElementById("sendmsg").src=t}},this.postrequest=function(e,t){try{this.initialize();var n=controller[this.comid];n.open("POST",e,!0),n.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),n.send(t)}catch(e){}},this.submitForm=function(e){0;this.initialize();var t=controller[this.comid];if(void 0===e)return!1;formEle=e.elements,formLen=e.length;var n=e.action,o=e.method,r="";for(i=0;i<formLen;i++)0<formEle[i].name.length&&(0==i||r.length<1?r+=formEle[i].name+"="+encodeURIComponent(formEle[i].value):r+="&"+formEle[i].name+"="+encodeURIComponent(formEle[i].value));if(""==r)return!1;if(""==n)return!1;t&&("get"==o.toLowerCase()?(-1!=n.indexOf("?")?urlQryStr=n+"&"+r:urlQryStr=n+"?"+r,urlQryStr="&"+lsnocachefix(),t.open("GET",urlQryStr,!0),ie?t.send():t.send(null)):(t.open("POST",n,!0),t.setRequestHeader("Content-Type","application/x-www-form-urlencoded; charset=UTF-8"),t.send(r+"&"+lsnocachefix())));return!1}}function sendPostMessage(t){var e=t&&"api"==t.operation;e&&(ie_edge||_ISFIREFOX)&&$EmbedManger.handleApiData();try{if(!opener)return setTimeout(function(){try{parent.postMessage(CommonUtil.toJSON(t),"*")}catch(e){}},0),!1;try{if(opener.Button)return"api"==t.operation?SupportUI.handleApiData(opener.Button.getApiData().value):"callbacks"==t.operation&&opener.Button.sendCallBacks(t),!1;window.opener.postMessage(CommonUtil.toJSON(t),"*")}catch(e){return setTimeout(function(){try{opener.postMessage(CommonUtil.toJSON(t),"*")}catch(e){}},0),!1}}catch(e){}return e&&SupportUI.handleApiData(),!1}function MyDate(){}var YEARINMS=31536e6,MONTHINMS=2592e6,WEEKINMS=6048e5,DAYINMS=864e5,HOURINMS=36e5,MININMS=6e4,SECINMS=1e3;function diffRawTZOffet(e,t){var r=t<e?e-t:t-e;return r*=6e4,r=t<e?-1*r:r}MyDate.getHoursandMin=function(e,t,r){var a=MyDate.getConvertedObject(e,r),o="",n=a.getHours(),u=a.getMinutes();return o+=12<n?n-12:0==n?"12":n,o+=(u<10?":0":":")+u,0!=t&&(o+=12<=n?" "+LSResource.getRealValue("time.PM"):" "+LSResource.getRealValue("time.AM")),o},MyDate.getConvertedObject=function(e,t){if(null!=e&&""!=e){if("bclient"==t)return MyDate.convertBrowser(e);if("server"==t||"client"==t)return MyDate.convertUser(e);if("zsupport"==t)return MyDate.convertZohoSupport(e)}},MyDate.convertBrowser=function(e){var t=parseInt(e);return t+=diffRawTZOffet(_TZCOFFSET,_TZCOFFSET),new Date(Number(t))},MyDate.convertUser=function(e){var t=parseInt(e);return t+=diffRawTZOffet(_TZCOFFSET,_TZOFFSET),new Date(Number(t))},MyDate.convertZohoSupport=function(e){var t=Number(e);return t+=diffRawTZOffet(0,_TZSOFFSET),t+=diffRawTZOffet(_TZCOFFSET,_TZOFFSET),new Date(Number(t))},MyDate.formatMS=function(e){var t=new Array,r=new Array("w","d","h","m","s");for(t[0]=Math.floor(e/MONTHINMS),e-=t[0]*MONTHINMS,t[1]=Math.floor(e/WEEKINMS),e-=t[1]*WEEKINMS,t[2]=Math.floor(e/DAYINMS),e-=t[2]*DAYINMS,t[3]=Math.floor(e/HOURINMS),e-=t[3]*HOURINMS,t[4]=Math.floor(e/MININMS),e-=t[4]*MININMS,t[5]=Math.floor(e/SECINMS),i=0;i<=5;i++)if(t[i])return 5!=i?zeroUpFront(t[i])+":"+zeroUpFront(t[i+1])+r[i]:"00:"+zeroUpFront(t[i])+"s"},MyDate.timeDifference=function(e){var t=36e5,r=24*t,a=30*r,o=365*r,n=(new Date).getTime()-e;if(n<6e4)return LSResource.getRealValue("date.justnow");if(n<t){var u=Math.round(n/6e4);return LSResource.getRealValue(1<u?"date.mins.ago":"date.min.ago",""+u)}if(n<r){var f=Math.round(n/t);return LSResource.getRealValue(1<f?"date.hours.ago":"date.hour.ago",""+f)}if(n<1728e5)return LSResource.getRealValue("date.yesterday");if(n<12096e5&&6048e5<n)return LSResource.getRealValue("date.lastweek");if(n<a){f=Math.round(n/r);return LSResource.getRealValue("date.days.ago",""+f)}if(n<5184e6)return LSResource.getRealValue("date.lastmonth");if(n<o){f=Math.round(n/a);return LSResource.getRealValue("date.months.ago",""+f)}f=Math.round(n/o);return LSResource.getRealValue(1<f?"date.years.ago":"date.year.ago",""+f)};var op=-1!=navigator.userAgent.indexOf("Opera"),ie=!op&&/msie/i.test(navigator.userAgent),ie_edge=!op&&/msie|trident/i.test(navigator.userAgent),mz=!op&&!ie&&/mozilla\/5/i.test(navigator.userAgent),wms_sf=-1!=navigator.userAgent.indexOf("Safari"),version=parseInt(navigator.appVersion),ie5=ie&&4==version&&-1!=navigator.userAgent.indexOf("msie 5.0"),ie5_5=ie&&4==version&&-1!=navigator.userAgent.indexOf("msie 5.5"),ie6=ie&&4==version&&-1!=navigator.userAgent.indexOf("msie 6."),ie7=ie&&-1!=navigator.userAgent.indexOf("MSIE 7."),ie8=ie&&-1!=navigator.userAgent.indexOf("MSIE 8."),_ISFIREFOX=-1<navigator.userAgent.toLowerCase().indexOf("firefox");if(!ie&&document.layers)var browser_nn4=!0;else if(document.layers||!document.all&&document.getElementById)var browser_nn6=!0;var Browser=function(){};Browser.getInfo=function(){try{lsnocachefix("json")}catch(e){}try{({cookie:navigator.cookieEnabled,java:navigator.javaEnabled()})}catch(e){}return{cookie:navigator.cookieEnabled,java:navigator.javaEnabled(),color:window.screen.colorDepth,screen:window.screen.availWidth+" * "+window.screen.availHeight,title:Browser.getPageTitle(),currentpage:Browser.getCurrentPage(),referrer:Browser.getReferrer(),browser:$.browser.name,browserversion:$.browser.version,os:$.os.name,jsversion:jsversion,flashversion:Browser.getFlashVersion(),localtime:Browser.getLocalTime(),lang_embed:_LANG,ccode:_CCODE}},Browser.getFlashVersion=function(){try{try{var e=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{e.AllowScriptAccess="always"}catch(e){return"6.0.0"}}catch(e){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/,"").replace(/\D+/g,".").match(/^,?(.+),?$/)[1]}catch(e){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/,"").replace(/\D+/g,".").match(/^,?(.+),?$/)[1]}catch(e){}}return"0.0.0"},Browser.getLocalTime=function(){try{return(new Date).toTimeString().split(" ").slice(1).join(" ")}catch(e){}return""},Browser.setReferer=function(e){"null"!=e&&(Browser.referer=e)},Browser.setCurrentPage=function(e){Browser.currentpage=e||""},Browser.getCurrentPage=function(){return Browser.currentpage?Browser.currentpage:""},Browser.getReferrer=function(){try{return Base64.atob(opener.Button.sitereferrer)}catch(e){if("null"!=Browser.referer)return Base64.atob(Browser.referer)}return""},Browser.setPageTitle=function(e){null==e&&""==e||(Browser.pagetitle=e)},Browser.getPageTitle=function(){try{return opener.Button.pagetitle}catch(e){if(null!=Browser.pagetitle)return Browser.pagetitle}return""};function Util(){this.findDocInnerDim=function(){try{return window.innerHeight?{height:window.innerHeight,width:window.innerWidth}:document.body&&document.body.clientHeight?{height:document.body.clientHeight,width:document.body.clientWidth}:document.body.parentNode&&document.body.parentNode.clientHeight?{height:document.body.parentNode.clientHeight,width:document.body.parentNode.clientWidth}:{height:0,width:0}}catch(e){return{height:0,width:0}}},this.optimizeFontForMozilla=optimizeFontForMozilla,this.insertSpanForColor=insertSpanForColor,this.trimLength=trimLength,this.isEmpty=function(e){if(0<e.trim().length)return!1;return!0},this.getScreen=function(){return screen},this.getRealValue=function(e,t){return null!=e&&""!=e?e:t}}var util=new Util;function instanceOf(e,t){for(;null!=e;){if(e==t.prototype)return!0;e=e.__proto__}return!1}String.prototype.endsWith=function(e){return this.lastIndexOf(e)==this.length-e.length},String.prototype.trim=function(){var e=this.valueOf();return"string"==typeof e&&(e=(e=e.replace(/^\s*(.*)/,"$1")).replace(/(.*?)\s*$/,"$1")),e},String.prototype.reverse=function(){for(var e="",t=this.length;0<t;)e+=this.substring(t-1,t),t--;return e};var scrollConst=0;ie||mz||(scrollConst=125);var srcElement,scrX=0,scrY=0,pgeX=0,pgeY=0;function lsnocachefix(e,t){if("json"!=e)return e?"&nocache="+(new Date).getTime():"&"+_CFPARAMNAME+"="+getLDCSRFToken()+"&nocache="+(new Date).getTime();var n={};return n.nocache=(new Date).getTime(),!0!==t&&null!=t||(n[_CFPARAMNAME]=getLDCSRFToken()),n}function getSource(e){return ie?window.event.srcElement:e.target}function getLDCSRFToken(){return Cookie.get(_CFCNAME)}function getSourceId(e){return"string"!=typeof e?e:e=document.getElementById?document.getElementById(e):document.all?document.all[e]:null}function getObjectSize(e){var t=0;for(var n in e)e.hasOwnProperty(n)&&t++;return t}function getUnescapedText(e,t){if(!t&&!isEncoded(e))return e;var n=$("<div></div>"),r=n.html(e).text();return n.remove(),r}function getEscapedText(e){return isEncoded(e)?e:$("<div/>").text(e).html()}function isEncoded(e){try{if(!/<|>/.test(e))return!0}catch(e){}return!1}function getEncodedText(e){try{e&&(e=(e=e.replace(/&#39;|&#x27;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&#x2F;/g,"/")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;"))}catch(e){}return e}function getDecodedText(e){try{e=e.replace(/&#39;|&#x27;/g,"'").replace(/&quot;/g,'"').replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&").replace(/&#x2F;/g,"/")}catch(e){}return e}function convertForRegEx(e){return e?("object"==typeof e&&(e=e.toString()),e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")):e}function getEncodedObject(e){for(var t in e)"object"==typeof e[t]?e[t]=getEncodedObject(e[t]):e[t]=getEscapedText(e[t]);return e}function getJSONObject(t){try{return $.parseJSON(t)}catch(e){return t}}function optimizeFontForMozilla(e){var t="<FONT";if(-1!=e.indexOf(t)){var n=e.split(t);for(i=0;i<n.length;i++)n[i]=util.insertSpanForColor(n[i]);var r="";if(1<n.length)for(i=0;i<n.length;i++)r=0==i?n[i]:r+t+n[i];""!=r&&(e=r)}return e}function getEventSourceId(e){return null!=(e=null==e?window.event:e).srcElement?e.srcElement.id:e.target.id}function insertSpanForColor(e){var t=">",n="",r="";if(-1!=e.indexOf(t)){var i=e.indexOf(t)+1;if(n+=e.substring(0,i),r=e.substring(i,e.length),t="color=",-1!=n.indexOf(t)){i=n.indexOf(t)+t.length;var o=n.substring(i,n.length);t="rgb(",-1!=o.indexOf(t)&&(n=n+"<span style='color:"+o.substring(o.indexOf(t),o.indexOf(")")+1)+";'>",t="<",-1!=r.indexOf(t)&&(i=r.indexOf(t),e=(n+=r.substring(0,i))+"</span>"+(r=r.substring(i,r.length))))}}return e}function trimLength(e,t){return e.length>t+3&&(e=e.substr(0,t)+"..."),e}function getMemSize(e){return 1099511627776<e?getRoundedDecimals(100*e/1099511627776/100,2)+" TB":1073741824<e?getRoundedDecimals(100*e/1073741824/100,2)+" GB":1048576<e?getRoundedDecimals(100*e/1048576/100,2)+" MB":1024<e?getRoundedDecimals(100*e/1024/100,2)+" KB":getRoundedDecimals(e,2)+" Bytes"}function getRoundedDecimals(t,e){try{return t.toFixed(e)}catch(e){return t}}function shrinkImage(e,t,n,r){var i={WIDTH:t,HEIGHT:e},o=[r/t,n/e];return 1<(o=Math.min(o[0],o[1]))?i:i={WIDTH:t*o,HEIGHT:e*o}}function findPosY(e){var t=0;if(null!=e)if(document.getElementById||document.all)for(;e.offsetParent;)t+=e.offsetTop,e=e.offsetParent;else document.layers&&(t+=e.y);return t}function getObjectKeys(e){if(Object.keys)return Object.keys(e);var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function processInput(e,t,n){if(!t)return t;switch(e){case"emailid":","==(t=t.replace(/(\s)|(\/)/g,"")).charAt(t.length-1)&&(t=t.substring(0,t.length-1));break;case"trimlength":n=n||100,t=t.substring(0,n)}return t}function isPostMessageSupported(){try{return!!window.postMessage}catch(e){}return!1}function getKeyByValue(e,t){for(var n in e)if(e[n]==$.trim(t))return n}function getDarkerColor(e){if(e){var t=getRGB(e);if(Math.round(.2126*t[0]+.7152*t[1]+.0722*t[2])<230)return t;for(var n=0;n<t.length;n++)t[n]=Math.round(.8*t[n]);return t}}function getLighterColor(e){if(e){var t=getRGB(e),n=o(t[0]),r=o(t[1]),i=o(t[2]);return 255<n||255<r||255<i?t:[n,r,i]}function o(e){return Math.round(.9*(255-e)+e)}}function getRGB(e){if("string"!=typeof e)return e;e=e.replace("#","");var t=parseInt(e,16);return[t>>16&255,t>>8&255,255&t]}function HtmlTag(){}function isBrowserSupported(){var e,t=navigator.userAgent,n=t.match(/(opr|opera)\/?\s*(\.?\d+(?=[.]))/i);if(n||(n=t.match(/(chrome|safari|firefox|msie|trident.*rv[ :])\/?\s*(\.?\d+(?=[.]))/i)),!n)return null;null!=(e=t.match(/version\/(\.?\d+(?=[.]))/i))&&(n[2]=e[1]);var r=n[1];0===r.indexOf("Trident")&&(r="MSIE");var i=parseInt(n[2]);return!(i<{Chrome:22,Safari:5,Firefox:16,MSIE:9,OPR:22}[r])||{BrowserSupport:!1,bName:r,bVersion:i}}function makeAjax(n){var e="/web/v"+(n.version||2)+"/"+PortalUI.getScreenName()+"/"+n.url;e=IntegrationHandler.getAjaxURL(e),$UI.ajaxLoading(),$ld.ajax({url:e,type:n.type,dataType:"json",data:n.data||"",actionbutton:n.actionobj||"",contentType:"application/json",success:function(e){if($UI.removeAjaxLoading(),n.scallback){var t=e&&e.data||"";n.scallback(t)}},error:function(e){$UI.removeAjaxLoading(),n.error&&n.error(e)}})}function getStackTrace(){try{var e={};return Error.captureStackTrace(e,getStackTrace),e.stack}catch(e){return""}}HtmlTag.makeItReadable=function(e){return e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},String.prototype.toTitleCase=function(){return this.replace(/\w\S*/g,function(e){return e.charAt(0).toUpperCase()+e.substr(1).toLowerCase()})},String.prototype.includes=function(e){return-1!=this.toString().indexOf(e)};function CommonUtil(){}var $CURRENT_PORTAL=new Object;function CurrentPortal(){}CommonUtil.init=function(){this.lsurl="",this.TZOFFSET=-1*(new Date).getTimezoneOffset(),this.prdcode=""},CommonUtil.toJSON=function(t){return Object.toJSON?Object.toJSON(t):JSON.stringify(t)},CommonUtil.parseToJSON=function(e){try{if(!e||"object"==typeof e)return e;e=JSON.parse(e)}catch(t){e=$.parseJSON(e)}return e},CommonUtil.setProductCode=function(t){this.prdcode=t},CommonUtil.getProductCode=function(){return this.prdcode},CommonUtil.getTZOFFSET=function(){return this.TZOFFSET},CommonUtil.getCaptcha=function(t){return null!=t?"<img src='/showcaptcha?digest="+t+"'></img>":null},CommonUtil.setPlaceHolder=function(){ie&&$("input[placeholder],textarea[placeholder]").each(function(){var t=$(this),e=t.attr("placeholder");t.focus(function(){e===t[0].value&&t.val("")}),t.blur(function(){""===t[0].value&&t.val(e)}),""===t[0].value&&t.val(e)})},CommonUtil.getUploadedFileSize=function(t){var e=0;try{if(null!=$(t).attr("multiple"))for(var n=t.files.length,o=0;o<n;o++)e+=t.files[o].size;else e=t.files[0].size}catch(t){}return e},CommonUtil.handleFileUploadSuccessResponse=function(t){"embdfileupload"==t&&SupportUI.clearProgress()},CommonUtil.handleFileUploadErrorResponse=function(t){var e=t.id;SupportUI.displayInfo(LSResource.getRealValue(t.i18nkey,t.i18nparam)),setTimeout(function(){SupportUI.hideInfo()},3e3),"embedfileframe"==e&&SupportUI.clearProgress()},CommonUtil.getMargin=function(t,e){return e?(e=$(e),t==VERTICAL?e.outerHeight(!0)-e.outerHeight():t==HORIZONTAL?e.outerWidth(!0)-e.outerWidth():void 0):0},CommonUtil.getPadding=function(t,e){return e?(e=$(e),t==VERTICAL?e.innerHeight()-e.height():t==HORIZONTAL?e.innerWidth()-e.width():void 0):0},CommonUtil.isSVGSupported=function(){return!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect},CommonUtil.escapeSpecialNotation=function(t){if(""==t||null==t)return t;if(-1!==(t=""+t).indexOf("$")){index=-1,count=0;for(var e=t.split(""),n=0;n<=e.length;n++)if("$"===e[n])count++,index=parseInt(n);else if(1<count&&-1!=index){dollar="";for(var o=0;o<count-1;o++)dollar+="$";e.splice(index+1,0,dollar),index=-1,count=0}t=e.join("")}return t},CommonUtil.getFormattedInput=function(t){return t.replace(new RegExp("(<br/>|&lt;br&#x2f;&gt;|&#x3c;br&#x2f;&#x3e;)","gi"),"\r\n")},CommonUtil.wordCapitalize=function(t){try{if(Validation.validateRegEx(t,"strnamespace"))return t.toLowerCase().replace(/\b\w/g,function(t){return t.toUpperCase()})}catch(t){}return t},CurrentPortal.init=function(){this.props=new Object},CurrentPortal.getAddInfo=function(){return $CURRENT_PORTAL.addinfo},CurrentPortal.setAddInfo=function(t,e){try{CurrentPortal.setIntegIDs(t);var n=e[0];null!=n&&"integaddinfo"==n.module&&($CURRENT_PORTAL.addinfo=n.objString,LSResource.setIntegLabel(t,$CURRENT_PORTAL.addinfo.LABEL))}catch(t){}},CurrentPortal.getCustomDomain=function(){_SCHEMA,_SERVERURL;var t=CurrentPortal.getAddInfo();return null!=t.CUSTOMDOMAIN&&t.CUSTOMDOMAIN,_SCHEMA+"://"+t.CUSTOMDOMAIN},CurrentPortal.getPresenceID=function(){return $CURRENT_PORTAL.presenceid},CurrentPortal.setPresenceID=function(t){$CURRENT_PORTAL.presenceid=t},CurrentPortal.updateProps=function(t){this.props=getObject(t[0].objType,t[0].objString)},CurrentPortal.isPresent=function(t){var e=CurrentPortal.getProps(),n=!1;return null!=e&&null!=e[t]&&(n=""+e[t]),n},CurrentPortal.getProps=function(){return this.props},CurrentPortal.isInteg=function(t){var e=$CURRENT_PORTAL.integids;return!(!e||0==e.length)&&(!t||-1<$.inArray(""+t,e))},CurrentPortal.setIntegIDs=function(t){$CURRENT_PORTAL.integids=new Array,""!=t&&($CURRENT_PORTAL.integids=t.split(","))},CurrentPortal.isManagedIntegrated=function(){return!(!CurrentPortal.isInteg(LDINTEG_SDPONDEMAND)&&!CurrentPortal.isInteg(LDINTEG_ZOHOSUPPORT))},CommonUtil.setShrinkImageCSS=function(t){var e=(t=$(t))[0],n=t.parent(),o=shrinkImage(e.naturalHeight,e.naturalWidth,n.height(),n.width());t.css({height:o.HEIGHT,width:o.WIDTH})},CommonUtil.handleImgLoad=function(t){t=$(t),CommonUtil.setShrinkImageCSS(t),t.animate({opacity:1},300)},CommonUtil.isAllowPasteImage=function(){return/chrome/.test(navigator.userAgent.toLowerCase())},CommonUtil.handleGridNavigation=function(t,e,n){CommonUtil.preventDefaultAndPropagation(e);var o,r=e.which,i=t.find(n+'[style*="block"]'),l=i.length,a=t.find(".sel"),c=i.index(a),u=Math.floor(t.width()/120);if(-1===c)o=i[0];else if(37===r)o=-1==--c?i[l-1]:i[c];else if(39===r)o=++c===l?i[0]:i[c];else if(38===r){if(c-u<=-1)o=l<=(c=(Math.ceil(l/u)-1)*u+c%u)?i[c-u]:i[c];else o=i[c-u]}else 40===r&&(o=l<=c+u?i[c%u]:i[c+u]);if(void 0!==o)return o=t.find(o),a.removeClass("sel"),o.addClass("sel"),CommonUtil.scrollToView(o,t),o},CommonUtil.scrollToView=function(t,e){"string"==typeof e&&(e=$("#"+e)),"string"==typeof t&&(t=e.find("#"+t));var n=CommonUtil.getParentChildOffset(t,e),o=Math.ceil(e[0].scrollTop);n.elementtop<n.containertop?(o-=n.containertop-n.elementtop,e.scrollTop(o)):n.elementbottom>n.containerbottom&&(o+=n.elementbottom-n.containerbottom,e.scrollTop(o))},CommonUtil.getParentChildOffset=function(t,e){var n={};return n.containertop=e.offset().top,n.containerbottom=n.containertop+e[0].clientHeight,n.elementtop=t.offset().top,n.elementbottom=n.elementtop+t.outerHeight(),n},CommonUtil.preventDefaultAndPropagation=function(t){t.preventDefault(),t.stopPropagation()},CommonUtil.handleAddDynamicKey=function(t,e,n){var o=CommonUtil.getTextFromHeadToCaret(e),r=o.lastIndexOf(t);n=o.slice(0,r+1)+n+t+" ",CommonUtil.insertAtCaret(e[0],n)},CommonUtil.getTextFromHeadToCaret=function(t){var e,n,o;(t=t[0]).isContentEditable&&document.selection?document.selection&&(t.focus(),(o=document.selection.createRange()).moveStart("character",-t.value.length),e=o.text):($(t).focus(),"number"==typeof(n=t.selectionEnd)?e=t.value.substring(0,n):document.selection&&((o=t.createTextRange()).moveStart("character",0),o.moveEnd("textedit"),e=o.text));return e},CommonUtil.insertAtCaret=function(t,e){if(document.selection)t.focus(),document.selection.createRange().text=e,t.focus();else if(t.selectionStart||0===t.selectionStart){var n=t.selectionStart,o=t.selectionEnd,r=t.scrollTop;return t.value=e+t.value.substring(o,t.value.length),t.focus(),t.selectionStart=n+e.length,t.selectionEnd=e.length,void(t.scrollTop=r)}t.value+=e,t.focus()},CommonUtil.handleFileUpload=function(e){var n=e.callbacks;$.ajax({xhr:function(){var t=new window.XMLHttpRequest;return t.upload.addEventListener("progress",function(t){n.progress&&n.progress(t,e.msgid)},!1),t},url:"/"+Support.getPortalName()+"/upload.ls",type:"POST",data:e.formdata,contentType:!1,dataType:e.type,processData:!1,success:function(t){n.success&&n.success(t)},complete:function(t){n.complete&&n.complete(t)}})},CommonUtil.isMacOS=function(){return!!navigator.platform.match(/Mac/i)},CommonUtil.init();var dext=".ls",CURCONID=-1,SUPPORT_REPS=new Object;_SUBDOMAIN="zoho.com";var _AGENT_ONLINE=!(_JOINED=!1),MONITOR_TIMER=0,IGNORE_ENCODE=[CT_TXT_MSG];function print(e){try{var s=document.getElementById("debug");s.innerHTML=e+"<br>"+s.innerHTML}catch(e){}}function printtime(){print(new Date)}function LSgetPrd(){return LSMessanger.getPrd()}function LSgetAuthType(){return 0}function LSgetUserName(){return LSMessanger.getUserName()}function LSgetNickName(){return LSMessanger.getNickName()}function LSgetUserId(){return LSMessanger.getUserId()}function LSgetSid(){return LSMessanger.getSid()}var lpt,pmonInterval=15e3;function LSplive(){lpt=new Date}function LSMessanger(){}LSMessanger.init=function(){this.rchid=-1},LSMessanger.setRCHID=function(e){LSMessanger.rchid=e},LSMessanger.getRCHID=function(){return LSMessanger.rchid},LSMessanger.register=function(e,s){try{setTimeout(function(){LSDebugger.postDebugInfo("Visitor Side before registor : "+s,null,"",!0)},1)}catch(e){}if($EmbedManger.getQuitStatus())return!1;if(e){if(!s)return!1;this.prd=e,this.uname=s,LSMessanger.init(),WmsLite.setNoDomainChange(),WmsLite.setAuthType(0),WmsLite.setJSStaticDomain(_WMSJSSTATICDOMAIN),WmsLite.forceDomainChange(),WmsLite.setWmsContext("salesiq"),WmsLite.registerAnnon(e,this.uname,this.nname),WmsLite.setConfig(79)}else $EmbedManger.UI.showProcess(LSResource.getRealValue("common.serverconnectingerror")+" <a href='javascript:void(0)' onclick='window.location.reload()'>"+LSResource.getRealValue("common.reload")+"</a>")},LSMessanger.getUserName=function(){return this.uname},LSMessanger.getNickName=function(){return this.nname},LSMessanger.setNickName=function(e){this.nname=e},LSMessanger.getUserId=function(){return this.uid},LSMessanger.getPrd=function(){return this.prd},LSMessanger.getSid=function(){return this.sid},LSMessanger.disable=function(){WmsLite.disablewms=!0},LSMessanger.isdisablewms=function(){return WmsLite.disablewms},LSMessanger.push=function(e,s,t){try{var a=parseInt(e.mtype);0<a&&-1===IGNORE_ENCODE.indexOf(a)&&e.msg&&(e.msg=getEncodedObject(e.msg))}catch(e){}var i=$EmbedManger;if(null!=e&&!_WMSDOWN)if(0==e.mtype){var n=null!=this.sid;(u=e.msg)&&(this.uid=u.uid,this.sid=u.sid),myMsgObj.sender=this.uname,myMsgObj.nname=this.nname,myMsgObj.dname=this.nname,SUPPORT_REPS=new Object;var r=i.getChatID(),o=i.getVisitorID();try{setTimeout(function(){LSDebugger.postDebugInfo("Visitor Side after registor : "+myMsgObj.sender+" : "+myMsgObj.nname+o,null,"",!0)},1)}catch(e){}if(-1!=r){var d=i.getWaitingCookie();if(!$NE&&d)return;$NE&&s&&$Support.removeCacheCookie(),LSMessanger.joinchat(r,i.getvwmsid(),s,t)}else-1!=o?(_JOINED=!1,i.reJoin()):-1!=o||n||i.addVisitor()}else if(-3==e.mtype||-4==e.mtype){_JOINED=!1;r=i.getChatID();LSMessanger.joinchat(r,i.getvwmsid())}else if(10==e.mtype){r=(u=e.msg).chid;LSMessanger.setRCHID(r);for(var g=0;g<u.users.length;g++){var m=u.users[g];SUPPORT_REPS[m.uname]=m}u.users.length&&i.UI.showAgentStatus(),LSMessanger.transcript(i.getChatID(),i.getvwmsid())}else if(e.mtype==CT_TXT_MSG){var u=e.msg;if(LSMessanger.joinchat(i.getChatID(),i.getvwmsid()),EmbedSound.isPlaying("endtimer")&&EmbedSound.stop(),Message.isLocalUser(u.sender))Message.isSameBrowser(u.sid)||Message.formatAndDisplay(u);else{KeyHandler.isWindowFocused()||EmbedSound.play("smessage"),Message.formatAndDisplay(u);var l=u.msg.replace(/<span[^>]*?>/gi,"").replace(/<\/span>/gi,"").replace(/<br>/gi,"\r\n"),c={visitid:i.getVisitID(),message:l};i.handleCallbacks("visitor.chatmessage",c),Self.status.clear()}$NE&&Message.updateMessageTime(u)}else if(e.mtype==CT_NFY_USERSTATUS){u=e.msg;try{SUPPORT_REPS[u.uname]=u,i.UI.showAgentStatus()}catch(e){}}else if(e.mtype===NFY_ENDLIVESUPPORT||e.mtype===CT_NFY_LEAVESUPPORT){u=e.msg;try{LSDebugger.postDebugInfo("Chat flow debug | End Chat notified to visitor session "+LSMessanger.getSid()+" | "+u.chid,null,null,!0)}catch(e){}if(LSMessanger.disable(),_JOINED=!1,i.getQuitStatus())return;if(i.updateChatCookie(),i.isNewEmbed)return void i.handleChatEnded(u);i.setQuitStatus(!0),e.mtype===CT_NFY_LEAVESUPPORT?(Message.displayInfo(LSResource.getRealValue("visitorchat.supportchat.ended"),"chtend"),i.UI.showFeedback(u.msg)):(Message.displayInfo(""),i.UI.handleEndSupport(u)),i.handleChatEnded(u)}else if(e.mtype==NFY_LS_OPERATIONS){if("mailchimp"==(E=(u=e.msg).module))(S=u.msg).name&&i.setVisitorName(S.name),S.email&&i.setVisitorEmail(S.email),i.UI.updateVisitorName(S),$Support.Util.postMessage("setmailchimpdata",JSON.stringify({email:S.email,name:S.name}));if("desktopsharing"==E||"audiovideo"==E||"VISITORNAMECHANGE"==E||"acctranschat"==E||"addsupportrep"==E||"transchat"==E){if(i.UI.formatAndDisplayInfo("",u.msg,u.addinfo),i.updateChatCache({msg:u.msg}),"VISITORNAMECHANGE"===E){var S=u.msg.VISITORDATA;"[object Object]"===Object.prototype.toString.call(S)&&(S.name&&i.setVisitorName(S.name),S.email&&i.setVisitorEmail(S.email),S.phone&&i.setVisitorPhone(S.phone),i.UI.updateVisitorName(S),SupportUI.embeddiv.find("#filedata").html(SupportUI.getSendFileHtml())),i.UI.hideVisitorInfo()}if("acctranschat"==E){i.UI.hideGroupIcon();c={visitid:i.getVisitID(),attendername:u.dname,department:u.deptname,attenderemail:u.attenderemail};i.handleCallbacks("agent.accepttransfer",c)}if("addsupportrep"==E&&i.UI.showGroupIcon(),"transchat"==E){var p=u.msg;c={visitid:i.getVisitID(),currentuser:p.opruser.dname,transfertype:p.type,transfername:p.transferdetails.transfername};i.handleCallbacks("agent.transferchat",c)}}else if("blockip"==E)i.setIPBlockStatus(!0),"float"!=i.getType()&&"personal"!=i.getType()||i.quit();else if("addsupportrep"==E){var f=u.msg.userlist;SUPPORT_REPS[f.uname]=f,i.UI.showAgentStatus()}}else if(e.mtype==NFY_USER_IDLE){(c=e.msg).msg="",Self.status.update(c)}else if(e.mtype==NFY_USER_ENTERED){(c=e.msg).msg=i.isNewEmbed?"":LSResource.getRealValue("infomsg.enteredtext",c.dname),Self.status.update(c)}else if(e.mtype==NFY_USER_TYPING){c=e.msg;var h=i.isNewEmbed?"ne.infomsg.istyping":"infomsg.istyping";c.msg=LSResource.getRealValue(h,c.dname),Self.status.update(c)}else if(e.mtype==CT_ATT_MSG){var M=e.msg;if(M.msgid||(M.msgid=(new Date).getTime()),Message.formatAndDisplay(M),i.UI.clearProgress(),!Message.isLocalUser(M.sender)){KeyHandler.isWindowFocused()||EmbedSound.play("smessage");var I=M.msg;c={visitid:i.getVisitID(),message:LSResource.getRealValue("chatwindow.sharing_a_file_with_you",M.dname),filesize:getMemSize(I.size),filename:I.fName};i.handleCallbacks("visitor.chatmessage",c)}$NE&&Message.updateMessageTime(M)}else if(e.mtype==WM_CUSTOM){var E,L=e.msg;if("pickupsupport"===(E=L.module)){try{LSDebugger.postDebugInfo("Chat flow debug | Pickup chat notified to visitor session "+LSMessanger.getSid()+" | "+L.visitorid,null,null,!0)}catch(e){}i.handlePickUp(L)}else if("audiovideo"===E)ZAudioVideo.handleStatus(L);else if("desktopsharing"===E)i.handleDesktopSharing(L);else if("actendsession"===E||"endsupport"==E)i.handleEndSession(L);else if("joinproactivechat"===E){e=L.data;Message.isSameBrowser(e.sid)||i.handleJoinProActive(e)}else"missed"===E&&$Support.handleMissedVisitor(!0)}else if(e.mtype==CT_NFY_MSG){(c=e.msg).sender!=myMsgObj.sender&&Message.formatAndDisplay(c)}else if(e.mtype==NFY_PUSH_MSG){c=e.msg;i.UI.handlePushMessage(c)}else if(e.mtype==CT_NFY_USERDELETE){var D=(u=e.msg).users;for(g=0;g<D.length;g++)delete SUPPORT_REPS[D[g].uname];i.UI.showAgentStatus()}else if(e.mtype==WM_DNAME_UPDATE&&"-1"!=i.getChatID()){var v=e.msg.dname;LSMessanger.setNickName(v),myMsgObj.dname=v,i.setVisitorName(v),i.setCookie()}},LSMessanger.joinchat=function(e,s,t,a){if(!_JOINED&&-1!=e){var n=$EmbedManger,i=lsnocachefix("json",!1);if(i.chid=e,i.sid=encodeURIComponent(LSMessanger.getSid()),n.getuvid()&&-1===n.getVisitorID()&&(i.uvid=n.getuvid()),s&&(i.wmsid=s),i.visitorid=encodeURIComponent(n.getVisitorID()),t&&(i.isntwrkreconnect=t),a&&(i.isserverupwithoutserverdown=a),$NE)$NE&&$Support.proactive&&(i.isproactive=!0);else{var r=SupportUI.getCookieValue("ZLD"+Support.getLiveSupportID());r&&r.isproactive&&(i.isproactive=!0)}$.ajax({url:"joinchat"+dext,type:"POST",data:i,dataType:"json",success:function(e){if(e){var s=e[0],t=s.objType,a=s.objString;if(a.chid)_JOINED=!0;else{if("object"==t&&"CHATENDED"==a.ERROR){var i=a.CHATDETAILS;if(n.getQuitStatus())return;if(LSMessanger.disable(),n.isNewEmbed)return $Support.Util.showChatUI(),n.handleChatEnded(i),void n.updateChatCookie();n.setQuitStatus(!0),$("#waitingform").hide(),n.showChatUI(),n.UI.handleEndSupport(i),n.handleChatEnded(i),n.updateChatCookie()}"error"===t&&(n.UI.resizequestion||n.UI.postMessage("size","shrink"),n.removeChatCookie(),document.location.reload())}}}})}},LSMessanger.transcript=function(e,s){if(-1!=e){var a=$EmbedManger,t=a.getType();null!=t&&"null"!=t||(t="embed"),"personal"==t&&(t="float");var i="";-1!==a.getVisitorID()?i+="&visitorid="+a.getVisitorID():i+="&uvid="+a.getuvid();var n="getvisitortranscript.ls?tzoffset="+_TZCOFFSET+"&uid="+s+"&type="+t+i+lsnocachefix(!0)+"&lang="+_LANG;_CCODE&&(n+="&ccode="+_CCODE);var r="";return a.isNewEmbed&&(r="json"),$.get(n,"",function(e){if($.trim(e)){$("#waitingform").hide();var s=a.UI.embeddiv();if(-1!=e.indexOf("transcript.try.after.sometime"))return s.find("#embedcontainer").html(""),void a.UI.displayInfo(LSResource.getRealValue("transcript.try.after.sometime"));$NE&&$Support.proactive&&$Support.isSessionTranscriptEmpty()?(a.updateChatCache(e,!0),$Support.Util.populateTriggerUI($Support.EmbedObj)):(a.showChatUI(e),a.updateChatCache(e,!0));var t=s.find("#msgcntr");t.html(Message.getDisplayContent(e)+a.UI.getDragDropHtml()),t.find(".attabout").attr("title",t.find(".attabout").text()),a.isautotrigger()||a.UI.showVisitorInfo(),a.UI.resizeWindow(),Message.scroll(document.getElementById("msgcntr")),LSMessanger.resendMessages(RESEND_AUTO)}},r),""}},LSMessanger.sendMessage=function(i,n,r,o,d){if(_WMSDOWN||d&&!_JOINED)LSMessanger.handleResendFailed(i,n,r,o,d);else{var g=$EmbedManger;if(g.setCallbackargs(arguments),n&&$.trim(n)){n=n.replace(/[\n\r]/gi,"\n");var e={chid:i,sender:myMsgObj.sender,msg:n,sid:LSMessanger.getSid(),dname:getUnescapedText(LSMessanger.getNickName())};d&&(e.resendtype=parseInt(d)),r&&(e.style=r),$.extend(e,lsnocachefix("json")),$.extend(e,g.UI.getCaptchaValue()),o&&(e.msgid=o),e.tzoffset=-1*(new Date).getTimezoneOffset()*6e4,$.ajax({url:"sendmessage"+dext,type:"POST",data:e,dataType:"json",success:function(e){var s=e[0],t=s.module,a=s.objString;"error"==t&&a.digest?g.UI.showCaptcha(a.digest):(g.setCallbackargs(null),g.UI.hideCaptcha(),d&&(d==RESEND_AUTO?Message.displaySendMessage(i,n,r):d==RESEND_MANUAL&&($("#"+o).removeClass("resend"),$("#resendicon").hide(),$EmbedManger.UI.displayInfo(LSResource.getRealValue("infomsg.msgsent.success")),setTimeout(function(){$EmbedManger.UI.hideInfo()},2e3)),LSDB.getFromSession($EmbedManger.getChatID()+"_failedmsg")&&LSMessanger.resendMessages(d)))},error:function(){LSMessanger.handleResendFailed(i,n,r,o,d)}})}}},LSMessanger.handleResendFailed=function(e,s,t,a,i){$("#"+a).addClass("resend");var n=!!i;LSMessanger.storeFailedMessages(e,s,t,a,n),i==RESEND_MANUAL&&($EmbedManger.UI.displayInfo(LSResource.getRealValue("embed.msg.resendfail")),setTimeout(function(){$EmbedManger.UI.hideInfo()},2e3))},LSMessanger.storeFailedMessages=function(e,s,t,a,i){var n=$("#"+a),r=LSDB.getFromSession($EmbedManger.getChatID()+"_failedmsg"),o={chid:e,msg:s,properties:t,uniqueid:a};r&&0<r.length?i?r.splice(0,0,o):r.push(o):(r=new Array(o),n&&n.append($EmbedManger.UI.getResendIcon())),LSDB.storeInSession($EmbedManger.getChatID()+"_failedmsg",r)},LSMessanger.sendPredictMessage=function(e){if(-1!==$EmbedManger.getVisitorID()&&0!=$.trim(e).length){var s={chid:$EmbedManger.getChatID(),sender:myMsgObj.sender,msg:e,sid:LSMessanger.getSid(),dname:getUnescapedText(LSMessanger.getNickName())};$.extend(s,lsnocachefix("json")),$.ajax({url:"sendprdctmsg"+dext,type:"POST",data:s,dataType:"json",success:function(e){}})}},LSMessanger.setSubDomain=function(e){_SUBDOMAIN=e},LSMessanger.getSubDomain=function(){return _SUBDOMAIN},LSMessanger.resendMessages=function(e){var s=$EmbedManger.getChatID()+"_failedmsg",t=LSDB.getFromSession(s);if(t&&!(t.length<1)){var a=t.shift();LSDB.storeInSession(s,t),LSMessanger.sendMessage(a.chid,a.msg,a.properties,a.uniqueid,e)}};function Support(){}var dext=".ls";Support.init=function(){Support.issubmitted=new Object,Support.ldintegid=0,Support.livelsid=-1,Support.callquitstatus=!1,Support.addinfo=new Object,Support.waitingtime=-1,Support.waitTimer=-1,Support.visitorinfo={LCHID:"-1",CHID:-1,ID:-1,NAME:"",EMAIL:"",QUES:"",ATTENDER:"",CINFO:"",DEPARTMENT_ID:"",PORTALNAME:"",VISITID:"",PHONE:""},Support.composer=null,Support.embedprops=new Object,Support.srateing=0,Support.desksharemsg=null,Support.deskshareuser=-1,Support.PROPS=new Object,Support.attendername="",this.attenderemail="",this.language=null,Support.portalprops=new Object,Support.handleunload=!0,Support.enablepmsg=!0,Support.type="embed",Support.timer="",Support.sgname=!1,Support.isfilesharing=!1,Support.status=!0,Support.iscaptcha=!1,Support.ismanualaction=!1,this.isipblocked=!1,this.isfeedbacksent=!1,this.isfreeplan=!0,this.authkey,Support.embedwaitingtime=0,Support.setPortalName(),this.documenttitle="",this.isblinking=!1,this.blinktimer=0,this.iscomposerfocus=!1,this.iswindowfocused=!0,this.ispicked=!1,this.ALLOWED_FILE_SIZE=1e7,this.apiwaitingtime=0,this.isapiwaitinghandler=!1,this.customfield,this.callbackargs,this.israting=!0,this.isfeedback=!0,this.attenderimagefkey="",this.chatforward=!0,this.isautotrigger=!1,this.deptlist=[],this.companyname="",Support.embeduniquename="",Support.issignaturechat=!1,Support.WaitingHandler={intime:0,remwaitingtime:0,latency:0,stepinterval:500},Support.ismeetingallowed=!1},Support.setWmsID=function(t){""==t&&"null"==t||(Support.vwmsid=t)},Support.setPrevCHID=function(t){Support.visitorinfo.LCHID=t},Support.getPrevCHID=function(){return Support.visitorinfo.LCHID},Support.getEXID=function(){return Support.visitorinfo.EXID},Support.setEXID=function(t){Support.visitorinfo.EXID=t},Support.setEXINFO=function(t){Support.visitorinfo.EXINFO=t},Support.setFileSharingStatus=function(t){Support.isfilesharing=t},Support.setType=function(t){t&&(Support.type=t)},Support.setEmbedProps=function(t){Support.PROPS=t},Support.setWaitingTime=function(t){Support.waitingtime=t,Support.embedwaitingtime=t},Support.setPortalProps=function(t){Support.portalprops=t.objString},Support.setDepartmentList=function(t){t&&(Support.deptlist=t)},Support.getDepartmentList=function(){return Support.deptlist},Support.setCompanyName=function(t){Support.companyname=t},Support.getCompanyName=function(){return Support.companyname},Support.isFloat=function(){return"float"==Support.type||"personal"==Support.type&&"window"!=PersonalSupport.type},Support.getPortalProps=function(t){return null!=Support.portalprops[t]?Support.portalprops[t]:null},Support.setEmbedUniqueName=function(t){Support.embeduniquename=t},Support.getEmbedUniqueName=function(){return Support.embeduniquename},Support.countWaitingTime=function(){clearTimeout(Support.waitTimer);var t=Support.getWaitingHandlerCookie();Support.WaitingHandler.remwaitingtime=t.remwaitingtime;var e=Math.round(Support.WaitingHandler.remwaitingtime/1e3);if(Support.waitingtime=e,Support.WaitingHandler.remwaitingtime<=0)return LSDB.remove("ZLD"+Support.getLiveSupportID()+"WTIME"),void Support.handleMissedChat("CWTOUT","2",!0);if(isPostMessageSupported()&&Support.isscript&&Support.isapiwaitinghandler)try{Support.handleCallbacks("chat.waitinghandler",{WTIME:Support.embedwaitingtime,CURRENTTIME:e,waitingtime:Support.embedwaitingtime,currenttime:e})}catch(t){}else Support.handleWaitingMessage(e,!0)},Support.handleWaitingMessage=function(t,e){Support.waitingtime;if(null==t&&(t=Support.apiwaitingtime),"block"==$("#waitingform").css("display")){Support.getAttender();if(t){var i=SupportUI.embeddiv.find("#embedcontainer").addClass("timer_svgmin");e?Support.issignaturechat?i.html(Support.getTimeHTMLForSignatureChat(Support.embedwaitingtime,t)):i.html(Support.getTimeHtml(Support.embedwaitingtime,t)):i.text(t)}}Support.waitTimer=setTimeout(function(){Support.countWaitingTime()},Support.WaitingHandler.stepinterval)},Support.getWaitingHandlerCookie=function(){var t="ZLD"+Support.getLiveSupportID()+"WTIME",e=LSDB.get(t);if(e){var i=(new Date).getTime()-e.previouscalltime;e.remwaitingtime=e.remwaitingtime+parseInt(Support.WaitingHandler.latency)-i,e.previouscalltime=(new Date).getTime()}else e={remwaitingtime:1e3*Support.embedwaitingtime,previouscalltime:(new Date).getTime()};return LSDB.set(t,e,12e4),e},Support.removeWaitingHandlerCookie=function(){clearTimeout(Support.waitTimer),LSDB.remove("ZLD"+Support.getLiveSupportID()+"WTIME")},Support.getTimeHtml=function(t,e){if(ie)return'<div class="zlstime_sec">'+e+"</div>";var i=e,o=360/t,r=t*o-i*o,p=(r=0===r?1:r)*Math.PI/180,a="M 0 0 v -40 A 40 40 0 "+(180<r?1:0)+" 1 "+40*Math.sin(p)+" "+-40*Math.cos(p);i<10&&(i="0"+i);var n=99<i?50:55,u=SupportUI.getThemeColor(),s=SupportUI.waitingcolors[Support.PROPS.embedheadertheme];return u&&(u=getDarkerColor(u),s=["#ffffff",getLighterColor(u),u,u]),'<div class="timersvg"><svg viewBox="-10 -10 160 250"><circle cx="64" cy="60" r="40.5" fill="rgb('+s[1]+')" ></circle><path transform="translate(64,60)" fill="'+s[2]+'" d="'+a+'"/><circle cx="64" cy="60" r="35" fill="'+s[0]+'"></circle><text x="'+n+'" y="65" fill="'+s[3]+'">'+i+"</text></svg></div>"},Support.getTimeHTMLForSignatureChat=function(t,e){if(!ie||!navigator.useragent.match(new RegExp(15))){var i=e,o=360/t,r=t*o-i*o,p=(r=0==r?1:r)*Math.PI/180;return i<10&&(i="0"+i),'<svg viewbox="-5 -20 135 220" style=""><circle cx="64" cy="60" r="40.5" fill="#6ed9d1" ></circle><path transform="translate(64,60)" fill="#60cbc3" d="'+("M 0 0 v -40 A 40 40 0 "+(180<r?1:0)+" 1 "+40*Math.sin(p)+" "+-40*Math.cos(p))+'"/><circle cx="64" cy="60" r="27" fill="#53aaa4"></circle><text x="'+(99<i?53:57)+'" y="65" fill="white">'+i+"</text></svg>"}},Support.updateVisitorInfo=function(e,i,t){if(e||i){var o=lsnocachefix("json");o.visitorid=Support.getVisitorID(),o.lastname=e,o.email=i,o.isnamefromemail=t,$.ajax({url:"updatevistdata"+dext,type:"POST",data:o,dataType:"json",success:function(t){"error"!==t[0].objType&&($("#visitinfo").hide(0),Support.setVisitorEmail(i),Support.setVisitorName(e),Support.setCookie())}})}},Support.handlePickUp=function(t){this.removeCookie("ZLD"+Support.getLiveSupportID()+"WAITING"),this.setChatID(t.chid),this.setAttender(t.attender),this.setAttenderZUID(t.attenderzuid),this.setAttenderUserAgent(t.attender_useragent),this.attendername=getUnescapedText(t.attendername),this.attenderemail=t.attenderemail,this.attenderimagefkey=t.image_fkey,this.attenderaboutme=t.aboutme,this.ispicked=!0,DynamicMsg.updateValue("attendername",this.attendername),DynamicMsg.updateValue("attenderemail",this.attenderemail),this.isautotrigger?(SupportUI.hideInfo(),SupportUI.showVisitorInfo(),SupportUI.handlePickUpForTrigger(),this.isautotrigger=!1):($("#waitingform").hide(),Support.showChatUI(),LSMessanger.joinchat(t.chid,Support.vwmsid)),clearTimeout(Support.waitTimer),SupportUI.embeddiv.find("[handleaction='show']").show(),$("#windowheader").find(".swin_sub").removeClass("talign_center"),Support.setCookie();var e={attendername:t.attendername,attenderemail:t.attenderemail,visitid:Support.visitorinfo.VISITID,waitingduration:Support.embedwaitingtime-Support.waitingtime};Support.handleCallbacks("visitor.attend",e)},Support.showChatUI=function(){SupportUI.showChatWindow(),SupportUI.enableComposer()},Support.handleMissedChat=function(t,e,i){if("-1"!=Support.getVisitorID())null==LSMessanger.getUserId()?setTimeout(function(){Support.handleMissedChat(t,e,i)},1e3):Support.missedVisitor(t,e,i);else{Support.removeCookie("ZLD"+Support.getLiveSupportID()+"WAITING");try{LSDebugger.postDebugInfo("Missed Visitor not called since visitorid = -1 ",null,"",!0)}catch(t){}}},Support.getVisitorName=function(){return Support.visitorinfo.NAME},Support.setVisitorName=function(t){Support.visitorinfo.NAME=t},Support.getVisitorEmail=function(){return $.trim(Support.visitorinfo.EMAIL)},Support.setVisitorEmail=function(t){Support.visitorinfo.EMAIL=$.trim(t)},Support.getAttender=function(){return Support.visitorinfo.ATTENDER},Support.setAttender=function(t){Support.visitorinfo.ATTENDER=t},Support.setAttenderUserAgent=function(t){Support.visitorinfo.ATTENDERUSERAGENT=t},Support.setAttenderZUID=function(t){Support.visitorinfo.ATTENDERZUID=t},Support.getAttenderZUID=function(){return Support.visitorinfo.ATTENDERZUID},Support.getAttenderUserAgent=function(){return Support.visitorinfo.ATTENDERUSERAGENT},Support.getVisitorQuestion=function(){return Support.visitorinfo.QUES.replace(/(^[\n]*|[\n]*$)/g,"")},Support.setVisitorQuestion=function(t){Support.visitorinfo.QUES=t},Support.getLiveSupportID=function(){return Support.livelsid},Support.setLiveSupportID=function(t){Support.livelsid=t},Support.getVisitorID=function(){return Support.visitorinfo.ID},Support.setVisitorID=function(t){Support.visitorinfo.ID=t},Support.getChatID=function(){return Support.visitorinfo.CHID},Support.setChatID=function(t){Support.visitorinfo.CHID=t},Support.setCustomerInfo=function(t){if(!t)return Support.visitorinfo.CINFO=t,void DynamicMsg.updateValues(t,"custom.");"object"!=typeof t&&(t={info:t}),Support.visitorinfo.CINFO=t,DynamicMsg.updateValues(t,"custom.")},Support.getCustomerInfo=function(){return Support.visitorinfo.CINFO},Support.setDepartmentId=function(t){Support.visitorinfo.DEPARTMENT_ID=t},Support.getDepartmentId=function(){return Support.visitorinfo.DEPARTMENT_ID},Support.setPortalName=function(){var t=window.location.pathname;t=t.substr(1,t.lastIndexOf("/")-1),Support.visitorinfo.PORTALNAME=t},Support.getPortalName=function(){return Support.visitorinfo.PORTALNAME},Support.setVisitorPhone=function(t){t&&(Support.visitorinfo.PHONE=t)},Support.getVisitorPhone=function(){return Support.visitorinfo.PHONE},Support.reJoin=function(){var t=lsnocachefix("json");t.visitorid=Support.getVisitorID(),$.ajax({url:"rejoinvisitor"+dext,type:"POST",data:t,async:!1,dataType:"json",success:function(t){if("error"!=t[0].objType){var e=t[0].objString,i=e.chid?e.chid:Support.getChatID();Support.setChatID(i);try{LSDebugger.postDebugInfo("Chat flow debug | Rejoin chat success "+LSMessanger.getSid()+" | "+e.visitid,null,null,!0)}catch(t){}if(LSMessanger.joinchat(i,Support.vwmsid),e.visitid&&(Support.visitorinfo.VISITID=e.visitid),e.ispickup){var o=SupportUI.getCookieValue("ZLD"+Support.getLiveSupportID());(!o||o&&!o.cid)&&(SupportUI.embeddiv.find("[handleaction='show']").show(),Support.handlePickUp(e))}}}})},Support.addVisitor=function(){if(Support.ismanualaction&&-1==Support.getVisitorID()){var t=lsnocachefix("json");(t=Browser.getInfo()).referrer=processInput("trimlength",t.referrer,3e3),t.currentpage=processInput("trimlength",t.currentpage,950),t.name=Support.getVisitorName(),t.lsid=Support.getLiveSupportID(),t.email=processInput("emailid",Support.getVisitorEmail()),t.ques=Support.getVisitorQuestion(),t.deptid=Support.getDepartmentId(),$.extend(t,SupportUI.getCaptchaValue()),t.annonid=Support.vwmsid,t.platform=navigator.platform;var e=Support.getAttender();null!=e&&""!=e&&(t.attender=e);var i=Support.attenderemail;i&&(t.attenderemail=i);var o=Support.getCustomerInfo();return o&&("object"==typeof o&&(o=JSON.stringify(o)),t.cinfo=o),Support.getEXID()&&(t.exid=Support.getEXID()),this.authkey&&(t.authkey=this.authkey),this.visitorinfo.PHONE&&(t.phone=this.visitorinfo.PHONE),Support.uvid&&(t.uvid=Support.uvid),Support.embeduniquename&&(t.embeduniquename=Support.embeduniquename),SupportUI.isCampaignEnabled()&&$("#campaign").is(":checked")&&(t.subscribe="true"),t.autotrigger=Support.isautotrigger,$.ajax({url:"addvist"+dext,type:"POST",data:t,dataType:"json",success:function(t){var e=t[0].objType,i=t[0].objString;if("object"===e&&"EMBEDOFFLINE"===i.ERROR){var o=i.DEPTLIST;return Support.setDepartmentList(o),SupportUI.handleFailure(),Support.removeWaitingHandlerCookie(),void(LSMessanger.sid=void 0)}SupportUI.hideCaptcha();var r=t[0].objString;DynamicMsg.setValues(r),Support.setVisitorID(r.CU_ID),Support.setChatID(r.CHID),Support.visitorinfo.VISITID=r.VISIT_ID,r.ATTENDER&&Support.getAttender()!=r.ATTENDER&&(Support.attendername=Support.attenderemail),SupportUI.deleteTriggerCookie(),Support.setAttender(r.ATTENDER);var p=r.ADDINFO;p&&(p=JSON.parse(p))[ADDINFO_TRIGGER]&&(!0,Support.handleTriggerReplied(r.CHID),_JOINED=!0);var a=(new Date).getTime()-parseInt(r.DIFFTIME)-Support.WaitingHandler.intime;Support.WaitingHandler.latency=a/(Support.WaitingHandler.remwaitingtime+a)*Support.WaitingHandler.stepinterval,0<Support.WaitingHandler.remwaitingtime&&Support.setWaitingCookie();var n={name:Support.getVisitorName(),email:Support.getVisitorEmail(),question:Support.getVisitorQuestion(),visitid:r.VISIT_ID};Support.handleCallbacks("visitor.chat",n),Support.isautotrigger||SupportUI.embeddiv.find("#lstxteditor").css({visibility:"hidden"});try{setTimeout(function(){LSDebugger.postDebugInfo("The value of Support.WaitingHandler.remwaitingtime is : "+Support.WaitingHandler.remwaitingtime,null,"",!0)},1e3*Support.embedwaitingtime+1e4)}catch(t){}},error:function(t){if(/module/.test(t.responseText))try{var e=JSON.parse(t.responseText)[0].objString.digest;return void(e?SupportUI.showCaptcha(e):SupportUI.handleFailure())}catch(t){}SupportUI.handleFailure()}}),!1}},Support.getAnnonID=function(t){var e={};(e=lsnocachefix("json",!1)).name=t,$.ajax({url:"getannonid"+dext,data:e,dataType:"json",success:function(t){if("getannonid"==t[0].module){var e=t[0].objString;if(null==Support.vwmsid){var i=e.ANNONID;Support.setWmsID(i),LSMessanger.register(CommonUtil.getProductCode(),i),setTimeout(function(){Support.checkRegister()},6e4)}}},error:function(t){SupportUI.handleFailure(),alert(LSResource.getRealValue("visitorchat.connection.failure"))}})},Support.checkRegister=function(){null==myMsgObj.dname&&(_WMSDOWN=!0,SupportUI.postMessage("size","enlarge"),SupportUI.showProcess(),Support.offlinemessage=LSResource.getRealValue("visitorchat.connectivity.failure"),SupportUI.showOfflineStatus(),LSMessanger.register(CommonUtil.getProductCode(),Support.vwmsid),WmsLite.getDebugInfo()&&LSDebugger.postDebugInfo("WMS Registration failed in Visitor side | Debuginfo: "+WmsLite.getDebugInfo(),null,"",!0))},Support.getIconStatus=function(t){return null!=Support.PROPS[t]&&"true"==Support.PROPS[t]},Support.setRating=function(i,t){var e={};(e=lsnocachefix("json")).rate=i,e.visitorid=encodeURIComponent(t),$.ajax({url:"setsuppreprate"+dext,type:"POST",data:e,dataType:"json",success:function(t){if("error"!=t[0].objType&&"setrating"==t[0].module){var e={visitid:Support.visitorinfo.VISITID,rating:i,agent:Support.attenderemail};Support.handleCallbacks("visitor.rating",e)}}})},Support.quit=function(i){var t=Support.getVisitorID();if(-1!==t){var e={};(e=lsnocachefix("json")).chid=Support.getChatID(),e.lsid=Support.getLiveSupportID(),e.uname=LSMessanger.getUserId(),e.visitorid=encodeURIComponent(t),e.deptid=Support.getDepartmentId(),e.tzoffset=CommonUtil.getTZOFFSET(),e.version=1,$.ajax({url:"leavesupport"+dext,type:"POST",data:e,async:!1,dataType:"json",success:function(t){var e=t[0].objString;if(CurrentPortal.isInteg(LDINTEG_ZOHOSUPPORT)&&SupportUI.showFeedback(e),"error"!=t[0].objType){e=t[0].objString;Support.callquitstatus=!0,Message.stopBlinking(),Support.updateChatCookie(),Support.handleChatEnded(e),!i||"float"!=Support.type&&"personal"!=Support.type||setTimeout(function(){document.location.reload()},10)}Support.isipblocked&&window.location.reload()}})}},Support.handleChatEnded=function(t){Support.setChatID(-1);var e={visitid:t.visitid,chatduration:t.chatduration};this.handleCallbacks("visitor.chatcomplete",e),"endsupport"!==t.module&&this.handleCallbacks("chat.visitorend",{})},Support.leaveMessage=function(p,a,n,u){var s={};(s=Browser.getInfo()).referrer=processInput("trimlength",s.referrer,3e3),s.currentpage=processInput("trimlength",s.currentpage,950),s.lsid=Support.getLiveSupportID(),s.email=processInput("emailid",a),s.name=p,s.msg=n,s.deptid=Support.getDepartmentId(),s.isengaged=Support.engaged;var t=Support.getAttender();t&&(s.attender=t),DynamicMsg.updateValue("name",p),DynamicMsg.updateValue("email",s.email),DynamicMsg.updateValue("question",n),DynamicMsg.updateValue("department",s.deptid),u&&(s.phone=u,DynamicMsg.updateValue("phone",u));var e=Support.getCustomerInfo();if(DynamicMsg.updateValues(e,"custom."),e&&("object"==typeof e&&(e=JSON.stringify(e)),s.cinfo=e),null!=Support.getEXID()&&""!=Support.getEXID()&&(s.exid=Support.getEXID()),Support.uvid&&(s.uvid=Support.uvid),SupportUI.isCampaignEnabled()&&$("#campaign").is(":checked")&&(s.subscribe="true"),!Support.isSubmitted("leavemsg")){s.version=1,Support.issignaturechat&&(s.type=SIGNATURE_CHAT),Support.setSubmitted("leavemsg"),$.ajax({url:"leavemsg"+dext,type:"POST",data:s,dataType:"json",success:function(t){if("error"!=t[0].objType&&"leavemsg"==t[0].module){SupportUI.postMessage("iscloseicon",!0);var e=t[0].objString;if("EMBEDONLINE"===e.STATUS){var i=SupportUI.embeddiv.find("#offname"),o={name:SupportUI.validate(i,"isempty"),email:s.email,question:n};return u&&(o.phone=u),Support.setInfoCookie(o),void document.location.reload()}DynamicMsg.updateValue("visit_id",e.visit_id),SupportUI.showOffline("leavemsg",e),Support.callquitstatus=!0;var r={name:p,email:a,question:n,visitid:e.visit_id};Support.handleCallbacks("visitor.offline",r)}else Support.delSubmitted("leavemsg")}});try{setTimeout(function(){LSDebugger.postDebugInfo("Missed LeaveMessage Debug Info : "+LSMessanger.getUserName()+a+p+Support.uvid+" RSID : "+WmsLite.rsid,null,"",!0)},1)}catch(t){}}},Support.setSubmitted=function(t){Support.issubmitted[t]=!0},Support.delSubmitted=function(t){Support.issubmitted[t]=!1},Support.isSubmitted=function(t){return!0===Support.issubmitted[t]},Support.missedVisitor=function(i,t,e){if(("embed"==Support.type||e)&&(Support.removeCookie("ZLD"+Support.getLiveSupportID()+"WAITING"),!Support.isautotrigger||"ONHAS"===i)){var o={};(o=lsnocachefix("json")).lsid=Support.getLiveSupportID(),o.visitorid=encodeURIComponent(Support.getVisitorID()),o.vwmsid=LSMessanger.getUserId(),o.mode="visitor",o.debuginfo=CommonUtil.toJSON({"Missed By":i}),o.actiontype=t,$.ajax({url:"missedvisitor"+dext,type:"POST",data:o,async:!1,dataType:"json",success:function(t){if(Support.callquitstatus=!0,LSMessanger.disable(),clearTimeout(Support.waitTimer),$("#waitingform").hide(),Support.removeChatCookie(),"error"!=t[0].objType){if("ONHAS"==i)window.location.reload();else if(Support.waitingtime<=0){SupportUI.showMissedInfo(),Support.setPrevCHID(Support.getChatID()),Support.setChatID(-1);var e={name:Support.getVisitorName(),email:Support.getVisitorEmail(),question:Support.getVisitorQuestion(),visitid:Support.visitorinfo.VISITID};Support.handleCallbacks("visitor.missed",e)}}else SupportUI.showMissedInfo()},error:function(t){SupportUI.handleFailure()}})}},Support.missedVisitorMessage=function(t,e,i,o,r){var p={};(p=lsnocachefix("json")).lsid=Support.getLiveSupportID(),p.visitorid=encodeURIComponent(t),p.msg=o,p.dname=e,p.vwmsid=LSMessanger.getUserId(),p.email=processInput("emailid",i),r&&(p.phone=r,DynamicMsg.updateValue("phone",r)),DynamicMsg.updateValue("name",e),DynamicMsg.updateValue("email",p.email),DynamicMsg.updateValue("question",o);var a=Support.getPrevCHID();Support.setPrevCHID(-1),LSMessanger.sendMessage(a,o),Support.isSubmitted("missedleavemsg")||(Support.setSubmitted("missedleavemsg"),$.ajax({url:"missedleavemsg"+dext,type:"POST",data:p,dataType:"json",success:function(t){if("error"!=t[0].objType&&"unattleavemessage"==t[0].module){SupportUI.postMessage("iscloseicon",!0);var e=t[0].objString;SupportUI.showOffline("unattended",e),DynamicMsg.updateValue("visit_id",e.VISITID)}else Support.delSubmitted("missedleavemsg")}}))},Support.addFeedback=function(t,i){var o=SupportUI.embeddiv.find("#btnsavefeedback");o.attr("disabled","disabled").attr("value",LSResource.getRealValue("common.sending"));var e={};(e=lsnocachefix("json")).visitorid=encodeURIComponent(t),e.msg=i,$.ajax({url:"visitorfeedback"+dext,type:"POST",data:e,dataType:"json",success:function(t){if(SupportUI.postMessage("iscloseicon",!0),"error"!=t[0].objType&&"addfeedback"==t[0].module){Support.isfeedbacksent=!0,SupportUI.embeddiv.find("#ratingul").addClass("selected"),SupportUI.showEndedMessage(LSResource.getRealValue("visitorchat.feedback.submit"),!0);var e={visitid:Support.visitorinfo.VISITID,feedback:i,agent:Support.attenderemail};Support.handleCallbacks("visitor.feedback",e),o.removeAttr("disabled")}else if("error"===t[0].objType){"FEEDBACK_ALREADY_ADDED"===t[0].objString.errorMessage&&(Support.srateing=-1,SupportUI.showEndedMessage(LSResource.getRealValue("feedback.already.submitted"),!1))}},error:function(t){o.removeAttr("disabled")}})},Support.submitFile=function(t){try{if(0===$(t).find("input[type=file]")[0].files.length)return}catch(t){}try{var e=t.chid,i=t.sid,o=t.sender;i.value=encodeURIComponent(LSMessanger.getSid()),o.value=myMsgObj.sender,e.value=Support.getChatID(),SupportUI.showProgress(),SupportUI.hideOptions(),FileValidation.formSubmit({formobj:t,success:function(){Support.handleCallbacks("chat.file",{})},failure:function(){SupportUI.clearProgress()}})}catch(t){}return!1},Support.handleUploadFailure=function(t){alert(LSResource.getRealValue(t))},Support.handleDesktopSharing=function(t){if(t.msg){var e=t.msg.opruser.dname,i=decodeURIComponent(t.link),o="",r="";r="request"==t.msg.opr?(o="chatwindow.requestdesktop","common.share"):(o="chatwindow.sharedesktop","common.join");var p=LSResource.getRealValue(o,e)+'&nbsp;&nbsp;<span><a href="'+i+'" target="_blank" onclick="Support.handleMeetingJoinCB()">'+LSResource.getRealValue(r)+"</a></span>";SupportUI.displayInfo(p)}$("#options").find("#sharedesktop").addClass("cmn_disable")},Support.handleMeetingJoinCB=function(){SupportUI.hideInfo(),$("#options").find("#sharedesktop").removeClass("cmn_disable")},Support.cancelDesktopSharing=function(t){var e={};(e=lsnocachefix("json")).chid=Support.getChatID(),e.vwmsid=LSMessanger.getUserId(),e.vdname=LSMessanger.getNickName(),e.lsuid=Support.deskshareuser,e.msg="REJECTED",$.ajax({url:"desktopshareres"+dext,type:"POST",data:e,dataType:"json",success:function(t){}}),$(t).parent().hide()},Support.acceptDesktopSharing=function(t){var e={};(e=lsnocachefix("json")).chid=Support.getChatID(),e.vwmsid=LSMessanger.getUserId(),e.vdname=LSMessanger.getNickName(),e.lsuid=Support.deskshareuser,e.msg=encodeURIComponent(decodeURIComponent(Support.desksharemsg)),$.ajax({url:"desktopshareres"+dext,type:"POST",data:e,dataType:"json",success:function(t){}}),$(t).parent().hide()},Support.handlebeforeUnload=function(){if(Support.handleunload&&0==Support.callquitstatus&&"-1"!=Support.getVisitorID())if("-1"==Support.getChatID()||Support.isautotrigger)Support.handleunload=!1,Support.isautotrigger=!1,Support.handleMissedChat("ONBUL","1",!1);else if(ZAudioVideo.handleOnbeforeUnload(),"float"!=Support.type&&"personal"!=Support.type){if(!this.isipblocked)return LSResource.getRealValue("infomsg.closechat");Support.handleunload=!1,Support.quit()}},Support.sendChatAsMail=function(t,e,i,o){e||(e=Support.getVisitorEmail());var r=SupportUI.embeddiv.find("#mailstatus");o&&(r=SupportUI.embeddiv.find("#endmailstatus")).show(),r.show().html('<div class="msg">'+LSResource.getRealValue("infomsg.sendingmail",e)+"...</div>").prev("input").hide();var p={};p.chid=i||Support.getChatID(),p.fformat="mail",p.toemail=$.trim(e),p.cmode="live",p.visitorid=encodeURIComponent(t),p.oprname="chat",p.user=Support.vwmsid,p.tzoffset=_TZCOFFSET,$.ajax({url:"visdataexport.ls",type:"POST",data:p,dataType:"json",success:function(t){r.html('<div class="msg">'+LSResource.getRealValue("infomsg.mailsended")+"</div>").show(),setTimeout(function(){SupportUI.hideOptions(50)},2e3),o&&(setTimeout(function(){r.fadeOut(150)},3e3),$("#endbackdiv").trigger("click")),Support.handleCallbacks("chat.mail",{})}})},Support.printPreview=function(){var t=Support.getChatID(),e=Support.getVisitorID(),i=_TZCOFFSET;if(-1!=t){if(null==t||null==t)return;var o=parseInt(80*screen.width/100),r=parseInt(77*screen.height/100),p=(screen.width-o)/2,a=(screen.height-r)/2,n="embedprintchat.ls?chid="+encodeURIComponent(t)+"&visitorid="+encodeURIComponent(e)+"&tzoffset="+i+"&domain="+_SUBDOMAIN;Support.language&&(n+="&lang="+Support.language),n+=lsnocachefix(),window.open(n,(new Date).getTime(),"height="+r+", width="+o+",status=yes,toolbar=no,top="+a+", left="+p+", menubar=no,location=no,scrollbars=yes,resizable=yes"),Support.handleCallbacks("chat.print",{})}SupportUI.hideOptions()},Support.handleEndSession=function(t){"true"==t.cleartimer?SupportUI.clearTimer():(SupportUI.startTimer(t.timer),EmbedSound.play("endtimer",t.timer))},Support.setCookie=function(t){if(-1!==Support.getChatID()||-1!==Support.getVisitorID()){clearTimeout(Support.timer);var e={name:Support.getVisitorName(),email:Support.getVisitorEmail(),cid:Support.getChatID(),did:Support.getDepartmentId(),vid:Support.getVisitorID(),vwmsid:Support.vwmsid,attender:Support.getAttender(),attenderzuid:Support.getAttenderZUID(),question:Support.getVisitorQuestion(),uvid:Support.uvid,imagefkey:Support.attenderimagefkey,attendername:Support.attendername};t&&(e.isproactive=!0);LSDB.set("ZLD"+Support.getLiveSupportID(),e,31e4),Support.timer=setTimeout(function(){Support.setCookie()},3e5)}},Support.setWaitingCookie=function(){if(Support.type&&"embed"!=Support.type){var t=Support.embedwaitingtime,e={vid:Support.getVisitorID(),waitinghandlerprops:Support.WaitingHandler,wtime:t,vwmsid:Support.vwmsid,name:Support.getVisitorName(),email:Support.getVisitorEmail(),did:Support.getDepartmentId(),chid:Support.getChatID(),autotrigger:Support.isautotrigger};LSDB.set("ZLD"+Support.getLiveSupportID()+"WAITING",e,1e3*t)}},Support.setInfoCookie=function(t){LSDB.set("ZLD"+Support.getLiveSupportID()+"VISITORINFO",t,6e4)},Support.updateChatCookie=function(){clearTimeout(Support.timer);var t={name:Support.getVisitorName(),email:Support.getVisitorEmail()};LSDB.set("ZLD"+Support.getLiveSupportID(),t,31e4)},Support.removeChatCookie=function(){clearTimeout(Support.timer),this.removeCookie("ZLD"+Support.getLiveSupportID())},Support.removeCookie=function(t){LSDB.remove(t)},Support.handleCallbacks=function(t,e){if(t&&e){var i={};i[t]=e,SupportUI.postMessage("callbacks",i)}},window.onhashchange=function(t){if(t.preventDefault(),"float"==Support.type||"personal"==Support.type){var e=window.location.hash;if(-1!=e.indexOf("#quit")){if(Support.isautotrigger&&-1===Support.getVisitorID())return void window.location.reload();Support.addinfo.autochat="false";var i=Support.callquitstatus;-1==Support.getChatID()||i||Support.isautotrigger?-1==Support.getVisitorID()||i||Support.handleMissedChat("ONHAS","1",!0):Support.quit(!0),i?window.location.reload():!1===SupportUI.resizequestion&&(Support.status?SupportUI.embeddiv.addClass("flt_minwdmn"):window.location.reload())}else-1!=e.indexOf("#clickchat")&&("false"==Support.addinfo.autochat&&(Support.addinfo.autochat="true"),SupportUI.fillAddInfo())}};var Base64=function(){};Base64.PadChar="=",Base64.samples="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Base64.getB64=function(t,e){var i=Base64.samples.indexOf(t.charAt(e));if(-1==i)throw"Error";return i},Base64.atob=function(e){if(!e)return"";var i,o,r,p=e.length;if(0==p)return e;try{return window.atob(e)}catch(t){if(p%4!=0)throw"Error";i=0,e.charAt(p-1)==Base64.PadChar&&(i=1,e.charAt(p-2)==Base64.PadChar&&(i=2),p-=4);var a=[];for(o=0;o<p;o+=4)r=Base64.getB64(e,o)<<18|Base64.getB64(e,o+1)<<12|Base64.getB64(e,o+2)<<6|Base64.getB64(e,o+3),a.push(String.fromCharCode(r>>16,r>>8&255,255&r));switch(i){case 1:r=Base64.getB64(e,o)<<18|Base64.getB64(e,o+1)<<12|Base64.getB64(e,o+2)<<6,a.push(String.fromCharCode(r>>16,r>>8&255));break;case 2:r=Base64.getB64(e,o)<<18|Base64.getB64(e,o+1)<<12,a.push(String.fromCharCode(r>>16))}return a.join("")}},Support.HandleKeyDwn=function(t){13==t.keyCode&&Support.addVisitor()},Support.joinProactiveChat=function(t){var e=Browser.getInfo();e.chid=Support.getChatID(),e.uvid=Support.uvid,e.vwmsid=Support.vwmsid,e.msg=t,e.sid=LSMessanger.getSid(),e.attender=Support.getAttender();var i=lsnocachefix("json");for(var o in i)e[o]=i[o];$.ajax({url:"joinproactive"+dext,type:"POST",data:e,dataType:"json",success:function(t){"error"!=t[0].objType?Support.handleJoinProActive(t[0].objString):SupportUI.handleFailure()}})},Support.handleJoinProActive=function(t){var e=SupportUI.embeddiv;SupportUI.postMessage("size","enlarge"),Support.setVisitorID(t.CUID),Support.visitorinfo.VISITID=t.VISITID;var i=t.ATTENDER,o=t.MESSAGE;i&&Support.getAttender()!==i&&(Support.attender=i),Support.setCookie(),e.find("[handleaction='show']").show(),e.find("[joinproactive='show']").show(),e.find("#transques").text(getUnescapedText(o)),SupportUI.showAgentStatus(),SupportUI.showVisitorInfo(),Support.handleMessageList()},Support.handleMessageList=function(){var t=Support.messagelist;if(t)for(var e=0;e<t.length;e++){var i=t[e];if(LSMessanger.sendMessage(Support.getChatID(),i[0],i[1]),10==e)break}Support.messagelist=null},Support.handleTriggerReplied=function(t){Support.setChatID(t),Support.handleMessageList(),SupportUI.embeddiv.find("#filedata").html(SupportUI.getSendFileHtml())},Support.checkEmbedStatus=function(t){var e={};e.embedname=Support.embeduniquename,$.ajax({url:"getembedstatus.ls",data:e,dataType:"json",success:function(t){"getembedstatus"==t[0].module&&(JSON.parse(t[0].objString)!=Support.status&&document.location.reload())}})},Support.rejoinVisitorInUTS=function(){var t=lsnocachefix("json");t.visitorid=Support.getVisitorID(),$.ajax({url:"utsrejoin.ls",type:"POST",data:t,dataType:"json"})};function SupportUI(){}SupportUI.init=function(){this.ischatdisabled=!0,this.sound=1,this.timer=60,this.timervar="",this.cfidle=!1,this.pushwinobj=null,this.prdcttimer=0,this.embeddiv=$("#embedmaindiv"),this.resizequestion=!1,this.loadPostMessage(),this.uifilled=!1,this.dragdroptimer=0,this.isfilesharing=!1,this.customtypes=["text","number","checkbox","radio","email","selectbox","percentage","decimal","url","textarea","label"],this.customvalidateobj={percentage:"percentage",decimal:"decimal",email:"email",url:"website",number:"long",text:"isempty"},this.customtypeicon={number:"cstm_nmbr",percentage:"cstm_prcntge",text:"cstm_txtfrm",email:"cstm_emlid",decimal:"cstm_dcml",url:"cstm_url"},this.waitingcolors={black:["#000000",[47,47,47],"#5d5d5d","#ffffff"],green:["#ffffff",[213,248,232],"#8ad4a5","#8ad4a5"],blue:["#ffffff",[222,248,248],"#70dcdd","#70dcdd"],red:["#ffffff",[255,241,241],"#ff7471","#ff7471"],gray:["#ffffff",[244,244,244],"#dfdfdf","#dfdfdf"],purple:["#ffffff",[249,241,249],"#c475c1","#c475c1"]},this.defaultfieldids={name:"#name,#offname",email:"#email,#offemail",department:"#deptlist",phone:"#phone,#offphone",question:"#question,#offtxtmsg"},this.placeholders={},this.bindFunctions(),this.triggercookietimer=0,this.fbiframewidth="436px",this.enabledCampaignID=""},SupportUI.bindFunctions=function(){$("[handle=captcha]").bind("click",function(){SupportUI.handleCaptcha()}),SupportUI.bindFocus()},SupportUI.isPlayerEnable=function(){return EmbedSound.IS_FLASH_EXIST||EmbedSound.IS_HTML5_AUDIO},SupportUI.fillAddInfo=function(e){var t=SupportUI.getCookieValue("ZLD"+Support.getLiveSupportID()+"VISITORINFO");!e&&t&&(e=t,Support.removeCookie("ZLD"+Support.getLiveSupportID()+"VISITORINFO"));var i=SupportUI.embeddiv,r=i.find("#embedfrstdiv").css("display");if(("none"!=r||"none"==i.find("#captcha").css("display"))&&"none"!=r){e||(e=Support.addinfo);var o=null!=e.question?getUnescapedText(e.question):e.question,p=null!=e.name?getUnescapedText(e.name):e.name,a=e.phone,s=e.email;DynamicMsg.updateValues(Support.addinfo);try{var n={phone:a,email:s,name:p,question:o},d="onlineembcont";for(var u in Support.status||(n={offphone:a,offemail:s,offname:p,offtxtmsg:o},d="embedcontainer"),n){var l=i.find("#"+u);1==l.length&&null!=n[u]&&l.val(n[u])}(Support.isFloat()||self==top)&&-1===document.location.href.indexOf("#quit")&&(SupportUI.isSufficeSpace()?setTimeout(function(){(e.ismaximized||self==top)&&i.find("#"+d).find("input:first").focus()},100):setTimeout(function(){SupportUI.focusTextField(d)},100)),(Support.addinfo?Support.addinfo.forcefloatingwindow:null)&&Support.isFloat()&&SupportUI.isHandHeldDevice()&&($("body").removeClass("siq_mprv").addClass("siq_mprv"),SupportUI.embeddiv.removeClass("siq_mscreen").addClass("siq_mscreen"))}catch(e){}CommonUtil.setPlaceHolder(),"true"==e.autochat&&Support.status&&("personal"==Support.type?PersonalSupport.handleAutoChat():SupportUI.submitVisitorInformation(!1),e.autochat="false")}},SupportUI.showWaitingMessage=function(e){var t=e||getUnescapedText(Support.waitmsg);t=DynamicMsg.fillValues(t),$("#waitingform").text(t).show()},SupportUI.submitFeedback=function(e){var t=SupportUI.embeddiv,i=t.find("#txtmsg").val();if(0==Validation.validateRegEx(i,"isempty"))return SupportUI.displayError(t.find("#txtmsg")),!1;Support.addFeedback(e,i)},SupportUI.isSufficeSpace=function(){return 450<=window.screen.availWidth&&554<=window.screen.availHeight},SupportUI.submitMissedChat=function(e){var t=SupportUI.embeddiv;function i(e){return null===e}var r=t.find("#missedname"),o=SupportUI.validate(r,"isempty"),p=SupportUI.validate(t.find("#missedemail"),"email"),a=SupportUI.validate(t.find("#txtmsg"),"isempty");return o&&100<=o.length?(SupportUI.displayError(r,!0),!1):!(i(o)||i(p)||i(a))&&void Support.missedVisitorMessage(e,o,p,a)},SupportUI.validate=function(e,t){if(!e.length)return"";var i=$.trim(e.val());return i===e.attr("placeholder")&&(i=""),"true"!==e.attr("mandatory")&&""===i||Validation.validateRegEx(i,t)?i:(SupportUI.displayError(e),null)},SupportUI.displayError=function(e,t){try{e.parent().find("em.invaldname").remove(),t&&e.before('<em class="invaldname">'+LSResource.getRealValue("errormsg.char.exceed")+"</em>");var i=e.attr("class");i=i?i.replace(/errorbdr/g,""):"",e.unbind("keyup").bind("keyup",function(){e.parent().find("em.invaldname").remove(),$(this).unbind("keyup").removeClass().addClass(i).parent("span").find("em").css("display","none")}).removeClass().addClass(i+" errorbdr").parent("span").find("em").css("display","block"),e.unbind("click.error").bind("click.error",function(){$(this).unbind("click.error").removeClass().addClass(i).parent("span").find("em").css("display","none")}).removeClass().addClass(i+" errorbdr").parent("span").find("em").css("display","block")}catch(e){}},SupportUI.submitVisitorInformation=function(e){SupportUI.embeddiv.find("#embedcontainer").html("").show(),Support.ismanualaction=!0;var t=SupportUI.embeddiv;function i(e){return null===e}var r=t.find("#name"),o=t.find("#question"),p=t.find("#email"),a=SupportUI.validate(r,"isempty"),s=SupportUI.validate(p,"email"),n=SupportUI.validate(t.find("#phone"),"phone"),d=SupportUI.validate(o,"isempty");!a&&s&&"true"!==r.attr("mandatory")&&(a=s.split("@")[0]);var u=!(i(a)||i(s)||i(n)||i(d));return a&&100<=a.length&&(SupportUI.displayError(r,!0),u=!1),s&&100<=s.length&&(SupportUI.displayError(p,!0),u=!1),d&&2048<=d.length&&(SupportUI.displayError(o,!0),u=!1),-1==Support.getDepartmentId()&&(SupportUI.displayError(SupportUI.embeddiv.find("#selecteddept")),u=!1),Support.customfield&&!SupportUI.checkCustomFields()&&(u=!1),u&&(a=CommonUtil.wordCapitalize(a.trim()),SupportUI.checkAndAddVisitor(a,s,d,"","",e,n)),!1},SupportUI.checkAndAddVisitor=function(e,t,i,r,o,p,a){var s=SupportUI.embeddiv;e||(e=Support.addinfo.name||Support.getVisitorName())&&!SupportUI.isGuestToken(e)||(e="Visitor "+Math.round(1e5*Math.random()),Support.sgname=!0),t||(t=Support.addinfo.email||Support.getVisitorEmail()||""),a||(a=Support.addinfo.phone||Support.getVisitorPhone()||""),Support.setVisitorName(e),Support.setVisitorEmail(t),Support.setVisitorPhone(a),Support.setVisitorQuestion(i),Support.iscaptcha=p,LSMessanger.setNickName(e),r&&Support.setDepartmentId(r),o&&Support.setAttender(o),"true"==s.find("#userstatus").val()?(Support.isautotrigger||(SupportUI.embeddiv.find("#msgcnt").hide(),SupportUI.embeddiv.find("#embedfrstdiv").hide(),SupportUI.embeddiv.find("#onlineembcont").hide(),Support.WaitingHandler.intime=(new Date).getTime(),SupportUI.showProcess(),SupportUI.postMessage("size","enlarge"),LSDB.remove("ZLD"+Support.getLiveSupportID()+"WTIME"),SupportUI.showWaitingMessage(),Support.countWaitingTime()),Support.vwmsid?(LSMessanger.register(CommonUtil.getProductCode(),Support.vwmsid),setTimeout(function(){Support.checkRegister()},6e4)):Support.getAnnonID(e)):SupportUI.showOfflineStatus()},SupportUI.handleFailure=function(){SupportUI.showOfflineStatus(!0,!0),Support.status=!1,SupportUI.repopulateDepartmentList(Support.status)},SupportUI.showOfflineStatus=function(e,t){var i=Support.getVisitorName()&&!Support.sgname?Support.getVisitorName():"",r=Support.getVisitorEmail()||"",o=Support.getVisitorQuestion(),p=Support.PROPS,a='<div class="formpanel lvspt-oflne"><div id="offelemcont" class="lvspt-oflne">';a+='<div class="flt_oflescl" handle="parent"><div class="flt_stinfomsg lgtrclr" purpose="height"><div class="flt_offmsgsb" id="offmsg"></div></div>',"true"===p.ishowname&&(a+='<div class="usrentry mandatory" purpose="height" type="uinput"><input type="text" placeholder="'+LSResource.getRealValue("common.name")+'" autocomplete="off" class="txt" id="offname" mandatory="'+p.namemandatory+'" value="'+getEncodedText(i)+'">',"true"===p.namemandatory&&(a+='<div class="stylediv"></div>'),a+="</div>"),a+='<div class="usrentry mandatory" purpose="height" type="uinput"><input type="text" placeholder="'+LSResource.getRealValue("common.email")+'" autocomplete="off" class="txt" id="offemail" mandatory="true" value="'+r+'"><div class="stylediv"></div></div>',"true"==p.ishowphone&&(a+='<div class="usrentry mandatory" purpose="height" type="uinput"><input type="text" placeholder="'+LSResource.getRealValue("common.contactnumber")+'" autocomplete="off" class="txt" id="offphone" mandatory="'+p.phonemandatory+'">',"true"==p.phonemandatory&&(a+='<div class="stylediv"></div>'),a+="</div>");var s=$("#deptslct");s.html()&&(a+='<div class="usrentry mandatory" purpose="height" id="offdeptslct" type="uinput">'+s.html()+"</div>"),a+='<div class="usrentry mandatory" quescont="true"> <textarea placeholder="'+LSResource.getRealValue("common.message")+'" id="offtxtmsg" bind="focus" usagestatus="offline" value="'+Support.getVisitorQuestion()+'" style="resize: none;" mandatory="true">'+getEncodedText(o)+'</textarea><div class="stylediv"></div></div></div>',a+='<div class="usrentry flt_offbtnmn" purpose="height" id="offbtncontainer"><input type="button" value="'+LSResource.getRealValue("embed.submit")+'" id="btnsavemisschat" onkeydown="SupportUI.submitMessage(event,this.id)" tabindex="0" class="strtbtn drkdclr"></div></div></div>',SupportUI.embeddiv.show().find("#onlineembcont").hide(),SupportUI.embeddiv.find("#waitingform").hide(),$("#zlspscont").length&&$("#zlspscont").hide();var n=SupportUI.embeddiv.find("#embedcontainer");n.html(a).show(),t?(SupportUI.fillAddInfo(),n.find("#offmsg").text(SupportUI.getOfflineMessage())):e&&isPostMessageSupported()&&Support.isscript?setTimeout(function(){SupportUI.postMessage("api",{})},1):(SupportUI.fillAddInfo(),n.find("#offmsg").text(SupportUI.getOfflineMessage())),n.find("#deptlist").css("display","none"),SupportUI.embeddiv.find("#btnsavemisschat").bind("click",function(){SupportUI.leaveMessage()}),SupportUI.resizeWindow(),CommonUtil.setPlaceHolder(),SupportUI.handleCustomField(),SupportUI.bindFocus(),SupportUI.populateCampaignLabel(Support.status)},SupportUI.hideOfflinePage=function(){SupportUI.embeddiv.show().find("#onlineembcont").show(),1==$("#zlspscont").length&&$("#zlspscont").show(),SupportUI.embeddiv.find("#embedcontainer").html(""),SupportUI.hideInfo(),SupportUI.embeddiv.find("#msgcnt").show(),SupportUI.embeddiv.find("#deptlist").hide(),Support.status=!0;var t=SupportUI.embeddiv.find("#selecteddept").find("span").attr("deptid");SupportUI.embeddiv.find("#deptlist").find("li").each(function(){var e=$(this);e.attr("id")==t&&SupportUI.checkDepartmentStatus(e,!0)})},SupportUI.leaveMessage=function(){var e=SupportUI.embeddiv;function t(e){return null===e}var i=e.find("#offname"),r=SupportUI.validate(i,"isempty"),o=SupportUI.validate(e.find("#offemail"),"email"),p=SupportUI.validate(e.find("#offphone"),"phone"),a=SupportUI.validate(e.find("#offtxtmsg"),"isempty"),s=!(t(r)||t(o)||t(p)||t(a));if(r&&100<=r.length&&(SupportUI.displayError(i,!0),s=!1),"-1"===Support.getDepartmentId()&&(SupportUI.displayError(SupportUI.embeddiv.find("#offdeptslct").find("#selecteddept")),s=!1),!r&&o&&(r=o.split("@")[0]),Support.customfield&&!SupportUI.checkCustomFields()&&(s=!1),!s)return!1;SupportUI.hideInfo(),Support.leaveMessage(r,o,a,p)},SupportUI.enableComposer=function(){try{var e=document.getElementById("lstxteditor"),t=e.getAttribute("placeholder");if(e.value=ie&&t?t:"",e.readOnly=!1,e.disabled=!1,SupportUI.ischatdisabled=!1,"float"==Support.type||"personal"==Support.type){var i=SupportUI.getCookieValue("ZLD"+Support.getLiveSupportID());Support.setCookie(i.isproactive)}}catch(e){}},SupportUI.disableComposer=function(){var e=document.getElementById("lstxteditor");e.value="",e.readOnly=!0,e.disabled=!0,SupportUI.ischatdisabled=!0},SupportUI.showOffline=function(e,t){var i="";if("feedback"==e)i=LSResource.getRealValue("chatwindow.feedbkresponse");else if("leavemsg"==e||"unattended"==e){i=Support.engaged?Support.engagedrespmsg:Support.offlinerespmsg,i=DynamicMsg.fillValues(i),"unattended"==e&&(i=DynamicMsg.fillValues(Support.missedrespmsg));var r=t.integdetail;null!=r&&null!=r.requestid&&(i=LSResource.getRealValue("chatwindow.offticketresponse",'"'+LSResource.getIntegLabel(1,"Request")+", "+r.requestid+'"'))}var o=SupportUI.embeddiv.find("#embedcontainer");o.html('<div id="offlineform" class="flt_stinfomsg lgtrclr"></div>').show(),o.find("#offlineform").text(getUnescapedText(i))},SupportUI.showMissedInfo=function(){try{var e="",t=Support.getVisitorID(),i=Support.sgname?"":Support.getVisitorName(),r=Support.sgname?"":"disabled='true'",o=Support.getVisitorEmail()?"disabled='true'":"";e='<div class="flt_onlescl missed" handle="parent">'+(-1==Support.ldintegid&&Support.isfreeplan?'<div class="zls-cmplogomn"><a href="'+_SCHEMA+"://"+_PRDURL+'" target="_blank"><img class="cmlg" src="https://img.zohocdn.com/salesiq/images/spacer_592ebefc7104d681d57852665e9ad514_.gif"/></a></div>':"");e+='<div class="flt_stinfomsg lgtrclr" purpose="height"><div class="flt_offmsgsb" id="missmsg"></div></div>',e+='<div class="usrentry mandatory" purpose="height" type="uinput"><input type="text" placeholder="'+SupportUI.getPlaceHolder("name","common.name")+'" autocomplete="off" class="txt" id="missedname" '+r+' mandatory="true" value="'+getEncodedText(i)+'"><div class="stylediv"></div></div>',e+='<div class="usrentry mandatory" purpose="height" type="uinput"><input type="text" placeholder="'+SupportUI.getPlaceHolder("email","common.email")+'" autocomplete="off" class="txt" id="missedemail" '+o+' mandatory="true" value="'+Support.getVisitorEmail()+'"><div class="stylediv"></div></div>',e+='<div class="usrentry mandatory" quescont="true"> <textarea placeholder="'+LSResource.getRealValue("common.message")+'" id="txtmsg" value="" resized="true" style="resize: none;" mandatory="true">'+getEncodedText(Support.getVisitorQuestion())+'</textarea><div class="stylediv"></div></div>',e+='</div><div class="usrentry flt_onbtnmn" purpose="height" id="offbtncontainer"><input type="button" value="'+LSResource.getRealValue("embed.submit")+'" id="btnsavemisschat" tabindex="0" class="strtbtn drkdclr"></div></div>';var p=SupportUI.embeddiv.find("#embedcontainer");p.html(e).show().removeClass("timer_svgmin"),CommonUtil.setPlaceHolder(),p.find("#missmsg").text(DynamicMsg.fillValues(getUnescapedText(Support.missedmessage))),SupportUI.resizeTextArea($("#txtmsg"),"busy"),SupportUI.embeddiv.find("#btnsavemisschat").bind("click",function(){SupportUI.submitMissedChat(t)})}catch(e){}},SupportUI.showProcess=function(e){SupportUI.embeddiv.show().find("#onlineembcont,#embedfrstdiv").hide();try{$("#personalcnt").hide()}catch(e){}e&&$("#waitingform").show().html("<label>"+e+"</label>")},SupportUI.toggleSound=function(e){var t=$(e);1==SupportUI.sound?(t.removeClass().addClass("soundoff"),SupportUI.sound=0):(t.removeClass().addClass("sound"),SupportUI.sound=1)},SupportUI.toggleAddress=function(e){null==Support.addresscontent&&(Support.addresscontent=SupportUI.embeddiv.find("#adresscont")),"none"==Support.addresscontent.css("display")?(Support.addresscontent.css("display","block"),clickoutside.bindclick(function(){SupportUI.hideAddress()},"adresscont","addcontainer","",!0)):this.hideAddress()},SupportUI.hideAddress=function(){null!=Support.addresscontent&&Support.addresscontent.css("display","none")},SupportUI.getDepartmentHtml=function(e){var t=Support.getDepartmentList();if("-1"!==Support.getDepartmentId())return"";for(var i="",r="",o=0;o<t.length;o++){var p=t[o];if(e){var a=p.USERS;if(-1===$.inArray(""+e,a))continue}var s=!1!==p.isClient,n="true"===p.STATUS&&Support.status,d=s?SupportUI.getDepartmentTemplate(p.ID,p.NAME,p.DNAME,n,p.ENGAGED):"";n?i+=d:r+=d}if(!i&&!r)return"";var u="<div class='drptxt' onclick='SupportUI.toggleDepartmentList(\" \",event)' id='selecteddept'><em class='drp_arw'></em><span>"+SupportUI.getPlaceHolder("department","embed.choose_department")+"</span></div><div class='flt_drpdn' style='display:none' id='deptlist'><ul>";return u+=i+r,u+="</ul></div>"},SupportUI.getPlaceHolder=function(e,t){return SupportUI.placeholders[e]||LSResource.getRealValue(t)},SupportUI.getVisitorInfoHtml=function(){if(!Support.getVisitorEmail()){var e=Support.getVisitorName(),t='<div class="vistinfo username" id="visitinfo"><input class="vname" purpose="name" placeholder="'+SupportUI.getPlaceHolder("name","common.name")+'"></input><input class="vemail" purpose="email" placeholder="'+SupportUI.getPlaceHolder("email","common.email")+'"></input></div>';if(!isNaN(e)||"Guest"===e)return t;var i=e.split(" ");return(Support.proactivetriggered||Support.isautotrigger)&&"Visitor"===i[0]&&i[1]&&!isNaN(i[1])?t:void 0}},SupportUI.isGuestToken=function(e){var t=e.split(" ");return!isNaN(e)||"Guest"===e||"Visitor"===t[0]&&t[1]&&!isNaN(t[1])},SupportUI.showChatWindow=function(){var e=Support.getAttender()&&-1!==Support.getVisitorID()?"display:block":"display:none",t='<div class="flcontainer"><div class="flcont" id="msgcntr"><div id="msgdiv" class="msgdiv"><div id="msgques" class="visquest"></div></div></div>';if(t+='<div class="txtarea" id="composer">',Support.isautotrigger&&(e="display:none"),Support.isautotrigger&&"-1"===Support.getDepartmentId()){var i=SupportUI.getDepartmentHtml(Support.getAttender());i&&(t+='<div id="atdeptslct" class="triggerdept"><div class="usrentry mandatory" purpose="height" id="deptslct" type="uinput">'+i+"</div></div>")}var r=Support.addinfo.messagehint?'placeholder="'+Support.addinfo.messagehint+'"':"";if(t+='<div class="usrstatus" id="userstatus"></div><div class="txtsend flt_add" id="optionbtn"><em class="spritebg"></em></div>',t+='<div class="ftrtarea_lft"><em class="sqico-smile" title="'+LSResource.getRealValue("common.smiley")+'" id="showsmiley" onclick="Smiley.showSmileyList(this,true,\'\',event)"></em><textarea id="lstxteditor" '+r+' onkeydown="SupportUI.handleEvent(event,this)" onkeyup="SupportUI.removeNewLine(event,this)" placeholder="'+LSResource.getRealValue("embed.composer.placeholder")+'"></textarea><div class="smile_list" id="smilelist"></div></div>',t+='<div class="options" style="display:none" id="options"><ul>',Support.getIconStatus("icsound")&&SupportUI.isPlayerEnable()&&(t+='<li class="sound" id="csound" onclick="SupportUI.toggleSound(this);" title="'+LSResource.getRealValue("infomsg.sound")+'"><span class="spritebg"></span></li>'),Support.getIconStatus("icfile")&&!0===Support.isfilesharing&&(t+='<li class="upload" style="'+e+'" handleaction="show"><span class="spritebg"></span><div id="filedata">'+SupportUI.getSendFileHtml()+"</div></li>",!ie)){var o=SupportUI.embeddiv.find("#embedcontainer");jQuery.event.props.push("dataTransfer"),o.bind("dragover",function(e){e.preventDefault(),SupportUI.showDragDropUI()}).removeClass("timer_svgmin"),o.bind("drop",function(e){e.preventDefault(),LSDragDrop.onDropEvent(Support.getChatID(),e,!0),SupportUI.hideDragDrop(),e.stopImmediatePropagation()}),o.bind("dragleave",function(e){e.preventDefault(),clearTimeout(SupportUI.dragdroptimer),SupportUI.dragdroptimer=setTimeout(function(){SupportUI.hideDragDrop()},300)})}Support.getIconStatus("icprint")&&(t+="<li class='print' key='print' onclick='Support.printPreview();return false;' title='"+LSResource.getRealValue("common.print")+"' style='"+e+"' handleaction='show'><span class='spritebg'></span></li>"),Support.getIconStatus("icmail")&&(t+="<li class='email' key='mail' onclick='SupportUI.showMailPopup(event);return false;' title='"+LSResource.getRealValue("common.mailto")+"' style='"+e+"' handleaction='show'><span class='spritebg'></span></li>"),Support.ismeetingallowed&&(t+='<li class="desktop" id="sharedesktop" onclick="SupportUI.shareDesktop(this);" title="'+LSResource.getRealValue("embed.desktop.sharing")+'"><span class="spritebg"></span></li>'),t+="<li class='endcht' onclick='SupportUI.EndChat()' title='"+LSResource.getRealValue("chatwindow.endsession")+"' style='"+e+"' handleaction='show'><span class='spritebg'></span><em class='spritebg'></em></li>",t+="</ul>",Support.getIconStatus("icmail")&&(t+='<div class="flt_emlmn" style="display:none" id="embmailer"><input id="mailid" placeholder="'+LSResource.getRealValue("embed.type.your.mailid")+'" type="text"/><div class="sndmgsts" id="mailstatus" style="display:none">'+LSResource.getRealValue("embed.successful.mail.send")+'</div><em class="spritebg"></em></div>'),t+="</div></div>",SupportUI.embeddiv.find("#embedcontainer").html(t).show(),CommonUtil.isAllowPasteImage()&&$("#lstxteditor").on("paste",function(e){PasteImage.onPaste(e,this)}),CommonUtil.setPlaceHolder(),SupportUI.embeddiv.find("#optionbtn").on("click",function(e){SupportUI.handleOptionClick(this,e)}),$("body").removeClass().addClass("chatbodybg"),Support.composer=SupportUI.embeddiv.find("#lstxteditor"),Support.composer.bind("focus.blinktitle keyup.blinktitle click.blinktitle",function(){Support.iscomposerfocus=!0,Message.stopBlinking()}),Support.composer.bind("blur.blinktitle",function(){Support.iscomposerfocus=!1}),$("#atdeptslct").find("li[status='false']").remove(),SupportUI.disableComposer(),SupportUI.resizeWindow()},SupportUI.shareDesktop=function(e){if(!$(e).hasClass("cmn_disable")){var t={};t.chid=Support.getChatID(),$.ajax({url:"sharedesktop.ls",type:"POST",data:t,dataType:"json",loadingmsg:null,success:function(e){SupportUI.hideOptions()}})}},SupportUI.showVisitorInfo=function(){if(-1===Support.getVisitorID())return!1;$("#msgdiv").find("#msgques").after(SupportUI.getVisitorInfoHtml()),SupportUI.handleVisitorInfo()},SupportUI.hideVisitorInfo=function(){SupportUI.embeddiv.find("#visitinfo").hide()},SupportUI.handleVisitorInfo=function(){var t=$("#visitinfo");t.length<1||($("#msgcntr").scroll(function(){var e=$(this).scrollTop();t.offset().top+SupportUI.embeddiv.find("#windowheader").outerHeight(!0)+t.outerHeight(!0)<=e?t.addClass("flt_fxd"):t.removeClass("flt_fxd")}),t.find("input").off("keyup").on("keyup",function(e){var t=KeyHandler.getKeyCode(e);$(this).removeClass("errorbdr"),13===t&&SupportUI.checkAndUpdateInfo($(this).parent())}))},SupportUI.checkAndUpdateInfo=function(e){var t=(e=$(e)).find("[purpose=name]"),i=e.find("[purpose=email]"),r=$.trim(t.val()),o=$.trim(i.val()),p=Support.PROPS,a=!0,s=!1;if((!o&&"true"===p.emailmandatory||o&&!Validation.validateRegEx(o,"email"))&&(i.addClass("errorbdr"),a=!1),r||(o?(r=o.split("@")[0],s=!0):"true"===p.namemandatory&&(t.addClass("errorbdr"),a=!1)),!a)return!1;Support.updateVisitorInfo(r,o,s)},SupportUI.handleOptionClick=function(e,t){if((e=$(e)).hasClass("flt_snd"))SupportUI.composerSendMessage(e);else{var i=$("#options");if(i.is(":visible"))return void SupportUI.hideOptions();i.css({overflow:""}).show(),clickoutside.bindclick(function(){SupportUI.hideOptions()},"options","optionbtn","",!0)}},SupportUI.getSendFileHtml=function(){var e='<form action="upload.ls" name="uploadfiles" target="embedfileframe" enctype="multipart/form-data" method="post"><input type="hidden" name="chid" value="'+Support.getChatID()+'"><input type="hidden" name="mod" value="att"><input type="hidden" name="sender"><input type="hidden" name="sid"><input type="hidden" name="lsid" value="'+Support.getLiveSupportID()+'"><input type="hidden" name="ncf"><input type="hidden" name="dname" value="'+getEncodedText(Support.visitorinfo.NAME)+'"><a href="javascript:void(0);" key="sharefile"><input name="file1" type="file" multiple size="1" class="embdinpfile" onchange="Support.submitFile(this.form);" onclick="this.value=\'\'" id="embdfileupload" title="'+LSResource.getRealValue("chat.actions.filesharing")+'"/>';return e+='</a><iframe id="embedfileframe" name="embedfileframe" style="display:none;"></iframe></form>'},SupportUI.getDragDropHtml=function(){return'<div class="lvs_dragdropmn" style="display:none;" id="embeddragdrop"><div class="lvs_dragdrpsub"><div><span></span></div><h3>'+LSResource.getRealValue("infomsg.dropyourfiles")+"</h3></div></div>"},SupportUI.showDragDropUI=function(){-1!=Support.getChatID()&&(clearTimeout(SupportUI.dragdroptimer),SupportUI.embeddiv.find("#embeddragdrop").show())},SupportUI.hideDragDrop=function(){SupportUI.embeddiv.find("#embeddragdrop").hide()},SupportUI.getPhotoURL=function(e,t){return e&&(CurrentPortal.isManagedIntegrated()||Support.attenderimagefkey)?CurrentPortal.isManagedIntegrated()?_SCHEMA+"://"+_SERVERURL+"/"+Support.getPortalName()+"/file.ls?ID="+e+"&t=user":_SCHEMA+"://"+window.location.host+"/"+Support.getPortalName()+"/userimg/"+Support.attenderimagefkey+"/photo.ls?nocache=1":"https://img.zohostatic.com/salesiq/JULY_13_2021_07_https/images/user/user_160*160.png"},SupportUI.handleMailEvent=function(e,t){var i=KeyHandler.getKeyCode(e);if(27==i&&SupportUI.hideOptions(),13==i){if(mz&&e.preventDefault(),ie&&(e.cancelBubble=!0,e.returnValue=!1),""==$.trim(t.value))return t.value="",!1;SupportUI.sendMail()}},SupportUI.getStarHtml=function(e){var t="common.star";return 1<e&&(t+="s"),"<li class='"+{1:"one",2:"two",3:"three",4:"four",5:"five"}[e]+"' purpose='rating' star='"+e+"'><a title='"+LSResource.getRealValue(t,""+e)+"' href='javascript:void(0);'></a></li>"},SupportUI.showFeedback=function(e,t){LSMessanger.disable(),SupportUI.hideInfo(),Message.stopBlinking();var i=Support.getVisitorID();t=t||Support.getChatID();var r=Support.getIconStatus("icphoto"),o='<div class="fltfdk_cntmn">';try{if(CurrentPortal.isInteg(LDINTEG_ZOHOSUPPORT)){for(var p=CurrentPortal.getAddInfo(),a=_SCHEMA+"://"+_SUPPORTURL+"/support/SurveyOfflineForm?portal="+p.PORTALNAME+"&visitorid="+Support.getVisitorID()+"&zuid="+Support.getAttenderZUID()+"&visitid="+Support.visitorinfo.VISITID,s=encodeURIComponent(_SCHEMA+"://"+_EMBEDSERVERURL),n=Support.getDepartmentList(),d=0;d<n.length;d++){var u=n[d];u.ID===Support.getDepartmentId()&&(a+="&depname="+u.NAME)}var l=e.feedbacklink?e.feedbacklink:a;return o='<div id="supportfbdiv"><iframe id="supportfb" height="401px" width="'+("float"==Support.type?"":SupportUI.fbiframewidth)+'" name="supportfb" src="'+l+"&frameorigin="+s+'"></iframe></div>',SupportUI.embeddiv.find("#embedcontainer").remove(),void SupportUI.embeddiv.append(o)}}catch(e){}Support.getIconStatus("icmail")&&""!=Support.getVisitorEmail()&&(o+='<div id="mailstatus" class="snd_email lgtrclr"><div class="msg">'+LSResource.getRealValue("chatwindow.mailcopy","<a purpose='sendmail' class='drkdclr' href='javascript:void(0);'>"+LSResource.getRealValue("chatwindow.mailcopy.clickhere")+"</a>")+"</div></div>"),o+='<div class="fltfdk_cont" id="fedbckinfotxtid" ><div class="fdbckphoto">',r&&(o+='<img src="'+SupportUI.getPhotoURL(Support.getAttender(),Support.getAttenderZUID())+'" height="35" width="35"/>'),o+='</div><div class="msg" id="fdbckmsg"></div></div>';var c="embed.thanksmsg.noratingandfeedback";if(Support.getIconStatus("icfeedback")||Support.iscustomrating){if(o+='<div  class="sptwndtxtara" id="fdbckdiv">',Support.israting){c="embed.thanksmsg.rating",o+='<div class="flt_ratngmn" style=""><ul style="margin-top:0;" id="ratingul" class="rating star0">';for(d=1;d<=5;d++)o+=SupportUI.getStarHtml(d);o+="</ul></div>"}(Support.isfeedback||!Support.israting&&Support.isfeedback)&&(c=Support.israting?"embed.thanksmsg.ratingandfeedback":"embed.thanksmsg.feedback",o+='<div id="sprwinact" class="flt_fdkftr" style="display:'+(Support.israting?"none":"block")+'"><div>',Support.israting||(o+='<div class="zlsfedbk-txt">'+LSResource.getRealValue("common.feedback")+"</div>"),o+='<textarea  id="txtmsg" placeholder=\''+LSResource.getRealValue("support.feedback.placeholder")+"'></textarea>",o+='<div class="usrentry flt_fdkbtnmn"><input type="button" class="strtbtn drkdclr" tabindex="0" id="btnsavefeedback" value="'+LSResource.getRealValue("common.send")+'"></div></div>'),Support.isfeedback||Support.israting||SupportUI.postMessage("iscloseicon",!0),o+="</div>"}else SupportUI.showEndedMessage(LSResource.getRealValue("chatwindow.support.ends"),!1);SupportUI.embeddiv.find("#embedcontainer").remove(),SupportUI.embeddiv.append(o),c=Support.thanksmsg||LSResource.getRealValue(c),c=DynamicMsg.fillValues(getUnescapedText(c));var m=SupportUI.embeddiv;m.find("#fdbckmsg").text(getUnescapedText(c)),SupportUI.resizeWindow(),m.find("#btnsavefeedback").on("click",function(){SupportUI.submitFeedback(i)}),m.find("li[purpose=rating]").on("click",function(){SupportUI.setRepRating(this,i)}),m.find("a[purpose=sendmail]").on("click",function(){Support.sendChatAsMail(i,"",t)}),CommonUtil.setPlaceHolder()},SupportUI.getComposerStyles=function(){var e="",t=Support.composer[0];return""!=t.style.fontWeight&&(e+="font-weight:"+t.style.fontWeight+";"),""!=t.style.fontStyle&&(e+="font-style:"+t.style.fontStyle+";"),""!=t.style.textDecoration&&(e+="text-decoration:"+t.style.textDecoration),e},SupportUI.updateComposer=function(e){var t=e.attr("id"),i=e.attr("class");i&&-1!=i.indexOf("sel")?("cwinbold"==t?Support.composer.css({fontWeight:""}):"cwinitalic"==t?Support.composer.css({fontStyle:"normal"}):"cwinunderline"==t&&Support.composer.css({textDecoration:""}),e.removeClass("sel")):("cwinbold"==t?Support.composer.css({fontWeight:"bold"}):"cwinitalic"==t?Support.composer.css({fontStyle:"italic"}):"cwinunderline"==t&&Support.composer.css({textDecoration:"underline"}),e.addClass("sel")),Support.composer.focus()},SupportUI.toggleToolbarIcon=function(e){var t=$(e),i=t.attr("id");"cwinbold"!=i&&"cwinitalic"!=i&&"cwinunderline"!=i||SupportUI.updateComposer(t)},SupportUI.handleEvent=function(e,t){if(LSMessanger.isdisablewms())return!1;var i=Support.getChatID(),r=KeyHandler.getKeyCode(e);try{if(13==r&&e.shiftKey)return!0}catch(e){}if(112<=r&&r<=123)return!0;var o=t.value.trim();if(0!=Support.composer.next("#smilelist").find(".smileli").length&&-1!=[39,37,38,40,13].indexOf(r))e.preventDefault?e.preventDefault():e.returnValue=!1;else if(13==r){clearTimeout(SupportUI.prdcttimer);try{if(mz&&e.preventDefault(),ie&&(e.cancelBubble=!0,e.returnValue=!1),(t.value="")==o)return!1;var p=SupportUI.getComposerStyles();SupportUI.sendMessage(i,o,p),Support.enablepmsg=!0}catch(e){}}return!1},SupportUI.setSendIconState=function(e){var t=SupportUI.embeddiv.find("#optionbtn");0==$.trim(e).length?t.removeClass("flt_snd").addClass("flt_add"):t.removeClass("flt_add").addClass("flt_snd")},SupportUI.removeNewLine=function(e,t){SupportUI.cfidle&&SupportUI.clearTimer();var i=KeyHandler.getKeyCode(e);try{16!=i&&Self.status.active(e,t)}catch(e){}try{if(13==i&&e.shiftKey)return!0}catch(e){}if(13==i&&(e.preventDefault?e.preventDefault():e.returnValue=!1),13==i||999==i){if(!Smiley.handleInSertSmiley(null,e.target))return!1;""==Message.trim(t.value)&&(t.value="")}SupportUI.setSendIconState(t.value),SupportUI.checkTextEntered(t),Smiley.checkAndTriggerSmiley(e,!0)},SupportUI.composerSendMessage=function(e){var t=$.trim(Support.composer.val());if(t.length){var i=SupportUI.getComposerStyles();SupportUI.sendMessage(Support.getChatID(),t,i)}SupportUI.embeddiv.find("#atdeptslct").find("#selecteddept").hasClass("errorbdr")||(Support.composer.val(""),SupportUI.setSendIconState("")),Support.composer.focus()},SupportUI.sendMessage=function(e,t,i){if(-1===Support.getVisitorID()){if(Support.proactivetriggered)Support.messagelist=Support.messagelist||[],Support.messagelist.push([t,i]);else{if(-1!==Support.getChatID())Support.joinProactiveChat(t),Support.setVisitorQuestion(t),Support.handleCallbacks("visitor.triggerresponded",{});else if(Support.isautotrigger){if("-1"===Support.getDepartmentId())return SupportUI.displayError(SupportUI.embeddiv.find("#atdeptslct").find("#selecteddept")),void Support.composer.val(t).focus();Support.ismanualaction=!0,SupportUI.checkAndAddVisitor(null,null,t,"","",!1,null),Support.handleCallbacks("visitor.triggerresponded",{})}Support.proactivetriggered=!0}myMsgObj.dname||(myMsgObj.dname=Support.getVisitorName()||LSResource.getRealValue("Me")),Message.displaySendMessage(e,t,i)}else Message.send(e,t,i)},SupportUI.setRepRating=function(e,t){var i=$(e),r=i.attr("star");if(null!=r&&!Support.isfeedbacksent){Support.srateing=r,$("ul#ratingul").removeClass().addClass("rating star"+r),Support.setRating(r,t),Support.isfeedback||SupportUI.postMessage("iscloseicon",!0);var o=i.parents("#fdbckdiv");o.find("#sprwinact").fadeIn(500),o.children(":first").removeClass("zls_ratngmrgn")}},SupportUI.checkDepartmentStatus=function(e,t,i){if(null!=e){var r=$(e),o=r.attr("status"),p=SupportUI.embeddiv.find("#userstatus").val();if(Support.status=!0,Support.engaged="true"===r.attr("engaged"),"false"==o&&t){if(!i&&"false"!=p&&"false"!=o)return!1;Support.status=!1}return"true"==o&&SupportUI.hideInfo(),Support.setDepartmentId(r.attr("id")),"false"==p&&(Support.status=!1),!0}},SupportUI.setChatStatus=function(e){Support.getPortalProps("showtyping")&&!SupportUI.isfilesharing&&(e=decodeURIComponent(e),SupportUI.embeddiv.find("div#userstatus").html(e))},SupportUI.showMailPopup=function(e){var t=$("#options"),i=t.find("#embmailer");t.removeClass("embmailer").addClass("embmailer"),i.show().prev("ul").hide(),i.find("#mailid").val(Support.getVisitorEmail()).focus().off("keyup").on("keyup",function(e){var t=KeyHandler.getKeyCode(e);$(this).removeClass("erbdr"),13===t&&SupportUI.sendMail()}),clickoutside.bindclick(function(){SupportUI.hideOptions()},"options","optionbtn","",!0)},SupportUI.sendMail=function(){var e=$("#embmailer").find("#mailid"),t=e.val();if(0==Validation.validateRegEx(t,"email"))return e.addClass("erbdr"),!1;Support.sendChatAsMail(Support.getVisitorID(),t)},SupportUI.hideOptions=function(){var e=$("#options");e.is(":visible")&&e.animate({width:"toggle"},350,function(){$("#embmailer").hide().find("input").show().next().hide(),$(this).hide().removeClass("embmailer").find("ul").css({overflow:""}).show()})},SupportUI.getThemeColor=function(){return Support.PROPS.swhbgcolor},SupportUI.updateTheme=function(e){var t=SupportUI.getThemeColor();if(t){var i=getLighterColor(t),r=getDarkerColor(t);$("<style type='text/css'>.drkdclr{background-color:"+t+" !important;border-color:"+t+" !important} a.drkdclr{color:rgb("+r+") !important} a.drkdclr:hover{color:rgb("+r+") !important} .lgtrclr{background-color:rgb("+i+") !important;border-color: rgb("+i+") !important} .flt_drpdn li:hover{background-color:rgb("+i+") !important} .personaldrkclr{border-top:1px solid rgb("+r+") !important} .usrentry input.drkdclr{background-color:rgb("+r+") !important;border-color:rgb("+r+") !important}</style>").appendTo($("head"))}},SupportUI.displayInfo=function(e,t){var i=$("#infomsg");0==i.length&&(i=$("#waitingform")),i.html(e).slideDown(10)},SupportUI.hideInfo=function(){$("#infomsg").hide()},SupportUI.startTimer=function(e){clearTimeout(SupportUI.timervar),SupportUI.timer=e,SupportUI.checkTimer()},SupportUI.checkTimer=function(){if(SupportUI.cfidle=!0,Support.callquitstatus&&this.clearTimer(),SupportUI.timer--,1<SupportUI.timer){var e="<a href='javascript:void(0);' onclick='SupportUI.clearTimer(true)'><span>"+LSResource.getRealValue("common.continue")+"</span></a>",t="<a href='javascript:void(0);' onclick='SupportUI.EndChat()'><span>"+LSResource.getRealValue("common.endnow")+"</span></a>",i=LSResource.getRealValue("chatwindow.endtimer",SupportUI.timer+","+e+","+t),r=$("#infomsg");"block"==r.attr("display")?r.html(i):SupportUI.displayInfo(i,2),SupportUI.timervar=setTimeout(function(){SupportUI.checkTimer()},1e3)}else SupportUI.hideInfo()},SupportUI.clearTimer=function(e){clearTimeout(SupportUI.timervar),SupportUI.timer=-1,SupportUI.cfidle&&(EmbedSound.stop(),SupportUI.hideInfo(),e&&Self.status.send($EmbedManger.getChatID(),NFY_USER_CONTINUE))},SupportUI.handlePushMessage=function(t){-1==t.indexOf("http")&&(t="http://"+t);try{null!=SupportUI.pushwinobj.window?SupportUI.pushwinobj.location.href=t:SupportUI.notifyUrlShare(t)}catch(e){SupportUI.notifyUrlShare(t)}},SupportUI.notifyUrlShare=function(e){e=LSResource.getRealValue("chatwindow.pushpage.alert","<a href='javascript:void(0);' class='drkdclr' onclick='SupportUI.openPushPage(\""+e+"\");return false;'>"+LSResource.getRealValue("common.accept")+"</a>");SupportUI.displayInfo(e)},SupportUI.openPushPage=function(e){SupportUI.pushwinobj=window.open(e),SupportUI.hideInfo()},SupportUI.checkTextEntered=function(e){""!=e.value.trim()&&Support.enablepmsg&&(Support.enablepmsg=!1,SupportUI.prdcttimer=setTimeout(function(){LSMessanger.sendPredictMessage(e.value.trim()),Support.enablepmsg=!0},3e3))},SupportUI.getCookieValue=function(e){return e?LSDB.get(e):""},SupportUI.checkAndShowUI=function(e){var t=SupportUI.getCookieValue("ZLD"+Support.getLiveSupportID()),i=SupportUI.getWaitingCookie(),r=SupportUI.getTriggerCookie();if(r)SupportUI.handleChatTrigger(r);else{if(!t||!t.cid||"float"!=Support.type&&"personal"!=Support.type||e)!i||!Support.isFloat()||isPostMessageSupported()&&Support.isscript?Support.status?(isPostMessageSupported()&&Support.isscript?"float"!=Support.type&&"personal"!=Support.type&&setTimeout(function(){SupportUI.postMessage("api",{})},1):SupportUI.fillUIValues(),SupportUI.populateCampaignLabel(Support.status)):SupportUI.showOfflineStatus(!0):SupportUI.handleWaiting(i);else{var o="common.connecting";Support.setVisitorName(t.name),Support.setVisitorEmail(t.email),Support.setChatID(t.cid),Support.setVisitorQuestion(t.question),Support.attenderimagefkey=t.imagefkey,-1!==t.vid&&(Support.setVisitorID(t.vid),o="common.reconnecting"),Support.setDepartmentId(t.did),Support.setWmsID(t.vwmsid),Support.setAttender(t.attender),Support.setAttenderZUID(t.attenderzuid),Support.attendername=t.attendername,t.uvid&&(Support.uvid=t.uvid),SupportUI.showProcess(LSResource.getRealValue(o)),LSMessanger.setNickName(t.name),LSMessanger.register(CommonUtil.getProductCode(),Support.vwmsid),SupportUI.postMessage("size","enlarge"),SupportUI.embeddiv.find("#msgcnt").hide()}Support.isnewwindow&&setTimeout(function(){SupportUI.postMessage("api",{})},1)}},SupportUI.populateCampaignLabel=function(e){if(SupportUI.isCampaignEnabled()){var t=Support.INTEGPROPS.integinfo[SupportUI.enabledCampaignID].subscribelabel||LSResource.getRealValue("embed.campaign.label");(e?$("#btnaddvisitor"):$("#btnsavemisschat")).after('<input type="checkbox" id="campaign" checked="checked" class="campletter"> <label for="campaign" class="txtelips" title="'+t+'">'+t+"</label>")}},SupportUI.isCampaignEnabled=function(){try{var e=Support.INTEGPROPS.integinfo;if("true"==Support.isfreeplan||!e)return;for(var t in e){SupportUI.enabledCampaignID=t;break}var i=SupportUI.enabledCampaignID;if(i&&"0"==e[i].status)return!1;var r=e[i].listname;return r&&""!==r}catch(e){return!1}},SupportUI.getWaitingCookie=function(){var e=this.getCookieValue("ZLD"+Support.getLiveSupportID()+"WAITING");try{if("window"==PersonalSupport.type)return""}catch(e){}return e},SupportUI.handleWaiting=function(e){if(!Support.isFloat())return!1;SupportUI.embeddiv.find("#msgcnt").hide(),SupportUI.showProcess(),LSMessanger.register(CommonUtil.getProductCode(),e.vwmsid),Support.setWmsID(e.vwmsid),Support.setVisitorID(e.vid),Support.setVisitorName(e.name),Support.setVisitorEmail(e.email),Support.setDepartmentId(e.did),LSMessanger.setNickName(e.name),e.autotrigger&&(Support.isautotrigger=Boolean(e.autotrigger));var t=e.chid;"-1"!==t&&-1!==t&&Support.setChatID(t),SupportUI.showWaitingMessage(),Support.WaitingHandler.intime=e.waitinghandlerprops.intime,Support.WaitingHandler.latency=e.waitinghandlerprops.latency,Support.countWaitingTime(),SupportUI.postMessage("size","enlarge")},SupportUI.fillUIValues=function(e,t){try{if(_WMSDOWN)return}catch(e){}if(Support.status)"personal"===Support.type?($("#personalcnt").css("display","block"),t?PersonalSupport.handleBroadCastMessage(e):PersonalSupport.handleObject()):($("#embedmaindiv").show(),SupportUI.resizequestion||$("body").off("click.focus").on("click.focus",function(){SupportUI.handleClick()}),SupportUI.checkAndResize(SupportUI.embeddiv.find("#question")));else try{SupportUI.embeddiv.find("#offmsg").text(SupportUI.getOfflineMessage()),SupportUI.checkAndResize(SupportUI.embeddiv.find("#offtxtmsg"))}catch(e){}var i=t?e:"";SupportUI.fillAddInfo(i)},SupportUI.resizeWindow=function(){try{var e=$(window).height()||document.body.clientHeight,t=SupportUI.embeddiv;if("float"!==Support.type&&t.css("height",e),Support.status?(SupportUI.setHeight(t.find(".flt_onlescl")),SupportUI.checkAndResize(t.find("#question"))):(SupportUI.setHeight(t.find(".flt_oflescl")),SupportUI.checkAndResize(t.find("#offtxtmsg"))),-1!=Support.getChatID()){var i=document.getElementById("msgcntr");if(i)try{i.scrollTop=i.scrollHeight}catch(e){}var r=SupportUI.embeddiv.find("#msgcntr");if("float"!=Support.type&&"personal"!=Support.type){var o=e-(SupportUI.embeddiv.find("#composer").outerHeight(!0)+SupportUI.embeddiv.find("#windowheader").outerHeight(!0)+SupportUI.embeddiv.find(".usrstatus").outerHeight(!0));r.css("height",o);var p=o-SupportUI.embeddiv.find("#attender").height();SupportUI.embeddiv.find("#msgdiv").css("height",p-2)}}SupportUI.embeddiv.css("visibility","visible").find("#embedcontainer").css("visibility","visible")}catch(e){}},SupportUI.showEndedMessage=function(e,t){var i=e,r=parseInt(Support.srateing);switch(r){case 1:i=LSResource.getRealValue("feedbkresponse.starone");break;case 2:i=LSResource.getRealValue("feedbkresponse.startwo");break;case 3:i=LSResource.getRealValue("feedbkresponse.starthree");break;case 4:i=LSResource.getRealValue("feedbkresponse.starfour");break;case 5:i=LSResource.getRealValue("feedbkresponse.starfive")}if(t){var o=Support.ratingmsgs;o&&o[r]?i=DynamicMsg.fillValues(o[r]):Support.feedbackcomplete&&(i=DynamicMsg.fillValues(Support.feedbackcomplete))}var p='<div id="fdbksdiv" class="zlsfdbk-sucsfulmsg" >'+i+"</div>";SupportUI.embeddiv.find("#sprwinact").html(p);var a=SupportUI.embeddiv.find("#msgcntr").height(),s=50;t||(s=30),SupportUI.embeddiv.find("#msgcntr").height(a+s)},SupportUI.showAgentsOffline=function(){if(-1!==Support.getVisitorID()&&-1!=Support.getChatID()){var e=LSResource.getRealValue("visitorchat.agent.disconnected")+" <a href='javascript:void(0);' class='drkdclr' onclick='SupportUI.EndChat()'>"+LSResource.getRealValue("common.endnow")+"</a>";SupportUI.displayInfo(e,2),_AGENT_ONLINE=!1}},SupportUI.showAgentStatus=function(){var e=!0;for(var t in SUPPORT_REPS)if(0!=SUPPORT_REPS[t].status){e=!1;break}e?SupportUI.showAgentsOffline():SupportUI.showAgentsOnline()},SupportUI.showAgentsOnline=function(){_AGENT_ONLINE||(SupportUI.displayInfo(LSResource.getRealValue("visitorchat.connnecttoagent"),1),setTimeout(function(){SupportUI.hideInfo()},5e3)),_AGENT_ONLINE=!0},SupportUI.toggleDepartmentList=function(e,t){void 0!==e&&""!==e||(e=Support.status);var i=SupportUI.getDepartmentContainer(e),r=i.find("#deptlist"),o=i.find("#selecteddept");"none"==r.css("display")?(r.show(),SupportUI.alignDropDown(r),i.find("#selecteddept").addClass("depsel"),clickoutside.bindclick(function(){SupportUI.hideDepartmentList()},r.attr("id"),o.attr("id"),"",!0)):SupportUI.hideDepartmentList()},SupportUI.getDepartmentContainer=function(e,t){t=e?"deptslct":"offdeptslct";return e&&Support.isautotrigger?$("#embedcontainer").find("#"+t):$("#"+t)},SupportUI.hideDepartmentList=function(){var e=SupportUI.getDepartmentContainer(Support.status);e.find("#deptlist").css("display","none"),e.find("#selecteddept").removeClass("depsel")},SupportUI.selectDepartment=function(e,t,i){var r=(e=$(e)).attr("id"),o=Support.status,p=Support.engaged,a=SupportUI.checkDepartmentStatus(e,!0,t);if(SupportUI.toggleDepartmentList(o,i),o!==Support.status||!Support.status&&p!==Support.engaged){for(var s=SupportUI.embeddiv,n=["name","email","phone","question"],d=0;d<n.length;d++){var u=n[d],l=(r=SupportUI.defaultfieldids[u].split(",")[o?0:1],$.trim(s.find(r).val()));l&&(Support.addinfo[u]=l)}Support.status?"none"==s.find("#onlineembcont").css("display")&&(s.find("#onlineembcont").show(),s.find("#embedcontainer").hide(),SupportUI.checkAndShowFields(),s.find("#msgcnt").show()):(SupportUI.showOfflineStatus(),s.find("#msgcnt").hide(),SupportUI.postMessage("size","enlarge")),SupportUI.fillAddInfo()}a&&(SupportUI.getDepartmentContainer(Support.status).find("#selecteddept").find("span").html(e.attr("name")).attr("deptid",r),SupportUI.handleDepartmentChange(r))},SupportUI.handleDepartmentChange=function(e){if(Support.isautotrigger){Support.setDepartmentId(e),$("#atdeptslct").remove();var t=SupportUI.embeddiv.find("#msgdiv").parent();t.hasClass("upddept")&&t.removeClass("upddept")}},SupportUI.showCaptcha=function(e){var t=CommonUtil.getCaptcha(e);if(null!=t){var i=$("#captcha").attr("purpose",e);i.find("#captchaimg").html(t),i.show(),i.find("#captchatxt").val("").focus(),SupportUI.showMask()}},SupportUI.hideCaptcha=function(){$("#captcha").attr("purpose","").hide(),SupportUI.hideMask()},SupportUI.showMask=function(){$("#opdiv").show()},SupportUI.hideMask=function(){$("#opdiv").hide()},SupportUI.showVideoAudio=function(e){if("float"==Support.type){var t=e.height(),i=$("#msgcntr");t=i.height()-t,i.css("height",t)}},SupportUI.hideVideoAudio=function(){"float"==Support.type&&$("#msgcntr").css("height","")},SupportUI.callOnload=function(){try{EmbedSound.init()}catch(e){}try{KeyHandler.init()}catch(e){}try{Self.status.init()}catch(e){}try{Smiley.init()}catch(e){}SupportUI.resizeWindow();try{$zoho.internal.onload()}catch(e){}},SupportUI.postMessage=function(e,t){if(t){"enlarge"===t&&SupportUI.embeddiv.removeClass("swindow flt_minwdmn").addClass("swindow");var i={type:Support.type,operation:e,value:t};sendPostMessage(i)}},SupportUI.handleTextEntered=function(e){13!=(e=null!=e?e:window.event).keyCode||e.shiftKey||(ie?(e.cancelBubble=!0,e.returnValue=!1):e.preventDefault(),SupportUI.submitVisitorInformation())},SupportUI.checkAndResize=function(e){(e=$(e)).attr("resized")&&SupportUI.resizeTextArea(e,e.attr("usagestatus"))},SupportUI.bindFocus=function(){SupportUI.embeddiv.find("[bind=focus]").off("focus.bind").on("focus.bind",function(){var e=$(this);e.off("focus.bind"),SupportUI.resizeTextArea(e,e.attr("usagestatus"))})},SupportUI.resizeTextArea=function(e,t){if(SupportUI.resizequestion||"online"!==t){e=$(e);var i=SupportUI.getTextAreaHeight(e,t);0!=i&&(e.attr("resized")?e.height(i):e.attr("resized","true").animate({height:i},600,function(){e.css({overflow:""})}))}},SupportUI.getTextAreaHeight=function(e,t,i){var r=0,o=$("#windowheader").outerHeight(!0),p=0,a=SupportUI.embeddiv,s="online"===t?"onlineembcont":"embedcontainer";$("#"+s).find("[purpose=height]").each(function(){var e=$(this);"none"!==e.css("display")&&(p+=e.outerHeight(!0))});var n=e.parent("[quescont=true]");return p+=CommonUtil.getPadding(VERTICAL,n)+n.find(".stylediv").outerHeight(!0),p+=CommonUtil.getPadding(VERTICAL,e),((r=document.body.clientHeight-o-p-CommonUtil.getPadding(VERTICAL,n.parent()))<26||8<a.find("#"+s).find(".usrentry").length)&&(r="26"),r},SupportUI.setHeight=function(e){if("float"!==Support.type){e=$(e);var t,i=$("#windowheader").outerHeight(!0),r=0;SupportUI.embeddiv;e.siblings("[purpose=height]").each(function(){var e=$(this);"none"!==e.css("display")&&(r+=e.outerHeight(!0))}),t=document.body.clientHeight-i-r-CommonUtil.getPadding(VERTICAL,e)-1,e.height(t)}},SupportUI.loadPostMessage=function(){window.addEventListener?addEventListener("message",SupportUI.handlePostMessage,!1):attachEvent("onmessage",SupportUI.handlePostMessage)},SupportUI.handleDeparmentChange=function(t){try{var e=Support.status,i=e?"question":"offtxtmsg",r=SupportUI.getDepartmentContainer(e);try{r.show().find("#deptlist").find("li").each(function(){var e=$(this);-1!=e.attr("uniname")&&e.show()})}catch(e){}if(SupportUI.checkAndResize(SupportUI.embeddiv.find("#"+i)),null!=t&&-1!=t){var o=r.find("#deptlist");if($.isArray(t))o.find("li").each(function(){var e=$(this);-1==$.inArray(e.attr("uniname"),t)&&$(this).hide()});else{if("online.department"===t&&Support.status){o.find("li[status=false]").hide();var p=o.find("li[status=true]");1===p.length&&(t=$(p[0]).attr("uniname"))}var a=$("#deptlist").find('li[uniname="'+t+'"]');if(1==a.length){Support.setDepartmentId(a.attr("id")),r.hide(),SupportUI.checkAndResize(SupportUI.embeddiv.find("#"+i));var s=a.attr("status");Support.status&&"false"==s&&(Support.status=!1,SupportUI.showOfflineStatus())}}}}catch(e){}},SupportUI.checkButton=function(e){var t=$("#"+e);return!t.attr("disabled")&&(t.attr("disabled","disabled").addClass("disable-btn"),!0)},SupportUI.enableButton=function(e){$("#"+e).removeAttr("disabled").removeClass("disable-btn")},SupportUI.handlePostMessage=function(e){try{n=JSON.parse(e.data)}catch(e){return}var t=n.operation;if(r=n.value)if("apivalues"==t)SupportUI.handleApiData(r);else if("broadcast"==t)SupportUI.handleApiData(r,!0);else if("sendmessage"==t){var i=Support.getChatID(),r=n.value;-1==i||Support.callquitstatus||Message.send(i,r,"")}else if("trackchat"==t){if(-1!==Support.getChatID())return;Support.handleCallbacks("visitor.chattrigger",{}),Support.setVisitorID(-1),Support.setAttender(r.attender),Support.setChatID(r.chid),Support.setDepartmentId(r.department),Support.setVisitorEmail(r.email),Support.setVisitorName(r.name),Support.vwmsid=r.vwmsid,Support.uvid=r.uvid,Support.attendername=r.attendername,Support.attenderimagefkey=r.image_fkey,Support.setCookie(!0),document.location.href=document.location.href}else if("utsconnect"===t){if(-1===Support.getVisitorID()&&-1!==Support.getChatID()&&(SupportUI.postMessage("closechat","true"),Support.removeChatCookie(),setTimeout(function(){document.location.reload()},100)),-1!==Support.getChatID()&&!r.isnewconnection)return;-1!==Support.getChatID()&&-1!==Support.getVisitorID()&&r.isnewconnection&&Support.rejoinVisitorInUTS();var o=Support.addinfo.name||Support.getVisitorName(),p=Support.addinfo.email||Support.getVisitorEmail(),a=Support.addinfo.phone||Support.getVisitorPhone();o&&!SupportUI.isGuestToken(o)||!r.name||Support.setVisitorName(r.name),!p&&r.email&&Support.setVisitorEmail(r.email),!a&&r.phone&&Support.setVisitorPhone(r.phone)}else if("triggers"===t){var s=r.type,n=r.data;s===TRIGGER_SEND_MESSAGE?(EmbedSound.play("smessage"),SupportUI.handleChatTrigger(n),Support.handleCallbacks("visitor.chattrigger",{})):s===TRIGGER_PLAY_TUNE&&EmbedSound.play(n.tune)}else if("focuscomposer"===t)r.focus&&Support.composer&&Support.composer.focus();else if("ZSupportCallback"===t){if("submit"==r)SupportUI.postMessage("iscloseicon",!0);else if("cancel"==r)SupportUI.postMessage("iscloseicon",!0),document.location.reload();else if("close"==r){if("embed"==Support.type)return void window.close();SupportUI.postMessage("closechat",!0)}}else"checkembedstatus"===t&&Support.checkEmbedStatus()},SupportUI.handleChatTrigger=function(e){if(!Support.isautotrigger)if(Support.status){if(-1===Support.getChatID()&&-1===Support.getVisitorID()){Support.isautotrigger=!0,SupportUI.postMessage("size","enlarge"),$("#waitingform,#personalcnt").hide(),SupportUI.embeddiv.show().find("#onlineembcont,#embedfrstdiv,#msgcnt").hide();var t=e.attenderdetails;t&&Support.setAttender(t.attender),Support.showChatUI(),Support.uvid=Support.uvid?Support.uvid:e.uvid,e.name&&!Support.addinfo.name&&(Support.addinfo.name=e.name),e.email&&!Support.addinfo.email&&(Support.addinfo.email=e.email),e.cinfo&&!Support.getCustomerInfo()&&Support.setCustomerInfo(e.cinfo);var i={sender:-1,dname:e.sendername,msg:e.message};SupportUI.embeddiv.find("#msgcntr").html(SupportUI.getTriggerHtml(e)),Message.formatAndDisplay(i),SupportUI.setTriggerCookie(e)}}else SupportUI.handleFailure()},SupportUI.getTriggerCookie=function(){if(Support.isFloat())return SupportUI.getCookieValue("ZLDTRIGGER"+Support.getLiveSupportID())},SupportUI.setTriggerCookie=function(e){clearTimeout(SupportUI.triggercookietimer);var t=Support.getVisitorName()||Support.addinfo.name,i=Support.getVisitorEmail()||Support.addinfo.email,r={sendername:e.sendername,message:e.message,uvid:Support.uvid,name:t,email:i,cinfo:Support.getCustomerInfo()};e.attenderdetails&&(r.attenderdetails=e.attenderdetails);LSDB.set("ZLDTRIGGER"+Support.getLiveSupportID(),r,31e4),SupportUI.triggercookietimer=setTimeout(function(){SupportUI.setTriggerCookie(e)},3e5)},SupportUI.deleteTriggerCookie=function(){clearTimeout(SupportUI.triggercookietimer),Support.removeCookie("ZLDTRIGGER"+Support.getLiveSupportID())},SupportUI.getTriggerHtml=function(e){var t=e.sendername,i=e.attenderdetails,r="-1"===Support.getDepartmentId()?"upddept":"",o="";"true"===Support.PROPS.icphoto&&(o=i&&i.imagefkey?(Support.attenderimagefkey=i.imagefkey,'<img src="'+SupportUI.getPhotoURL(i.attender)+'" height="35" width="35"/>'):"<span class='spritebg'></span>");var p=LSResource.getRealValue("common.connected");i&&i.aboutme&&(p=i.aboutme);var a="<div id='attender'><div class='vistname'>"+o+"<div class='vistinfo'><span class='attname'>"+t+"</span><span class='attabout'>"+p+"</span></div></div></div>";return a+="<div class='msgdiv "+r+"'><div id='msgdiv' class='msgwrapper'>",a+="<div id='msgques' class='visquest'><div class='title' style='display:none' joinproactive='show'>"+LSResource.getRealValue("common.question")+"</div>",a+="<div class='msg' id='transques'> "+LSResource.getRealValue("infomsg.chatwith",t)+"</div><div class='time'></div></div>",a+="</div></div>"},SupportUI.handlePickUpForTrigger=function(){var e=SupportUI.embeddiv,t=Support.attendername;e.find(".vistname > span").removeClass("spritebg").html('<img src="'+SupportUI.getPhotoURL(Support.getAttender(),Support.getAttenderZUID())+'" height="35" width="35"/>'),e.find(".attname").text(t);var i=LSResource.getRealValue("common.connected");Support.attenderaboutme&&(i=Support.attenderaboutme),e.find(".attabout").text(i),e.find("#transques").text(LSResource.getRealValue("infomsg.chatwith",t))},SupportUI.handleApiData=function(e,t){if(e){var i=Support.addinfo;if(e.forcefloatingwindow&&(i.forcefloatingwindow=e.forcefloatingwindow),null!=e.name&&(i.name=e.name),null!=e.email&&(i.email=e.email),null!=e.question&&(i.question=e.question),null!=e.phone&&(i.phone=e.phone),null!=e.department){var r=e.department;"personal"==Support.type&&Support.status?PersonalSupport.handleDeptChange(r):SupportUI.handleDeparmentChange(r);for(var o=Support.deptlist.length,p=0;p<o;p++)-1==r.indexOf(Support.deptlist[p].DNAME)&&(Support.deptlist[p].isClient=!1)}i.ismaximized=e.ismaximized,"1"==e.ismaximized&&(i.ismaximized=!0),e.agent&&Validation.validateRegEx(e.agent,"email")&&(Support.attenderemail=e.agent),e.info&&Support.setCustomerInfo(e.info);var a,s=e.requestid;if(null==s||isNaN(s)||Support.setEXID(s),e.authkey&&(Support.authkey=e.authkey),e.title){document.title=e.title;var n=$("#windowheader");1===n.length&&(n.text(e.title),"[object Object]"===Object.prototype.toString.call(e.titlestyle)&&n.css(e.titlestyle))}if(e.messagehint&&(i.messagehint=e.messagehint),e.clogo){var d=$("#defaultlogo"),u=e.cwebsite;d.length&&(d.remove(),u?$("#windowheader").append("<a class='flt_lgmn' id='curl' target='_blank'><img id = 'cmlogo'></a>"):$("#windowheader").append("<img id = 'cmlogo'>"));var l=$("#cmlogo"),c=$("#curl");l.length&&(l.attr("src",e.clogo),u&&!c.length&&(l.wrapAll("<a class='flt_lgmn' id='curl' target='_blank'>"),c=$("#curl"))),u&&c.length&&(u=-1==u.indexOf("http")?"http://"+u:u,c.attr("href",u))}if(e.defaultdepartment&&-1!=e.defaultdepartment)if(Support.status&&"personal"==Support.type)PersonalSupport.defaultdept=e.defaultdepartment;else 1==(a=SupportUI.getDepartmentContainer(Support.status).find("#deptlist").find('li[uniname="'+e.defaultdepartment+'"]')).length&&"none"!=a[0].style.display&&(SupportUI.selectDepartment(a,!0),SupportUI.hideDepartmentList());if(e.chatmessages&&"object"==typeof e.chatmessages){var m=e.chatmessages;m.waiting&&(Support.waitmsg=m.waiting),m.complete&&(Support.thanksmsg=m.complete),m.feedbackcomplete&&(Support.feedbackcomplete=m.feedbackcomplete),m.offline&&(Support.offlinemessage=m.offline),m.offlinecomplete&&(Support.offlinerespmsg=m.offlinecomplete),m.busy&&(Support.missedmessage=m.busy),m.busycomplete&&(Support.missedrespmsg=m.busycomplete),m.engaged&&(Support.engagedmessage=m.engaged),m.engagedcomplete&&(Support.engagedrespmsg=m.engagedcomplete),Support.ratingmsgs={};for(p=1;p<=5;p++)m["feedbackcomplete"+p]&&(Support.ratingmsgs[p]=m["feedbackcomplete"+p]);m.prechatmessage&&SupportUI.embeddiv.find("#msgcnt").text(m.prechatmessage),m.agentinfomessage&&"personal"===Support.type&&(PersonalSupport.umtxt=m.agentinfomessage)}if(e["chat.waitinghandler"]&&!t&&(Support.isapiwaitinghandler=e["chat.waitinghandler"]),e.callback)if("chat.waitinghandler"in(a=e.callback)){var f=a["chat.waitinghandler"];if("-1"==f&&(f=null),Support.handleWaitingMessage(f),t)return}if((e.customfield||e.clearcustomfield)&&(e.customfield?(Support.customfield=e.customfield,SupportUI.handleCustomField()):SupportUI.checkAndRemoveCustomField(e.clearcustomfield),t))return void SupportUI.resizeWindow();e.chatstart&&-1==Support.getVisitorID()&&t&&(e.autochat=i.autochat="true"),e.chatend&&-1!==Support.getChatID()&&t&&SupportUI.EndChat(),e.uvid&&(Support.uvid=e.uvid),void 0!==e.forward&&(Support.chatforward=e.forward);var S=e["rating.visible"],g=e["feedback.visible"];(S||g)&&(Support.iscustomrating=!0,S&&(Support.israting="hide"!=S),g&&(Support.isfeedback="hide"!=g))}var h=SupportUI.getWaitingCookie();if(h&&Support.isFloat())SupportUI.handleWaiting(h);else{var v=SupportUI.getCookieValue("ZLD"+Support.getLiveSupportID());(!v||v&&!v.cid||SupportUI.isforceshow)&&(SupportUI.fillUIValues(e,t),SupportUI.resizeWindow())}},SupportUI.handleCustomField=function(){var e=Support.customfield;e&&(SupportUI.embeddiv.removeClass("swndw-iframe").find("#elemcont").addClass("lvs_cstmscrol"),SupportUI.embeddiv.find("#offelemcont").addClass("lvs_cstmscrol"),$.each(e,function(e,t){var i=getEscapedText(t.name||"");if(0!=SupportUI.embeddiv.find("[customname='"+i+"']").length)return!0;var r=$(SupportUI.getCustomHTML(t));if(!r.length)return!0;var o=t.style;"label"===t.type&&"[object Object]"===Object.prototype.toString.call(o)&&r.find("div").removeClass().css(o);var p=Support.status?SupportUI.embeddiv.find("#onlineembcont .flt_onlescl"):SupportUI.embeddiv.find("#offelemcont .flt_oflescl"),a=t.before||t.after||"";if(a){var s,n=SupportUI.defaultfieldids;return(s=n.hasOwnProperty(a)?p.find('div.usrentry:has("'+n[a]+'")'):p.find('div[customname="'+a+'"]'))&&0<s.length&&s[t.before?"before":"after"](r),!0}"label"===t.type?r.insertBefore(p.find("div.usrentry:first")):r.insertBefore(p.find('div.usrentry:has("#question,#offtxtmsg")'))}),SupportUI.checkAndShowFields(),Support.status?(SupportUI.checkAndResize(SupportUI.embeddiv.find("#question")),SupportUI.postMessage("size","enlargeifvisible"),SupportUI.embeddiv.find("#msgcnt").hide(),SupportUI.embeddiv.find("#onlineembcont").find(".flt_minwnd").removeClass("flt_minwnd"),SupportUI.resizequestion=!0,SupportUI.embeddiv.find("#btnaddvisitor").parent().show()):SupportUI.checkAndResize(SupportUI.embeddiv.find("#offtxtmsg")))},SupportUI.checkAndRemoveCustomField=function(e){var t=SupportUI.embeddiv;if($.isEmptyObject(e))t.find("[customcontainer=true]").remove();else for(var i=0;i<e.length;i++)t.find("[customname='"+e[i]+"']").remove()},SupportUI.checkAndShowFields=function(){var t=SupportUI.embeddiv.find("[customcontainer=true]");$.each(t,function(e,t){var i=$(t),r=i.attr("visibility");if(i.hide(),"both"==r)return i.show(),!0;Support.status&&"online"==r?i.show():Support.status||"offline"!=r||i.show()}),t.find("input[type=text],textarea").off().on("blur",function(){var e=$(this);SupportUI.handleInputChange(e.attr("id"),e.val())}),t.find("input[type=radio],input[type=checkbox]").off().on("change",function(){var e=$(this).attr("name");SupportUI.handleInputChange(e,t.find("input[name='"+e+"']:checked").map(function(){return this.id}).get())})},SupportUI.getCustomHTML=function(e){var t=e.type;t=-1!=$.inArray(t,SupportUI.customtypes)?t:"text";var i=getEscapedText(e.name||""),r=getEscapedText(e.hint)||i,o=e.maxlength||30,p="true"===e.required||!0===e.required,a=e.visibility||"both",s=getEscapedText(e.default||"");function n(){return p?'<div class="stylediv"></div>':""}if(/^_default./.test(i)){var d=i.replace("_default.",""),u=SupportUI.defaultfieldids;if(u[d]){var l=Support.status?"onlineembcont .flt_onlescl":"offelemcont .flt_oflescl",c=SupportUI.embeddiv.find("#"+l).find(u[d]);if("personal"===Support.type)c=$("#zlspscont").find('[info="'+d+'"]');if(r=getEscapedText(e.hint),c.attr("placeholder",r),SupportUI.placeholders[d]=r,/^department$/.test(d)&&SupportUI.getDepartmentContainer(Support.status).find("#selecteddept > span").text(r),/^(name|email|phone)$/.test(d)&&e.hasOwnProperty("required")){if("email"===d&&!Support.status)return"";c.attr("mandatory",p).after(n()).next().remove(),"personal"===Support.type&&(PersonalSupport.object[d+"mandatory"]=p)}}return""}if("personal"===Support.type)return"";function m(){return'class="usrentry mandatory" customcontainer="true" customname="'+i+'" visibility="'+a+'" style="display:none" purpose="height"'}function f(){return'placeholder="'+r+'" id="'+i+'" name="'+i+'" checktype="'+t+'" value="'+s+'" mandatory="'+p+'" autocomplete="off" maxlength="'+o+'" customfield="true" mandatorycheck="'+r+'"'}if(/^(number|text|email|url|percentage|decimal)$/.exec(t))return"<div "+m()+'><input type="text" '+f()+' class="txt" />'+n()+"</div>";if("textarea"==t)return"<div "+m()+"><textarea "+f()+">"+s+"</textarea></div>";if("label"===t){var S=e.text;return S?$("<div "+m()+"></div>").append($('<div class="flt_stinfomsg lgtrclr" customfield="true"></div>').html(S)):""}var g=e.options;if(!g)return"";if("checkbox"==t||"radio"==t){var h=" <div "+m()+"><div "+f()+' class="custom"><div class="customtitle">'+getEscapedText(r)+n()+'</div><div class="flt_rbtsb flt_rbtmn"><div>CONTENT</div></div></div></div>',v='<input class="rdobtn" name="'+i+'" id="VALUE" type="'+t+'" SELECTED/><label for="VALUE">TEXT</label>',I="";return $.each(g,function(e,t){I+=v.replace(/VALUE/g,getEscapedText(t.value)).replace(/TEXT/g,getEscapedText(t.text)).replace(/SELECTED/g,t.checked?"checked=true":"")}),h.replace(/CONTENT/g,I)}if("selectbox"==t){h='<div id="'+i+'parent"><div '+m()+"><div "+f()+' class="custdrpdwn"><div class="drptxt" onclick="SupportUI.toggleCustomList(this,\''+i+'\',event)" id="'+i+'curr"><em class="drp_arw"></em><span selecthint="true">CURRVALUE</span></div><div class="flt_drpdn" style="display:none"><ul>LIST</ul></div>'+n()+"</div></div></div>";var U='<li onclick="SupportUI.selectCustomList(this)" id="VALUE" name="'+i+'"><div><em></em><span>TEXT</span></div>';I="";return $.each(g,function(e,t){var i=getEscapedText(t.text);I+=U.replace(/VALUE/g,getEscapedText(t.value)).replace(/TEXT/g,i),t.selected&&(s=i)}),h.replace(/LIST/g,I).replace(/CURRVALUE/g,s||r)}},SupportUI.handleInputChange=function(e,t){var i={val:t,name:e};Support.handleCallbacks("custom.field",i)},SupportUI.selectCustomList=function(e){obj=$(e);var t=obj.parents("div.flt_drpdn");t.prev().find('span[selecthint="true"]').html(obj.find("span").html()),this.handleInputChange(obj.attr("name"),obj.attr("id")),t.hide()},SupportUI.toggleCustomList=function(e,t,i){"block"==(e=(e=$(e)).next()).css("display")?e.hide():(e.show(),SupportUI.alignDropDown(e),clickoutside.bindclick(function(){e.hide()},t+"curr",t+"parent",i,!0))},SupportUI.alignDropDown=function(e){e.removeClass("dpdrp_top");var t=e.outerHeight(!0);e.offset().top-$("#windowheader").height()+t>e.parents("[handle=parent]").outerHeight(!0)&&e.css("top",-t+"px")},SupportUI.checkCustomFields=function(){var f=Support.visitorinfo.CINFO=Support.visitorinfo.CINFO||{},e=Support.status?"onlineembcont":"embedcontainer",t=$("#"+e).find("[customcontainer=true]").find("[customfield=true]");if(0==t.length)return!0;var S=0;return $.each(t,function(e,t){var i=$(t),r=i.attr("checktype"),o="true"==i.attr("mandatory"),p=i.attr("id"),a=i.parents(["customcontainer=true"]).attr("visibility");if(Support.status&&"offline"==a)return S++,!0;if(!Support.status&&"online"==a)return S++,!0;if("radio"==r||"checkbox"==r){var s=i.find("input:checked");p=i.attr("name");var n=[];return $.each(s,function(e,t){n.push($(t).attr("id"))}),0==n.length?(o?SupportUI.displayError(i):S++,!0):(f[p]=n.join(","),S++,!0)}if("selectbox"==r){var d=i.attr("mandatorycheck"),u=i.parent(),l=u.find("span[selecthint=true]").html();return d==l?o?SupportUI.displayError(u.find(".drptxt")):S++:(f[p]=l,S++),!0}var c=i.val();if((o||c)&&0==Validation.validateRegEx(c,SupportUI.customvalidateobj[i.attr("checktype")]))return SupportUI.displayError(i),!0;if(!c)return S++,!0;var m=i.attr("maxlength");if(c.length>m)return SupportUI.displayError(i),!0;S++,f[p]=c}),S==t.length},SupportUI.showProgress=function(e,t,i){this.isfilesharing=!0;LSResource.getRealValue("infomsg.sharingfiles");e&&LSResource.getRealValue("infomsg.filesharing",[t,i])},SupportUI.clearProgress=function(){this.isfilesharing=!1,SupportUI.embeddiv.find("#embedcontainer").find("#userstatus").html("")},SupportUI.submitMessage=function(e,t){13==KeyHandler.getKeyCode(e)&&("btnaddvisitor"==t?SupportUI.submitVisitorInformation():"btnsavemisschat"==t&&SupportUI.leaveMessage())},SupportUI.handleCaptcha=function(){if("-1"!=Support.getChatID()){var e=Support.callbackargs;LSMessanger.sendMessage.apply(null,e)}else Support.addVisitor()},SupportUI.getCaptchaValue=function(){var e=$("#captcha");if("block"==e.css("display")){var t={};return t[e.attr("purpose")]=e.find("#captchatxt").val(),t}},SupportUI.handleClick=function(e){SupportUI.resizequestion||"-1"===Support.getDepartmentId()||-1!==Support.getChatID()||-1!==Support.getVisitorID()?$("body").off("click.focus"):SupportUI.embeddiv.find("#question").focus()},SupportUI.EndChat=function(){CurrentPortal.isInteg(LDINTEG_ZOHOSUPPORT)||SupportUI.showFeedback(),Support.quit()},window.onresize=function(){SupportUI.resizeWindow()},SupportUI.getOfflineMessage=function(){for(var e=""+Support.getDepartmentId(),t=Support.getDepartmentList(),i=!1,r=!1,o=0;o<t.length;o++){var p=t[o];""+p.STATUS=="true"&&(r=!0),"-1"!==e&&p.ID!==e||""+p.ENGAGED!="true"||(i=!0)}return i?Support.engagedmessage?DynamicMsg.fillValues(Support.engagedmessage):LSResource.getRealValue(1<t.length&&r?"embed.engagedmsg_multidept":"embed.engagedmsg"):Support.offlinemessage?DynamicMsg.fillValues(Support.offlinemessage):LSResource.getRealValue(1<t.length&&r?"embed.offlinemsg_multidept":"embed.offlinemsg")},SupportUI.focusTextField=function(e){$("head").append('<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">'),SupportUI.embeddiv.find("#"+e).find("input:first").trigger("click").focus()},SupportUI.isHandHeldDevice=function(){return!!/Android|webOS|iPhone|iPad|iPod|BlackBerry|BB10|IEMobile|Opera Mini/i.test(navigator.userAgent)},SupportUI.handleEndSupport=function(e){var t=$("#embedcontainer").find(".flcontainer"),i=t.find("#msgcntr"),r=t.find("#msgdiv"),o=parseInt(i.css("height")),p=parseInt(r.css("height")),a=Support.visitorinfo.EMAIL||"";t.find("#composer").remove(),r.find(".inf_msg").parents(".agntcont").remove(),t.find("#attender").find(".attabout").remove(),t.find("#msgcntr").removeClass("endsupt_main").addClass("endsupt_main");var s=!CurrentPortal.isInteg(LDINTEG_ZOHOSUPPORT)&&Support.getIconStatus("icmail"),n=(Support.getIconStatus("icfeedback")||Support.iscustomrating)&&(Support.israting||Support.isfeedback);if(Support.israting||Support.isfeedback||SupportUI.postMessage("iscloseicon",!0),n&&s)var d='<div class="end_chtdiv"><div id="endmailstatus" class="endtrn_mail"></div><div class="end_txtdiv"><p class="aftr_img cht_img">'+LSResource.getRealValue("chat.end.message")+',<span id="restartchat">'+LSResource.getRealValue("common.startchat")+'.</span></p></div><div class="end_exfeld"><p class="aftr_img fedbck_img" id="submitfeedback" title="'+LSResource.getRealValue("common.submitfeedback")+'">'+LSResource.getRealValue("common.submitfeedback")+'</p><p class="aftr_img emil_img" id="emailtranscript" title="'+LSResource.getRealValue("common.emailtranscript")+'">'+LSResource.getRealValue("common.emailtranscript")+'</p></div><div class="end_emaildiv" style="display:none;"><em class="spritebg" id="endbackdiv"></em><p>'+LSResource.getRealValue("common.emailtranscript")+'</p><input type="text" id="endtranscriptmail" placeholder="'+LSResource.getRealValue("endchat.email.placeholder")+'" value="'+a+'"/></div></div>';else if(n)d='<div class="end_chtdiv"><div id="endmailstatus" class="endtrn_mail"></div><div class="end_txtdiv"><p class="aftr_img info_img">'+LSResource.getRealValue("chat.end.message")+'</p></div><div class="end_exfeld"><p class="aftr_img fedbck_img" id="submitfeedback" title="'+LSResource.getRealValue("common.submitfeedback")+'">'+LSResource.getRealValue("common.submitfeedback")+'</p><p class="aftr_img cht_img" id="restartchat"><span class="strt_cht">'+LSResource.getRealValue("common.chatagain")+"</span></p></div></div>";else if(s)d='<div class="end_chtdiv"><div id="endmailstatus" class="endtrn_mail"></div><div class="end_txtdiv"><p class="aftr_img fedbck_img">'+SupportUI.getEndSupportThanksMessage()+'</p></div><div class="end_exfeld"><p class="aftr_img cht_img" id="restartchat"><span class="strt_cht">'+LSResource.getRealValue("common.chatagain")+'</span></p><p class="aftr_img emil_img" id="emailtranscript" title="'+LSResource.getRealValue("common.emailtranscript")+'">'+LSResource.getRealValue("common.emailtranscript")+'</p></div><div class="end_emaildiv" style="display:none;"><em class="spritebg" id="endbackdiv"></em><p>'+LSResource.getRealValue("common.emailtranscript")+'</p><input type="text" id="endtranscriptmail" placeholder="'+LSResource.getRealValue("endchat.email.placeholder")+'" value="'+a+'"/></div></div>';else if(!s&&!n)d='<div class="end_chtdiv ony_endsupt"><div class="end_txtdiv"><p class="aftr_img cht_img" style="margin-top: 2px;">'+SupportUI.getEndSupportThanksMessage()+'<p style="margin-top: 5px;">'+LSResource.getRealValue("common.startyourchat",'<span class="strt_cht" id="restartchat">'+LSResource.getRealValue("common.chat")+"</span>")+"</p></p></div></div>";t.append(d),t.find(".end_chtdiv").animate({"max-height":"300px"},200,function(){var e=$(this),t=e.height()-40;e.css({overflow:"visible"}),i.animate({height:o-t},200,function(){$(this).scrollTop(i[0].scrollHeight)}).css({overflow:"auto"}),r.animate({height:p-t},200)}),SupportUI.handleEndChatUIClick(t,e)},SupportUI.getEndSupportThanksMessage=function(){var e="embed.thanksmsg.noratingandfeedback";return e=Support.thanksmsg||LSResource.getRealValue(e),LSResource.getRealValue(DynamicMsg.fillValues(getUnescapedText(e)))},SupportUI.handleEndChatUIClick=function(t,e){var o=Support.getChatID();t.find("#submitfeedback").on("click",function(){SupportUI.showFeedback(e.msg,o)}),t.find("#emailtranscript").on("click",function(){$(this).parent().fadeOut(200,function(){$(this).parent().find(".end_emaildiv").fadeIn(200).find("input").focus()})}),t.find("#endbackdiv").on("click",function(){$(this).parent().fadeOut(200,function(){$(this).parent().find(".end_exfeld").fadeIn(200)})}),t.find("#restartchat").on("click",function(){var e=Support.visitorinfo;Support.callquitstatus=!1,Support.visitorinfo.CHID=-1,Support.visitorinfo.ID=-1,LSMessanger.sid=void 0,_JOINED=!1,Support.ismanualaction=!0,SupportUI.checkAndAddVisitor(e.NAME,e.EMAIL,e.QUES,e.DEPARTMENT_ID,e.ATTENDER,!1,e.PHONE),t.hide()}),t.find("#endtranscriptmail").on("keyup",function(e){var t=e.keyCode||e.which,i=$(this);if(i.removeClass("bdrbot_red"),13==t){var r=i.val();if(!Validation.validateRegEx(r,"emails"))return void i.addClass("bdrbot_red");Support.sendChatAsMail(Support.getVisitorID(),r,o,!0)}})},SupportUI.isSufficeSpace=function(){return 450<=window.screen.availWidth&&554<=window.screen.availHeight},SupportUI.repopulateDepartmentList=function(e){for(var t="<ul>",i=Support.deptlist,r=0;r<i.length;r++){var o=i[r];t+=SupportUI.getDepartmentTemplate(o.ID,o.NAME,o.DNAME,o.STATUS,o.ENGAGED)}t+="</ul>";var p=SupportUI.getDepartmentContainer(e).find("#deptlist");p.empty(),p.html(t)},SupportUI.getDepartmentTemplate=function(e,t,i,r,o){var p="dep_off";return r&&(p="dep_on"),"<li onclick='SupportUI.selectDepartment(this,\"\",event)' id='"+e+"' name='"+i+"' title='"+i+"' status='"+r+"' engaged='"+o+"' uniname='"+t+"' ><div><em class='"+p+"'></em><span>"+i+"</span></div></li>"};function Message(){}var myMsgObj=new Object;Message.presender="",Message.trim=function(e){try{e=(e=(e=(e=(e=(e=e.replace(/<p>/gi,"")).replace(/<\/p>/gi,"")).replace(/<a/gi,"<a target='_blank'")).replace(/\n/gi,"<br>")).replace(/[\n\r]/gi,"<br>")).replace(/^\s*$/gi,"")}catch(e){}return e},Message.format=function(e){try{e=(e=(e=" "+e).replace(/((?:href|src)=["']?)?((https?:\/\/(?:www\.)?|www\.)[a-z0-9][^@]*?)(?=&quot;|&#x27;|&lt;|[\s"'<]|$)/gi,function(e,s,t,a){var i="www."===a.toLowerCase()?"http://"+t:t;return s?e:'<a href="'+getUnescapedText(i)+"\" target='_blank'>"+t+"</a>"})).replace(/(=['"])?([a-z0-9]([a-z0-9_\-+\.]*)@([a-z0-9_\-\.]*)(\.[a-z]{2,3}(\.[a-z]{2}){0,2}))/gi,function(e,s,t){return s?e:"<a href='mailto:"+t+"' class='updatedata' purpose='email''>"+t+"</a>"})}catch(e){}return e},Message.getDisplayContent=function(e){return e=Smiley.replace(e),e=Message.trim(e),e=Message.format(e)},Message.isLocalUser=function(e){return e==myMsgObj.sender},Message.isHeader=function(e,s){return!(!s||s==Message.presender)},Message.isSameBrowser=function(e){return!e||e==LSMessanger.getSid()},Message.send=function(e,s,t){var a=(new Date).getTime();this.displaySendMessage(e,s,t,a),LSMessanger.sendMessage(e,s,t,a)},Message.displaySendMessage=function(e,s,t,a){s=HtmlTag.makeItReadable(s),myMsgObj.chid=e,myMsgObj.msg=s,myMsgObj.scroll=!0,myMsgObj.uniqueid=a,null!=t&&""!=t&&(myMsgObj.msg="<span style='"+t+"'>"+s+"</span>"),Message.formatAndDisplay(myMsgObj)},Message.formatAndDisplay=function(e){try{var s=!1,t=e.msg,a=e.sender,i=e.mod;try{s=null==e.scroll||e.scroll}catch(e){}if(t=Message.getDisplayContent(t),null!=i&&"att"==i?(t=Message.constructAttUrl(e),Message.displayInfo(t,e.sender)):(e.msg=t,t=Message.getMessageBlock(e),Message.display(t,s)),SupportUI.clearTimer(),e.dname&&!Message.isLocalUser(a)){var r=LSResource.getRealValue("common.says.$1",getUnescapedText(e.dname));Message.handleBlinkTitle(r)}Message.presender=a}catch(e){}},Message.getMessageClass=function(e,s){return Message.isLocalUser(e)?"vistcont lgtrclr"+(s?" vistct_sb":""):"agntcont"+(s?" agntct_sb":"")},Message.getMessageBlock=function(e){var s="";try{s=e.msg,sender=e.sender;var t=MyDate.getHoursandMin((new Date).getTime(),!0,"bclient");if("CT_INF_MSG"==sender)s='<div class="inf_msg">'+s+"</div>";else{var a=!1,i=getEscapedText(e.dname);SupportUI.isGuestToken(i)&&(i=LSResource.getRealValue("common.you")),Message.isHeader("",sender)||(t=""),Message.presender&&Message.presender===sender&&(a=!0,i=""),s=Message.getMessageHTML(Message.getMessageClass(sender,a),i,s,t,e.uniqueid)}}catch(e){}return s},Message.getMessageHTML=function(e,s,t,a,i){return"<div class='"+e+"' id='"+(i||"")+"'><div class='title'>"+s+"</div><div class='msg'>"+t+"<div class='time'>"+a+"</div></div></div>"},Message.displayInfo=function(e,s){e='<div class="inf_msg">'+e+"</div>";var t=this.getMessageHTML(Message.getMessageClass(s,Message.presender&&Message.presender===s),"",e,"");Message.display(t,!0)},Message.formatQuestion=function(e,s){if(null!=e){var t=e.msg,a=MyDate.getHoursandMin(e.time,!0,"bclient");SupportUI.embeddiv.find("#msgques").html("<div class='title'>Question</div><div class='msg'>"+t+"</div><div class='time'>"+a+"</div>")}},Message.formatAndDisplayInfo=function(e,s,t){var a="",i=s.mode;if("QUESTION"!=i){var r="";if("INVITE"==i){var n=s.type,o=(d=s.opruser).dname;if("audio"==n)a=LSResource.getRealValue("transcript.info.visitor.requestaudiochat",o);else if("video"==n)a=LSResource.getRealValue("transcript.info.visitor.requestvideochat",o);else if("meeting"==n){var l=s.opr;a=d.wmsid==myMsgObj.sender?LSResource.getRealValue("transcript.info.sameuser.sharedesktop")+" <a href='"+s.start_url+"' target='_blank'>"+LSResource.getRealValue("chatwindow.meeting.share.now")+"</a>":"request"==l?LSResource.getRealValue("chatwindow.meeting.request",o)+" <a href='"+s.start_url+"' target='_blank'>"+LSResource.getRealValue("chatwindow.meeting.share.now")+"</a>":LSResource.getRealValue("chatwindow.share.screen",o)+" <a href='"+s.join_url+"' target='_blank'>"+LSResource.getRealValue("chatwindow.meeting.joinnow")+"</a>"}}else if("ACCEPT"==i){n=s.type;var c=s.userdname;"audio"==n?a=LSResource.getRealValue("transcript.info.visitor.acceptaudiochat",c):"video"==n?a=LSResource.getRealValue("transcript.info.visitor.acceptvideochat",c):"desktop"==n&&(a=LSResource.getRealValue("transcript.info.visitor.acceptsharedesktop",c))}else if("REJECT"==i){n=s.type,c=s.userdname;"audio"==n?a=LSResource.getRealValue("transcript.info.visitor.declineaudiochat",c):"video"==n?a=LSResource.getRealValue("transcript.info.visitor.declinevideochat",c):"desktop"==n&&(a=LSResource.getRealValue("transcript.info.visitor.declinesharedesktop",c))}else if("CONNECTED"==i){n=s.type,o=(d=s.opruser).dname;"SUCCESS"==s.msg?"audio"==n?a=LSResource.getRealValue("transcript.info.visitor.audioconnected",o):"video"==n&&(a=LSResource.getRealValue("transcript.info.visitor.videoconnected",o)):("audio"==n?a=LSResource.getRealValue("transcript.info.visitor.unableaudio"):"video"==n&&(a=LSResource.getRealValue("transcript.info.visitor.unablevideo")),ZAudioVideo.stop())}else if("STOP"==i){"audio"==(n=s.type)?(a=LSResource.getRealValue("transcript.info.visitor.audioended"),ZAudioVideo.stop()):"video"==n?(a=LSResource.getRealValue("transcript.info.visitor.videoended"),ZAudioVideo.stop()):"desktop"==n&&(a=LSResource.getRealValue("transcript.info.visitor.desktopended"))}else if("VISITOR_NAME_CHANGE"==i&&s.msg){var u=s.changeset,g=s.msgsize,d=s.opruser;(r=s.sender)===Support.vwmsid&&(a=1<g?LSResource.getRealValue("transcript.info.visitorchangeoldembed_vis"):LSResource.getRealValue("transcript.info.visitor"+u+"change_vis"))}else if("ACCEPT_TRANSFER"==i&&s){o=s.opruser.dname;a=LSResource.getRealValue("transcript.info.chattransfer",o),Support.attendername=o,Support.setAttender(s.opruser.lsuid),Support.attenderimagefkey=s.opruser.image_fkey,Support.attenderaboutme=s.opruser.aboutme;var p=SupportUI.embeddiv;p.find(".vistname > img").attr("src",SupportUI.getPhotoURL(Support.getAttender())),p.find(".attname").text(Support.attendername),p.find(".attabout").text(Support.attenderaboutme)}else"ADDSUPPORTREP"==i&&s&&(a=LSResource.getRealValue("transcript.info.addrep",s.userlist.dname));""!=a&&Message.displayInfo(a,r)}else Message.formatQuestion(s)},Message.constructAttUrl=function(e){try{var s=e.msg,t=Support.getChatID(),a="",i="download.ls?fsize="+s.size+"&url="+escape(s.url)+"&fName="+encodeURIComponent(s.fName)+"&chid="+t+"&wmsid="+Support.vwmsid;-1!==s.content.indexOf("image")&&(a='<a class="imgview" href="'+i+'&mode=view" target="_blank">'+LSResource.getRealValue("common.view")+"</a>");var r=e.dname,n=e.sender,o="",l="";s=e.msg;""!=Message.presender&&Message.presender==n&&(previoussender=!0),l=n===Support.vwmsid?LSResource.getRealValue("chatwindow.you_shared_a_file"):LSResource.getRealValue("chatwindow.sharing_a_file_with_you","<div class='sender'>"+r+"</div>");var c=s.comment?"<pre class='img_comment'>"+s.comment+"</pre>":"";o='<div class="flt_pgmn"><div class="flt_pgtt">'+l+'</div><div class="flt_pgttsb filesh"><em class="dwld"></em><a href="'+i+'" title="'+s.fName+'">'+s.fName+"</a>"+a+"</div>"+c,o+='<div class="spritebg"></div></div>'}catch(e){}return o},Message.display=function(e,s){var t=$("#msgdiv");if(null!=t){var a=document.getElementById("msgcntr"),i=!0;(a.scrollHeight-a.scrollTop==a.clientHeight||a.scrollHeight<a.clientHeight)&&(i=!1),ie||(e=util.optimizeFontForMozilla(e)),t.append(e),i&&!s||Message.scroll(a)}},Message.scroll=function(e){e.scrollTop=e.scrollHeight-e.offsetHeight},Message.handleBlinkTitle=function(e){Support.iscomposerfocus||parent==self&&Support.iswindowfocused||Message.blinkTitle(e)},Message.blinkTitle=function(e){var s=Support;s.isblinking||(s.documenttitle=document.title,s.isblinking=!0),Message.startBlinking(e),SupportUI.postMessage("blinktitle",e)},Message.startBlinking=function(e){if(!e)return!1;clearTimeout(Support.blinktimer);var s,t="";Support.blinktimer=setInterval(function(){s="title"==s?(t=e,"chmsg"):(t=Support.documenttitle,"title"),document.title=t},500)},Message.stopBlinking=function(){SupportUI.postMessage("blinktitle","stop"),Support.isblinking&&(clearTimeout(Support.blinktimer),Support.isblinking=!1,document.title=Support.documenttitle)};function Self(){}Self.status={init:function(){this.idletime=6e3,this.entertxttime=3e3,this.prevstatus=NFY_USER_IDLE,this.timer=-1,this.isactive=!1},enterText:function(){this.prevstatus;0<Self.status.getmsglength()&&(Self.status.send($EmbedManger.getChatID(),NFY_USER_ENTERED),NFY_USER_ENTERED)},send:function(t,e){if(!$EmbedManger.getChatStatus()&&"-1"!=t){this.prevstatus=e;var s={};s.userid=LSMessanger.getUserName(),s.chid=t,s.status=e,s.dname=getUnescapedText(LSMessanger.getNickName()),s.sid=LSMessanger.getSid();var i="sendstatus.ls";$EmbedManger.isCrossDomainReq()&&(i=$Support.getAjaxURL("sendstatus",".ls")),$.ajax({url:i,data:s,dataType:"json",success:function(t){}})}},idle:function(){clearTimeout(this.timer),Self.status.send($EmbedManger.getChatID(),NFY_USER_IDLE)},update:function(t){if(t.sender!=LSMessanger.getUserName()){var e=ZSIQConversationManager&&ZSIQConversationManager.getChatWinObjById($Support.chidmappinglist[t.chid])||{};(e.chatstatus="connected")&&$EmbedManger.UI.setChatStatus(t.msg,e)}},check:function(t){0!=this.isactive&&(null==t&&Self.status.check(this.prevstatus),clearTimeout(this.timer),t==NFY_USER_TYPING?0<Self.status.getmsglength()?this.timer=setTimeout(function(){Self.status.enterText()},this.entertxttime):this.timer=setTimeout(function(){Self.status.idle()},this.idletime):t==NFY_USER_ENTERED&&(this.timer=setTimeout(function(){Self.status.idle()},this.idletime)))},active:function(t){this.isactive=!0,clearTimeout(this.timer),13==t.keyCode?this.prevstatus="":(this.prevstatus,NFY_USER_TYPING),this.check(NFY_USER_TYPING)},deactive:function(){this.isactive=!1},getmsglength:function(){return $EmbedManger.getMessageLength()},clear:function(t){$EmbedManger.UI.setChatStatus("",t)}};function KeyHandler(){}KeyHandler.init=function(){ie?document.attachEvent("onkeydown",KeyHandler.handle):document.addEventListener("keydown",KeyHandler.handle,!1),ie?document.attachEvent("onclick",KeyHandler.onclick):document.addEventListener("click",KeyHandler.onclick,!1),KeyHandler.skipeventlistener=!1,ie?(document.onfocusout=function(){KeyHandler.winfocus=!1,KeyHandler.handleWindowOnblur(this.event)},document.onfocusin=function(){KeyHandler.winfocus=!0,KeyHandler.handleWindowOnFocus(this.event)}):(window.onblur=function(){KeyHandler.winfocus=!1,KeyHandler.handleWindowOnblur(this.event)},window.onfocus=function(){KeyHandler.winfocus=!0,KeyHandler.handleWindowOnFocus(this.event)})},KeyHandler.handleWindowOnblur=function(e){KeyHandlerImpl.handleWindowOnblur(e)},KeyHandler.handleWindowOnFocus=function(e){KeyHandlerImpl.handleWindowOnFocus(e)},KeyHandler.onclick=function(e){!0!==KeyHandler.skipeventlistener?KeyHandlerImpl.onclick(e):KeyHandler.skipeventlistener=!1},KeyHandler.handle=function(e){try{Shortcuts.handleShortcut(e)}catch(e){}var n=KeyHandler.getKeyCode(e);try{Blink.deactive()}catch(e){}e.ctrlKey||e.shiftKey||e.altKey||(27==n?(KeyHandler.preventEvent(e),KeyHandler.handleEsc(e)):9==n?KeyHandlerImpl.tabselection(e):46!=n&&8!=n||KeyHandlerImpl.handleDelete(e))},KeyHandler.preventEvent=function(e){mz&&e.preventDefault(),ie&&(e.cancelBubble=!0,e.returnValue=!1)},KeyHandler.handleEsc=function(e){!0!==KeyHandler.skipeventlistener?KeyHandlerImpl.escapee(e):KeyHandler.skipeventlistener=!1},KeyHandler.isWindowFocused=function(){return KeyHandler.winfocus},KeyHandler.getKeyCode=function(e){return e||(e=window.event),window.event?e.keyCode:e.which},KeyHandler.init();function clickoutside(){}clickoutside.init=function(){this.callbackfn=null,this.dest=null,this.src=null,this.ignoreesckey=null},clickoutside.bindclick=function(i,l,t,c,s){!0===s&&(null!=this.callbackfn&&this.dest!=l&&this.callbackfn(),this.callbackfn=i,this.dest=l,this.src=t,this.ignoreesckey=c)},clickoutside.handledclick=function(l){var t=getEventSourceId(l);if(null!=this.callbackfn&&this.src!=t){var c=$(getSource(l)).parents();for(i=0;i<c.length;i++)if($(c[i]).attr("id")==this.src||$(c[i]).attr("id")==this.dest)return;this.callbackfn(),this.callbackfn=null,this.dest=null,this.src=null}},clickoutside.handleEscape=function(i){if(!this.ignoreesckey&&null!=this.callbackfn)return this.callbackfn(),this.callbackfn=null,this.dest=null,!(this.src=null)},clickoutside.init();var ClosePreference=function(){var c=[],f={},n=function(e){c.push(e.destid),f[e.destid]=e},t=function(e,n){for(var t in f)if(f[t][n]===e)return!0},i=function(e,n){var t=c.length;if(index=0,lca=d(e),"undefined"!=typeof lca&&(index=c.indexOf(lca)+1),index<t)return r(index,t,n)},d=function(e){for("string"==typeof e&&(e=document.getElementById(e));e;){if(-1!==c.indexOf(e.id))return e.id;e=e.parentNode}},r=function(e,n,t){for(var i=!1,d=n-1;e<=d;d--){if(document.getElementById(c[d])){var r=f[c[d]];i=!0,r&&"function"==typeof r.callbackfn&&r.callbackfn(t,r.srcid,r.destid)}o(c.indexOf(c[d]))}return i},o=function(e){if(-1!==e){for(var n=c.length-1;e<=n;n--)delete f[c[n]];c.splice(e)}};return{data:f,bind:function(e){if(void 0!==e.event)return e.event.stopPropagation(),e.event.isTrigger&&e.event.preventDefault(),delete e.event,c.length&&(void 0===e.srcid?t(e.destid,"destid")&&o(c.indexOf(e.destid),c.length):i(e.srcid)),n(e),!0},handleClick:function(e){var n=e?e.target||e.srcElement:"";if(document.body.contains(n)&&"ldtooltip"!==(n.parentElement.id||n.id))return i(n,e)},handleEscape:function(e){var n=c.length;return index=n-1,!(!n||!0===f[c[index]].ignoreesc)&&r(index,n,e)},clear:function(e){var n=c.length-1;e&&(n=c.indexOf(e)),-1!==n&&o(n)},getBindObject:function(e,n,t,i){return{event:e,callbackfn:n,destid:t,srcid:i}},currentchain:c}}();function Validation(){}Validation.init=function(){this.pattenobject={ipadd:"^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",reportview:"^(chart|data)*$",long:"^[0-9,]*$",oprmode:"^(add|edit|expand)*$",os:"^(win|mac|linux|sunos|solaris|iphone)*$",browser:"^(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)*$",cannedtype:"^(all|embedchat|category)*$",email:"^([\\w]([\\w\\-\\.\\+\\'\\/]*)@([\\w\\-]+\\.[a-zA-Z0-9-]{2,22}(\\.[a-zA-Z0-9-]{2,22}){0,3}))$",emails:"^([\\w]([\\w\\-\\.\\+\\'\\/]*)@([\\w\\-]+\\.[a-zA-Z0-9-]{2,22}(\\.[a-zA-Z0-9-]{2,22}){0,2})(,?))+$",usernameoremail:"^(([\\w\\.]+)|[\\w]([\\w\\-\\.\\+\\'\\/]*)@([\\w\\.\\-]+\\.[a-zA-Z]{2,22}))",stronly:"^[A-Za-z]*$",strwithnum:"^[A-Za-z0-9]*$",strstyle:"^[A-Za-z0-9%:,;]*$",integer:"^[0-9]{0,10}$",statusint:"^[0|1]$",strboolean:"^(true|false)*$",strname:"^[A-Za-z0-9][A-z0-9_]+([.][A-z0-9_]+)*[A-Za-z0-9]$",strnamespace:"^[a-zA-Z0-9.-_ ]{0,255}$",isempty:"^s+$",website:"^(((http|https):\\/\\/(www.){0,1})|www.){1}[a-zA-Z0-9]+[-a-zA-Z0-9@:/%_\\+.,;~#?&//=]*[^\\.]$",phone:"^[+0-9():.\\-\\[\\] ]+$",decimal:"^[0-9]+(\\.[0-9]{0,9})?$",percentage:"^[0-9]{1,3}%{0,1}?$",date:"^(([0-9]{1,2}\\/[0-9]{1,2}\\/[0-9]{4})|([0-9]{4}-[0-9]{1,2}-[0-9]{1,2}))$",imagemimetype:"^image/.+$",invalidfilenamechars:'^[`~!$%^&|\\"<>?/]$',phonenumber:"^(\\+?\\d{1,}(\\s?|\\-?)\\d*(\\s?|\\-?)\\(?\\d{2,}\\)?(\\s?|\\-?)\\d{2,}(\\s?|\\-?)\\d{2,})$",pincode:"^([A-Z0-9-. ])+$",cleartextampersand:"^[0-9a-zA-Z:.\\-\\&\\.\\$\\@\\^\\(\\)\\{\\}\\~\\=\\-\\|\\*\\+\\?\\[\\]\\,\\:\\'\\/\\\\\\!\\P{InBasicLatin}\\s]+$",bundleid:"^[A-Za-z0-9._-]*$",notspecialcharacters:"^[^`><#%\\\\]+$",port:"^([0-9]{2,4})$",domain:"^([a-z0-9]+(-[a-z0-9]+)*.)+[a-z]{2,}$",number:"^\\d+$"}},Validation.validateRegEx=function(a,e){try{if(!(a=$.trim(a)))return!1;if("isempty"==e)return!0;var t=Validation.pattenobject[e];if(!t)return!1;var i=new RegExp(t);if("email"!=e)return i.test(a);var n,r=a.split(",");for(n=0;n<r.length;n++)if(!i.test(r[n]))return!1;return!0}catch(a){return!1}},Validation.isValidEmail=function(a){return new RegExp(Validation.pattenobject.email).test($.trim(a))},Validation.init();function Cookie(){}Cookie.get=function(e){e+="=";var o=document.cookie.indexOf(e),n="";return-1!=o&&-1!=(n=document.cookie.substr(o+e.length)).indexOf(";")&&(n=n.substring(0,n.indexOf(";"))),decodeURIComponent(n)},Cookie.set=function(e,o,n,t){var i=new Date;return null!=n&&""!=n||(n=18e4),i.setTime(i.getTime()+n),e+="= "+encodeURIComponent(o)+";expires= "+i.toGMTString()+";",t&&(e+="path=/;"),document.cookie=e,!0},Cookie.remove=function(e){var o=new Date;o.setTime(o.getTime()-1),document.cookie=e+"=;expires="+o.toGMTString()+";"},Cookie.update=function(){for(var e=[],o="undefined"!=typeof ChatBarWinHandler&&ChatBarWinHandler?ChatBarWinHandler.exist:0,n=0;n<o.length;n++)if("empty"!=o[n]&&"chat"==o[n].getWinType()){var t=o[n].getChatID();e.push(t)}var i=e.join(",");Cookie.set("zldoch",i,6e4)},Cookie.init=function(){Cookie.synchronizeChatCookie()},Cookie.synchronizeChatCookie=function(){try{ChatBarWinHandler&&setInterval(function(){Cookie.update()},55e3)}catch(e){}},Cookie.restore=function(){var e=Cookie.get("zldoch");if(""!=e)for(var o=e.split(","),n=0;n<o.length;n++)o[n]&&3==o[n].split("_").length&&LSMessanger.joinchat(o[n])},Cookie.init();function KeyHandlerImpl(){}KeyHandlerImpl.onclick=function(n){clickoutside.handledclick(n)},KeyHandlerImpl.handleDelete=function(n){},KeyHandlerImpl.escapee=function(n){clickoutside.handledclick(n);try{CommonUtil.closeDialog()}catch(n){}SupportUI.hideOptions()},KeyHandlerImpl.tabselection=function(n){},KeyHandlerImpl.handleWindowOnblur=function(n){Support.iswindowfocused=!1},KeyHandlerImpl.handleWindowOnFocus=function(n){Support.iswindowfocused=!0,Message.stopBlinking()};var Smiley=function(){var i,c={":smile:":"smile",":happy:":"happy",":joy:":"joy",":grinning:":"grinning",":cool:":"cool",":love:":"love",":curious:":"curious",":awe:":"awe",":thinking:":"thinking",":search:":"search",":idea:":"idea",":wink:":"wink",":razz:":"razz",":relaxed:":"relaxed",":peace:":"peace",":blush:":"blush",":yummy:":"yummy",":yuck:":"yuck",":sad:":"sad",":upset:":"upset",":anxious:":"anxious",":worry:":"worry",":stressed-out:":"stressed-out",":angry:":"angry",":tensed:":"tensed",":tired:":"tired",":bored:":"bored",":sleepy:":"sleepy",":jealous:":"jealous",":evil:":"evil",":facepalm:":"facepalm",":doubt:":"doubt",":surprise:":"surprise",":faint:":"faint",":headache:":"headache",":sick:":"sick",":injured:":"injured",":neutral:":"neutral",":smirk:":"smirk",":keep-quiet:":"keep-quiet",":feeling-warm:":"feeling-warm",":feeling-cold:":"feeling-cold",":thumbsup:":"thumbsup",":thumbsdown:":"thumbsdown",":namaste:":"namaste",":super:":"super",":victory:":"victory",":yoyo:":"yoyo",":raising-hand:":"raising-hand",":clap:":"clap",":bye-bye:":"bye-bye",":fist:":"fist",":biceps:":"biceps",":birthday:":"birthday",":champagne:":"champagne",":christmas-tree:":"christmas-tree",":eid-mubarak:":"eid-mubarak",":fireworks:":"fireworks",":gift-box:":"gift-box",":kaaba:":"kaaba",":new-year:":"new-year",":party:":"party",":santa-hat:":"santa-hat",":coffee-cup:":"coffee-cup",":food:":"food",":chicken:":"chicken",":fire:":"fire",":fire-extinguisher:":"fire-extinguisher",":first-aid-box:":"first-aid-box",":medicine:":"medicine",":poop:":"poop",":peanuts:":"peanuts",":refugee-olympic-team:":"refugee-olympic-team",":target:":"target",":task:":"task",":report:":"report",":bug:":"bug",":milestone:":"milestone",":calendar:":"calendar",":security:":"security",":processor:":"processor",":laptop:":"laptop",":server:":"server",":badminton:":"badminton",":baseball:":"baseball",":basketball:":"basketball",":chess:":"chess",":cricket:":"cricket",":flag:":"flag",":foosball:":"foosball",":football:":"football",":golf:":"golf",":hockey:":"hockey",":snooker:":"snooker",":table-tennis:":"table-tennis",":tennis:":"tennis",":volleyball:":"volleyball",":gold-medal:":"gold-medal",":silver-medal:":"silver-medal",":bronze-medal:":"bronze-medal",":break-boy:":"break-boy",":break-girl:":"break-girl",":singing:":"singing",":man-dancing:":"man-dancing",":man-cycling:":"man-cycling",":man-swimming:":"man-swimming",":woman-dancing:":"woman-dancing",":woman-cycling:":"woman-cycling",":woman-running:":"woman-running",":woman-swimming:":"woman-swimming",":yoga:":"yoga",":archer:":"archer",":boxer:":"boxer",":badminton-player:":"badminton-player",":basketball-player:":"basketball-player",":batsman:":"batsman",":batter:":"batter",":bowler:":"bowler",":canoeing:":"canoeing",":chess-player:":"chess-player",":discus-throw:":"discus-throw",":diver:":"diver",":equestrian:":"equestrian",":fencer:":"fencer",":football-player:":"football-player",":female-tennis-player:":"female-tennis-player",":female-tabletennis-player:":"female-tabletennis-player",":female-volleyball-player:":"female-volleyball-player",":golfer:":"golfer",":gymnast:":"gymnast",":hockey-player:":"hockey-player",":hammer-throw:":"hammer-throw",":hurdler:":"hurdler",":javelin-throw:":"javelin-throw",":judo:":"judo",":long-jump:":"long-jump",":pole-vault:":"pole-vault",":athlete:":"athlete",":rhythmic-gymnastics:":"rhythmic-gymnastics",":shooter:":"shooter",":shotput-throw:":"shotput-throw",":high-jump:":"high-jump",":karate:":"karate",":male-tabletennis-player:":"male-tabletennis-player",":male-volleyball-player:":"male-volleyball-player",":male-tennis-player:":"male-tennis-player",":pitcher:":"pitcher",":snooker-player:":"snooker-player",":weightlifting:":"weightlifting",":wrestling:":"wrestling",":bicycle:":"bicycle",":sports-bike:":"sports-bike",":cruiser-bike:":"cruiser-bike",":motor-scooter:":"motor-scooter",":car:":"car",":taxi:":"taxi",":bus:":"bus",":train:":"train",":police-car:":"police-car",":ambulance:":"ambulance",":fire-engine:":"fire-engine",":aeroplane:":"aeroplane",":passenger-ship:":"passenger-ship",":parking:":"parking",":cafeteria:":"cafeteria",":garden:":"garden",":playground:":"playground",":home:":"home",":office:":"office",":library:":"library",":auditorium:":"auditorium",":store:":"store",":mail-room:":"mail-room",":pharmacy:":"pharmacy",":gym:":"gym",":americas:":"americas",":europe-africa:":"europe-africa",":asia-pacific:":"asia-pacific"},u={":)":"smile",":-)":"smile",":^)":"smile",":]":"smile",":D":"happy",":-D":"happy",":))":"happy",":-))":"happy","B-)":"cool",":xs":"love",":-?":"thinking","*-:)":"idea",";)":"wink",";-)":"wink",":-P":"razz",":P":"razz",":-p":"razz",":p":"razz","-_-":"relaxed","(a)":"angel","(A)":"angel","O-)":"angel","O:-)":"angel","O:)":"angel",":(":"sad",":-(":"sad",":[":"sad","D:":"anxious",":S":"worry",":-S":"worry",":s":"worry",":-s":"worry","-.-":"stressed-out","X-(":"angry",":-@":"angry",":@":"angry","|-)":"sleepy","I-)":"sleepy","(=_=)":"tired","?D":"doubt",":O":"surprise",":-O":"surprise",":o":"surprise",":-o":"surprise","(6.6)":"faint","(({..}))":"headache","+o(":"sick",":/":"smirk",":-/":"smirk",":-#":"shutup",":-X":"shutup","(Y)":"thumbsup","(y)":"thumbsup",":+1:":"thumbsup",":x-":"thumbsup","(N)":"thumbsdown","(n)":"thumbsdown",":-1:":"thumbsdown"},l=$.extend({},c,u),g=function(e){e.fadeOut(300,function(){$(this).html("")})},b=function(e,a,i,l){var r='<div class="smile_sublist">',s=e?'<div class="shrtct_inf">â â <span>'+LSResource.getRealValue("common.tonavigate")+'</span><span class="sqico-enter">'+LSResource.getRealValue("common.toselect")+"</span>"+LSResource.getRealValue("common.close")+" [Esc]</div>":"",n=" sel";for(var t in c){var o=c[t]||u[t],m=LSResource.getRealValue("smiley."+o);r+='<div class="smileli '+(e?"siqsmile_li":"")+n+'" title="'+m+'" smilename="'+o+'" '+(e?"style=width:"+d(a,i)+"px":"")+'><em smilename="'+o+'" title="'+m+'" class="siqsly-'+o+'"></em><span smilename="'+o+'" title="'+m+'" class="txtelips">'+m+"</span></div>",n=""}return s+r+"</div>"},d=function(e,a){var i=a?130:145,l=a?115:140,r=e.width()-20,s=Math.floor(r/i);return(r-s*i)/s+l};return{init:function(){for(var e in i="",l)e=e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),""!=i?i+="|"+e:i=e},replace:function(e){try{var a=new RegExp("([ >\n]|^)("+i+")(?=[ <\n]|$)","g");e=e.replace(a,function(e,a,i){return a+'<em title="'+LSResource.getRealValue("smiley."+(c[i]||u[i]))+'" class="siqsly-'+l[i]+'"></em>'})}catch(e){}return e},handleInSertSmiley:function(e,a){var i=$(a),l=i.parent().find("#smilelist");return 0==l.find(".siqsmile_li").length||(!(e=e||l.find(".smileli.sel").attr("smilename"))||(CommonUtil.handleAddDynamicKey(TRIGGER_SMILEY_KEY,i,e),l.html("").stop().hide(),!1))},checkAndTriggerSmiley:function(e,a,i){var l=KeyHandler.getKeyCode(e),r=/^(37|38|39|40)$/.test(l),s=e.target,n=$(s).val().substring(0,s.selectionStart),t=n.lastIndexOf(" "+TRIGGER_SMILEY_KEY)+1,o=$(s).parent().find("#smilelist"),m=n.indexOf(TRIGGER_SMILEY_KEY),c=o.find(".smile_sublist");if(0<t||0===t&&0===m||0===t&&"\n"===n[m-1]){var u=(h=(f=(f=n).replace(/\:\w+\:/g,"")).lastIndexOf(TRIGGER_SMILEY_KEY),("\n"===f[h-1]||" "===f[h-1]||0===h)&&f.substring(h+1));if(27==l||!1===u)return void g(o);if(r)return void CommonUtil.handleGridNavigation(c,e,".siqsmile_li");0==o.find(".siqsmile_li").length&&(o.html(b(!0,o,a)).off("click").on("click",function(e){var a=$(e.target).attr("smilename");a&&Smiley.handleInSertSmiley(a,s)}),a&&!i||(c=o.find(".smile_sublist"),CommonUtil.iniatializePerfectScrollBar(c)));var d=o.find(".smileli");d.hide();var p=o.find('.smileli[smilename*="'+u+'"]').show();if(c.scrollTop(0),""===u&&o.find(".smileli").show(),d.removeClass("sel"),o.find('.smileli[style*="block"]').first().addClass("sel"),0==p.length&&""!==u)return void g(o);o.fadeIn(300),clickoutside.bindclick(function(){g(o)},"smilelist","showsmiley","",a);var y={callbackfn:function(){g(o)},destid:"smilelist",event:e};ClosePreference.bind(y)}else{var f,h;g(o)}},showSmileyList:function(e,r,s,a){if(r&&"block"==$("#smilelist").css("display"))g($("#smilelist"));else{var n=r?$(e).parent():$(e).parents("#compdiv"),t=n.find("#smilelist");clickoutside.bindclick(function(){g(t)},"smilelist","showsmiley","",r);var i={callbackfn:function(){g(t)},destid:"smilelist",srcid:"showsmiley",event:a};ClosePreference.bind(i);var l=b(!1,t,r);t.html(l).fadeIn(300).off("click").on("click",function(e){var a=$(e.target).attr("smilename");if(a){var i=r?n.find("textarea"):n.find("#txteditor"),l=r&&!s?CommonUtil.getTextFromHeadToCaret(i):getTextFromHeadToCaret(i);a=TRIGGER_SMILEY_KEY+a+TRIGGER_SMILEY_KEY,a=" "==l.substr(l.length-1)?a:" "+a,CommonUtil.handleAddDynamicKey("",i,a),g(t)}}),t.find(".smile_sublist").addClass("smileli_only"),r&&!s||CommonUtil.iniatializePerfectScrollBar(t.find(".smile_sublist"))}}}}();Smiley.init();EmbedSound={loop:1,tunes:{smessage:"ping",endtimer:"buzz",incomingcall:"ringtone",outgoingcall:"waiting"},IS_FLASH_EXIST:!1,IS_HTML5_AUDIO:!1,cache:{},init:function(){var e=this,a=0,n=0,t=!1,i=!1;try{return""!==(new Audio).canPlayType("audio/mp3")&&"no"!==(new Audio).canPlayType("audio/mp3")?e.extn="mp3":e.extn="wav",void(e.IS_HTML5_AUDIO=!0)}catch(e){}if(navigator.plugins&&navigator.plugins.length?(x=navigator.plugins["Shockwave Flash"],x?(a=2,x.description&&(y=x.description,n=y.match(/\d{1,2}/))):a=1,navigator.plugins["Shockwave Flash 2.0"]&&(n=a=2)):navigator.mimeTypes&&navigator.mimeTypes.length?(x=navigator.mimeTypes["application/x-shockwave-flash"],a=x&&x.enabledPlugin?2:1):i=!0,i)for(var l=new Array("ShockwaveFlash.ShockwaveFlash.9","ShockwaveFlash.ShockwaveFlash.8.5","ShockwaveFlash.ShockwaveFlash.8","ShockwaveFlash.ShockwaveFlash.7"),o=0;o<l.length;o++)try{if(null!=new ActiveXObject(l[o])){t=!0;break}}catch(e){}else 2==a&&7<n&&(t=!0);if(e.IS_FLASH_EXIST=t,e.IS_FLASH_EXIST){var r=document.createElement("SPAN");r.style.position="absolute",r.style.top="-10000px",r.style.left="-10000px",r.style.display="block",r.innerHTML='<objectclassid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000" codebase="<%=schema%>://fpdownload.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=8,0,0,0" width="28" height="20" id="player" align="middle" wmode="transparent"><param name="allowScriptAccess" value="always" /><param name="movie" value="/flash/player.swf" /><param name="quality" value="high" /><param name="bgcolor" value="" /><param name="wmode" value="transparent"/><embed src="'+e.getSoundFileURL("player","swf","flash")+'" quality="high"  width="28"height="20" name="player" align="middle"allowScriptAccess="always" wmode="transparent"type="application/x-shockwave-flash" pluginspage="<%=schema%>://www.macromedia.com/go/getflashplayer" /></object>',document.body.appendChild(r)}},getSoundFileURL:function(e,a,n){var t=window._MEDIAHASHMAPPING,i="sound"==n?window._MEDIASERVERURL:window._JSCDNSERVER;if(t&&Object.keys(t).length){if("sound"==n)return i+"/sound/"+e+"_"+t["sound/"+e+"."+a]+"_";if("flash"==n)return i+"flash/"+e+"_"+t["flash/"+e+"."+a]+"_."+a}else{if("sound"==n)return i+"/sound/"+e;if("flash"==n)return i+"flash/"+e+"."+a}},getPlayer:function(){if(EmbedSound.IS_FLASH_EXIST)return window.document.player?window.document.player:-1!=navigator.appName.indexOf("Microsoft Internet")?document.getElementById("player"):document.embeds&&document.embeds.player?document.embeds.player:void 0},play:function(e,a){var n=this;if(n.isPlayerEnable()&&!$EmbedManger.isSoundOff()){var t=n.getSoundFileURL(n.tunes[e],n.extn,"sound");if(n.IS_HTML5_AUDIO)try{if(n._SOUND_PLAYER&&n._SOUND_PLAYER.tune&&-1!=["incomingcall","outgoingcall"].indexOf(n._SOUND_PLAYER.tune))return;void 0===n.cache[t]?(n._SOUND_PLAYER=new Audio(t+"."+n.extn),n._SOUND_PLAYER.addEventListener("loadeddata",function(){4==n._SOUND_PLAYER.readyState&&(n.cache[t]=n._SOUND_PLAYER)})):(n._SOUND_PLAYER=n.cache[t],n._SOUND_PLAYER.currentTime=0),n._SOUND_PLAYER.tune=e,a?(n._SOUND_PLAYER.loop=!0,n._SOUND_PLAYER.play(),clearTimeout(n.cleartimer),n.cleartimer=setTimeout(function(){n.stop()},1e3*a)):(n._SOUND_PLAYER.loop=!1,n._SOUND_PLAYER.play())}catch(e){}else try{var i=n.getPlayer();t=t+".mp3";i.SetVariable("_root.loops",n.loop),i.TCallLabel("_root.$listener","setloops"),i.SetVariable("_root.$listener.fpath",t),i.TCallLabel("_root.$listener","playfile")}catch(e){}}},isPlaying:function(e){try{var a=this;if(void 0===a._SOUND_PLAYER)return!1;if(!a.isPlayerEnable()||$EmbedManger.isSoundOff())return!1;var n=a._SOUND_PLAYER.src,t=n.lastIndexOf("/")+1,i=n.substring(t).split("_");return a.tunes[e]===n.substring(t,n.lastIndexOf("."))||a.tunes[e]===i[0]}catch(e){}return!1},stop:function(){var e=this;if(e.IS_HTML5_AUDIO)try{e._SOUND_PLAYER.pause(),e._SOUND_PLAYER={}}catch(e){}else try{if(!e.IS_FLASH_EXIST)return;e.getPlayer().TCallLabel("_root.$listener","stopSound")}catch(e){}},isPlayerEnable:function(){return this.IS_FLASH_EXIST||this.IS_HTML5_AUDIO}},EmbedSound.init();function ZAudioVideo(){}ZAudioVideo.init=function(){AUDIO="audio",VIDEO="video",ZAudioVideo.status=0,ZAudioVideo.chid=-1,ZAudioVideo.recipants=-1,ZAudioVideo.msgobj=null,ZAudioVideo.callstop=!1,ZAudioVideo.stophandle=!1,ZAudioVideo.iszvmediafwapi=!1},ZAudioVideo.getRecipant=function(){return ZAudioVideo.recipants},ZAudioVideo.setRecipant=function(i){ZAudioVideo.recipants=i},ZAudioVideo.setChatID=function(i){ZAudioVideo.chid=i},ZAudioVideo.getChatID=function(){return ZAudioVideo.chid},ZAudioVideo.checkRequirement=function(i){return 0!=ZVEmbedChat.isMicAvailable()||i!=VIDEO&&i!=AUDIO?0==ZVEmbedChat.isCamAvailable()&&i==VIDEO?"NO_CAM":ZAudioVideo.getStatus()==AV_AVAILABLE:"NO_MIC"},ZAudioVideo.getStatus=function(){return ZAudioVideo.status},ZAudioVideo.updateStatus=function(i){0==status&&(ZAudioVideo.callstop=!1),ZAudioVideo.status=i},ZAudioVideo.startAudio=function(i,o,d){},ZAudioVideo.startVideo=function(i,o,d){},ZAudioVideo.connectAudioVideo=function(i){i.chid;if("INVITE"==i.mode){var o=i.type,d=ZAudioVideo.checkRequirement(o);i=i.msg,1==d?(i=i.replace(/&quot;/g,'"'),ZAudioVideo.updateStatus("2"),"audio"==o?(ZVEmbedChat.connectAudio(i),ZAudioVideo.handleStartAudioDiv()):"video"==o&&(ZVEmbedChat.connectVideo(i),ZAudioVideo.handleStartVideoDiv())):alert(d)}},ZAudioVideo.handleStatus=function(i){if("INVITE"==i.mode){0==ZAudioVideo.iszvmediafwapi&&(ZAudioVideo.iszvmediafwapi=!0);var o=i.creatorname,d=i.type,e=(i.chid,"");d==AUDIO?e=LSResource.getRealValue("chatwindow.invites_audio_chat",o):d==VIDEO&&(e=LSResource.getRealValue("chatwindow.invites_video_chat",o)),ZAudioVideo.setRecipant(i.creator),ZAudioVideo.setChatID(Support.getChatID()),ZAudioVideo.msgobj=i,e+='&nbsp;&nbsp;<span><a href="javascript:;" onclick="ZAudioVideo.acceptInvite(this);SupportUI.hideInfo()">'+LSResource.getRealValue("common.accept")+'</a>&nbsp;<a href="javascript:;" onclick="ZAudioVideo.cancelInvite(this);SupportUI.hideInfo()">'+LSResource.getRealValue("common.reject")+"</a></span>",SupportUI.displayInfo(e)}"STOP"==i.mode&&(ZAudioVideo.stophandle=!0,ZAudioVideo.callStopAudioVideo())},ZAudioVideo.acceptInvite=function(i){var o=ZAudioVideo.msgobj;if(null!=o){var d=o.type;ZAudioVideo.connectAudioVideo(o),ZAudioVideo.msgobj=null,ZAudioVideo.submit("ACCEPT",d,"Successfully Accepted"),$(i).parent().hide()}},ZAudioVideo.cancelInvite=function(i){var o=ZAudioVideo.msgobj;if(null!=o){ZAudioVideo.msgobj=null;var d=o.type;ZAudioVideo.submit("REJECT",d,"Sucessfully_rejected"),$(i).parent().hide()}},ZAudioVideo.handleStartAudioDiv=function(){$("#zvideocontainer,#zvideoblock").hide(),$("#zaudiocontainer,#zaudioblock").show(),$("#zaudiocontainer").find("#vclose").unbind("click").bind("click",function(){ZAudioVideo.callStopAudioVideo()}),$("#zaudiocontainer").find("#aendbtn").unbind("click").bind("click",function(){ZAudioVideo.callStopAudioVideo()}),SupportUI.showVideoAudio($("#zaudiocontainer"))},ZAudioVideo.handleStartVideoDiv=function(){$("#zaudiocontainer,#zaudioblock").hide(),$("#zvideocontainer,#zvideoblock").show(),$("#zvideocontainer").find("#vclose").unbind("click").bind("click",function(){ZAudioVideo.callStopAudioVideo()}),$("#zvideocontainer").find("#vendbtn").unbind("click").bind("click",function(){ZAudioVideo.callStopAudioVideo()}),SupportUI.showVideoAudio($("#zvideocontainer"))},ZAudioVideo.handleStopVideoDiv=function(){$("#zvideocontainer").hide(),$("#zaudiocontainer").hide(),SupportUI.hideVideoAudio()},ZAudioVideo.showVideo=function(){ZVEmbedChat.showVideo()},ZAudioVideo.hideVideo=function(){ZVEmbedChat.hideVideo()},ZAudioVideo.callStopAudioVideo=function(){ZAudioVideo.callstop=!0,ZVEmbedChat.stop()},ZAudioVideo.stop=function(){ZVEmbedChat.stop()},ZAudioVideo.showAudio=function(){ZVEmbedChat.showAudio()},ZAudioVideo.hideAudio=function(){ZVEmbedChat.hideAudio()},ZAudioVideo.submit=function(i,o,d){if(ZAudioVideo.stophandle)ZAudioVideo.stophandle=!1;else{o="voice"==o?"audio":o;var e=new Object;(e=lsnocachefix("json")).chid=ZAudioVideo.getChatID(),e.mode=i,e.type=o,e.sender=LSMessanger.getUserId(),e.userid=ZAudioVideo.getRecipant(),e.dname=LSMessanger.getNickName(),e.msg=d,e.customer=!0,e.visitorid=Support.getVisitorID(),e.visitorname=Support.getVisitorName(),$.ajax({url:"avprocess"+dext,type:"POST",data:e,dataType:"json",success:function(i){}})}},ZAudioVideo.handleOnbeforeUnload=function(){0<ZAudioVideo.getStatus()&&(ZAudioVideo.submit("STOP",status,"ENDED"),ZVEmbedChat.stop())},ZAudioVideo.init();ZVEmbedChatCallback.handleConnectVideo=function(i){if(1==i)return $("#zvideocontainer").show(),ZAudioVideo.submit("CONNECTED","video","SUCCESS"),{id:"zvideoblock"};ZAudioVideo.submit("CONNECTED","video","FAILURE")},ZVEmbedChatCallback.handleConnectAudio=function(i){1==i?ZAudioVideo.submit("CONNECTED","audio","SUCCESS"):ZAudioVideo.submit("CONNECTED","audio","FAILURE")},ZVEmbedChatCallback.handleStopSuccess=function(i){ZAudioVideo.callstop&&(ZAudioVideo.submit("STOP",i,"ENDED"),ZAudioVideo.handleStopVideoDiv()),ZAudioVideo.updateStatus(0)};function LSDragDrop(){}LSDragDrop.onDropEvent=function(r,o,e){if(-1!=r)try{o.preventDefault();var p=o.dataTransfer.files;LSDragDrop.nooffiles=p.length,LSDragDrop.pos=0,LSDragDrop.uploadFile(r,p)}catch(r){}},LSDragDrop.uploadFile=function(r,o){var e={progress:function(r,o){o=Math.round(o),SupportUI.showProgress(o,LSDragDrop.pos,LSDragDrop.nooffiles)},oncomplete:function(r){},success:function(){SupportUI.showProgress(100,LSDragDrop.pos,LSDragDrop.nooffiles),LSDragDrop.pos<LSDragDrop.nooffiles?(SupportUI.showProgress(0,LSDragDrop.pos,LSDragDrop.nooffiles),LSDragDrop.uploadFileUsingPost(r,o,LSDragDrop.pos,e),LSDragDrop.pos++):SupportUI.clearProgress()}};LSDragDrop.uploadFileUsingPost(r,o,LSDragDrop.pos,e),LSDragDrop.pos++},LSDragDrop.uploadFileUsingPost=function(r,o,e,p){try{var a=o[e];if(a.size<=52428800)return void $.ajaxUpload("/"+Support.getPortalName()+"/upload.ls",{chid:r,dname:Support.getVisitorName(),file1:a,mod:"att",sid:LSMessanger.getSid(),lsid:Support.getLiveSupportID(),sender:Support.vwmsid},p,a.type);if(null==a.name||null==a.name)var s="file1";else s=a.name;if(LSDragDrop.pos=e+1,null==o[LSDragDrop.pos]&&null==o[LSDragDrop.pos])return alert(LSResource.getRealValue("infomsg.filesharing.sizeexceed",s+",50")),void SupportUI.clearProgress();if(!confirm(LSResource.getRealValue("infomsg.filesharing.sizeexceedproceednext",s+",50"))){try{SupportUI.clearProgress()}catch(r){}return}LSDragDrop.uploadFileUsingPost(r,o,LSDragDrop.pos,p)}catch(r){}};function FileValidation(){}FileValidation.init=function(){FileValidation.size=CHAT_FILE_MAXSIZE,FileValidation.sizeerrmsg="fileupload.upload_file_size_greater",FileValidation.imgtypeerrmsg="fileupload.upload_valid_image",FileValidation.csstypeerrmsg="webembed.uploadvalidcss",FileValidation.fileids={embdfileupload:{}}},FileValidation.init(),FileValidation.formSubmit=function(i){var e=$(i.formobj).find("input[type=file]")[0],a=CommonUtil.getUploadedFileSize(e),l=$(e).attr("id"),t=FileValidation.fileids[l];try{if(t){if(t.type)if(!e.files[0].type.match(t.type)){var o="image"==t.type?FileValidation.imgtypeerrmsg:FileValidation.csstypeerrmsg;return $EmbedManger.UI.displayInfo(LSResource.getRealValue(o)),setTimeout(function(){$EmbedManger.UI.hideInfo()},3e3),void FileValidation.fileUplStatus(i,"failure")}var n=t.size?t.size:FileValidation.size;if(n<a){var s=n/1048576+"MB";return $EmbedManger.UI.displayInfo(LSResource.getRealValue(FileValidation.sizeerrmsg,s)),setTimeout(function(){$EmbedManger.UI.hideInfo()},3e3),void FileValidation.fileUplStatus(i,"failure")}}}catch(i){}i.formobj.submit(),$(e).val(""),FileValidation.fileUplStatus(i,"success")},FileValidation.fileUplStatus=function(i,e){"success"==e&&i.success?i.success():"failure"==e&&i.failure&&i.failure()};function LSDB(){}LSDB.set=function(e,o,r){if(LSDB.isLocalStorageAvail())try{this.storeInLocalStorage(e,o,r)}catch(t){Cookie.set(e,LSDB.toString(o),r)}else Cookie.set(e,LSDB.toString(o),r)},LSDB.storeInLocalStorage=function(t,e,o){var r=JSON.parse(localStorage.lsdb||"{}");o&&(e.ttl=o,e.time=(new Date).getTime()),e=LSDB.toString(e),r[t]=e,localStorage.lsdb=JSON.stringify(r)},LSDB.isLocalStorageAvail=function(){try{return!!window.localStorage&&(localStorage.setItem("quota_test","1"),localStorage.removeItem("quota_test"),!0)}catch(t){return!1}},LSDB.get=function(t){return LSDB.isLocalStorageAvail()&&LSDB.getFromLocalStorage(t)||CommonUtil.parseToJSON(Cookie.get(t))},LSDB.isSessionStorageAvail=function(){try{return!!window.sessionStorage&&(sessionStorage.setItem("quota_test","1"),sessionStorage.removeItem("quota_test"),!0)}catch(t){return!1}},LSDB.storeInSession=function(t,e){if(!LSDB.isSessionStorageAvail())return!1;var o=JSON.parse(sessionStorage.utsdb||"{}");return o[t]=e,sessionStorage.utsdb=JSON.stringify(o),!0},LSDB.getFromSession=function(t){if(LSDB.isSessionStorageAvail())return JSON.parse(sessionStorage.utsdb||"{}")[t]},LSDB.getFromLocalStorage=function(e){var o=JSON.parse(localStorage.lsdb||"{}")[e];if(!o)return null;try{if((o=CommonUtil.parseToJSON(o)).ttl&&o.ttl+o.time<(new Date).getTime())return LSDB.remove(e),null}catch(t){LSDebugger.postDebugInfo("Value: "+o+"Key"+e,null,null,!0)}return o},LSDB.remove=function(e){if(LSDB.isLocalStorageAvail())try{var t=JSON.parse(localStorage.lsdb||"{}");t[e]&&delete t[e],localStorage.lsdb=JSON.stringify(t)}catch(t){Cookie.remove(e)}else Cookie.remove(e)},LSDB.removeSessionStore=function(t){if(LSDB.isSessionStorageAvail())try{var e=JSON.parse(sessionStorage.utsdb||"{}");e[t]&&(delete e[t],sessionStorage.utsdb=JSON.stringify(e))}catch(t){}},LSDB.toString=function(e){if(!e)return e;try{return CommonUtil.toJSON(e)}catch(t){var o,r=[];for(var s in e)o=e[s].replace('"','\\"'),r.push('"'+s+'":"'+o+'"');return"{"+r+"}"}};var _WMSDOWN=!1,isntwrkreconnect=!1;function WmsliteImpl(){}WmsliteImpl.serverdown=function(){if(!$Support||$Support.isChatExist()){_WMSDOWN=!0;var e=document.getElementById("nwcheckimg");e&&e.parentElement.removeChild(e),(e=document.createElement("img")).style.display="none",e.id="nwcheckimg",document.body.appendChild(e),e.addEventListener?(e.addEventListener("load",function(){$EmbedManger.UI.displayInfo(WmsliteImpl.getValueByType("onload"),2)}),e.addEventListener("error",function(){$EmbedManger.UI.displayInfo(WmsliteImpl.getValueByType("onerror"),2)})):(e.attachEvent("onload",function(){$EmbedManger.UI.displayInfo(LSResource.getRealValue("wms.connectionlost.error"),2)}),e.attachEvent("onerror",function(){$EmbedManger.UI.displayInfo(LSResource.getRealValue("visitorchat.reconnection.msg"),2)})),e.src="https://img.zohocdn.com/salesiq/images/spacer_592ebefc7104d681d57852665e9ad514_.gif?nocache="+(new Date).getTime()}},WmsliteImpl.serverup=function(e){var n={mtype:0};n.msg=e;var t=!(!_JOINED||_WMSDOWN);_JOINED=!1,_WMSDOWN&&(isntwrkreconnect=!0,$EmbedManger.UI.displayInfo(LSResource.getRealValue("visitorchat.connectivity.success"),1),setTimeout(function(){$EmbedManger.UI.hideInfo()},5e3)),_WMSDOWN=!1,LSMessanger.push(n,isntwrkreconnect,t),isntwrkreconnect=!1},WmsliteImpl.handleLogout=function(e){},WmsliteImpl.handleMessage=function(e,n){var t={};t.mtype=e,t.msg=n,LSMessanger.push(t)},WmsliteImpl.handleAccountDisabled=function(e){},WmsliteImpl.handleServiceMessage=function(e){},WmsliteImpl.getValueByType=function(e){var n="";return"onload"==e?n=LSResource.getRealValue("wms.connectionlost.error"):"onerror"==e&&(n=LSResource.getRealValue("visitorchat.reconnection.msg")),n};function DynamicMsg(){this.init()}DynamicMsg.init=function(){DynamicMsg.values={},DynamicMsg.labelsmap={"company.name":"clearbit_reveal_companyname","company.location":"clearbit_reveal_location","company.website":"clearbit_reveal_domain","company.employeecount":"clearbit_reveal_employees","company.annualrevenue":"clearbit_reveal_annualrevenue","company.marketcapital":"clearbit_reveal_marketcap","company.fundraised":"clearbit_reveal_raised","company.type":"clearbit_reveal_type","company.twitterfollowers":"clearbit_reveal_followers","company.facebooklikes":"clearbit_reveal_likes","company.industrytype":"clearbit_reveal_industry","company.sector":"clearbit_reveal_sector","employment.title":"clearbit_enrichment_title","employment.name":"clearbit_enrichment_name","employment.role":"clearbit_enrichment_role","employment.location":"clearbit_enrichment_location","employment.city":"clearbit_enrichment_city","employment.country":"clearbit_enrichment_country","employment.state":"clearbit_enrichment_state","employment.bio":"clearbit_enrichment_bio","attender.name":"attendername","attender.email":"attenderemail","visitor.name":"name","visitor.id":"visit_id","visitor.email":"email","visitor.phone":"phone","visitor.department":"department","visitor.question":"question","visitor.ip":"ip","visitor.country":"country","visitor.pagetitle":"title","visitor.pageurl":"currentpage","visitor.referrer":"referrer","visitor.timezone":"localtime","visitor.operating.system":"os","visitor.browser":"browser","visitor.browser.version":"browserversion","smart.timenow":"smart_timenow","screen.resolution":"screen","web.embed.name":"embed"},$EmbedManger.isNewEmbed&&(DynamicMsg.updateValues($EmbedManger.getAddinfo()),DynamicMsg.updateValues(Browser.getInfo()))},DynamicMsg.setValues=function(e){DynamicMsg.updateValues($EmbedManger.getAddinfo()),DynamicMsg.updateValues(Browser.getInfo()),DynamicMsg.updateValues(e),DynamicMsg.updateValues($.parseJSON(e.CUSTOMERINFO),"custom."),delete DynamicMsg.values.CUSTOMERINFO},DynamicMsg.updateValues=function(e,t){if(e){var a="";for(var i in e)a=t?t+i:i,DynamicMsg.values[a.toLowerCase()]=e[i]}else if("custom."==t)for(var n in DynamicMsg.values)""==n.split("custom.")[0]&&delete DynamicMsg.values[n]},DynamicMsg.getKeyFromMap=function(e){return"custom"===e.split(".")[0]?e.toLowerCase():DynamicMsg.labelsmap[e.toLowerCase()]},DynamicMsg.getValue=function(e){if(clientkey=DynamicMsg.getKeyFromMap(e),value=DynamicMsg.values[clientkey],"undefined"==typeof value)return"";if(!clientkey)return e;if("smart_timenow"===clientkey)return DynamicMsg.getSmartTimeNow();if("name"===clientkey){var t=value.split(" ");return"Visitor"===t[0]||/^\d+$/.test(t[0])?"":CommonUtil.wordCapitalize(value)}if("department"===clientkey){if("-1"==value)return"";for(var a=$EmbedManger.getDeptlist(),i=0;i<a.length;i++){var n=a[i];if(""+n.ID===value)return n.NAME}}return value},DynamicMsg.updateClearBitValues=function(e){if(e.Reveal)for(var t in e.Reveal)DynamicMsg.updateValue("clearbit_reveal_"+t,e.Reveal[t]);if(e.Enrichment)for(var t in e.Enrichment)DynamicMsg.updateValue("clearbit_enrichment_"+t,e.Enrichment[t])},DynamicMsg.updateValue=function(e,t){DynamicMsg.values[e.toLowerCase()]=t},DynamicMsg.getSmartTimeNow=function(){var e="",t=(new Date).getHours();return 5<=t&&t<12?e="morning":12<=t&&t<17?e="afternoon":17<=t&&t<21?e="evening":(21<=t||t<5)&&(e="night"),LSResource.getRealValue("smart.timenow."+e)},DynamicMsg.getSmartTimePeriod=function(e){var t=new Date;return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+" "+LSResource.getRealValue("common.time.hours")},DynamicMsg.fillValues=function(e){if(!e)return"";var t=new Array,a="",i="",n="",r=0;for(-1===e.indexOf("&#x25;")&&-1===e.indexOf("&lt;br&#x2f;&gt;")||(e=(e=e.replace(/&#x25;/g,"%")).replace(/&lt;br&#x2f;&gt;/g," "));-1!=e.indexOf("%")&&(a="",strt=e.indexOf("%",r),last=e.indexOf("%",strt+1),-1!==strt&&-1!==last);)n=i=e.substring(strt+1,last),-1!==i.indexOf("|")&&(n=(t=(i=n).split("|"))[0],a=t[1]),val=DynamicMsg.getValue(n),val===n?(i=e.substring(strt+1,last),value="%"+i+"%"):(value=val||a,e=e.replace("%"+i+"%",CommonUtil.escapeSpecialNotation(value))),r=strt+value.length-1;return e};var PasteImage={};PasteImage={isUser:!1,setIsUser:function(e){this.isUser=e},onPaste:function(e,t){if(this.txtarea=t||null,window.clipboardData&&window.clipboardData.getData("Text"))return e.preventDefault(),this.insertText(n);var a=(e.originalEvent||e).clipboardData;if(a){e.preventDefault();var i=a.items;i&&this.handlePaste(i);var n=a.getData("text/plain");if(n&&0==this.files.length)return this.insertText(n)}return!1},getHTMLTemplet:function(){return this.isUser?"<div id='fileintex-FILEINDEX' purpose='fileupload' CLASS><input type='text' value='' class='file-name' purp='name'/><div id='pasteimage' class='pasteimage'></div><textarea class='pasteimgcomment' id='pasteimgcomment' dockeyup='handlePastIMG' purp='comment' placeholder='"+LSResource.getRealValue("transferchat.comment.placeholder")+'\'></textarea><em class="floatrg messagecount" style="display: none;"></em></div>':'<div id="fileintex-FILEINDEX" purpose="fileupload"><div class="imgshr_head txtelips" title="'+getEncodedText(Support.attendername)+'">'+LSResource.getRealValue("common.sharewith",getEncodedText(Support.attendername))+'</div><input type=\'text\' value=\'\' class=\'file-name\' purp=\'name\'/><div class="embd_pstimgdiv" id="pasteimage"></div><textarea id="pasteimgcomment" dockeyup="handlePastIMG" purp="comment" placeholder="'+LSResource.getRealValue("common.comment.placeholder")+'"></textarea><em class="floatrg messagecount" style="display: none;"></em><div class="pstimg_btns"><span id="uploadimage" class="txtelips strtbtn drkdclr">'+LSResource.getRealValue("banner.share")+'</span><span id="cancelupload" class="txtelips cnsl">'+LSResource.getRealValue("common.cancel")+"</span></div></div>"},getHTML:function(){for(var e="<div class='pstimg-main' id='pstimg-main'>",t=this.files.length,a=2<t?"class='mult-imgs mrgn-bt18'":2==t?"class='mult-imgs'":"",i=0;i<t;i++){var n=this.getHTMLTemplet();e+=n=(n=n.replace(/FILEINDEX/g,i)).replace(/CLASS/g,a)}return e+"</div>"},insertText:function(e){var t=document.getSelection();return window.clipboardData?(document.selection.createRange().pasteHTML(e),!0):!!(document.queryCommandEnabled("insertText")&&0<t.rangeCount&&document.execCommand("insertText",!1,e))},checkAndShowUI:function(){if(0<this.files.length){if(this.isUser)return void this.showPortalUI();this.showEmbedUI()}},handlePaste:function(e){this.files=[],itemlen=e.length;for(var a=this,i=function(e){var t=e.getElementsByTagName("img");t&&0==t.length&&(a.files=[])},t=function(e){var t=document.createElement("DIV");t.innerHTML=e,i(t)},n=function(e){var t=document.createElement("DIV");t.innerTEXT=e,i(t)},s=0;s<itemlen;s++){var r=e[s].type,l=e[s].kind,o=e[s].getAsFile();Validation.validateRegEx(r,"imagemimetype")&&o&&this.files.push(o),CommonUtil.isMacOS()||(r&&"text/plain"==r&&l&&"string"==l?e[s].getAsString(n):e[s].getAsString(t))}this.checkAndShowUI()},updateDetailes:function(e){for(var t=0,a=this.files,i=a.length;t<i;t++){var n=a[t],s=n.name,r="",l=e.find("#fileintex-"+t);s||(s=this.generateName(n,t));var o=s.lastIndexOf(".");-1!==o?r=s.substring(o):o=s.length,s=(s=(s=s.substring(0,o)).replace(/[`~!\$%\^&\|\\\"<>\?\/]/g,"-")).substring(0,100),this.Filename=s,l.attr("fileextn",r),l.find(".file-name").val(s),l.find("#pasteimgcomment").focus(),this.bindHandler(l),this.setPreview(l,n)}},bindHandler:function(e){e.find(".file-name").on("blur",function(){""!=$(this).val()?PasteImage.Filename=$(this).val():$(this).val(PasteImage.Filename)}).on("keydown",function(){$(this).removeClass("bdrbot_red")})},generateName:function(e,t){var a=e.type,i=a.substring(a.indexOf("/")+1,a.length);return"Image - "+this.getcurrTime()+"."+i},getcurrTime:function(){var e=new Date,t="",a=e.getHours(),i=e.getMinutes(),n=12<a?a-12:0==a?"12":a;return t+=(n<10?"0":"")+n,t+=(i<10?":0":":")+i,t+=12<=a?" PM":" AM"},showEmbedUI:function(e){var t=$("#embedcontainer").find(".flcontainer"),a=this.getHTML();t.find(".pstimg-main").remove(),t.append(a).find(".pstimg-main").show(),t.find("#uploadimage").on("click",function(){PasteImage.uploadImage(t)}),t.find("#cancelupload").on("click",function(){PasteImage.hideUI()}),this.updateDetailes(t)},validate:function(e){for(var t=0,a=PasteImage.files.length;t<a;t++){var i=e.find("#fileintex-"+t),n=i.find("[purp='name']"),s=i.find("[purp='comment']"),r=$.trim(n.val());if(Validation.validateRegEx("invalidfilenamechars",r)||""==r)return!1;if(100<r.length)return!1;if(200<s.val().length)return!1}return!0},uploadImage:function(e){if(PasteImage.validate(e)){for(var t=0,a=PasteImage.files,i={},n=[];t<a.length;t++){var s=a[t],r=[],l=e.find("#fileintex-"+t),o=l.find("[purp='name']").val(),d=l.find("[purp='comment']").val(),m=l.attr("fileextn");r.push(s),r.push(t+1+"_"+o+m),""!==d&&(i[t+1]=d),n.push(r)}this.handleUploadAjax(n,i),PasteImage.hideUI()}},handleUploadAjax:function(e,t){var a={},i=this.isUser?"upload.do":"upload.ls";if("upload.do"===i&&(a=lsnocachefix("json",!0)),a.chid=this.isUser?WindowHandler.getCurrentWinChatID():Support.getChatID(),a.dname=this.isUser?CurrentUser.getDisplayname():Support.visitorinfo.NAME,a.mod="att",a.sid=this.isUser?LSMessanger.getSid():Support.getLiveSupportID(),a.comment=JSON.stringify({}),0!=getObjectSize(t)&&(a.comment=JSON.stringify(t)),this.isUser){var n=$("#"+a.chid).find("#chatstatus");n.text(LSResource.getRealValue("infomsg.sharingfiles"))}else a.lsid=Support.getLiveSupportID(),a.sender=Support.vwmsid;a=this.getFormData(a,"file1",e),$.ajax({url:i,type:"POST",data:a,processData:!1,contentType:!1,success:function(e){PasteImage.isUser&&n.text("")}})},isFileorBlob:function(e){return e instanceof Blob},getFormData:function(e,t,a){var i=new FormData;for(var n in e)i.append(n,e[n]);for(var s=0,r=a.length;s<r;s++){var l=a[s];this.isFileorBlob(l[0])&&i.append(t,l[0],l[1])}return i},showPortalUI:function(e){var t=Visitors.getVisitorName(WindowHandler.getVistorID(WindowHandler.getCurrentWinChatID())),a=$(this.txtarea),i=Dialog.show({title:LSResource.getRealValue("common.sharewith",getEncodedText(t)),desc:this.getHTML(),i18n:!1,ok:{text:LSResource.getRealValue("banner.share"),callback:function(){if(200<$("#pasteimgcomment").val().length)return!1;PasteImage.uploadImage(i),a.focus()}},cancel:{}}).addClass("pasteimg_srn").addClass("pasteimg_srn_"+WindowHandler.getCurrentWinChatID()).center();this.updateDetailes(i)},hideUI:function(e){if("undefined"==typeof WindowHandler)return $("#pstimg-main").fadeOut(300,function(){$(this).remove()}),void $(this.txtarea).focus();PortalUI.closePopUpById("pasteImage",e)},setPreview:function(e,t){var a=new FileReader,i=e.find("#pasteimage");a.onload=function(e){i.html('<img src="'+e.target.result+'" onload="CommonUtil.handleImgLoad(this)" style="opacity: 0;"/>')},a.readAsDataURL(t)},handlePastIMG:function(e,t){CommonUtil.updateInputTextCount(e,200)}};function avaction(){}function mediafailureoffer(a,e){if(window.$Temp&&avaction.clearMediaPermissionPop(),!avaction.callObj.mediaStream||!avaction.callObj.chid)if(a&&a.name){switch(a.name){case"NotFoundError":case"DevicesNotFoundError":message=LSResource.getRealValue("av.info.microphone.notavailable");break;case"SourceUnavailableError":case"PermissionDeniedError":case"SecurityError":case"NotAllowedError":default:message=LSResource.getRealValue("av.info.microphone.blocked")}"NotAllowedError"==a.name&&window.$Temp&&$(window.parent.document).find("body").append($Temp.getAskMediaPermission(avimpl.getCurrentBrowerName())),avaction.callObj.checkMediaPermission(message,avaction.callObj.chid),e&&("agent"==avaction.callObj.type?avaction.callObj.rejectCallInvite("reject",avaction.callObj.audioId,avaction.callObj.chid):avaction.callObj.rejectCallInvite(avaction.callObj.chid,null)),LSDebugger.postDebugInfo("Audio Call - Inside Filure media | PeerConnection "+avaction.callObj.pc,null,null,!0)}else avaction.callObj.StartAfterMediaPermission()}avaction.TYPE="AUDIO",avaction.supportedbrowsers=["Chrome","Firefox","Opera","Safari","Edge"],avaction.transfercallpermission=!0,avaction.enableTransferCall=!1,avaction.getScreenID=function(){return window.webkitRTCPeerConnection?'{"mandatory": { "chromeMediaSource": "desktop", "maxWidth": 1920, "maxHeight": 1080, "minAspectRatio": 1.77 }, "optional": [] }':'{"mediaSource":"screen"}'},avaction.constraints={AUDIO:{audio:!0,video:!1},VIDEO:{audio:!0,video:!0},SCREEN_SHARE:{audio:!0,video:JSON.parse(avaction.getScreenID())},SCREEN_VIEW:{audio:!0,video:!1}},avaction.getObject=function(a){return"undefined"==typeof AgentCall||"agent"!==a.msg.media.mode||a.msg.media.visitoraccess?avimpl:AgentCall},avaction.init=function(a){avaction.callObj=avaction.getObject(a);var e,n=a.msg,t=n.media;if("credential"!==a.msg.cbtype&&"call_credential"!==n.operation||(avaction.callObj.setCredentials(t),e="added credential data successfully"),"invite"!==a.msg.cbtype&&"call_initiate"!==n.operation||((t.credentials||a.msg.credential)&&avaction.callObj.setCredentials(t),avaction.callObj.showInvitation(t),e="added credential data and invitation successfully"),"accept"===a.msg.status||"call_accept"===n.operation)if(this.requestStream(t,UPSTREAM),"agent"===a.msg.media.mode){avaction.callObj.acceptedTime();var i=AgentDB.getWMSIDFromLSUID(JSON.parse(a.msg.media.opruser).lsuid);AgentCall.wmsid=i}else avaction.callObj.acceptedTime=Date.now();if("reject"!==a.msg.cbtype&&"call_reject"!==n.operation||("function"==typeof avaction.callObj.showRejectedBanner&&avaction.callObj.showRejectedBanner(t),avaction.callObj.handleUserBusy()),"candidate"!==a.msg.cbtype&&"call_candidates"!==n.operation||(avaction.callObj.connection_estb?avaction.addIceCandidate(t):(avaction.callObj.newcandidate||(avaction.callObj.newcandidate=[]),avaction.callObj.newcandidate.push(t))),"answer"===a.msg.cbtype||"call_answer"===n.operation){var c=JSON.parse(t.session);if(avaction.callObj.pc.setRemoteDescription(new RTCSessionDescription(c)),avaction.callObj.connection_estb=!0,avaction.callObj.newcandidate)for(var o in avaction.callObj.newcandidate)avaction.addIceCandidate(avaction.callObj.newcandidate[o]);avaction.callObj.pc.onaddstream=avaction.callObj.pc.ontrack=function(a){avaction.callObj.remoteStream&&avaction.callObj.remoteStream.active||avaction.callObj.addremotestream(a)}}"end"!==a.msg.status&&"call_end"!==n.operation||avaction.callObj.endCall(),"offer"!==a.msg.cbtype&&"call_offer"!==n.operation||this.requestStream(t,DOWNSTREAM),"cancel"!==a.msg.cbtype&&"call_cancel"!==n.operation&&"miss"!==a.msg.cbtype&&"call_miss"!==n.operation||avaction.callObj.clear(t.chatid),avaction.callObj.sendStats(a,e)},avaction.setNRSServers=function(a){this.NRSServers=a},avaction.setCredentials=function(a){!avimpl.active&&(avimpl.id=a.id);var e=JSON.parse(a.credentials);avaction.setNRSSereverUrls(e.user_name,e.token,e.servers),avaction.callObj.chid=a.chatid},avaction.setNRSSereverUrls=function(a,e,n){var t=n.split(","),i={iceServers:[]};for(var c in t)i.iceServers.push({urls:t[c],username:a,credential:e});avaction.callObj.iceServerlist=i,LSDebugger.postDebugInfo("Audio Call - Ice Servers "+avaction.callObj.iceServerlist+" | Server urls "+this.NRSServers,null,null,!0)},avaction.clearMediaPermissionPop=function(){clearTimeout(avaction.mediaTimer),avimpl.closeViewMediaPermission()},avaction.requestStream=function(e,n){if(!avaction.callObj.iceServerlist)return LSDebugger.postDebugInfo("Audio Call - End on reload| chid |"+avaction.callObj.chid+" | Data "+e+" |type "+n,null,null,!0),void avaction.callObj.endOnReload();if(avaction.callObj.getMediaApi=avaction.getUserMedia(),window.webkitRTCPeerConnection?(avaction.callObj.hostbrowser="Chrome",window.RTCPeerConnection=webkitRTCPeerConnection):window.mozRTCPeerConnection&&(avaction.callObj.hostbrowser="Firefox",window.RTCPeerConnection=mozRTCPeerConnection),avaction.callObj.chid=e.chatid,avaction.callObj.mediaStream){var a=avaction.callObj.mediaStream;n==UPSTREAM?avaction.initializeConnection(a,n):n==DOWNSTREAM&&(avaction.callObj.offer=CommonUtil.parseToJSON(e.offer),avaction.initializeConnection(a,n))}else{if(window.$Temp&&(avaction.mediaTimer=setTimeout(function(){$(window.parent.document).find("body").append($Temp.getMediaSetting(avimpl.getCurrentBrowerName())),clearTimeout(avaction.mediaTimer)},1500)),!avaction.callObj.getMediaApi)return navigator.mediaDevices.getUserMedia(avaction.constraints[avaction.TYPE]).then(function(a){n==UPSTREAM?avaction.initializeConnection(a,n):n==DOWNSTREAM&&(e.offer?avaction.callObj.offer=CommonUtil.parseToJSON(e.offer):avaction.callObj.offer=CommonUtil.parseToJSON(e.session),avaction.initializeConnection(a,n)),window.$Temp&&avaction.clearMediaPermissionPop()}).catch(function(a){mediafailureoffer(a,n)}),!1;avaction.callObj.getMediaApi.call(navigator,avaction.constraints[avaction.TYPE],function(a){n==UPSTREAM?avaction.initializeConnection(a,n):n==DOWNSTREAM&&(e.offer?avaction.callObj.offer=CommonUtil.parseToJSON(e.offer):avaction.callObj.offer=CommonUtil.parseToJSON(e.session),avaction.initializeConnection(a,n)),window.$Temp&&avaction.clearMediaPermissionPop()},function(a){mediafailureoffer(a,n)})}},avaction.initializeConnection=function(a,t){if(avaction.callObj.chid){var e={mandatory:{OfferToReceiveAudio:!0,OfferToReceiveVideo:!0}};if(avaction.callObj.pc=new RTCPeerConnection(avaction.callObj.iceServerlist),avaction.callObj.localStream=localStream=a,avaction.getUserMedia()?avaction.callObj.pc.addStream(a):avaction.callObj.localStream.getTracks().forEach(function(a){avaction.callObj.pc.addTrack(a,avaction.callObj.localStream)}.bind(this)),LSDebugger.postDebugInfo("Audio Call - Added local Stream | Stream "+a+" | PeerConnection "+avaction.callObj.pc+" type "+t,null,null,!0),t==DOWNSTREAM&&avaction.callObj.pc.setRemoteDescription(new RTCSessionDescription(avaction.callObj.offer)),LSDebugger.postDebugInfo("Audio Call - Added candidate in Queue | avaction.callObj.newcandidate "+avaction.callObj.newcandidate+" | PeerConnection "+avaction.callObj.pc+" | connectionstate "+avaction.callObj.connection_estb,null,null,!0),avaction.callObj.pc.onicecandidate=function(a){avaction.callObj.addcandidate(a)},avaction.callObj.pc.onaddstream=avaction.callObj.pc.ontrack=function(a){avaction.callObj.remoteStream&&avaction.callObj.remoteStream.active||avaction.callObj.addremotestream(a)},LSDebugger.postDebugInfo("Audio Call - Added onicecandidate and onaddstream | Stream "+a+" | PeerConnection "+avaction.callObj.pc+" type "+t,null,null,!0),"function"==typeof avaction.callObj.addAudioElemts&&avaction.callObj.addAudioElemts(),t==UPSTREAM?avaction.getUserMedia()?avaction.callObj.pc.createOffer().then(avaction.callObj.successOffer,avaction.sendLog,e):avaction.callObj.pc.createOffer(e).then(avaction.callObj.successOffer).catch(avaction.sendLog):("Firefox"===avaction.hostbrowser&&(e=e.mandatory),avaction.getUserMedia()?avaction.callObj.pc.createAnswer(avaction.callObj.successAnswer,avaction.sendLog,e):avaction.callObj.pc.createAnswer(e).then(avaction.callObj.successAnswer).catch(avaction.sendLog),avaction.callObj.connection_estb=!0),avaction.callObj.newcandidate)for(var n in avaction.callObj.newcandidate)avaction.addIceCandidate(avaction.callObj.newcandidate[n]);avaction.callObj.pc.oniceconnectionstatechange=function(a){var e=avaction.callObj.pc.iceConnectionState;if(LSDebugger.postDebugInfo("Audio Call - State change event | event "+e+" | PeerConnection "+avaction.callObj.pc,null,null,!0),e==AV_CONNECTED)avaction.callObj.connectionStatus=!0,avaction.callObj.webrtcStatus=1,avaction.callObj.callConnected(a),avaction.callObj.sendStats(null,"call connected"),(0==avaction.callObj.reconcount||avaction.callObj.isreconnectstate)&&avaction.callObj.sendConnectionStatus("callconnected");else if(e==AV_FAILED){if(avaction.callObj.connectionStatus=!1,t==UPSTREAM){var n=t;avaction.checkConnectionAndCall(avaction.callObj.callReconnect,avaction.checkConnectionActivity,n),avaction.callObj.sendStats(null,"webrtc failed upstream")}else avaction.callObj.callReconnect(t),avaction.callObj.sendStats(null,"webrtc failed downstream");avaction.callObj.connection_estb=!1,(0==avaction.callObj.reconcount||avimpl.isreconnectstate)&&avaction.callObj.sendConnectionStatus("callfailed")}else"disconnected"==e&&(avaction.callObj.reconnecttime=(Date.now()-avimpl.getStartTime())/1e3,avaction.checkConnectionAndCall(avaction.callObj.callDisconnected,avaction.callObj.callDisconnected))}}},avaction.addIceCandidate=function(a){var e;LSDebugger.postDebugInfo("Audio Call - Inside Add Ice Candidate | data "+a+" | PeerConnection "+avaction.callObj.pc,null,null,!0),e=a.candidates?JSON.parse(a.candidates):JSON.parse(a.msg.candidate);var n=new RTCIceCandidate({sdpMid:e.id,sdpMLineIndex:e.label,candidate:e.candidate});avaction.callObj.pc.addIceCandidate(n)},avaction.checkMediaPermission=function(){if(avaction.callObj.getMediaApi=avaction.getUserMedia(),window.$Temp&&(avaction.mediaTimer=setTimeout(function(){$(window.parent.document).find("body").append($Temp.getMediaSetting(avimpl.getCurrentBrowerName())),clearTimeout(avaction.mediaTimer)},1500)),!avaction.callObj.getMediaApi)return navigator.mediaDevices.getUserMedia(avaction.constraints[avaction.TYPE]).then(function(a){mediafailureoffer(null),avaction.callObj.mediaStream=a}).catch(function(a){mediafailureoffer(a)}),!1;avaction.callObj.getMediaApi.call(navigator,avaction.constraints[avaction.TYPE],function(a){mediafailureoffer(null),avaction.callObj.mediaStream=a},function(a){mediafailureoffer(a)})},avaction.sendLog=function(){LSDebugger.postDebugInfo("Audio Call - Inside Filure offer | PeerConnection "+avaction.callObj.pc,null,null,!0)},avaction.getBrowserFromUserAgent=function(a){var e=a.toLowerCase(),n="unknown-unknown";if(-1<e.indexOf("msie")){var t=a.substring(a.indexOf("MSIE")).split(";")[0];n=t.split(" ")[0].replace("MSIE","IE")+"-"+t.split(" ")[1]}else-1<e.indexOf("edge")?n=a.substring(a.indexOf("Edge")).split(" ")[0].replace("/","-"):-1<e.indexOf("safari")&&-1<e.indexOf("version")?n=a.substring(a.indexOf("Safari")).split(" ")[0].split("/")[0]+"-"+a.substring(a.indexOf("Version")).split(" ")[0].split("/")[1]:-1<e.indexOf("opr")||-1<e.indexOf("opera")?-1<e.indexOf("opera")?n=a.substring(a.indexOf("Opera")).split(" ")[0].split("/")[0]+"-"+a.substring(a.indexOf("Version")).split(" ")[0].split("/")[1]:-1<e.indexOf("opr")&&(n=a.substring(a.indexOf("OPR")).split(" ")[0].replace("/","-").replace("OPR","Opera")):-1<e.indexOf("chrome")?n=a.substring(a.indexOf("Chrome")).split(" ")[0].replace("/","-"):-1<e.indexOf("firefox")&&(n=a.substring(a.indexOf("Firefox")).split(" ")[0].replace("/","-"));return n},avaction.isBrowserSupported=function(a,e){var n=this.getBrowserFromUserAgent(a),t=n.split("-")[0],i=parseInt(n.split("-")[1]),c=!1;switch(t){case"Chrome":c=23<=i;break;case"Firefox":c=22<=i;break;case"Opera":c=18<=i;break;case"Safari":c=11<=i}return!c||!e||!(!avaction.getUserMedia()&&!navigator.mediaDevices.getUserMedia)},avaction.getUserMedia=function(){return navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||null},avaction.displaySettingUI=function(a){var r={camera:[],mic:[],speaker:[]},s={};navigator.mediaDevices.enumerateDevices().then(function(a){a.forEach(function(a){"videoinput"==(s[a.kind+"&"+a.deviceId]=a).kind?r.camera.push(a):"audioinput"==a.kind?r.mic.push(a):"audiooutput"==a.kind&&r.speaker.push(a)});var n='<div class="siq-setngs-view font16" id="audio_setting"> <div class="setngs-head c666"><span class="sel-bor" mdevice-switch="mic">Audio Input</span> <span mdevice-switch="speaker" >Sound Output</span> </div>';if(r.mic.length){var t=avaction.callObj.localStream?avaction.callObj.localStream.getAudioTracks()[0].label:"default";n+='<div class="setngs-optn c333 font14 mL20" mdevice-cnt="mic">',r.mic.forEach(function(a){var e="";t===a.deviceId&&(e='class="sqico-tick"'),n+="<div "+e+' deviceid="'+a.deviceId+'">'+a.label+"</div>"}),n+="</div>"}if(r.speaker.length){t="default";n+='<div class="setngs-optn c333 font14 mL20" mdevice-cnt="speaker" style="display:none;">',r.speaker.forEach(function(a){var e="";t===a.deviceId&&(e='class="sqico-tick"'),n+="<div "+e+' deviceid="'+a.deviceId+'">'+a.label+"</div>"}),n+="</div>"}n+="</div>",$(window.parent.document).find("body").append(n),$("#audio_setting",parent.document).on("click","[mdevice-switch]",function(){$("#audio_setting",parent.document).find("[mdevice-switch]").removeClass("sel-bor");var a=$(this).addClass("sel-bor").attr("mdevice-switch");$("#audio_setting",parent.document).find("[mdevice-cnt]").hide(),$("#audio_setting",parent.document).find('[mdevice-cnt="'+a+'"]').show()}),$("#audio_setting",parent.document).on("click","[deviceid]",function(){var a=$(this).parent().attr("mdevice-cnt");if($("#audio_setting",parent.document).find('[mdevice-cnt="'+a+'"]').children().removeClass("sqico-tick"),$(this).addClass("sqico-tick"),"mic"!=a){var e=$(this).attr("deviceid"),n=document.getElementById("remoteaudio");void 0!==n.sinkId&&n.setSinkId(e).then(function(){})}});var e=parent.document.getElementById("siqiframe").getBoundingClientRect(),i=document.getElementById("call_stngicon").getBoundingClientRect(),c=parent.document.getElementById("audio_setting").style,o=e.left+i.left,l=e.top+i.top;c.left=CallImpl.CALLFAQ?o-260+"px":o-284+"px",c.top=CallImpl.CALLFAQ?l+15+"px":l-31+"px",$(document).click(function(a){$(a.target).closest("#audio_setting",parent.document).length||$(a.target).closest("#call_stngicon",parent.document).length||$("#audio_setting",parent.document).is(":visible")&&$("#audio_setting",parent.document).hide()})})},avaction.checkConnectionAndCall=function(a,e,n){$("body").append('<img id="ntwcheckimg" style="opacity:0" />'),$("#ntwcheckimg").on("load",function(){"function"==typeof a&&avaction.successCallBack(a,n),$("#ntwcheckimg").remove()}),$("#ntwcheckimg").on("error",function(){"function"==typeof e&&avaction.errorCallBack(a,e,n),$("#ntwcheckimg").remove()}),$("#ntwcheckimg").attr("src","https://img.zohocdn.com/salesiq/images/spacer_592ebefc7104d681d57852665e9ad514_.gif?nocache="+(new Date).getTime())},avaction.checkConnectionActivity=function(a,e,n){avaction.reconnectinterval||(avaction.reconnectinterval=setInterval(function(){avaction.checkConnectionAndCall(a,"",n)},5e3))},avaction.successCallBack=function(a,e){avaction.connectionStatus=!0,avaction.reconnectinterval&&(clearInterval(avaction.reconnectinterval),avaction.reconnectinterval=null),a(e)},avaction.errorCallBack=function(a,e,n){avaction.connectionStatus=!1,e!=avaction.checkConnectionActivity?e():e(a,e,n)},avaction.transferInitiateReq=function(a,e){if(!AgentDB.getRepresentative()[CurrentUser.getLSUID()].callstatus||"DEPARTMENT"!=a.type){var n=a.chid,t=e?a.creator:a.sender,i=a.visitorid,c=a.mediaid;a.transferReqTimeout=setTimeout(function(){PortalUI.rejectTransChat(n,t,i,c)},3e4),avaction.addCallTransferObj(a,e),avaction.showcallTransferInvitation(a,e),Sound.playTune("vchat-transfer",6)}},avaction.showcallTransferInvitation=function(a,e){if(1===$("body").find(".call_wh").length&&$(".call_wh").find(".call_pickup").length<2?($("#additionalcallcount").remove(),$(".call_wh").append(Template.getTransferReqUI(a,e))):0===$("body").find(".call_wh").length&&$("body").append('<div class="call_wh">'+Template.getTransferReqUI(a,e)+"</div>"),2==$(".call_wh").find(".call_pickup").length){var n=avaction.getCallTransferOBJ(),t=Object.keys(n).length-2;$("#additionalcallcount").remove(),0<t&&$(".call_wh").append('<div class="call_more sqico-call" id="additionalcallcount"><em>+'+t+"more Calls</em></div>")}},avaction.checkAndUpdateCallTransferInvitation=function(){for(var a=avaction.getCallTransferOBJ(),e=Object.keys(a),n=0;n<e.length;n++){var t=e[n],i=a[t],c=t,o=i.msg_obj,l=i.is_invt;1!=$("#transreq_"+c).length&&avaction.showcallTransferInvitation(o,l)}},avaction.removeTransreqWaiting=function(a){$("#transreq_"+a).remove()},avaction.addCallTransferObj=function(a,e){var n=e?a.creator:a.sender,t=a.chid,i=a.visitorid,c=a.mediaid,o=a.transferReqTimeout;avaction.setCallTransferOBJ(t,{exuser_id:n,visitor_id:i,media_id:c,transferreq_timeout:o,msg_obj:a,is_invt:e})},avaction.setCallTransferOBJ=function(a,e){var n=avaction.getCallTransferOBJ();n[a]=e,sessionStorage.setItem("calltransferObj",CommonUtil.toJSON(n))},avaction.getCallTransferOBJ=function(a){var e=sessionStorage.getItem("calltransferObj");if(!e)return{};var n=CommonUtil.parseToJSON(e);return a?n[a]:n},avaction.clearCallTransferObj=function(a){var e=avaction.getCallTransferOBJ();delete e[a],sessionStorage.setItem("calltransferObj",CommonUtil.toJSON(e))},avaction.checkAndClearCallTransObj=function(a){avaction.cleartransferreqinterval(a),avaction.clearCallTransferObj(a);for(var e=avaction.getCallTransferOBJ(),n=Object.keys(e),t=0;t<n.length;t++){a=n[t];avaction.cleartransferreqinterval(a);var i=avaction.getCallTransferOBJ(a),c=i.exuser_id,o=i.visitor_id,l=i.media_id;avaction.rejectCallTransfer(a,c,o,l)}},avaction.cleartransferreqinterval=function(a){var e=avaction.getCallTransferOBJ(a).transferreq_timeout;clearInterval(e)},avaction.rejectCallTransfer=function(a,e,n,t){var i={};(i=lsnocachefix("json")).visitorid=n,i.chid=a,i.exuserid=e,i.mediaid=t;var c=Visitors.list[n];c.TRANS_TYPE&&"DEPARTMENT"==c.TRANS_TYPE&&(i.transtype=c.TRANS_TYPE),$ld.ajax({url:"rejtranschat.do",type:"POST",data:i,success:function(a){}}),avaction.clearCallTransferObj(a)};